!function t(e,n,r){function a(o,l){if(!n[o]){if(!e[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(i)return i(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return a(n?n:t)},u,u.exports,t,e,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){a=!0,i=s}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./generic.js"),c=a(s),u=t("./message"),f=r(u),h=Symbol(),d=Symbol(),v=Symbol(),p=function(){function t(e,n,r){i(this,t),this.name=e,this.page=r,this.specs=n,this.variants=n.variants,this[h]=new Map;var a=!0,o=!1,l=void 0;try{for(var s,c=this.variants[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;this[h].set(u,new Map);var f=!0,p=!1,y=void 0;try{for(var _,m=this.page.stages.keys()[Symbol.iterator]();!(f=(_=m.next()).done);f=!0){var g=_.value;this[h].get(u).set(g,!0)}}catch(w){p=!0,y=w}finally{try{!f&&m["return"]&&m["return"]()}finally{if(p)throw y}}}}catch(w){o=!0,l=w}finally{try{!a&&c["return"]&&c["return"]()}finally{if(o)throw l}}this[d]=new Map,this[v]=new Set,this.container=new Map,this.dst=new Map,this.state=this.page.state,this.data=new Map,this.related_info=new Map,this.related_values=new Map,this.implementation=new n.specific(this)}return l(t,[{key:"need",value:function(t,e){var n=this[h].get(t).get(e);return!n.state||"rejected"==n.state()}},{key:"_deed",value:function(t,e,n){var r=this[n].bind(this,t),a=this.page.getBefore(this.name,e),i=[],l=!0,s=!1,c=void 0;try{for(var u,f=a[Symbol.iterator]();!(l=(u=f.next()).done);l=!0){var d=o(u.value,2),v=d[0],p=d[1],y=this.page.getComponent(v);y.hasVariant(t)&&i.push(y[h].get(t).get(p))}}catch(_){s=!0,c=_}finally{try{!l&&f["return"]&&f["return"]()}finally{if(s)throw c}}this[h].get(t).set(e,$.when.apply($,i).then(r))}},{key:"ensure",value:function(t,e,n){if(this.page.stages.has(e)){var r=this.page.stages.get(e)&&!this.specs.by_id;r&&!this.need(t,e)||this._deed(t,e,n)}}},{key:"hasVariant",value:function(t){return this.variants.has(t)}},{key:"_visibility",value:function(t,e){if(this.hasVariant(t)&&this.container.has(t)){var n=this.container.get(t);e?n.show():n.hide()}}},{key:"_fetch",value:function(t,e){var n=url_tpl.replace(/_c_/,"data").replace(/_f_/,this.specs.fetch_url+"_"+t)+".json";this[d].get(t).msg("fetching data ...");var r=this._postFetch.bind(this,t);return void 0!=e&&(n+="?ids="+e.join(",")),$.ajax({type:"POST",url:n,contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(t){r(t,e)})}},{key:"_postFetch",value:function(t,e,n){this[d].get(t).clear();var r=!0,a=!1,i=void 0;try{for(var o,l=e.msgs[Symbol.iterator]();!(r=(o=l.next()).done);r=!0){var s=o.value;this[d].get(t).msg(s)}}catch(c){a=!0,i=c}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}if(e.good){if("data"in e&&this.data.set(t,e.data),"relinfo"in e){var u=new Map,f=!0,h=!1,p=void 0;try{for(var y,_=e.relinfo[Symbol.iterator]();!(f=(y=_.next()).done);f=!0){var m=y.value;u.set(m[0],new Set(m[1]))}}catch(c){h=!0,p=c}finally{try{!f&&_["return"]&&_["return"]()}finally{if(h)throw p}}this.related_info.set(t,u)}if("relvals"in e&&this.related_values.set(t,new Map(e.relvals)),this.specs.by_id){var g=!0,w=!1,b=void 0;try{for(var S,k=n[Symbol.iterator]();!(g=(S=k.next()).done);g=!0){var x=S.value;this[v].add(x)}}catch(c){w=!0,b=c}finally{try{!g&&k["return"]&&k["return"]()}finally{if(w)throw b}}}}this.implementation.weld(t)}},{key:"_weld",value:function(t){if(this.dst=this.page.getContainer(this.specs.dest,this.variants),this.specs.by_id){if(!this[d].has(t)){var e=this.dst.get(t);e.prepend('<div id="msg_'+this.name+"_"+t+'"></div>'),this[d].set(t,new f["default"]("msg_"+this.name+"_"+t))}}else{if(this.container.set(t,$("#"+this.name+"_"+t)),0==this.container.get(t).length){var n=this.dst.get(t);n.append('<div id="msg_'+this.name+"_"+t+'"></div>'),n.append('<div id="'+this.name+"_"+t+'" class="component"></div>'),this.container.set(t,$("#"+this.name+"_"+t))}this[d].set(t,new f["default"]("msg_"+this.name+"_"+t))}if(null!=this.specs.fetch_url){var r=[];if(!this.specs.by_id)return this._fetch(t);var a=c.from_str(this.state.getState(this.specs.fetch_url+"_"+t)),i=!0,o=!1,l=void 0;try{for(var s,u=a[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var h=s.value;this[v].has(h)||r.push(h)}}catch(p){o=!0,l=p}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw l}}if(0!=r.length)return this._fetch(t,r)}else this.implementation.weld(t)}},{key:"_wire",value:function(t){this.implementation.wire(t)}},{key:"_work",value:function(t){this._visibility(t,!0),this.implementation.work(t)}},{key:"weld",value:function(t){this.hasVariant(t)&&this.implementation.show(t)&&this.ensure(t,"weld","_weld")}},{key:"wire",value:function(t){this.hasVariant(t)&&this.implementation.show(t)&&this.ensure(t,"wire","_wire")}},{key:"work",value:function(t){this.hasVariant(t)&&this.implementation.show(t)?this.ensure(t,"work","_work"):this._visibility(t,!1)}}]),t}();n["default"]=p},{"./generic.js":7,"./message":11}],2:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=Symbol(),o=Symbol(),l=function(){function t(e){r(this,t),this.component=e,this[i]=new Map,this[o]=new Map}return a(t,[{key:"_html",value:function(t){this.component.container.get(t).html('<a class="control_title" href="#">'+this.component.state.showState("list",t,"sg")+"</a> ")}},{key:"_dressup",value:function(t){var e=this;this[o].get(t).click(function(n){n.preventDefault(),e.component.state.setState("list",t)})}},{key:"_isActive",value:function(t){return this.component.state.getState("list")==t}},{key:"show",value:function(t){return!0}},{key:"weld",value:function(t){this._html(t),this[i].set(t,this.component.container.get(t)),this[i].get(t).addClass("control_big"),this[o].set(t,this.component.container.get(t).find("a"))}},{key:"wire",value:function(t){this._dressup(t)}},{key:"work",value:function(t){this._isActive(t)?(this[o].get(t).addClass("ison"),this[i].get(t).addClass("ison")):(this[o].get(t).removeClass("ison"),this[i].get(t).removeClass("ison"))}}]),t}();n["default"]=l},{}],3:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=t("./relative"),s=r(l),c=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t,"type"))}return o(e,t),e}(s["default"]);n["default"]=c},{"./relative":13}],4:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){a=!0,i=s}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./generic.js"),f=a(u),h=t("./relative"),d=r(h),v=Symbol(),p=Symbol(),y=Symbol(),_=Symbol(),m=Symbol(),g=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t,"country"));return n[v]=new Map,n[p]=new Map,n[y]=new Map,n[_]=new Map,n[m]=new Set(["-","CY","KS","TR","MC","GE"]),n}return l(e,t),c(e,[{key:"_preHtml",value:function(t){return'<div id="map-europe_'+t+'" class="position">\n    <p class="zoom"><a class="fa fa-arrows" href="#" title="zoom to fit all countries"/></p>\n</div>'}},{key:"_myDressup",value:function(t){var e=this,n=this.component.container.get(t);this[p].set(t,n.find("#map-europe_"+t));var r=this[p].get(t),a=.6*r.width();r.width("100%"),r.height(a),r.vectorMap({map:"europe_mill",backgroundColor:"#ccccff",regionsSelectable:!0,markersSelectable:!0,regionsSelectableOne:!1,markersSelectableOne:!1,markerStyle:{initial:{fill:"#008800","fill-opacity":.2,stroke:"none","stroke-width":0,"stroke-opacity":.2,r:1},hover:{cursor:"pointer",stroke:"#ffff44","stroke-width":1,"stroke-opacity":1},selected:{fill:"#008800","fill-opacity":1},selectedHover:{}},regionStyle:{initial:{fill:"#bbbbbb","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1},hover:{cursor:"pointer",stroke:"#ffff44","stroke-width":3,"stroke-opacity":1},selected:{fill:"#dd8844","fill-opacity":1},selectedHover:{}},markers:this[y].get(t),series:{markers:[{values:{},scale:[0,20],normalizeFunction:"linear",attribute:"r",min:0,max:100}],regions:[{scale:{outdariah:"#ffffff",indariah:"#ffddbb"},attribute:"fill",values:this[_].get(t)}]},onRegionTipShow:function(e,n,r){var a=this.statistics.get(t);n.html(r+": "+(a.has(r)?a.get(r):"not in DARIAH"))}.bind(this),onMarkerTipShow:function(e,n,r){var a=this.statistics.get(t);n.html(r+": "+(a.has(r)?a.get(r):"not in DARIAH"))}.bind(this),onRegionClick:function(e,n){this.related_values_index.get(t).has(n)||e.preventDefault()}.bind(this),onMarkerClick:function(e,n){this.related_values_index.get(t).has(n)||e.preventDefault()}.bind(this),onRegionSelected:function(e,n,r,a){this.change_state&&this.component.state.setState("rel_"+this.typ+"_"+t,f.a_to_str(a)+this._unmapped_selected(t))}.bind(this),onMarkerSelected:function(e,n,r,a){this.change_state&&this.component.state.setState("rel_"+this.typ+"_"+t,f.a_to_str(a)+this._unmapped_selected(t))}.bind(this)});var i=n.find("p.zoom");i.css("top",a-20+"px"),i.css("left","10px");var o=n.find("p.zoom a");o.click(function(n){n.preventDefault(),e[v].get(t).setFocus({regions:["GB","GR"]})}),this[v].set(t,r.vectorMap("get","mapObject")),this[v].get(t).setFocus({regions:["GB","GR"]})}},{key:"_unmapped_selected",value:function(t){var e=[],n=f.from_str(t,this.component.state.getState("rel_"+this.typ+"_"+t)),r=!0,a=!0,i=!1,o=void 0;try{for(var l,s=this[m][Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value;n.has(c)&&(e.push(c),r=!1)}}catch(u){i=!0,o=u}finally{try{!a&&s["return"]&&s["return"]()}finally{if(i)throw o}}return r?"":","+e.join(",")}},{key:"_mySetFacet",value:function(t){this.change_state=!1;var e={},n={},r=this.related_state.get(t),a=!0,i=!1,o=void 0;try{for(var l,c=this.component.related_values.get(t)[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=s(l.value,2),f=u[0],h=u[1];this[m].has(f)||f==this.no_values.value||(e[f]=r.has(f),h[1]&&(n[f]=r.has(f)))}}catch(d){i=!0,o=d}finally{try{!a&&c["return"]&&c["return"]()}finally{if(i)throw o}}var p=this[v].get(t);p.setSelectedRegions(e),p.setSelectedMarkers(n),this.change_state=!0}},{key:"_myStats",value:function(t){var e=this.distilled.get(t).length;0==e&&(e=1);var n={},r=this.statistics.get(t),a=!0,i=!1,o=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=s(l.value,2),f=u[0],h=u[1];if(f!=this.no_values.value){var d=100*h/e;n[f]=e<10?d:10*Math.sqrt(d)}}}catch(p){i=!0,o=p}finally{try{!a&&c["return"]&&c["return"]()}finally{if(i)throw o}}this[v].get(t).series.markers[0].setValues(n)}},{key:"_plainWeld",value:function(t){}},{key:"_myWeld",value:function(t){this[y].set(t,{}),this[_].set(t,{});var e=this.component.related_values.get(t),n=this[y].get(t),r=this[_].get(t),a=!0,i=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=s(l.value,2),f=u[0],h=u[1];h[1]?(this.related_values_all.get(t).add(f),this.related_values_list.get(t).push(f),this.related_values_index.get(t).set(f,h[0]),n[f]={latLng:[h[2],h[3]],name:h[0]},r[f]="indariah"):r[f]="outdariah"}}catch(d){i=!0,o=d}finally{try{!a&&c["return"]&&c["return"]()}finally{if(i)throw o}}this.related_values_list.get(t).sort(function(t,n){return e.get(t)<e.get(n)?-1:e.get(t)[0]>e.get(n)[0]?1:0})}}]),e}(d["default"]);n["default"]=g},{"./generic.js":7,"./relative":13}],5:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){a=!0,i=s}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./generic.js"),s=r(l),c=Symbol(),u=Symbol(),f=function(){function t(e){a(this,t),this.component=e,this[c]=new Map,this[u]=new Map,this.table=new Map,this.distilled=new Map}return o(t,[{key:"_html",value:function(t){var e='<p><span fct="all"></span>Filtering <span id="fstats_'+t+'"></span></p>';this.component.container.get(t).html(e)}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){var e=this.component.children;this[u].set(t,new Map);var n=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=i(o.value,2),c=s[0],f=s[1];f.hasVariant(t)&&this[u].get(t).set(c,f)}}catch(h){r=!0,a=h}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw a}}this._html(t)}},{key:"_display",value:function(t,e){var n=this,r=t.closest("p"),a=r.find(".hidec"),i=r.find(".morec"),o=r.find(".showc"),l=t.closest("div").find("table,.flt"),c=t.closest("div").find(".value_list2,.flt_compact"),u=t.closest("div").find(".flt_not_expanded"),f="fctx_"+t.closest("span").attr("fct"),h=void 0==e;h&&(e=s.localstorage_vars.isSet(f)?s.localstorage_vars.get(f):1);var d="fctx_all"==f;d&&!h&&t.closest("div").find("div.component span[fct]").each(function(){n._display($(this),e)}),s.localstorage_vars.set(f,e),0==e?(a.show(),i.hide(),o.hide(),d||(u.show(),l.hide(),c.hide())):1==e?(a.hide(),i.show(),o.hide(),d||(u.show(),l.hide(),c.show())):(a.hide(),i.hide(),o.show(),d||(u.hide(),l.show(),c.hide()))}},{key:"wire",value:function(t){var e=this,n=this.component.container.get(t),r=this.component.page.getComponent("list").container.get(t);this[c].set(t,n.find("#fstats_"+t)),this.table.set(t,r.find("#table_"+t));var a=" details; click to change level of details",i='<a class="showc fa fa-fw fa-list-ul" href="#" title="full'+a+'"></a><a class="morec fa fa-fw fa-align-left" href="#" title="condensed'+a+'"></a><a class="hidec fa fa-fw fa-minus" href="#" title="hidden'+a+'"></a>';n.addClass("facet"),n.find("span[fct]").each(function(){$(this).html(i+"&nbsp"),e._display($(this))}),n.find(".hidec").click(function(t){t.preventDefault(),e._display($(this),1)}),n.find(".morec").click(function(t){t.preventDefault(),e._display($(this),2)}),n.find(".showc").click(function(t){t.preventDefault(),e._display($(this),0)})}},{key:"work",value:function(t){this.table.get(t).find("tr[rid],tr[iid]").hide();var e=this.component.page.getComponent("list"),n=e.data.get(t),r=this[u].get(t);this.distilled.set(t,[]);var a=!0,o=!1,l=void 0;try{for(var s,f=r[Symbol.iterator]();!(a=(s=f.next()).done);a=!0){var h=i(s.value,2),d=(h[0],h[1]),v=d.implementation;v.distilled.set(t,[])}}catch(p){o=!0,l=p}finally{try{!a&&f["return"]&&f["return"]()}finally{if(o)throw l}}var y=!0,_=!1,m=void 0;try{for(var g,w=n[Symbol.iterator]();!(y=(g=w.next()).done);y=!0){var b=g.value,S=!0,k=null,x=!1,M=!0,j=!1,O=void 0;try{for(var C,P=r[Symbol.iterator]();!(M=(C=P.next()).done);M=!0){var T=i(C.value,2),d=(T[0],T[1]);if(!x){var $=d.implementation,E=$.v(t,b[0]);E||(S=!1,null==k?k=$:x=!0)}}}catch(p){j=!0,O=p}finally{try{!M&&P["return"]&&P["return"]()}finally{if(j)throw O}}if(!x)if(S&&(this.distilled.get(t).push(b[0]),this.table.get(t).find('tr[rid="'+b[0]+'"],tr[iid="'+b[0]+'"]').show()),null!=k)k.distilled.get(t).push(b[0]);else{var A=!0,D=!1,H=void 0;try{for(var R,V=r[Symbol.iterator]();!(A=(R=V.next()).done);A=!0){var I=i(R.value,2),d=(I[0],I[1]),F=d.implementation;F.distilled.get(t).push(b[0])}}catch(p){D=!0,H=p}finally{try{!A&&V["return"]&&V["return"]()}finally{if(D)throw H}}}}}catch(p){_=!0,m=p}finally{try{!y&&w["return"]&&w["return"]()}finally{if(_)throw m}}var q=!0,B=!1,L=void 0;try{for(var z,W=r[Symbol.iterator]();!(q=(z=W.next()).done);q=!0){var G=i(z.value,2),d=(G[0],G[1]),N=d.implementation;N.stats(t)}}catch(p){B=!0,L=p}finally{try{!q&&W["return"]&&W["return"]()}finally{if(B)throw L}}this[c].get(t).html(this.distilled.get(t).length+" of "+n.length)}}]),t}();n["default"]=f},{"./generic.js":7}],6:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=Symbol(),o=Symbol(),l=Symbol(),s=Symbol(),c=Symbol(),u=Symbol(),f=Symbol(),h=Symbol(),d=function(){function t(e){r(this,t),this.component=e,this[i]=new Map,this[o]=new Map,this[l]=new Map,this[c]=new Map,this[u]=new Map,this._stats_dst=new Map,this[s]=new Map,this[f]=new Map,this[h]=new Map,this.distilled=new Map}return a(t,[{key:"_html",value:function(t){var e='\n<div>\n    <p class="dctrl"><span fct="'+this.component.name+"-"+t+'"></span> By full text search\n        <a href="#" title="modify full text filter" id="flt2_'+t+'" class="flt_not_expanded facet_single ison flt_pat"></a>\n        <a href="#" class="control_med fa fa-close filtc" id="clearf_'+t+'"></a>\n    </p>\n    <div id="fltw_'+t+'">\n        <p id="fbox_'+t+'" class="flt control_med fbox ui-widget">\n            <input id="flt_'+t+'" class="flt flt_pat"/>\n            <span fbox class="stats" id="stats_'+t+'"></span>\n        </p>\n        <div id="autoc_'+t+'" style="display: none;">here '+t+"</div>\n    </div>\n</div>";this.component.container.get(t).html(e)}},{key:"_setFilter",value:function(t){var e=this.component.state.getState("flt_"+t),n=this[o].get(t);this[l].get(t).html(e),n.val(e),n.autocomplete("search",e)}},{key:"_response",value:function(t){return function(e,n){this[h].set(t,{});var r=this[h].get(t),a=!0,i=!1,l=void 0;try{for(var s,c=n.content[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;r[u.value]=1}}catch(d){i=!0,l=d}finally{try{!a&&c["return"]&&c["return"]()}finally{if(i)throw l}}if(!this[f].get(t)){var v=this[o].get(t).val();this.component.state.setState("flt_"+t,v)}}.bind(this)}},{key:"_setClear",value:function(t){var e=this;this[s].get(t).click(function(n){n.preventDefault();var r=e[o].get(t);r.val(""),r.autocomplete("search","")})}},{key:"stats",value:function(t){var e=void 0,n=this._stats_dst.get(t);""==this[o].get(t).val()?(e="",n.removeClass("ison")):(e=this.facet.distilled.get(t).length+" of ",n.addClass("ison")),n.html(""+e+this.distilled.get(t).length)}},{key:"v",value:function(t,e){return e in this[h].get(t)}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){this._html(t)}},{key:"wire",value:function(t){this.facet||(this.facet=this.component.page.getComponent("facet").implementation);var e=this.component.page.getComponent("list").data.get(t);this[i].set(t,[]);var n=this[i].get(t),r=!0,a=!1,d=void 0;try{for(var v,p=e[Symbol.iterator]();!(r=(v=p.next()).done);r=!0){var y=v.value;n.push({label:y[1],value:""+y[0]})}}catch(_){a=!0,d=_}finally{try{!r&&p["return"]&&p["return"]()}finally{if(a)throw d}}this[h].set(t,{}),this.distilled.set(t,[]);var m=this.component.container.get(t),g=m.find("#fltw_"+t),w=$("#flt_"+t);this[o].set(t,w);var b=$("#flt2_"+t);this[l].set(t,b),this[c].set(t,g.find("#fbox_"+t)),this[u].set(t,g.find("#autoc_"+t)),this._stats_dst.set(t,g.find("#stats_"+t)),this[s].set(t,m.find("#clearf_"+t)),this[o].get(t).autocomplete({appendTo:this[u].get(t),source:this[i].get(t),response:this._response(t),minLength:0}),b.click(function(t){t.preventDefault(),$(this).closest("div").find(".morec").click(),w[0].focus()}),this[f].set(t,!0),this._setClear(t),this._setFilter(t),this[f].set(t,!1)}},{key:"work",value:function(t){var e=this.component.state.getState("flt_"+t),n=this[s].get(t);""==e?(this[c].get(t).removeClass("ison"),n.hide()):(this[c].get(t).addClass("ison"),n.show()),this[l].get(t).html(e)}}]),t}();n["default"]=d},{}],7:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){return t.replace(/[&<>]/g,function(t){return h.get(t)||t})}function i(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function o(t){if(i(),document.selection){var e=document.body.createTextRange();e.moveToElementText(document.getElementById(t)),e.select()}else if(window.getSelection){var n=document.createRange();n.selectNode(document.getElementById(t)),window.getSelection().addRange(n)}}function l(t,e,n){var r=void 0==e?t.closest("div").find(".detail"):e;r.toggle(),void 0!=n&&n(t);var a=void 0,i=void 0;t.hasClass("fa-chevron-right")?(a="fa-chevron-right",i="fa-chevron-down"):(a="fa-chevron-down",i="fa-chevron-right"),t.removeClass(a),t.addClass(i)}function s(t,e,n){return n.length>t?n.replace(/[^ -]+/g,function(t){return t.substr(0,e)}):n}function c(t){return null!==t&&void 0!=t&&""!=t?new Set(t.split(",")):new Set}function u(t){return t.join(",")}function f(t){return Array.from(t).join(",")}Object.defineProperty(n,"__esModule",{value:!0}),n.escapeHTML=a,n.deselectText=i,n.selectText=o,n.toggleDetail=l,n.compact=s,n.from_str=c,n.a_to_str=u,n.to_str=f;var h=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"]]),d={parameter:function(t){return this.parameters().get(t)},parameters:function(){var t=new Map,e=window.location.search;if(e.indexOf("?")===-1)return t;var n=!0,a=!1,i=void 0;try{for(var o,l=e.slice(1).split("&")[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;t.set.apply(t,r(s.split("=")))}}catch(c){a=!0,i=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(a)throw i}}return t}},v=(n.request_vars=d.parameters(),$.initNamespaceStorage("req"));n.localstorage_vars=v.localStorage},{}],8:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(){function t(e){r(this,t),this.component=e}return a(t,[{key:"_html",value:function(t,e){var n=this.component.dst.get(t),r=n.find('tr[rid="'+e[0]+'"]'),a='<tr iid="'+e[0]+'">';if("contrib"==t){var i=[],o=!0,l=!1,s=void 0;try{for(var c,u=e[5][Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var f=c.value;i.push('<a href="#" tid="'+f[0]+'">'+f[1]+"</a>")}}catch(h){l=!0,s=h}finally{try{!o&&u["return"]&&u["return"]()}finally{if(l)throw s}}a+='\n<td colspan="2">\n<b>Contact person:</b> '+e[2]+"<br/>\n<b>Country:</b> "+e[3]+" = "+e[4]+"<br/>\n<b>Types:</b> "+i.join(", ")+"</br>\n</td>\n"}else if("country"==t){var d=!0,v=!1,p=void 0;try{for(var y,_=this.component.data.get(t)[Symbol.iterator]();!(d=(y=_.next()).done);d=!0){var m=y.value;in_dariah=1==m[3]?"dariah":"",a+='<td class="country_code">'+m[1]+'<td><td class="country_name">'+m[2]+'<td><td class="in_dariah">'+in_dariah+'</td><td class="latlng">'+m[4]+'</td><td class="latlng">'+m[5]+"</td>"}}catch(h){v=!0,p=h}finally{try{!d&&_["return"]&&_["return"]()}finally{if(v)throw p}}}else if("type"==t||"tadiraha"==t||"tadiraho"==t||"tadiraht"==t){var g=!0,w=!1,b=void 0;try{for(var S,k=this.component.data.get(t)[Symbol.iterator]();!(g=(S=k.next()).done);g=!0){var x=S.value;a+='<td class="value">'+x[1]+"<td>"}}catch(h){w=!0,b=h}finally{try{!g&&k["return"]&&k["return"]()}finally{if(w)throw b}}}a+="</tr>",r.after(a)}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){var e=!0,n=!1,r=void 0;try{for(var a,i=this.component.data.get(t)[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;this._html(t,o)}}catch(l){n=!0,r=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw r}}}},{key:"wire",value:function(t){}},{key:"work",value:function(t){}}]),t}();n["default"]=i},{}],9:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./generic.js"),l=r(o),s=function(){function t(e){a(this,t),this.component=e}return i(t,[{key:"_html",value:function(t){var e="";e+='<table id="table_'+t+'">';var n=!0,r=!1,a=void 0;try{for(var i,o=this.component.data.get(t)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value,s='<tr rid="'+l[0]+'"><td><a class="showc fa fa-fw fa-list-ul" href="#" title="hide fields"></a><a class="hidec fa fa-fw fa-minus" href="#" title="show fields"></a></td>',c="</tr>";if("contrib"==t)e+=s+'<td><a href="#" class="fa fa-fw fa-minus"></a>'+l[1]+"</td>"+c;else if("country"==t){var u=1==l[3]?"dariah":"";e+=s+'<td class="country_code">'+l[1]+'<td><td class="country_name">'+l[2]+'<td><td class="in_dariah">'+u+'</td><td class="latlng">'+l[4]+'</td><td class="latlng">'+l[5]+"</td>"+c}else"type"!=t&&"tadiraha"!=t&&"tadiraho"!=t&&"tadiraht"!=t||(e+=s+'<td class="value">'+l[1]+"<td>"+c)}}catch(f){r=!0,a=f}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw a}}e+="</table>",this.component.container.get(t).html(e)}},{key:"_display",value:function(t,e,n){var r=t.find(".hidec"),a=t.find(".showc"),i=t.attr("rid"),o=this.component.container.get(e).find('tr[iid="'+i+'"]');n.has(i)?(r.show(),a.hide(),o.length&&o.show()):(r.hide(),a.hide(),o.length&&o.hide())}},{key:"_set_it",value:function(t,e,n){var r=l.from_str(this.state.getState(key)),a=t.closest("tr").attr("rid");n?r.add(a):r["delete"](a),this.state.setState(key,l.to_str(r))}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){this._html(t)}},{key:"wire",value:function(t){var e=this,n=this.component.container.get(t);this.component.name+"_"+t;n.find(".hidec").click(function(n){n.preventDefault(),e._set_it($(this),t,!0)}),n.find(".showc").click(function(n){n.preventDefault(),e._set_it($(this),t,!1)})}},{key:"work",value:function(t){var e=this,n=(this.component.name+"_"+t,this.component.container.get(t)),r=l.from_str(this.component.state.getState(this.component.name+"_"+t));n.find("tr[rid]").each(function(){e._display($(this),t,r)})}}]),t}();n["default"]=s},{"./generic.js":7}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=t("./page"),i=r(a);$(function(){(new i["default"]).work()})},{"./page":12}],11:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=Symbol(),o=Symbol(),l=Symbol(),s=Symbol(),c=function(){function t(e,n){var a=this;r(this,t),this[i]=$("#"+e),this[o]=$("#trash_"+e),this[l]=this[o].closest("p"),this[o].click(function(t){t.preventDefault(),a.clear()}),this._hide(),this[s]=n}return a(t,[{key:"_hide",value:function(){this[i].hide(),this[l].hide()}},{key:"_show",value:function(){this[i].show(),""!=this[i].html()&&this[l].show()}},{key:"clear",value:function(){this[i].html(""),void 0!=this[s]&&this[s](),this._hide()}},{key:"msg",value:function(t,e){void 0==e&&(e="info");var n=this[i].html();this[i].html(n+'<p class="'+e+'">'+t+"</p>"),this._show()}}]),t}();n["default"]=c},{}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function l(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){a=!0,i=s}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("./generic.js"),f=(a(u),t("./viewstate")),h=r(f),d=t("./share"),v=r(d),p=t("./ctype"),y=r(p),_=t("./tadiraho"),m=r(_),g=t("./tadiraha"),w=r(g),b=t("./tadiraht"),S=r(b),k=t("./eumap"),x=r(k),M=t("./filter"),j=r(M),O=t("./facet"),C=r(O),P=t("./list"),T=r(P),E=t("./item"),A=r(E),D=t("./control"),H=r(D),R=t("./components"),V=r(R),I=t("./skeleton"),F=r(I),q=Symbol(),B=function(t){function e(){i(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));t.name="page",t.state=new h["default"](t);var n=t.state.getValues("list"),r=new Set(["contrib"]),a=new Set([""]);t._component_specs=new Map([["share",{dest:"body",variants:a,fetch_url:null,specific:v["default"]}],["control",{dest:"left",variants:n,fetch_url:null,specific:H["default"]}],["list",{dest:"middle",variants:n,fetch_url:"list",specific:T["default"]}],["item",{dest:"list",variants:n,fetch_url:"item",specific:A["default"]}],["facet",{dest:"control",variants:n,fetch_url:null,specific:C["default"]}],["filter",{dest:"facet",variants:n,fetch_url:null,specific:j["default"]}],["eumap",{dest:"facet",variants:r,fetch_url:"country",specific:x["default"]}],["ctype",{dest:"facet",variants:r,fetch_url:"type",specific:y["default"]}],["tadiraha",{dest:"facet",variants:r,fetch_url:"tadiraha",specific:w["default"]}],["tadiraho",{dest:"facet",variants:r,fetch_url:"tadiraho",specific:m["default"]}],["tadiraht",{dest:"facet",variants:r,fetch_url:"tadiraht",specific:S["default"]}]]),t[q]=new Set(["item"]),t.ignore=new Set([]),t.components=new Map;var l=!0,c=!1,u=void 0;try{for(var f,d=t._component_specs[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var p=s(f.value,2),_=p[0],g=p[1];if(!t.ignore.has(_)){g.by_id=t[q].has(_);var b=new V["default"](_,g,t);b.children=new Map,t.components.set(_,b)}}}catch(k){c=!0,u=k}finally{try{!l&&d["return"]&&d["return"]()}finally{if(c)throw u}}var M=!0,O=!1,P=void 0;try{for(var $,E=t.components[Symbol.iterator]();!(M=($=E.next()).done);M=!0){var D=s($.value,2),_=D[0],R=D[1],I=t._component_specs.get(_).dest;if(t.components.has(I)){var F=t.components.get(I);F.children.set(_,R)}}}catch(k){O=!0,P=k}finally{try{!M&&E["return"]&&E["return"]()}finally{if(O)throw P}}return t.resolveTiming(),t._setHeight(80),History.Adapter.bind(window,"statechange",t.state.work()),t}return l(e,t),c(e,[{key:"_setHeight",value:function(t){var e=window.innerHeight-t+"px",n=!0,r=!1,a=void 0;try{for(var i,o=new Set(["middle","left","right"])[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value;$("#"+l).css("height",e)}}catch(s){r=!0,a=s}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw a}}}},{key:"getComponent",value:function(t){return this.components.get(t)}},{key:"getContainer",value:function(t,e){if(this.components.has(t))return this.components.get(t).container;var n=new Map,r="body"==t?$("body"):$("#"+t),a=!0,i=!1,o=void 0;try{for(var l,s=e[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value;n.set(c,r)}}catch(u){i=!0,o=u}finally{try{!a&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}},{key:"getBefore",value:function(t,e){var n=[],r=t+"-"+e,a=!0,i=!1,o=void 0;try{for(var l,s=(this._timing.get(r)||new Set)[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value;n.push(c.split("-"))}}catch(u){i=!0,o=u}finally{try{!a&&s["return"]&&s["return"]()}finally{if(i)throw o}}return n}},{key:"work",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=this._tasks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value,o=i.split("-"),l=s(o,2),c=l[0],u=l[1],f=this.getComponent(c),h=!0,d=!1,v=void 0;try{for(var p,y=f.variants[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var _=p.value;f[u](_)}}catch(m){d=!0,v=m}finally{try{!h&&y["return"]&&y["return"]()}finally{if(d)throw v}}}}catch(m){e=!0,n=m}finally{try{!t&&a["return"]&&a["return"]()}finally{if(e)throw n}}}}]),e}(F["default"]);n["default"]=B},{"./components":1,"./control":2,"./ctype":3,"./eumap":4,"./facet":5,"./filter":6,"./generic.js":7,"./item":8,"./list":9,"./share":14,"./skeleton":15,"./tadiraha":16,"./tadiraho":17,"./tadiraht":18,"./viewstate":19}],13:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){a=!0,i=s}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./generic.js"),s=r(l),c=Symbol(),u=Symbol(),f=Symbol(),h=Symbol(),d=Symbol(),v=Symbol(),p=function(){function t(e,n,r,i,o){a(this,t),this.component=e,this.distilled=new Map,this[c]=new Map,this[u]=new Map,this.related_state=new Map,this[f]=new Map,this.statistics=new Map,this.related_values_list=new Map,this.related_values_index=new Map,this.related_values_all=new Map,this.no_values={value:"-",name:"-none"},this.typ=n,this[h]=r||2,this[d]=i||14,this[v]=o||6}return o(t,[{key:"_html",value:function(t){var e=this.component.state.showState("list",this.typ,"sg"),n=this.component.state.showState("list",this.typ,"pl"),r="";r+=this._preHtml(t),r+='\n<div>\n    <p class="dctrl"><span fct="'+this.component.name+"-"+t+'"></span> By '+e+'</p>\n    <p class="all"><span rv="_all" class="stats"></span> <a rv="_all" href="#" class="facet_single_all">all '+n+'</a></p>\n    <table class="value_list" id="list-'+this.typ+"-vals_"+t+'">\n        <tr>\n';var a=this.related_values_list.get(t),o=!0,l=!1,c=void 0;try{for(var u,f=a.entries()[Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var p=i(u.value,2),y=p[0],_=p[1];y%this[h]==0&&y>0&&y<a.length&&(r+="</tr><tr>");var m=this.related_values_index.get(t).get(_);r+='\n            <td><span rv="'+_+'" class="stats"></span></td>\n            <td><a rv="'+_+'" href="#" class="facet_single">'+s.escapeHTML(m)+"</a></td>\n            "}}catch(g){l=!0,c=g}finally{try{!o&&f["return"]&&f["return"]()}finally{if(l)throw c}}r+='\n        </tr>\n    </table>\n    <p class="value_list2" id="list2-'+this.typ+"-vals_"+t+'">\n';var w=!0,b=!1,S=void 0;try{for(var k,x=a.entries()[Symbol.iterator]();!(w=(k=x.next()).done);w=!0){var M=i(k.value,2),y=M[0],_=M[1],j=this.related_values_index.get(t).get(_),O=s.escapeHTML(s.compact(this[d],this[v],j));r+='<a href="#" rv="'+_+'" class="passive_small" title="'+s.escapeHTML(j)+'">'+O+"</a> "}}catch(g){b=!0,S=g}finally{try{!w&&x["return"]&&x["return"]()}finally{if(b)throw S}}r+="\n    </p>\n</div>",this.component.container.get(t).html(r)}},{key:"_dressup",value:function(t){var e=this.component.container.get(t);this[c].set(t,e.find("#list-"+this.typ+"-vals_"+t)),this[u].set(t,e.find("#list2-"+this.typ+"-vals_"+t));var n=this;this[c].get(t).find(".facet_single").click(function(r){r.preventDefault();var a=$(this).attr("rv"),i=s.from_str(n.component.state.getState("rel_"+n.typ+"_"+t));i.has(a)?i["delete"](a):i.add(a),n.component.state.setState("rel_"+n.typ+"_"+t,s.to_str(i)),e.find(".last_handled").removeClass("last_handled"),$(this).addClass("last_handled")}),this[u].get(t).find(".passive_small").click(function(r){r.preventDefault();var a=$(this).attr("rv"),i=s.from_str(n.component.state.getState("rel_"+n.typ+"_"+t));i.has(a)?i["delete"](a):i.add(a),n.component.state.setState("rel_"+n.typ+"_"+t,s.to_str(i)),$(this).closest("div").find(".morec").click();var o=n[c].get(t).find('a[rv="'+a+'"]');e.find(".last_handled").removeClass("last_handled"),o.addClass("last_handled"),$("#left")[0].scrollTop=50,o[0].scrollIntoView({behavior:"smooth",alignToTop:"true"})}),this[f].set(t,this.component.container.get(t).find('[rv="_all"]')),this[f].get(t).click(function(e){e.preventDefault();var r=$(this).hasClass("ison");r?n.component.state.setState("rel_"+n.typ+"_"+t,""):n.component.state.setState("rel_"+n.typ+"_"+t,s.to_str(n.related_values_all.get(t)))})}},{key:"_setFacet",value:function(t){var e=!0,n=!0,r=!1,a=void 0;try{for(var i,o=this.related_values_index.get(t).keys()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var l=i.value,s=this[c].get(t).find('[rv="'+l+'"]'),h=this[u].get(t).find('[rv="'+l+'"]');this.related_state.get(t).has(l+"")?(s.addClass("ison"),h.addClass("ison")):(s.removeClass("ison"),h.removeClass("ison"),e=!1)}}catch(d){r=!0,a=d}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw a}}e?this[f].get(t).addClass("ison"):this[f].get(t).removeClass("ison")}},{key:"stats",value:function(t){this.statistics.set(t,new Map);var e=this.statistics.get(t),n=!0,r=!1,a=void 0;try{for(var o,l=this.related_values_index.get(t).keys()[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=o.value;e.set(s,0)}}catch(c){r=!0,a=c}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw a}}var u=this.component.related_info.get(t),f=!0,h=!1,d=void 0;try{for(var v,p=this.distilled.get(t)[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value,_=!1;if(u.has(y)){var m=!0,g=!1,w=void 0;try{for(var b,S=u.get(y)[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var k=b.value;e.set(k,e.get(k)+1),_=!0}}catch(c){g=!0,w=c}finally{try{!m&&S["return"]&&S["return"]()}finally{if(g)throw w}}}if(!_){var x=this.no_values.value;e.set(x,e.get(x)+1)}}}catch(c){h=!0,d=c}finally{try{!f&&p["return"]&&p["return"]()}finally{if(h)throw d}}var M=!0,j=!1,O=void 0;try{for(var C,P=e[Symbol.iterator]();!(M=(C=P.next()).done);M=!0){var T=i(C.value,2),$=T[0],E=T[1];this.component.container.get(t).find('span[rv="'+$+'"].stats').html(E)}}catch(c){j=!0,O=c}finally{try{!M&&P["return"]&&P["return"]()}finally{if(j)throw O}}this.component.container.get(t).find('span[rv="_all"].stats').html(this.distilled.get(t).length),this._myStats(t)}},{key:"v",value:function(t,e){var n=this.component.related_info.get(t),r=this.related_state.get(t);if(n.has(e)){var a=!0,i=!1,o=void 0;try{for(var l,s=n.get(e)[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var c=l.value;if(r.has(c+""))return!0}}catch(u){i=!0,o=u}finally{try{!a&&s["return"]&&s["return"]()}finally{if(i)throw o}}}else if(r.has(this.no_values.value))return!0;return!1}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){this.related_values_list.set(t,[]),this.related_values_index.set(t,new Map),this.related_values_all.set(t,new Set),this._plainWeld(t),this._myWeld(t),this.related_values_list.get(t).push(this.no_values.value),this.related_values_index.get(t).set(this.no_values.value,this.no_values.name),this.related_values_all.get(t).add(this.no_values.value),this._html(t)}},{key:"wire",value:function(t){this._myDressup(t),this._dressup(t)}},{key:"work",value:function(t){this.related_state.set(t,s.from_str(this.component.state.getState("rel_"+this.typ+"_"+t))),this._mySetFacet(t),this._setFacet(t)}},{key:"_plainWeld",value:function(t){var e=this.component.related_values.get(t),n=!0,r=!1,a=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var s=i(o.value,2),c=s[0],u=s[1];this.related_values_list.get(t).push(c),this.related_values_index.get(t).set(c,u),this.related_values_all.get(t).add(c)}}catch(f){r=!0,a=f}finally{try{!n&&l["return"]&&l["return"]()}finally{if(r)throw a}}this.related_values_list.get(t).sort(function(t,n){return e.get(t)<e.get(n)?-1:e.get(t)>e.get(n)?1:0})}},{key:"_myWeld",value:function(t){}},{key:"_preHtml",value:function(t){return""}},{key:"_myDressup",value:function(t){}},{key:"_mySetFacet",value:function(t){}},{key:"_myStats",value:function(t){}}]),t}();n["default"]=p},{"./generic.js":7}],14:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./generic.js"),l=r(o),s=function(){function t(e){a(this,t),this.component=e}return i(t,[{key:"show",value:function(t){return!0}},{key:"weld",value:function(t){var e='\n<p id="citeh">Cite</p>\n<table align="center">\n    <tr>\n        <td class="clip_pv clr">\n            <a lnk="" href="#" id="clip_pv_md" title="link to page content and appearance (markdown)" class="ctrl fa fa-level-down fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_ht" title="link to page content and appearance (html)" class="ctrl fa fa-external-link-square fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_htc" title="link to page content (html)" class="ctrl fa fa-external-link fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_cn" title="copy page content" class="ctrl fa fa-file-text-o fa-lg fa-fw"></a>\n        </td>\n    </tr>\n    <tr>\n        <th class="clip_pv" width="60px">page view</th>\n    </tr>\n    <tr class="citexpl">\n        <td class="clip_pv"><span id="xc_pv" class="ctrl fa fa-chevron-right fa-fw"></span><span id="x_pv" class="detail">share link to this page with or without view settings.</span></td>\n    </tr>\n</table>\n<p id="cdiagpub"></p>\n<p id="cdiagsts"></p>\n';this.component.container.get(t).html(e)}},{key:"wire",value:function(t){var e=this,n=this.component.container.get(t),r=$("#self_link");r.hide(),n.addClass("socialdrawer"),n.find(".detail").hide(),n.find("#clip_pv_md,#clip_pv_ht,#clip_pv_htc,#clip_pv_nl").click(function(t){t.preventDefault(),window.prompt("Press <Cmd-C> and then <Enter> to copy link on clipboard",$(this).attr("lnk"))}),n.find("#clip_pv_cn").click(function(t){t.preventDefault();var n="middle",a=app_url_cite+e.component.state.getVars(!0);r.show(),r.attr("href",a),l.selectText(n)}),n.find("#xc_pv").click(function(t){t.preventDefault(),l.toggleDetail($(this),$("#x_pv"))}),n.click(function(t){t.preventDefault();var n=app_url_cite+e.component.state.getVars(!0),r=app_url_cite+e.component.state.getVars(!1);$("#citeh").hide(),$("#cdiagpub").html(""),$("#cdiagsts").html(""),$(".clip_pv.clr,#cdiagpub,#cdiagsts").removeClass("error warning good special");var a=l.escapeHTML($("title").text());$("#clip_pv_md").attr("lnk","[${pvtitle}](${app_url_raw})"),$("#clip_pv_ht").attr("lnk",n),$("#clip_pv_htc").attr("lnk",r),$("#clip_pv_cn").attr("lnk",n),$("#clip_pv_cn").attr("tit",a),$(this).animate({height:"100px",width:"200px",opacity:.95},300)}),n.mouseleave(function(){return r.hide(),$("#citeh").show(),n.animate({height:"20px",width:"40px",opacity:.7},300),!1})}},{key:"work",value:function(t){}}]),t}();n["default"]=s},{"./generic.js":7}],15:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){a=!0,i=s}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.stages=new Map([["weld",!0],["wire",!0],["work",!1]]),this.stages_prev=new Map([["wire","weld"],["work","wire"]]),this.before=new Map([["weld",new Map([["item",new Set(["list"])],["facet",new Set(["control","list"])],["filter",new Set(["facet"])],["eumap",new Set(["facet","filter"])],["ctype",new Set(["facet","eumap"])],["tadiraha",new Set(["facet","ctype"])],["tadiraho",new Set(["facet","tadiraha"])],["tadiraht",new Set(["facet","tadiraho"])],["share",new Set(["facet","list"])]])],["wire",new Map([["item",new Set(["list"])],["facet",new Set(["filter","eumap","ctype","tadiraha","tadiraho","tadiraht"])],["filter",new Set(["list"])],["eumap",new Set(["list"])],["ctype",new Set(["list"])],["tadiraha",new Set(["list"])],["tadiraho",new Set(["list"])],["tadiraht",new Set(["list"])]])],["work",new Map([["facet",new Set(["filter","eumap","ctype","tadiraha","tadiraho","tadiraht"])]])]])}return i(t,[{key:"resolveTiming",value:function(){function t(t,e){n.has(t)||n.set(t,new Set),r.has(e)||r.set(e,new Set),n.get(t).add(e),r.get(e).add(t)}var e=[],n=new Map,r=new Map,i=!0,o=!1,l=void 0;try{for(var s,c=this.components.keys()[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value,f=!0,h=!1,d=void 0;try{for(var v,p=this.stages.keys()[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value;e.push(u+"-"+y)}}catch(_){h=!0,d=_}finally{try{!f&&p["return"]&&p["return"]()}finally{if(h)throw d}}}}catch(_){o=!0,l=_}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o)throw l}}var m=!0,g=!1,w=void 0;try{for(var b,S=this.stages_prev[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var k=a(b.value,2),x=k[0],M=k[1],j=!0,O=!1,C=void 0;try{for(var P,T=this.components.keys()[Symbol.iterator]();!(j=(P=T.next()).done);j=!0){var $=P.value;t($+"-"+M,$+"-"+x)}}catch(_){O=!0,C=_}finally{try{!j&&T["return"]&&T["return"]()}finally{if(O)throw C}}}}catch(_){g=!0,w=_}finally{try{!m&&S["return"]&&S["return"]()}finally{if(g)throw w}}var E=!0,A=!1,D=void 0;try{for(var H,R=this.before[Symbol.iterator]();!(E=(H=R.next()).done);E=!0){var V=a(H.value,2),I=V[0],F=V[1],q=!0,B=!1,L=void 0;try{for(var z,W=F[Symbol.iterator]();!(q=(z=W.next()).done);q=!0){var G=a(z.value,2),N=G[0],U=G[1];if(!this.ignore.has(N)){var K=!0,Y=!1,J=void 0;try{for(var Q,X=U.keys()[Symbol.iterator]();!(K=(Q=X.next()).done);K=!0){var Z=Q.value;this.ignore.has(Z)||t(Z+"-"+I,N+"-"+I)}}catch(_){Y=!0,J=_}finally{try{!K&&X["return"]&&X["return"]()}finally{if(Y)throw J}}}}}catch(_){B=!0,L=_}finally{try{!q&&W["return"]&&W["return"]()}finally{if(B)throw L}}}}catch(_){A=!0,D=_}finally{try{!E&&R["return"]&&R["return"]()}finally{if(A)throw D}}for(var tt=0,et=[],nt=new Set;tt<=e.length;){if(et.push(new Set),0==tt){var rt=!0,at=!1,it=void 0;try{for(var ot,lt=e[Symbol.iterator]();!(rt=(ot=lt.next()).done);rt=!0){var st=ot.value;r.has(st)||et[tt].add(st)}}catch(_){at=!0,it=_}finally{try{!rt&&lt["return"]&&lt["return"]()}finally{if(at)throw it}}}else{var ct=!0,ut=!1,ft=void 0;try{for(var ht,dt=nt[Symbol.iterator]();!(ct=(ht=dt.next()).done);ct=!0){var vt=ht.value;if(n.has(vt)){var pt=!0,yt=!1,_t=void 0;try{for(var mt,gt=n.get(vt)[Symbol.iterator]();!(pt=(mt=gt.next()).done);pt=!0){var wt=mt.value;if(!nt.has(wt)){var bt=!0,St=!0,kt=!1,xt=void 0;try{for(var Mt,jt=r.get(wt)[Symbol.iterator]();!(St=(Mt=jt.next()).done);St=!0){var Ot=Mt.value;if(!nt.has(Ot)){bt=!1;break}}}catch(_){kt=!0,xt=_}finally{try{!St&&jt["return"]&&jt["return"]()}finally{if(kt)throw xt}}bt&&et[tt].add(wt)}}}catch(_){yt=!0,_t=_}finally{try{!pt&&gt["return"]&&gt["return"]()}finally{if(yt)throw _t}}}}}catch(_){ut=!0,ft=_}finally{try{!ct&&dt["return"]&&dt["return"]()}finally{if(ut)throw ft}}}if(0==et[tt].size)break;var Ct=!0,Pt=!1,Tt=void 0;try{for(var $t,Et=et[tt][Symbol.iterator]();!(Ct=($t=Et.next()).done);Ct=!0){var At=$t.value;nt.add(At)}}catch(_){Pt=!0,Tt=_}finally{try{!Ct&&Et["return"]&&Et["return"]()}finally{if(Pt)throw Tt}}tt++}if(this._tasks=[],this._timing=new Map,nt.size!=e.length){var Dt=[],Ht=!0,Rt=!1,Vt=void 0;try{for(var It,Ft=e[Symbol.iterator]();!(Ht=(It=Ft.next()).done);Ht=!0){var qt=It.value;nt.has(qt)||Dt.push(qt)}}catch(_){Rt=!0,Vt=_}finally{try{!Ht&&Ft["return"]&&Ft["return"]()}finally{if(Rt)throw Vt}}console.log("Circular timing constraints detected",Dt)}else{var Bt=!0,Lt=!1,zt=void 0;try{for(var Wt,Gt=et[Symbol.iterator]();!(Bt=(Wt=Gt.next()).done);Bt=!0){var Nt=Wt.value,Ut=!0,Kt=!1,Yt=void 0;try{for(var Jt,Qt=Nt[Symbol.iterator]();!(Ut=(Jt=Qt.next()).done);Ut=!0){var Xt=Jt.value;this._tasks.push(Xt)}}catch(_){Kt=!0,Yt=_}finally{try{!Ut&&Qt["return"]&&Qt["return"]()}finally{if(Kt)throw Yt}}}}catch(_){Lt=!0,zt=_}finally{try{!Bt&&Gt["return"]&&Gt["return"]()}finally{if(Lt)throw zt}}this._timing=r,console.log("Timing resolved",this._tasks)}}}]),t}();n["default"]=o},{}],16:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=t("./relative"),s=r(l),c=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t,"tadiraha"))}return o(e,t),e}(s["default"]);n["default"]=c},{"./relative":13}],17:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=t("./relative"),s=r(l),c=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t,"tadiraho"))}return o(e,t),e}(s["default"]);n["default"]=c},{"./relative":13}],18:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=t("./relative"),s=r(l),c=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t,"tadiraht",1,30))}return o(e,t),e}(s["default"]);n["default"]=c},{"./relative":13}],19:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(r=(o=l.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(s){a=!0,i=s}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./generic.js"),c=a(s),u=t("./message"),f=r(u),h=Symbol(),d=Symbol(),v=Symbol(),p=Symbol(),y=function(){function t(e){i(this,t),this[h]={vars:new Set(["list","flt_contrib","flt_country","flt_type","flt_tadiraha","flt_tadiraho","flt_tadiraht","rel_country_contrib","rel_type_contrib","rel_tadiraha_contrib","rel_tadiraho_contrib","rel_tadiraht_contrib","item_contrib","item_country","sort"]),vals:new Map([["list",new Set(["contrib","country","type","tadiraha","tadiraho","tadiraht"])],["sort",new Map([["v",!0],["x",!1]])]]),default_value:new Map([["list","contrib"],["sort",!0]]),typ:new Map([["sort","boolean"]]),url:new Set(["list","item_contrib","item_country"]),showas:new Map([["list",new Map([["contrib",{sg:"contribution",pl:"contributions"}],["country",{sg:"country",pl:"countries"}],["type",{sg:"type",pl:"types"}],["tadiraha",{sg:"tadirah activity",pl:"tadirah activities"}],["tadiraho",{sg:"tadirah object",pl:"tadirah objects"}],["tadiraht",{sg:"tadirah technique",pl:"tadirah techniques"}]])]])},this[d]={},this[v]=new Map,this.page=e,this[p]=new f["default"]("msg_page"),this._compile_specs(),this._getInitstate(),this._addHistory()}return l(t,[{key:"_compile_specs",value:function(){var t=this[h],e=!0,n=!1,r=void 0;try{for(var a,i=t.vars[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value,l={};l.vals=t.vals.get(o)||null,l.default_value=t.default_value.get(o)||"",l.typ=t.typ.get(o)||"string",l.url=t.url.has(o),l.showas=t.showas.get(o)||{},this[v].set(o,l)}}catch(s){n=!0,r=s}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw r}}}},{key:"_validate",value:function(t,e){var n=void 0;if(this[v].has(t)){var r=this[v].get(t);"string"==r.typ?r.vals?r.vals.has(e)?n=e:(n=r.default_value,this[p].msg("illegal string value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")):n=e:"integer"==r.typ?(/^(\-|\+)?[0-9]+$/.test(e)?n=Number(e):(n=r.default_value,this[p].msg("not a number value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")),n<r.limits.min&&this[p].msg("number to small for "+t+': "'+n+'" is replaced by "'+r.limits.min+'"',"warning"),n>r.limits.max&&this[p].msg("number to big for "+t+': "'+n+'" is replaced by "'+r.limits.max+'"',"warning")):"boolean"==r.typ&&(r.vals.has(e)?n=r.vals.get(e):(n=r.default_value,this[p].msg("illegal boolean value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")))}else n=null,this[p].msg("unknown parameter: "+t+"="+e,"warning");return n}},{key:"getVars",value:function(t){var e=[];for(var n in this[d]){var r=this[d][n],a=this[v].get(n);if(t||a.url)if("string"==a.typ||"integer"==a.typ)e.push(n+"="+r);else if("boolean"==a.typ){var i=!0,l=!1,s=void 0;try{for(var c,u=a.vals[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var f=o(c.value,2),h=f[0],p=f[1];p==r&&e.push(n+"="+h)}}catch(y){l=!0,s=y}finally{try{!i&&u["return"]&&u["return"]()}finally{if(l)throw s}}}}return e.join("&")}},{key:"_getInitstate",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=c.request_vars[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=o(r.value,2),l=i[0],s=i[1];this[v].has(l)||this[p].msg("unknown parameter: "+l+"="+s,"warning")}}catch(u){e=!0,n=u}finally{try{!t&&a["return"]&&a["return"]()}finally{if(e)throw n}}var f=!0,h=!1,y=void 0;try{for(var _,m=this[v][Symbol.iterator]();!(f=(_=m.next()).done);f=!0){var g=o(_.value,2),l=g[0],w=g[1],s=null;if(c.request_vars.has(l)){var b=c.request_vars.get(l);s=this._validate(l,b),c.localstorage_vars.set(l,s)}else c.localstorage_vars.isSet(l)?s=c.localstorage_vars.get(l):(s=w.default_value,c.localstorage_vars.set(l,s));this[d][l]=s}}catch(u){h=!0,y=u}finally{try{!f&&m["return"]&&m["return"]()}finally{if(h)throw y}}}},{key:"_addHistory",value:function(t,e){var n="DARIAH contribution tool",r=app_url+"?"+this.getVars(!1);History.pushState(this[d],n,r)}},{key:"setState",value:function(t,e){this[d][t]=e,c.localstorage_vars.set(t,e),this._addHistory()}},{key:"getState",value:function(t){return this[d][t]}},{key:"getValues",value:function(t){return this[v].get(t).vals}},{key:"showState",value:function(t,e,n){var r=e,a=this[v].get(t).showas;return a.has(e)&&(r=a.get(e)[n]),r}},{key:"work",value:function(){return function(){var t=History.getState();t&&t.data&&(this[d]=t.data,this.page.work())}.bind(this)}}]),t}();n["default"]=y},{"./generic.js":7,"./message":11}]},{},[10]);
//# sourceMappingURL=../js/app.min.js.map
