!function t(e,n,r){function a(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(i)return i(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return a(n?n:t)},c,c.exports,t,e,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./generic.js"),u=a(l),c=t("./message"),f=r(c),h=Symbol(),d=Symbol(),v=Symbol(),p=function(){function t(e,n,r){i(this,t),this.name=e,this.page=r,this.specs=n,this.variants=n.variants,this[h]=new Map;var a=!0,o=!1,s=void 0;try{for(var l,u=this.variants[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;this[h].set(c,new Map);var f=!0,p=!1,y=void 0;try{for(var _,m=this.page.stages.keys()[Symbol.iterator]();!(f=(_=m.next()).done);f=!0){var g=_.value;this[h].get(c).set(g,!0)}}catch(w){p=!0,y=w}finally{try{!f&&m["return"]&&m["return"]()}finally{if(p)throw y}}}}catch(w){o=!0,s=w}finally{try{!a&&u["return"]&&u["return"]()}finally{if(o)throw s}}this[d]=new Map,this[v]=new Map,this.container=new Map,this.dst=new Map,this.state=this.page.state,this.data=new Map,this.related_info=new Map,this.related_values=new Map,this.implementation=new n.specific(this)}return s(t,[{key:"need",value:function(t,e){var n=this[h].get(t).get(e);return!n.state||"rejected"==n.state()}},{key:"_deed",value:function(t,e,n){var r=("item"==this.name&&"weld"==e,this[n].bind(this,t)),a=this.page.getBefore(this.name,e),i=[],s=!0,l=!1,u=void 0;try{for(var c,f=a[Symbol.iterator]();!(s=(c=f.next()).done);s=!0){var d=o(c.value,2),v=d[0],p=d[1],y=this.page.getComponent(v);y.hasVariant(t)&&i.push(y[h].get(t).get(p))}}catch(_){l=!0,u=_}finally{try{!s&&f["return"]&&f["return"]()}finally{if(l)throw u}}this[h].get(t).set(e,$.when.apply($,i).then(r))}},{key:"ensure",value:function(t,e,n){if(this.page.stages.has(e)){var r=this.page.stages.get(e)&&!this.specs.by_id;r&&!this.need(t,e)||this._deed(t,e,n)}}},{key:"hasVariant",value:function(t){return this.variants.has(t)}},{key:"_visibility",value:function(t,e){if(this.hasVariant(t)&&this.container.has(t)){var n=this.container.get(t);e?n.show():n.hide()}}},{key:"_fetch",value:function(t,e){var n=url_tpl.replace(/_c_/,"data").replace(/_f_/,this.specs.fetch_url+"_"+t)+".json";this[d].get(t).msg("fetching data ...");var r=this._postFetch.bind(this,t);return void 0!=e&&(n+="?ids="+Array.from(e).join(",")),$.ajax({type:"POST",url:n,contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(t){r(t,e)})}},{key:"_postFetch",value:function(t,e,n){"item"==this.name;this[d].get(t).clear();var r=!0,a=!1,i=void 0;try{for(var o,s=e.msgs[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value;this[d].get(t).msg(l)}}catch(u){a=!0,i=u}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}if(e.good){if("data"in e&&this.data.set(t,e.data),"relinfo"in e){var c=new Map,f=!0,h=!1,p=void 0;try{for(var y,_=e.relinfo[Symbol.iterator]();!(f=(y=_.next()).done);f=!0){var m=y.value;c.set(m[0],new Set(m[1]))}}catch(u){h=!0,p=u}finally{try{!f&&_["return"]&&_["return"]()}finally{if(h)throw p}}this.related_info.set(t,c)}if("relvals"in e&&this.related_values.set(t,e.relvals),this.specs.by_id){var g=!0,w=!1,b=void 0;try{for(var S,k=n[Symbol.iterator]();!(g=(S=k.next()).done);g=!0){var x=S.value;this[v].get(t).add(x)}}catch(u){w=!0,b=u}finally{try{!g&&k["return"]&&k["return"]()}finally{if(w)throw b}}}}this.implementation.weld(t)}},{key:"_weld",value:function(t){if(this.dst=this.page.getContainer(this.specs.dest,this.variants),this.specs.by_id){if(!this[d].has(t)){var e=this.dst.get(t);e.prepend('<div id="msg_'+this.name+"_"+t+'"></div>'),this[d].set(t,new f["default"]("msg_"+this.name+"_"+t))}this[v].has(t)||this[v].set(t,new Set)}else{if(this.container.set(t,$("#"+this.name+"_"+t)),0==this.container.get(t).length){var n=this.dst.get(t);n.append('<div id="msg_'+this.name+"_"+t+'"></div>'),n.append('<div id="'+this.name+"_"+t+'" class="component"></div>'),this.container.set(t,$("#"+this.name+"_"+t))}this[d].set(t,new f["default"]("msg_"+this.name+"_"+t))}if(null!=this.specs.fetch_url){if(!this.specs.by_id)return this._fetch(t);var r=new Set,a=u.from_str(this.state.getState(this.specs.fetch_url+"_"+t));this[v].has(t)||this[v].set(t,new Set),this.data.set(t,[]),this.related_info.set(t,new Map),this.related_values.set(t,new Map);var i=!0,o=!1,s=void 0;try{for(var l,c=a[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var h=l.value;this[v].get(t).has(h)||r.add(h)}}catch(p){o=!0,s=p}finally{try{!i&&c["return"]&&c["return"]()}finally{if(o)throw s}}if(0!=r.size)return this._fetch(t,r);this.implementation.weld(t)}else this.implementation.weld(t)}},{key:"_wire",value:function(t){this.implementation.wire(t)}},{key:"_work",value:function(t){this._visibility(t,!0),this.implementation.work(t)}},{key:"weld",value:function(t){this.hasVariant(t)&&this.implementation.show(t)&&this.ensure(t,"weld","_weld")}},{key:"wire",value:function(t){this.hasVariant(t)&&this.implementation.show(t)&&this.ensure(t,"wire","_wire")}},{key:"work",value:function(t){this.hasVariant(t)&&this.implementation.show(t)?this.ensure(t,"work","_work"):this._visibility(t,!1)}}]),t}();n["default"]=p},{"./generic.js":7,"./message":11}],2:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=Symbol(),o=Symbol(),s=function(){function t(e){r(this,t),this.component=e,this[i]=new Map,this[o]=new Map}return a(t,[{key:"_html",value:function(t){this.component.container.get(t).html('<a class="control_title" href="#">'+this.component.state.showState("list",t,"sg")+"</a> ")}},{key:"_dressup",value:function(t){var e=this;this[o].get(t).click(function(n){n.preventDefault(),e.component.state.setState("list",t)})}},{key:"_isActive",value:function(t){return this.component.state.getState("list")==t}},{key:"show",value:function(t){return!0}},{key:"weld",value:function(t){this._html(t),this[i].set(t,this.component.container.get(t)),this[i].get(t).addClass("control_big"),this[o].set(t,this.component.container.get(t).find("a"))}},{key:"wire",value:function(t){this._dressup(t)}},{key:"work",value:function(t){this._isActive(t)?(this[o].get(t).addClass("ison"),this[i].get(t).addClass("ison")):(this[o].get(t).removeClass("ison"),this[i].get(t).removeClass("ison"))}}]),t}();n["default"]=s},{}],3:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=t("./relative"),l=r(s),u=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t,"type"))}return o(e,t),e}(l["default"]);n["default"]=u},{"./relative":13}],4:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("./generic.js"),f=a(c),h=t("./relative"),d=r(h),v=Symbol(),p=Symbol(),y=Symbol(),_=Symbol(),m=Symbol(),g=function(t){function e(t){i(this,e);var n=o(this,Object.getPrototypeOf(e).call(this,t,"country"));return n[v]=new Map,n[p]=new Map,n[y]=new Map,n[_]=new Map,n[m]=new Set(["-","CY","KS","TR","MC","GE"]),n}return s(e,t),u(e,[{key:"_preHtml",value:function(t){return'<div id="map-europe_'+t+'" class="position">\n    <p class="zoom"><a class="fa fa-arrows" href="#" title="zoom to fit all countries"/></p>\n</div>'}},{key:"_myDressup",value:function(t){var e=this,n=this.component.container.get(t);this[p].set(t,n.find("#map-europe_"+t));var r=this[p].get(t),a=.6*r.width();r.width("100%"),r.height(a),r.vectorMap({map:"europe_mill",backgroundColor:"#ccccff",regionsSelectable:!0,markersSelectable:!0,regionsSelectableOne:!1,markersSelectableOne:!1,markerStyle:{initial:{fill:"#008800","fill-opacity":.2,stroke:"none","stroke-width":0,"stroke-opacity":.2,r:1},hover:{cursor:"pointer",stroke:"#ffff44","stroke-width":1,"stroke-opacity":1},selected:{fill:"#008800","fill-opacity":1},selectedHover:{}},regionStyle:{initial:{fill:"#bbbbbb","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1},hover:{cursor:"pointer",stroke:"#ffff44","stroke-width":3,"stroke-opacity":1},selected:{fill:"#dd8844","fill-opacity":1},selectedHover:{}},markers:this[y].get(t),series:{markers:[{values:{},scale:[0,20],normalizeFunction:"linear",attribute:"r",min:0,max:100}],regions:[{scale:{outdariah:"#ffffff",indariah:"#ffddbb"},attribute:"fill",values:this[_].get(t)}]},onRegionTipShow:function(e,n,r){var a=this.statistics.get(t);n.html(r+": "+(a.has(r)?a.get(r):"not in DARIAH"))}.bind(this),onMarkerTipShow:function(e,n,r){var a=this.statistics.get(t);n.html(r+": "+(a.has(r)?a.get(r):"not in DARIAH"))}.bind(this),onRegionClick:function(e,n){this.related_values_index.get(t).has(n)||e.preventDefault()}.bind(this),onMarkerClick:function(e,n){this.related_values_index.get(t).has(n)||e.preventDefault()}.bind(this),onRegionSelected:function(e,n,r,a){this.change_state&&this.component.state.setState(this.state_var_pref+t,f.a_to_str(a)+this._unmapped_selected(t))}.bind(this),onMarkerSelected:function(e,n,r,a){this.change_state&&this.component.state.setState(this.state_var_pref+t,f.a_to_str(a)+this._unmapped_selected(t))}.bind(this)});var i=n.find("p.zoom");i.css("top",a-20+"px"),i.css("left","10px");var o=n.find("p.zoom a");o.click(function(n){n.preventDefault(),e[v].get(t).setFocus({regions:["GB","GR"]})}),this[v].set(t,r.vectorMap("get","mapObject")),this[v].get(t).setFocus({regions:["GB","GR"]})}},{key:"_unmapped_selected",value:function(t){var e=[],n=f.from_str(t,this.component.state.getState(this.state_var_pref+t)),r=!0,a=!0,i=!1,o=void 0;try{for(var s,l=this[m][Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;n.has(u)&&(e.push(u),r=!1)}}catch(c){i=!0,o=c}finally{try{!a&&l["return"]&&l["return"]()}finally{if(i)throw o}}return r?"":","+e.join(",")}},{key:"_mySetFacet",value:function(t){this.change_state=!1;var e={},n={},r=this.related_state.get(t),a=!0,i=!1,o=void 0;try{for(var s,l=this.component.related_values.get(t)[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=u._id,f=(u.name,u.member_dariah);this[m].has(c)||c==this.no_values.value||(e[c]=r.has(c),f&&(n[c]=r.has(c)))}}catch(h){i=!0,o=h}finally{try{!a&&l["return"]&&l["return"]()}finally{if(i)throw o}}var d=this[v].get(t);d.setSelectedRegions(e),d.setSelectedMarkers(n),this.change_state=!0}},{key:"_myStats",value:function(t){var e=this.distilled.get(t).size;0==e&&(e=1);var n={},r=this.statistics.get(t),a=!0,i=!1,o=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=l(s.value,2),f=c[0],h=c[1];if(f!=this.no_values.value){var d=100*h/e;n[f]=e<10?d:10*Math.sqrt(d)}}}catch(p){i=!0,o=p}finally{try{!a&&u["return"]&&u["return"]()}finally{if(i)throw o}}this[v].get(t).series.markers[0].setValues(n)}},{key:"_plainWeld",value:function(t){}},{key:"_myWeld",value:function(t){var e=this;this[y].set(t,{}),this[_].set(t,{});var n=this.component.related_values.get(t),r=this[y].get(t),a=this[_].get(t),i=!0,o=!1,s=void 0;try{for(var l,u=n[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,f=c._id,h=c.name,d=c.member_dariah,v=c.latitude,p=c.longitude;d?(this.related_values_all.get(t).add(f),this.related_values_list.get(t).push(f),this.related_values_index.get(t).set(f,h),r[f]={latLng:[v,p],name:h},a[f]="indariah"):a[f]="outdariah"}}catch(m){o=!0,s=m}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw s}}this.related_values_list.get(t).sort(function(t,n){return e.related_values_index.get(t)<e.related_values_index.get(n)?-1:e.related_values_index.get(t)>e.related_values_index.get(n)?1:0})}}]),e}(d["default"]);n["default"]=g},{"./generic.js":7,"./relative":13}],5:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./generic.js"),l=r(s),u=Symbol(),c=Symbol(),f=function(){function t(e){a(this,t),this.component=e,this[u]=new Map,this[c]=new Map,this.table=new Map,this.distilled=new Map}return o(t,[{key:"_html",value:function(t){var e='<p><span fct="all"></span>Filtering <span id="fstats_'+t+'"></span></p>';this.component.container.get(t).html(e)}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){var e=this.component.children;this[c].set(t,new Map);var n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=i(o.value,2),u=l[0],f=l[1];f.hasVariant(t)&&this[c].get(t).set(u,f)}}catch(h){r=!0,a=h}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}this._html(t)}},{key:"_display",value:function(t,e){var n=this,r=t.closest("p"),a=r.find(".hidec"),i=r.find(".morec"),o=r.find(".showc"),s=t.closest("div").find("table,.flt"),u=t.closest("div").find(".value_list2,.flt_compact"),c=t.closest("div").find(".flt_not_expanded"),f="fctx_"+t.closest("span").attr("fct"),h=void 0==e;h&&(e=l.localstorage_vars.isSet(f)?l.localstorage_vars.get(f):1);var d="fctx_all"==f;d&&!h&&t.closest("div").find("div.component span[fct]").each(function(){n._display($(this),e)}),l.localstorage_vars.set(f,e),0==e?(a.show(),i.hide(),o.hide(),d||(c.show(),s.hide(),u.hide())):1==e?(a.hide(),i.show(),o.hide(),d||(c.show(),s.hide(),u.show())):(a.hide(),i.hide(),o.show(),d||(c.hide(),s.show(),u.hide()))}},{key:"wire",value:function(t){var e=this,n=this.component.container.get(t);this[u].set(t,n.find("#fstats_"+t));var r=" details; click to change level of details",a='<a class="showc fa fa-fw fa-list-ul" href="#" title="full'+r+'"></a><a class="morec fa fa-fw fa-align-left" href="#" title="condensed'+r+'"></a><a class="hidec fa fa-fw fa-minus" href="#" title="hidden'+r+'"></a>';n.addClass("facet"),n.find("span[fct]").each(function(){$(this).html(a+"&nbsp"),e._display($(this))}),n.find(".hidec").click(function(t){t.preventDefault(),e._display($(this),1)}),n.find(".morec").click(function(t){t.preventDefault(),e._display($(this),2)}),n.find(".showc").click(function(t){t.preventDefault(),e._display($(this),0)})}},{key:"work",value:function(t){var e=this[c].get(t),n=!1,r=!0,a=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var f=i(s.value,2),h=(f[0],f[1]),d=h.implementation;if(d.changed){n=!0;break}}}catch(v){a=!0,o=v}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw o}}if(n){var p=this.component.page.getComponent("list"),y=(p.item_comp+"_"+t,p.implementation.getRecordIds(t));this.distilled.set(t,new Set);var _=!0,m=!1,g=void 0;try{for(var w,b=e[Symbol.iterator]();!(_=(w=b.next()).done);_=!0){var S=i(w.value,2),h=(S[0],S[1]),k=h.implementation;k.distilled.set(t,new Set)}}catch(v){m=!0,g=v}finally{try{!_&&b["return"]&&b["return"]()}finally{if(m)throw g}}var x=!0,M=!1,j=void 0;try{for(var O,C=y[Symbol.iterator]();!(x=(O=C.next()).done);x=!0){var P=O.value,T=!0,$=null,E=!1,A=!0,D=!1,R=void 0;try{for(var H,I=e[Symbol.iterator]();!(A=(H=I.next()).done);A=!0){var z=i(H.value,2),h=(z[0],z[1]);if(!E){var V=h.implementation,q=V.v(t,P);q||(T=!1,null==$?$=V:E=!0)}}}catch(v){D=!0,R=v}finally{try{!A&&I["return"]&&I["return"]()}finally{if(D)throw R}}if(!E)if(T&&this.distilled.get(t).add(P),null!=$)$.distilled.get(t).add(P);else{var F=!0,L=!1,B=void 0;try{for(var W,G=e[Symbol.iterator]();!(F=(W=G.next()).done);F=!0){var N=i(W.value,2),h=(N[0],N[1]),U=h.implementation;U.distilled.get(t).add(P)}}catch(v){L=!0,B=v}finally{try{!F&&G["return"]&&G["return"]()}finally{if(L)throw B}}}}}catch(v){M=!0,j=v}finally{try{!x&&C["return"]&&C["return"]()}finally{if(M)throw j}}var K=!0,Y=!1,J=void 0;try{for(var Q,X=e[Symbol.iterator]();!(K=(Q=X.next()).done);K=!0){var Z=i(Q.value,2),h=(Z[0],Z[1]),tt=h.implementation;tt.stats(t)}}catch(v){Y=!0,J=v}finally{try{!K&&X["return"]&&X["return"]()}finally{if(Y)throw J}}this[u].get(t).html(this.distilled.get(t).size+" of "+y.length),p.implementation.select(t)}}}]),t}();n["default"]=f},{"./generic.js":7}],6:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./generic.js"),s=(r(o),Symbol()),l=Symbol(),u=Symbol(),c=Symbol(),f=Symbol(),h=Symbol(),d=Symbol(),v=Symbol(),p=function(){function t(e){a(this,t),this.component=e,this[s]=new Map,this.filter_state=new Map,this.changed=new Map,this[l]=new Map,this[u]=new Map,this[f]=new Map,this[h]=new Map,this._stats_dst=new Map,this[c]=new Map,this[d]=new Map,this[v]=new Map,this.distilled=new Map,this.state_var_pref=this.component.specs.varpfx+"_"}return i(t,[{key:"_html",value:function(t){var e='\n<div>\n    <p class="dctrl"><span fct="'+this.component.name+"-"+t+'"></span> By full text search\n        <a href="#" title="modify full text filter" id="flt2_'+t+'" class="flt_not_expanded facet_single ison flt_pat"></a>\n        <a href="#" class="control_med fa fa-close filtc" id="clearf_'+t+'"></a>\n    </p>\n    <div id="fltw_'+t+'">\n        <p id="fbox_'+t+'" class="flt control_med fbox ui-widget">\n            <input id="flt_'+t+'" class="flt flt_pat"/>\n            <span fbox class="stats" id="stats_'+t+'"></span>\n        </p>\n        <div id="autoc_'+t+'" style="display: none;">here '+t+"</div>\n    </div>\n</div>";this.component.container.get(t).html(e)}},{key:"_setFilter",value:function(t){var e=this.component.state.getState(this.state_var_pref+t),n=this[l].get(t);this[u].get(t).html(e),n.val(e),n.autocomplete("search",e)}},{key:"_response",value:function(t){return function(e,n){this[v].set(t,new Set);var r=this[v].get(t),a=!0,i=!1,o=void 0;try{for(var s,u=n.content[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var c=s.value;r.add(c.value)}}catch(f){i=!0,o=f}finally{try{!a&&u["return"]&&u["return"]()}finally{if(i)throw o}}if(!this[d].get(t)){var h=this[l].get(t).val();this.component.state.setState(this.state_var_pref+t,h)}}.bind(this)}},{key:"_setClear",value:function(t){var e=this;this[c].get(t).click(function(n){n.preventDefault();var r=e[l].get(t);r.val(""),r.autocomplete("search","")})}},{key:"stats",value:function(t){var e=void 0,n=this._stats_dst.get(t);""==this[l].get(t).val()?(e="",n.removeClass("ison")):(e=this.facet.distilled.get(t).size+" of ",n.addClass("ison")),n.html(""+e+this.distilled.get(t).size)}},{key:"v",value:function(t,e){return this[v].get(t).has(e)}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){this._html(t)}},{key:"wire",value:function(t){this.facet||(this.facet=this.component.page.getComponent("facet").implementation);var e=this.component.page.getComponent("list").data.get(t);this[s].set(t,[]);var n=this[s].get(t),r=!0,a=!1,i=void 0;try{for(var o,p=e[Symbol.iterator]();!(r=(o=p.next()).done);r=!0){var y=o.value;"country"==t?n.push({label:y._id+" "+y.name,value:y._id}):"contrib"==t?n.push({label:y.title,value:y._id}):n.push({label:y.value,value:y._id})}}catch(_){a=!0,i=_}finally{try{!r&&p["return"]&&p["return"]()}finally{if(a)throw i}}this[v].set(t,new Set),this.distilled.set(t,new Set);var m=this.component.container.get(t),g=m.find("#fltw_"+t),w=$("#flt_"+t);this[l].set(t,w);var b=$("#flt2_"+t);this[u].set(t,b),this[f].set(t,g.find("#fbox_"+t)),this[h].set(t,g.find("#autoc_"+t)),this._stats_dst.set(t,g.find("#stats_"+t)),this[c].set(t,m.find("#clearf_"+t)),this[l].get(t).autocomplete({appendTo:this[h].get(t),source:this[s].get(t),response:this._response(t),minLength:0}),b.click(function(t){t.preventDefault(),$(this).closest("div").find(".morec").click(),w[0].focus()}),this[d].set(t,!0),this._setClear(t),this._setFilter(t),this[d].set(t,!1)}},{key:"work",value:function(t){var e=this.filter_state.has(t)?this.filter_state.get(t):"",n=this.component.state.getState(this.state_var_pref+t);if(this.changed=e!=n,this.changed){this.filter_state.set(t,n);var r=this[c].get(t);""==n?(this[f].get(t).removeClass("ison"),r.hide()):(this[f].get(t).addClass("ison"),r.show()),this[u].get(t).html(n)}}}]),t}();n["default"]=p},{"./generic.js":7}],7:[function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){return t.replace(/[&<>]/g,function(t){return d.get(t)||t})}function i(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function o(t){if(i(),document.selection){var e=document.body.createTextRange();e.moveToElementText(document.getElementById(t)),e.select()}else if(window.getSelection){var n=document.createRange();n.selectNode(document.getElementById(t)),window.getSelection().addRange(n)}}function s(t,e,n){var r=void 0==e?t.closest("div").find(".detail"):e;r.toggle(),void 0!=n&&n(t);var a=void 0,i=void 0;t.hasClass("fa-chevron-right")?(a="fa-chevron-right",i="fa-chevron-down"):(a="fa-chevron-down",i="fa-chevron-right"),t.removeClass(a),t.addClass(i)}function l(t,e,n){return n.length>t?n.replace(/[^ -]+/g,function(t){return t.substr(0,e)}):n}function u(t){return null!==t&&void 0!=t&&""!=t?new Set(t.split(",")):new Set}function c(t){return t.join(",")}function f(t){return Array.from(t).join(",")}function h(t,e){if(t.size!=e.size)return!1;var n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if(!e.has(s))return!1}}catch(l){r=!0,a=l}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw a}}return!0}Object.defineProperty(n,"__esModule",{value:!0}),n.escapeHTML=a,n.deselectText=i,n.selectText=o,n.toggleDetail=s,n.compact=l,n.from_str=u,n.a_to_str=c,n.to_str=f,n.set_equal=h;var d=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"]]),v={parameter:function(t){return this.parameters().get(t)},parameters:function(){var t=new Map,e=window.location.search;if(e.indexOf("?")===-1)return t;var n=!0,a=!1,i=void 0;try{for(var o,s=e.slice(1).split("&")[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;t.set.apply(t,r(l.split("=")))}}catch(u){a=!0,i=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(a)throw i}}return t}},p=(n.request_vars=v.parameters(),$.initNamespaceStorage("req"));n.localstorage_vars=p.localStorage},{}],8:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./generic.js"),l=r(s),u=function(){function t(e){a(this,t),this.component=e,this.open_items=new Map}return o(t,[{key:"_html",value:function(t,e){var n=e._id;this.open_items.get(t).add(n);var r=this.component.up.implementation.getRow(t,n),a=r.find(".hidec"),i=r.find(".showc"),o='<tr iid="'+n+'"><td>&nbsp</td>';if("contrib"==t){var s=[],l=!0,u=!1,c=void 0;try{for(var f,h=e.type_of_inkind[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var d=f.value;s.push('<a href="#" tid="'+d._id+'">'+d.value+"</a>")}}catch(v){u=!0,c=v}finally{try{!l&&h["return"]&&h["return"]()}finally{if(u)throw c}}o+="\n<td>\n<b>Contact person:</b> "+e.contact_person_name+"<br/>\n<b>Country:</b> "+e.country[0]._id+" = "+e.country[0].name+"<br/>\n<b>Types:</b> "+s.join(", ")+"<br/>\n</td>\n"}else if("country"==t){var p=e.member_dariah?"yes":"no";o+='\n<td colspan="3">\n<b>Country code:</b> <span class="country_code">'+e._id+'</span><br/>\n<b>Country name:</b> <span class="country_name">'+e.name+'</span><br/>\n<b>Member DARIAH?</b> <span class="in_dariah">'+p+'</span><br/>\n<b>Latitude, Longitude:</b> <span class="latlng">'+e.latitude+'</span>, <span class="latlng">'+e.longitude+"</span><br/>\n</td>"}else"type"!=t&&"tadiraha"!=t&&"tadiraho"!=t&&"tadiraht"!=t||(o+='\n<td>\n<b>Value:</b> <span class="value">'+e.value+"</span><br/>\n<td>");o+="</tr>",r.after(o),a.hide(),i.show()}},{key:"_set_it",value:function(t,e,n){var r=this.component.name+"_"+e,a=l.from_str(this.component.state.getState(r)),i=t.closest("tr").attr("rid");n?a.add(i):a["delete"](i),this.component.state.setState(r,l.to_str(a))}},{key:"display",value:function(t,e,n){if(this.open_items.get(t).has(e)!=n){var r=this.component.up.implementation.getRow(t,e),a=r.find(".hidec"),i=r.find(".showc"),o=this.component.up.container.get(t).find('tr[iid="'+e+'"]');n?(a.hide(),i.show(),o.length&&o.show()):(a.show(),i.hide(),o.length&&o.hide()),n?this.open_items.get(t).add(e):this.open_items.get(t)["delete"](e)}}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){this.open_items.has(t)||this.open_items.set(t,new Set);var e=!0,n=!1,r=void 0;try{for(var a,i=this.component.data.get(t)[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;this._html(t,o)}}catch(s){n=!0,r=s}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw r}}}},{key:"wire",value:function(t){var e=this,n=this.component.up.container.get(t);n.find(".hidec").click(function(n){n.preventDefault(),e._set_it($(this),t,!0)}),n.find(".showc").click(function(n){n.preventDefault(),e._set_it($(this),t,!1)})}},{key:"work",value:function(t){var e=l.from_str(this.component.state.getState(this.component.name+"_"+t)),n=!0,r=!1,a=void 0;try{for(var o,s=this.component.up.implementation.row_status.get(t)[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var u=i(o.value,2),c=u[0],f=u[1];this.display(t,c,f&&e.has(c))}}catch(h){r=!0,a=h}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}}}]),t}();n["default"]=u},{"./generic.js":7}],9:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./generic.js"),l=(r(s),function(){function t(e){a(this,t),this.component=e,this.row_status=new Map}return o(t,[{key:"_html",value:function(t){this.row_status.set(t,new Map);var e="";e+='<table id="table_'+t+'">';
var n=!0,r=!1,a=void 0;try{for(var i,o=this.component.data.get(t)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l=s._id;this.row_status.get(t).set(l,!0);var u='<tr rid="'+l+'"><td><a class="showc fa fa-fw fa-list-ul" href="#" title="hide fields"></a><a class="hidec fa fa-fw fa-minus" href="#" title="show fields"></a></td>',c="</tr>";if("contrib"==t)e+=u+"<td>"+s.title+"</td>"+c;else if("country"==t){var f=s.member_dariah?"in dariah":"";e+=u+'<td class="country_code">'+l+'<td><td class="country_name">'+s.name+'<td><td class="in_dariah">'+f+"</td>"+c}else"type"==t?e+=u+'<td class="value">'+s.value+"<td>"+c:"tadiraha"!=t&&"tadiraho"!=t&&"tadiraht"!=t||(e+=u+'<td class="value">'+s.value+"<td>"+c)}}catch(h){r=!0,a=h}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw a}}e+="</table>",this.component.container.get(t).html(e)}},{key:"getRecordIds",value:function(t){return this.row_status.get(t).keys()}},{key:"getRow",value:function(t,e){var n=this.component.container.get(t);return n.find('tr[rid="'+e+'"]')}},{key:"select",value:function(t){var e=this.component.page.getComponent("facet").implementation.distilled.get(t),n=this.row_status.get(t),r=!0,a=!1,o=void 0;try{for(var s,l=n[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=i(s.value,2),c=u[0],f=u[1];if(f!=e.has(c)){var h=this.component.container.get(t).find('tr[rid="'+c+'"]');f?h.hide():h.show(),n.set(c,!f)}}}catch(d){a=!0,o=d}finally{try{!r&&l["return"]&&l["return"]()}finally{if(a)throw o}}}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){this._html(t)}},{key:"wire",value:function(t){var e=this.component.container.get(t).find(".showc");e.hide()}},{key:"work",value:function(t){}}]),t}());n["default"]=l},{"./generic.js":7}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}var a=t("./page"),i=r(a);$(function(){(new i["default"]).work()})},{"./page":12}],11:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=Symbol(),o=Symbol(),s=Symbol(),l=Symbol(),u=function(){function t(e,n){var a=this;r(this,t),this[i]=$("#"+e),this[o]=$("#trash_"+e),this[s]=this[o].closest("p"),this[o].click(function(t){t.preventDefault(),a.clear()}),this._hide(),this[l]=n}return a(t,[{key:"_hide",value:function(){this[i].hide(),this[s].hide()}},{key:"_show",value:function(){this[i].show(),""!=this[i].html()&&this[s].show()}},{key:"clear",value:function(){this[i].html(""),void 0!=this[l]&&this[l](),this._hide()}},{key:"msg",value:function(t,e){void 0==e&&(e="info");var n=this[i].html();this[i].html(n+'<p class="'+e+'">'+t+"</p>"),this._show()}}]),t}();n["default"]=u},{}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var l=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t("./generic.js"),f=(a(c),t("./viewstate")),h=r(f),d=t("./share"),v=r(d),p=t("./ctype"),y=r(p),_=t("./tadiraho"),m=r(_),g=t("./tadiraha"),w=r(g),b=t("./tadiraht"),S=r(b),k=t("./eumap"),x=r(k),M=t("./filter"),j=r(M),O=t("./facet"),C=r(O),P=t("./list"),T=r(P),E=t("./item"),A=r(E),D=t("./control"),R=r(D),H=t("./components"),I=r(H),z=t("./skeleton"),V=r(z),q=Symbol(),F=function(t){function e(){i(this,e);var t=o(this,Object.getPrototypeOf(e).call(this));t.name="page",t.state=new h["default"](t);var n=t.state.getValues("list"),r=new Set(["contrib"]),a=new Set([""]);t._component_specs=new Map([["share",{dest:"body",variants:a,fetch_url:null,varpfx:null,specific:v["default"]}],["control",{dest:"left",variants:n,fetch_url:null,varpfx:null,specific:R["default"]}],["list",{dest:"middle",variants:n,fetch_url:"list",varpfx:null,specific:T["default"]}],["item",{dest:"list",variants:n,fetch_url:"item",varpfx:null,specific:A["default"]}],["facet",{dest:"control",variants:n,fetch_url:null,varpfx:null,specific:C["default"]}],["filter",{dest:"facet",variants:n,fetch_url:null,varpfx:"flt",specific:j["default"]}],["eumap",{dest:"facet",variants:r,fetch_url:"country",varpfx:"rel",specific:x["default"]}],["ctype",{dest:"facet",variants:r,fetch_url:"type",varpfx:"rel",specific:y["default"]}],["tadiraha",{dest:"facet",variants:r,fetch_url:"tadiraha",varpfx:"rel",specific:w["default"]}],["tadiraho",{dest:"facet",variants:r,fetch_url:"tadiraho",varpfx:"rel",specific:m["default"]}],["tadiraht",{dest:"facet",variants:r,fetch_url:"tadiraht",varpfx:"rel",specific:S["default"]}]]),t[q]=new Set(["item"]),t.ignore=new Set([]),t.components=new Map;var s=!0,u=!1,c=void 0;try{for(var f,d=t._component_specs[Symbol.iterator]();!(s=(f=d.next()).done);s=!0){var p=l(f.value,2),_=p[0],g=p[1];if(!t.ignore.has(_)){g.by_id=t[q].has(_);var b=new I["default"](_,g,t);b.up=null,b.children=new Map,b.item_comp=null,t.components.set(_,b)}}}catch(k){u=!0,c=k}finally{try{!s&&d["return"]&&d["return"]()}finally{if(u)throw c}}var M=!0,O=!1,P=void 0;try{for(var $,E=t.components[Symbol.iterator]();!(M=($=E.next()).done);M=!0){var D=l($.value,2),_=D[0],H=D[1],z=t._component_specs.get(_).dest;if(t.components.has(z)){var V=t.components.get(z);H.up=V,V.children.set(_,H),t[q].has(_)&&(V.item_comp=_)}}}catch(k){O=!0,P=k}finally{try{!M&&E["return"]&&E["return"]()}finally{if(O)throw P}}return t.resolveTiming(),t._setHeight(80),History.Adapter.bind(window,"statechange",t.state.work()),t}return s(e,t),u(e,[{key:"_setHeight",value:function(t){var e=window.innerHeight-t+"px",n=!0,r=!1,a=void 0;try{for(var i,o=new Set(["middle","left","right"])[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;$("#"+s).css("height",e)}}catch(l){r=!0,a=l}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw a}}}},{key:"getComponent",value:function(t){return this.components.get(t)}},{key:"getContainer",value:function(t,e){if(this.components.has(t))return this.components.get(t).container;var n=new Map,r="body"==t?$("body"):$("#"+t),a=!0,i=!1,o=void 0;try{for(var s,l=e[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;n.set(u,r)}}catch(c){i=!0,o=c}finally{try{!a&&l["return"]&&l["return"]()}finally{if(i)throw o}}return n}},{key:"getBefore",value:function(t,e){var n=[],r=t+"-"+e,a=!0,i=!1,o=void 0;try{for(var s,l=(this._timing.get(r)||new Set)[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;n.push(u.split("-"))}}catch(c){i=!0,o=c}finally{try{!a&&l["return"]&&l["return"]()}finally{if(i)throw o}}return n}},{key:"work",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=this._tasks[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value,o=i.split("-"),s=l(o,2),u=s[0],c=s[1],f=this.getComponent(u),h=!0,d=!1,v=void 0;try{for(var p,y=f.variants[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){var _=p.value;f[c](_)}}catch(m){d=!0,v=m}finally{try{!h&&y["return"]&&y["return"]()}finally{if(d)throw v}}}}catch(m){e=!0,n=m}finally{try{!t&&a["return"]&&a["return"]()}finally{if(e)throw n}}}}]),e}(V["default"]);n["default"]=F},{"./components":1,"./control":2,"./ctype":3,"./eumap":4,"./facet":5,"./filter":6,"./generic.js":7,"./item":8,"./list":9,"./share":14,"./skeleton":15,"./tadiraha":16,"./tadiraho":17,"./tadiraht":18,"./viewstate":19}],13:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t("./generic.js"),l=r(s),u=Symbol(),c=Symbol(),f=Symbol(),h=Symbol(),d=Symbol(),v=Symbol(),p=function(){function t(e,n,r,i,o){a(this,t),this.component=e,this.distilled=new Map,this[u]=new Map,this[c]=new Map,this.related_state=new Map,this.changed=new Map,this[f]=new Map,this.statistics=new Map,this.related_values_list=new Map,this.related_values_index=new Map,this.related_values_all=new Map,this.no_values={value:"-",name:"-none"},this.typ=n,this.state_var_pref=this.component.specs.varpfx+"_"+this.typ+"_",this[h]=r||2,this[d]=i||14,this[v]=o||6}return o(t,[{key:"_html",value:function(t){var e=this.component.state.showState("list",this.typ,"sg"),n=this.component.state.showState("list",this.typ,"pl"),r="";r+=this._preHtml(t),r+='\n<div>\n    <p class="dctrl"><span fct="'+this.component.name+"-"+t+'"></span> By '+e+'</p>\n    <p class="all"><span rv="_all" class="stats"></span> <a rv="_all" href="#" class="facet_single_all">all '+n+'</a></p>\n    <table class="value_list" id="list-'+this.typ+"-vals_"+t+'">\n        <tr>\n';var a=this.related_values_list.get(t),o=this.related_values_index.get(t),s=!0,u=!1,c=void 0;try{for(var f,p=a.entries()[Symbol.iterator]();!(s=(f=p.next()).done);s=!0){var y=i(f.value,2),_=y[0],m=y[1];_%this[h]==0&&_>0&&_<a.length&&(r+="</tr><tr>");var g=o.get(m);r+='\n            <td><span rv="'+m+'" class="stats"></span></td>\n            <td><a rv="'+m+'" href="#" class="facet_single">'+l.escapeHTML(g)+"</a></td>\n            "}}catch(w){u=!0,c=w}finally{try{!s&&p["return"]&&p["return"]()}finally{if(u)throw c}}r+='\n        </tr>\n    </table>\n    <p class="value_list2" id="list2-'+this.typ+"-vals_"+t+'">\n';var b=!0,S=!1,k=void 0;try{for(var x,M=a.entries()[Symbol.iterator]();!(b=(x=M.next()).done);b=!0){var j=i(x.value,2),_=j[0],m=j[1],O=this.related_values_index.get(t).get(m),C=l.escapeHTML(l.compact(this[d],this[v],O));r+='<a href="#" rv="'+m+'" class="passive_small" title="'+l.escapeHTML(O)+'">'+C+"</a> "}}catch(w){S=!0,k=w}finally{try{!b&&M["return"]&&M["return"]()}finally{if(S)throw k}}r+="\n    </p>\n</div>",this.component.container.get(t).html(r)}},{key:"_dressup",value:function(t){var e=this.component.container.get(t);this[u].set(t,e.find("#list-"+this.typ+"-vals_"+t)),this[c].set(t,e.find("#list2-"+this.typ+"-vals_"+t));var n=this;this[u].get(t).find(".facet_single").click(function(r){r.preventDefault();var a=$(this).attr("rv"),i=l.from_str(n.component.state.getState(n.state_var_pref+t));i.has(a)?i["delete"](a):i.add(a),n.component.state.setState(n.state_var_pref+t,l.to_str(i)),e.find(".last_handled").removeClass("last_handled"),$(this).addClass("last_handled")}),this[c].get(t).find(".passive_small").click(function(r){r.preventDefault();var a=$(this).attr("rv"),i=l.from_str(n.component.state.getState(n.state_var_pref+t));i.has(a)?i["delete"](a):i.add(a),n.component.state.setState(n.state_var_pref+t,l.to_str(i)),$(this).closest("div").find(".morec").click();var o=n[u].get(t).find('a[rv="'+a+'"]');e.find(".last_handled").removeClass("last_handled"),o.addClass("last_handled"),$("#left")[0].scrollTop=50,o[0].scrollIntoView({behavior:"smooth",alignToTop:"true"})}),this[f].set(t,this.component.container.get(t).find('[rv="_all"]')),this[f].get(t).click(function(e){e.preventDefault();var r=$(this).hasClass("ison");r?n.component.state.setState(n.state_var_pref+t,""):n.component.state.setState(n.state_var_pref+t,l.to_str(n.related_values_all.get(t)))})}},{key:"_setFacet",value:function(t){var e=!0,n=!0,r=!1,a=void 0;try{for(var i,o=this.related_values_index.get(t).keys()[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value,l=this[u].get(t).find('[rv="'+s+'"]'),h=this[c].get(t).find('[rv="'+s+'"]');this.related_state.get(t).has(s)?(l.addClass("ison"),h.addClass("ison")):(l.removeClass("ison"),h.removeClass("ison"),e=!1)}}catch(d){r=!0,a=d}finally{try{!n&&o["return"]&&o["return"]()}finally{if(r)throw a}}e?this[f].get(t).addClass("ison"):this[f].get(t).removeClass("ison")}},{key:"stats",value:function(t){this.statistics.set(t,new Map);var e=this.statistics.get(t),n=!0,r=!1,a=void 0;try{for(var o,s=this.related_values_index.get(t).keys()[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value;e.set(l,0)}}catch(u){r=!0,a=u}finally{try{!n&&s["return"]&&s["return"]()}finally{if(r)throw a}}var c=this.component.related_info.get(t),f=!0,h=!1,d=void 0;try{for(var v,p=this.distilled.get(t)[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value,_=c.has(y)?c.get(y):new Set;if(_.size){var m=!0,g=!1,w=void 0;try{for(var b,S=_[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var k=b.value;e.set(k,e.get(k)+1)}}catch(u){g=!0,w=u}finally{try{!m&&S["return"]&&S["return"]()}finally{if(g)throw w}}}else{var x=this.no_values.value;e.set(x,e.get(x)+1)}}}catch(u){h=!0,d=u}finally{try{!f&&p["return"]&&p["return"]()}finally{if(h)throw d}}var M=!0,j=!1,O=void 0;try{for(var C,P=e[Symbol.iterator]();!(M=(C=P.next()).done);M=!0){var T=i(C.value,2),$=T[0],E=T[1];this.component.container.get(t).find('span[rv="'+$+'"].stats').html(E)}}catch(u){j=!0,O=u}finally{try{!M&&P["return"]&&P["return"]()}finally{if(j)throw O}}this.component.container.get(t).find('span[rv="_all"].stats').html(this.distilled.get(t).size),this._myStats(t)}},{key:"v",value:function(t,e){var n=this.component.related_info.get(t),r=this.related_state.get(t),a=n.has(e)?n.get(e):new Set;if(a.size){var i=!0,o=!1,s=void 0;try{for(var l,u=a[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value;if(r.has(c))return!0}}catch(f){o=!0,s=f}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw s}}}else if(r.has(this.no_values.value))return!0;return!1}},{key:"show",value:function(t){return this.component.state.getState("list")==t}},{key:"weld",value:function(t){this.related_values_list.set(t,[]),this.related_values_index.set(t,new Map),this.related_values_all.set(t,new Set),this._plainWeld(t),this._myWeld(t),this.related_values_list.get(t).push(this.no_values.value),this.related_values_index.get(t).set(this.no_values.value,this.no_values.name),this.related_values_all.get(t).add(this.no_values.value),this.related_state.set(t,new Set),this.changed.set(t,!0),this._html(t)}},{key:"wire",value:function(t){this._myDressup(t),this._dressup(t)}},{key:"work",value:function(t){var e=this.related_state.get(t),n=l.from_str(this.component.state.getState(this.state_var_pref+t));this.changed.set(t,!l.set_equal(e,n)),this.changed.get(t)&&(this.related_state.set(t,n),this._mySetFacet(t),this._setFacet(t))}},{key:"_plainWeld",value:function(t){var e=this,n=this.component.related_values.get(t),r=!0,a=!1,i=void 0;try{for(var o,s=n[Symbol.iterator]();!(r=(o=s.next()).done);r=!0){var l=o.value,u=l._id,c=l.value;this.related_values_list.get(t).push(u),this.related_values_index.get(t).set(u,c),this.related_values_all.get(t).add(u)}}catch(f){a=!0,i=f}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}this.related_values_list.get(t).sort(function(t,n){return e.related_values_index.get(t)<e.related_values_index.get(n)?-1:e.related_values_index.get(t)>e.related_values_index.get(n)?1:0})}},{key:"_myWeld",value:function(t){}},{key:"_preHtml",value:function(t){return""}},{key:"_myDressup",value:function(t){}},{key:"_mySetFacet",value:function(t){}},{key:"_myStats",value:function(t){}}]),t}();n["default"]=p},{"./generic.js":7}],14:[function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t("./generic.js"),s=r(o),l=function(){function t(e){a(this,t),this.component=e}return i(t,[{key:"show",value:function(t){return!0}},{key:"weld",value:function(t){var e='\n<p id="citeh">Cite</p>\n<table align="center">\n    <tr>\n        <td class="clip_pv clr">\n            <a lnk="" href="#" id="clip_pv_md" title="link to page content and appearance (markdown)" class="ctrl fa fa-level-down fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_ht" title="link to page content and appearance (html)" class="ctrl fa fa-external-link-square fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_htc" title="link to page content (html)" class="ctrl fa fa-external-link fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_cn" title="copy page content" class="ctrl fa fa-file-text-o fa-lg fa-fw"></a>\n        </td>\n    </tr>\n    <tr>\n        <th class="clip_pv" width="60px">page view</th>\n    </tr>\n    <tr class="citexpl">\n        <td class="clip_pv"><span id="xc_pv" class="ctrl fa fa-chevron-right fa-fw"></span><span id="x_pv" class="detail">share link to this page with or without view settings.</span></td>\n    </tr>\n</table>\n<p id="cdiagpub"></p>\n<p id="cdiagsts"></p>\n';this.component.container.get(t).html(e)}},{key:"wire",value:function(t){var e=this,n=this.component.container.get(t),r=$("#self_link");r.hide(),n.addClass("socialdrawer"),n.find(".detail").hide(),n.find("#clip_pv_md,#clip_pv_ht,#clip_pv_htc,#clip_pv_nl").click(function(t){t.preventDefault(),window.prompt("Press <Cmd-C> and then <Enter> to copy link on clipboard",$(this).attr("lnk"))}),n.find("#clip_pv_cn").click(function(t){t.preventDefault();var n="middle",a=app_url_cite+e.component.state.getVars(!0);r.show(),r.attr("href",a),s.selectText(n)}),n.find("#xc_pv").click(function(t){t.preventDefault(),s.toggleDetail($(this),$("#x_pv"))}),n.click(function(t){t.preventDefault();var n=app_url_cite+e.component.state.getVars(!0),r=app_url_cite+e.component.state.getVars(!1);$("#citeh").hide(),$("#cdiagpub").html(""),$("#cdiagsts").html(""),$(".clip_pv.clr,#cdiagpub,#cdiagsts").removeClass("error warning good special");var a=s.escapeHTML($("title").text());$("#clip_pv_md").attr("lnk","[${pvtitle}](${app_url_raw})"),$("#clip_pv_ht").attr("lnk",n),$("#clip_pv_htc").attr("lnk",r),$("#clip_pv_cn").attr("lnk",n),$("#clip_pv_cn").attr("tit",a),$(this).animate({height:"100px",width:"200px",opacity:.95},300)}),n.mouseleave(function(){return r.hide(),$("#citeh").show(),n.animate({height:"20px",width:"40px",opacity:.7},300),!1})}},{key:"work",value:function(t){}}]),t}();n["default"]=l},{"./generic.js":7}],15:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){r(this,t),this.stages=new Map([["weld",!0],["wire",!0],["work",!1]]),this.stages_prev=new Map([["wire","weld"],["work","wire"]]),this.before=new Map([["weld",new Map([["item",new Set(["list"])],["facet",new Set(["control","list"])],["filter",new Set(["facet"])],["eumap",new Set(["facet","filter"])],["ctype",new Set(["facet","eumap"])],["tadiraha",new Set(["facet","ctype"])],["tadiraho",new Set(["facet","tadiraha"])],["tadiraht",new Set(["facet","tadiraho"])],["share",new Set(["facet","list"])]])],["wire",new Map([["item",new Set(["list"])],["facet",new Set(["filter","eumap","ctype","tadiraha","tadiraho","tadiraht"])],["filter",new Set(["list"])],["eumap",new Set(["list"])],["ctype",new Set(["list"])],["tadiraha",new Set(["list"])],["tadiraho",new Set(["list"])],["tadiraht",new Set(["list"])]])],["work",new Map([["facet",new Set(["list","filter","eumap","ctype","tadiraha","tadiraho","tadiraht"])],["item",new Set(["facet"])]])]])}return i(t,[{key:"resolveTiming",value:function(){function t(t,e){n.has(t)||n.set(t,new Set),r.has(e)||r.set(e,new Set),n.get(t).add(e),r.get(e).add(t)}var e=[],n=new Map,r=new Map,i=!0,o=!1,s=void 0;try{for(var l,u=this.components.keys()[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var c=l.value,f=!0,h=!1,d=void 0;try{for(var v,p=this.stages.keys()[Symbol.iterator]();!(f=(v=p.next()).done);f=!0){var y=v.value;e.push(c+"-"+y)}}catch(_){h=!0,d=_}finally{try{!f&&p["return"]&&p["return"]()}finally{if(h)throw d}}}}catch(_){o=!0,s=_}finally{try{!i&&u["return"]&&u["return"]()}finally{if(o)throw s}}var m=!0,g=!1,w=void 0;try{for(var b,S=this.stages_prev[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var k=a(b.value,2),x=k[0],M=k[1],j=!0,O=!1,C=void 0;try{for(var P,T=this.components.keys()[Symbol.iterator]();!(j=(P=T.next()).done);j=!0){var $=P.value;t($+"-"+M,$+"-"+x)}}catch(_){O=!0,C=_}finally{try{!j&&T["return"]&&T["return"]()}finally{if(O)throw C}}}}catch(_){g=!0,w=_}finally{try{!m&&S["return"]&&S["return"]()}finally{if(g)throw w}}var E=!0,A=!1,D=void 0;try{for(var R,H=this.before[Symbol.iterator]();!(E=(R=H.next()).done);E=!0){var I=a(R.value,2),z=I[0],V=I[1],q=!0,F=!1,L=void 0;try{for(var B,W=V[Symbol.iterator]();!(q=(B=W.next()).done);q=!0){var G=a(B.value,2),N=G[0],U=G[1];if(!this.ignore.has(N)){var K=!0,Y=!1,J=void 0;try{for(var Q,X=U.keys()[Symbol.iterator]();!(K=(Q=X.next()).done);K=!0){var Z=Q.value;this.ignore.has(Z)||t(Z+"-"+z,N+"-"+z)}}catch(_){Y=!0,J=_}finally{try{!K&&X["return"]&&X["return"]()}finally{if(Y)throw J}}}}}catch(_){F=!0,L=_}finally{try{!q&&W["return"]&&W["return"]()}finally{if(F)throw L}}}}catch(_){A=!0,D=_}finally{try{!E&&H["return"]&&H["return"]()}finally{if(A)throw D}}for(var tt=0,et=[],nt=new Set;tt<=e.length;){if(et.push(new Set),0==tt){var rt=!0,at=!1,it=void 0;try{for(var ot,st=e[Symbol.iterator]();!(rt=(ot=st.next()).done);rt=!0){var lt=ot.value;r.has(lt)||et[tt].add(lt)}}catch(_){at=!0,it=_}finally{try{!rt&&st["return"]&&st["return"]()}finally{if(at)throw it}}}else{var ut=!0,ct=!1,ft=void 0;try{for(var ht,dt=nt[Symbol.iterator]();!(ut=(ht=dt.next()).done);ut=!0){var vt=ht.value;if(n.has(vt)){var pt=!0,yt=!1,_t=void 0;try{for(var mt,gt=n.get(vt)[Symbol.iterator]();!(pt=(mt=gt.next()).done);pt=!0){var wt=mt.value;if(!nt.has(wt)){var bt=!0,St=!0,kt=!1,xt=void 0;try{for(var Mt,jt=r.get(wt)[Symbol.iterator]();!(St=(Mt=jt.next()).done);St=!0){var Ot=Mt.value;if(!nt.has(Ot)){bt=!1;break}}}catch(_){kt=!0,xt=_}finally{try{!St&&jt["return"]&&jt["return"]()}finally{if(kt)throw xt}}bt&&et[tt].add(wt)}}}catch(_){yt=!0,_t=_}finally{try{!pt&&gt["return"]&&gt["return"]()}finally{if(yt)throw _t}}}}}catch(_){ct=!0,ft=_}finally{try{!ut&&dt["return"]&&dt["return"]()}finally{if(ct)throw ft}}}if(0==et[tt].size)break;var Ct=!0,Pt=!1,Tt=void 0;try{for(var $t,Et=et[tt][Symbol.iterator]();!(Ct=($t=Et.next()).done);Ct=!0){var At=$t.value;nt.add(At)}}catch(_){Pt=!0,Tt=_}finally{try{!Ct&&Et["return"]&&Et["return"]()}finally{if(Pt)throw Tt}}tt++}if(this._tasks=[],this._timing=new Map,nt.size!=e.length){var Dt=[],Rt=!0,Ht=!1,It=void 0;try{for(var zt,Vt=e[Symbol.iterator]();!(Rt=(zt=Vt.next()).done);Rt=!0){var qt=zt.value;nt.has(qt)||Dt.push(qt)}}catch(_){Ht=!0,It=_}finally{try{!Rt&&Vt["return"]&&Vt["return"]()}finally{if(Ht)throw It}}console.log("Circular timing constraints detected",Dt)}else{var Ft=!0,Lt=!1,Bt=void 0;try{for(var Wt,Gt=et[Symbol.iterator]();!(Ft=(Wt=Gt.next()).done);Ft=!0){var Nt=Wt.value,Ut=!0,Kt=!1,Yt=void 0;try{for(var Jt,Qt=Nt[Symbol.iterator]();!(Ut=(Jt=Qt.next()).done);Ut=!0){var Xt=Jt.value;this._tasks.push(Xt)}}catch(_){Kt=!0,Yt=_}finally{try{!Ut&&Qt["return"]&&Qt["return"]()}finally{if(Kt)throw Yt}}}}catch(_){Lt=!0,Bt=_}finally{try{!Ft&&Gt["return"]&&Gt["return"]()}finally{if(Lt)throw Bt}}this._timing=r,console.log("Timing resolved",this._tasks)}}}]),t}();n["default"]=o},{}],16:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=t("./relative"),l=r(s),u=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t,"tadiraha"))}return o(e,t),e}(l["default"]);n["default"]=u},{"./relative":13}],17:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=t("./relative"),l=r(s),u=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t,"tadiraho"))}return o(e,t),e}(l["default"]);n["default"]=u},{"./relative":13}],18:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(n,"__esModule",{value:!0});var s=t("./relative"),l=r(s),u=function(t){function e(t){return a(this,e),i(this,Object.getPrototypeOf(e).call(this,t,"tadiraht",1,30))}return o(e,t),e}(l["default"]);n["default"]=u},{"./relative":13}],19:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}function a(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e["default"]=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){var n=[],r=!0,a=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);r=!0);}catch(l){a=!0,i=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(a)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),l=t("./generic.js"),u=a(l),c=t("./message"),f=r(c),h=Symbol(),d=Symbol(),v=Symbol(),p=Symbol(),y=function(){function t(e){i(this,t),this[h]={vars:new Set(["list","flt_contrib","flt_country","flt_type","flt_tadiraha","flt_tadiraho","flt_tadiraht","rel_country_contrib","rel_type_contrib","rel_tadiraha_contrib","rel_tadiraho_contrib","rel_tadiraht_contrib","item_contrib","item_country","sort"]),vals:new Map([["list",new Set(["contrib","country","type","tadiraha","tadiraho","tadiraht"])],["sort",new Map([["v",!0],["x",!1]])]]),default_value:new Map([["list","contrib"],["sort",!0]]),typ:new Map([["sort","boolean"]]),url:new Set(["list","item_contrib","item_country"]),showas:new Map([["list",new Map([["contrib",{sg:"contribution",pl:"contributions"}],["country",{sg:"country",pl:"countries"}],["type",{sg:"type",pl:"types"}],["tadiraha",{sg:"tadirah activity",pl:"tadirah activities"}],["tadiraho",{sg:"tadirah object",pl:"tadirah objects"}],["tadiraht",{sg:"tadirah technique",pl:"tadirah techniques"}]])]])},this[d]={},this[v]=new Map,this.page=e,this[p]=new f["default"]("msg_page"),this._compile_specs(),this._getInitstate(),this._addHistory()}return s(t,[{key:"_compile_specs",value:function(){var t=this[h],e=!0,n=!1,r=void 0;try{for(var a,i=t.vars[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value,s={};s.vals=t.vals.get(o)||null,s.default_value=t.default_value.get(o)||"",s.typ=t.typ.get(o)||"string",s.url=t.url.has(o),s.showas=t.showas.get(o)||{},this[v].set(o,s)}}catch(l){n=!0,r=l}finally{try{!e&&i["return"]&&i["return"]()}finally{if(n)throw r}}}},{key:"_validate",value:function(t,e){var n=void 0;if(this[v].has(t)){var r=this[v].get(t);"string"==r.typ?r.vals?r.vals.has(e)?n=e:(n=r.default_value,this[p].msg("illegal string value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")):n=e:"integer"==r.typ?(/^(\-|\+)?[0-9]+$/.test(e)?n=Number(e):(n=r.default_value,this[p].msg("not a number value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")),n<r.limits.min&&this[p].msg("number to small for "+t+': "'+n+'" is replaced by "'+r.limits.min+'"',"warning"),n>r.limits.max&&this[p].msg("number to big for "+t+': "'+n+'" is replaced by "'+r.limits.max+'"',"warning")):"boolean"==r.typ&&(r.vals.has(e)?n=r.vals.get(e):(n=r.default_value,
this[p].msg("illegal boolean value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")))}else n=null,this[p].msg("unknown parameter: "+t+"="+e,"warning");return n}},{key:"getVars",value:function(t){var e=[];for(var n in this[d]){var r=this[d][n],a=this[v].get(n);if(t||a.url)if("string"==a.typ||"integer"==a.typ)e.push(n+"="+r);else if("boolean"==a.typ){var i=!0,s=!1,l=void 0;try{for(var u,c=a.vals[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var f=o(u.value,2),h=f[0],p=f[1];p==r&&e.push(n+"="+h)}}catch(y){s=!0,l=y}finally{try{!i&&c["return"]&&c["return"]()}finally{if(s)throw l}}}}return e.join("&")}},{key:"_getInitstate",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,a=u.request_vars[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=o(r.value,2),s=i[0],l=i[1];this[v].has(s)||this[p].msg("unknown parameter: "+s+"="+l,"warning")}}catch(c){e=!0,n=c}finally{try{!t&&a["return"]&&a["return"]()}finally{if(e)throw n}}var f=!0,h=!1,y=void 0;try{for(var _,m=this[v][Symbol.iterator]();!(f=(_=m.next()).done);f=!0){var g=o(_.value,2),s=g[0],w=g[1],l=null;if(u.request_vars.has(s)){var b=u.request_vars.get(s);l=this._validate(s,b),u.localstorage_vars.set(s,l)}else u.localstorage_vars.isSet(s)?l=u.localstorage_vars.get(s):(l=w.default_value,u.localstorage_vars.set(s,l));this[d][s]=l}}catch(c){h=!0,y=c}finally{try{!f&&m["return"]&&m["return"]()}finally{if(h)throw y}}}},{key:"_addHistory",value:function(t,e){var n="DARIAH contribution tool",r=app_url+"?"+this.getVars(!1);History.pushState(this[d],n,r)}},{key:"setState",value:function(t,e){this[d][t]=e,u.localstorage_vars.set(t,e),this._addHistory()}},{key:"getState",value:function(t){return this[d][t]}},{key:"getValues",value:function(t){return this[v].get(t).vals}},{key:"showState",value:function(t,e,n){var r=e,a=this[v].get(t).showas;return a.has(e)&&(r=a.get(e)[n]),r}},{key:"work",value:function(){return function(){var t=History.getState();t&&t.data&&(this[d]=t.data,this.page.work())}.bind(this)}}]),t}();n["default"]=y},{"./generic.js":7,"./message":11}]},{},[10]);
//# sourceMappingURL=../js/app.min.js.map
