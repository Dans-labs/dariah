function dU(f,cQ,G){this.f=f;this.G=G;this.cQ=cQ;this.cg=cQ.cg;this.cX={};for(var b in this.cg){this.cX[b]={};for(var N in this.G.dM){this.cX[b][N]=true}}this.z={};this.m={};this.j=this.G.j;this.F={};this.E={};this.cc=new cQ.I(this)};dU.prototype={gk:function(b,s){return !this.cX[b][s].state ||(this.cX[b][s].state()==`rejected`)},gE:function(b,s,dI){var gh=this[dI].bind(this,b);var hA=this.G.gZ(this.f,s);var gt=[];hA.forEach(function(dO){var fr=dO[0];var fs=dO[1];var gr=this.G.cK(fr);if(gr.cL(b)){gt.push(gr.cX[b][fs])}},this);this.cX[b][s]=$.when.apply($,gt).then(gh)},cv:function(b,s,dI){if(s in this.G.dM){if(!this.G.dM[s]|| this.gk(b,s)){this.gE(b,s,dI)}}},cL:function(b){return(b in this.cg)},ff:function(b,hm){if(this.cL(b)){if(b in this.m){if(hm){this.m[b].show()}else{this.m[b].hide()}}}},gG:function(b){var cw=url_tpl.replace(/_c_/,`data`).replace(/_f_/,`${this.cQ.cw}_${b}`)+`.json`;this.z[b].z(`fetching data ...`);var hw=this.gL.bind(this,b);return $.ajax({type:`POST`,url:cw,contentType:`application/json; charset=utf-8`,dataType:`json`}).then(function(cM){hw(cM)})},gL:function(b,cM){this.z[b].fX();cM.msgs.forEach(function(hh){this.z[b].z(hh)},this);if(cM.good){this.F[b]=cM.data;if(`relvals` in cM){this.E[b]=cM.relvals}}this.cc.Y(b)},fS:function(b){this.gF=this.G.hb(this.cQ.cJ,this.cg);this.m[b]=$(`#${this.f}_${b}`);if(this.m[b].length==0){var dh=this.gF[b];dh.append(`<div id="msg_${this.f}_${b}"></div>`);dh.append(`<div id="${this.f}_${b}"></div>`);this.m[b]=$(`#${this.f}_${b}`)}this.z[b]=new dy(`msg_${this.f}_${b}`);if(this.cQ.cw !=null){return this.gG(b)}else{this.cc.Y(b)}},fT:function(b){this.cc.J(b)},fU:function(b){this.ff(b,true);this.cc.k(b)},k:function(b){if(this.cL(b)&& this.cc.O(b)){this.cv(b,`Y`,`fS`);this.cv(b,`J`,`fT`);this.cv(b,`k`,`fU`)}else{this.ff(b,false)}},Y:function(b){if(this.cL(b)&& this.cc.O(b)){this.cv(b,`Y`,`fS`)}},J:function(b){if(this.cL(b)&& this.cc.O(b)){this.cv(b,`J`,`fT`)}},k:function(b){if(this.cL(b)&& this.cc.O(b)){this.cv(b,`k`,`fU`)}else{this.ff(b,false)}}};function dV(c){this.c=c;this.dw={};this.dE={}};dV.prototype={cb:function(b){this.c.m[b].html(`<a class="•fB" href="#">${this.c.j.cP('list', b, 'cO')}</a> `)},cG:function(b){this.dE[b].click(function(p){p.preventDefault();this.c.j.cf(`list`,b)}.bind(this))},gJ:function(b){return this.c.j.W(`list`)==b},O:function(b){return true},Y:function(b){this.cb(b);this.dw[b]=this.c.m[b];this.dw[b].addClass(`•fA`);this.dE[b]=this.c.m[b].find(`a`)},J:function(b){this.cG(b)},k:function(b){if(this.gJ(b)){this.dE[b].addClass(`•t`);this.dw[b].addClass(`•t`)}else{this.dE[b].removeClass(`•t`);this.dw[b].removeClass(`•t`)}}};function fF(c){this.c=c;this.x={};this.ck={};this.cl={};this.S={};this.v={};this.K={};this.w={};this.U={};this.T={};this.r={y:`-`,f:`-none`};this.n=`type`};fF.prototype={cb:function(b){var dg=2;var dv=this.c.j.cP(`list`,this.n,`cO`);var dR=this.c.j.cP(`list`,this.n,`dq`);var l=`<div><p class="•dc">By ${dv}</p>`;l +=`<p class="•fz"><span rv="_all" class="•R"></span> <a rv="_all" href="#" class="•cS">all ${dR}</a></p>
<table class="•fE" id="list-${this.n}-vals_${b}"><tr>`;this.K[b].forEach(function(d,g,C){if((g % dg==0)&&(g > 0)&&(g < C.length)){l +=`</tr><tr>`}l +=`<td><span rv="${d}" class="•R"></span></td><td><a rv="${d}" href="#" class="•cE">${this.w[b][d]}</a></td>`},this);l +=`</tr></table></div>`;this.c.m[b].html(l)},cG:function(b){var L=this.c.m[b];this.ck[b]=L.find(`#list-${this.n}-vals_${b}`);var h=this;this.ck[b].find(`.•cE`).click(function(p){p.preventDefault();var d=$(this).attr(`rv`);var H=h.cj(b,h.c.j.W(`rel_${h.n}_${b}`));H[d]=(d in H)?!H[d]:true;h.c.j.cf(`rel_${h.n}_${b}`,h.cm(H))});this.S[b]=this.c.m[b].find(`[rv="_all"]`);this.S[b].click(function(p){p.preventDefault();var dn=$(this).hasClass(`•t`);if(dn){h.c.j.cf(`rel_${h.n}_${b}`,h.cm(h.T[b]))}else{h.c.j.cf(`rel_${h.n}_${b}`,h.cm(h.U[b]))}})},cH:function(b,E){var cA=true;for(var d in this.w[b]){var cq=this.ck[b].find(`[rv="${d}"]`);if(d in E && E[d]){cq.addClass(`•t`)}else{cq.removeClass(`•t`,cq);cA=false}}if(cA){this.S[b].addClass(`•t`)}else{this.S[b].removeClass(`•t`)}},cm:function(A){var C=[];for(var Z in A){if(A[Z]){C.push(Z)}}return C.join(',')},cj:function(b,N){var A={};if(N !==null && N !=undefined && N !=''){var C=N.split(',');C.forEach(function(ch){A[ch]=true})}for(var d in this.w[b]){if(!(d in A)){A[d]=false}}return A},dN:function(b){this.v[b]={};for(var d in this.w[b]){this.v[b][d]=0}var M=this.c.F[b];for(var Z in this.x[b]){var g=this.x[b][Z];var cC=false;for(var d in M[g]){this.v[b][d]+=1;cC=true}if(!cC){this.v[b][this.r.y]+=1}}for(var d in this.v[b]){this.c.m[b].find(`span[rv="${d}"].•R`).html(this.v[b][d])}this.c.m[b].find(`span[rv="_all"].•R`).html(this.x[b].length)},ch:function(b,g){var M=this.c.F[b];var X=this.cj(b,this.cl[b]);if((g in M)&&(Object.keys(M[g]).length !=0)){for(var d in M[g]){if((d in X)&& X[d]){return true}}}else{if((this.r.y in X)&&(X[this.r.y])){return true}}return false},O:function(b){return(this.c.j.W(`list`)==b)},Y:function(b){this.K[b]=[];this.w[b]={};this.T[b]={};this.U[b]={};var E=this.c.E[b];for(var g in E){var d=E[g];this.T[b][g]=false;this.U[b][g]=true;this.K[b].push(g);this.w[b][g]=d}this.K[b].push(this.r.y);this.w[b][this.r.y]=this.r.f;this.T[b][this.r.y]=false;this.U[b][this.r.y]=true;this.K[b].sort();this.cb(b)},J:function(b){this.cG(b)},k:function(b){this.cl[b]=this.c.j.W(`rel_${this.n}_${b}`);this.cH(b,this.cj(b,this.cl[b]))}};function dW(c){this.c=c;this.x={};this.ck={};this.cl={};this.S={};this.v={};this.K={};this.w={};this.U={};this.T={};this.r={y:`-`,f:`-none`};this.n=`country`;this.dd={};this.cW={};this.dZ={};this.dC={};this.gK={CY:true}};dW.prototype={cb:function(b){var dg=2;var dv=this.c.j.cP(`list`,this.n,`cO`);var dR=this.c.j.cP(`list`,this.n,`dq`);var l=`<div><p class="•dc">By ${dv}</p>`;l +=`<div id="map-europe_${b}"></div>`;l +=`<p class="•fz"><span rv="_all" class="•R"></span> <a rv="_all" href="#" class="•cS">all ${dR}</a></p>
<table class="•fE" id="list-${this.n}-vals_${b}"><tr>`;this.K[b].forEach(function(d,g,C){if((g % dg==0)&&(g > 0)&&(g < C.length)){l +=`</tr><tr>`}l +=`<td><span rv="${d}" class="•R"></span></td><td><a rv="${d}" href="#" class="•cE">${this.w[b][d]}</a></td>`},this);l +=`</tr></table></div>`;this.c.m[b].html(l)},cG:function(b){var L=this.c.m[b];this.ck[b]=L.find(`#list-${this.n}-vals_${b}`);this.cW[b]=L.find(`#map-europe_${b}`);this.cW[b].width(`100%`);this.cW[b].height(this.cW[b].width()*0.6);this.cW[b].vectorMap({'map':`europe_mill`,backgroundColor:`#ccccff`,regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:`#008800`,'fill-opacity':0.2,stroke:`none`,'stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':1,'stroke-opacity':1},selected:{fill:`#008800`,'fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:`#bbbbbb`,'fill-opacity':1,stroke:`none`,'stroke-width':0,'stroke-opacity':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':3,'stroke-opacity':1},selected:{fill:`#dd8844`,'fill-opacity':1},selectedHover:{}},markers:this.dZ[b],series:{markers:[{values:{},scale:[0,20],normalizeFunction:`linear`,attribute:`r`,min:0,max:100}],regions:[{scale:{'hr':`#ffffff`,'hd':`#ffeedd`},attribute:`fill`,values:this.dC[b]}]},onRegionTipShow:function(p,fl,d){fl.html(`${d}: ${(d in this.v[b])?this.v[b][d]:'not in DARIAH'}`)}.bind(this),onMarkerTipShow:function(p,fl,d){fl.html(`${d}: ${(d in this.v[b])?this.v[b][d]:'not in DARIAH'}`)}.bind(this),onRegionClick:function(p,d){if(!(d in this.w[b])){p.preventDefault()}}.bind(this),onMarkerClick:function(p,d){if(!(d in this.w[b])){p.preventDefault()}}.bind(this),onRegionSelected:function(p,d,g,H){if(this.fh){this.c.j.cf(`rel_${this.n}_${b}`,this.fJ(H))}}.bind(this),onMarkerSelected:function(p,d,g,H){if(this.fh){this.c.j.cf(`rel_${this.n}_${b}`,this.fJ(H))}}.bind(this)});this.dd[b]=this.cW[b].vectorMap('get','mapObject');this.dd[b].setFocus({regions:[`GB`,`GR`]});var h=this;this.ck[b].find(`.•cE`).click(function(p){p.preventDefault();var d=$(this).attr(`rv`);var H=h.cj(b,h.c.j.W(`rel_${h.n}_${b}`));H[d]=(d in H)?!H[d]:true;h.c.j.cf(`rel_${h.n}_${b}`,h.cm(H))});this.S[b]=this.c.m[b].find(`[rv="_all"]`);this.S[b].click(function(p){p.preventDefault();var dn=$(this).hasClass(`•t`);if(dn){h.c.j.cf(`rel_${h.n}_${b}`,h.cm(h.T[b]))}else{h.c.j.cf(`rel_${h.n}_${b}`,h.cm(h.U[b]))}})},cH:function(b,dL){this.fh=false;var fp={};for(var dK in dL){if(!(dK in this.gK)&& dK !=this.r.y){fp[dK]=dL[dK]}}this.dd[b].setSelectedRegions(fp);this.dd[b].setSelectedMarkers(fp);this.fh=true;var cA=true;for(var d in this.w[b]){var cq=this.ck[b].find(`[rv="${d}"]`);if(d in dL && dL[d]){cq.addClass(`•t`)}else{cq.removeClass(`•t`);cA=false}}if(cA){this.S[b].addClass(`•t`)}else{this.S[b].removeClass(`•t`)}},fJ:function(C){return C.join(',')},cm:function(A){var C=[];for(var Z in A){if(A[Z]){C.push(Z)}}return C.join(',')},cj:function(b,N){var A={};if(N !==null && N !=undefined && N !=''){var C=N.split(',');C.forEach(function(ch){A[ch]=true})}for(var d in this.w[b]){if(!(d in A)){A[d]=false}}return A},dN:function(b){this.v[b]={};for(var d in this.w[b]){this.v[b][d]=0}var M=this.c.F[b];for(var Z in this.x[b]){var g=this.x[b][Z];var cC=false;for(var d in M[g]){this.v[b][d]+=1;cC=true}if(!cC){this.v[b][this.r.y]+=1}}for(var d in this.v[b]){this.c.m[b].find(`span[rv="${d}"].•R`).html(this.v[b][d])}var dQ=this.x[b].length;if(dQ==0){dQ=1}var gA={};for(var d in this.v[b]){if(d !=this.r.y){var gq=100 * this.v[b][d]/ dQ;gA[d]=(dQ < 10)?gq:(10*Math.sqrt(gq))}}this.dd[b].series.markers[0].setValues(gA);this.c.m[b].find(`span[rv="_all"].•R`).html(this.x[b].length)},ch:function(b,g){var M=this.c.F[b];var X=this.cj(b,this.cl[b]);if((g in M)&&(Object.keys(M[g]).length !=0)){for(var d in M[g]){if((d in X)&& X[d]){return true}}}else{if((this.r.y in X)&&(X[this.r.y])){return true}}return false},O:function(b){return(this.c.j.W(`list`)==b)},Y:function(b){this.K[b]=[];this.w[b]={};this.T[b]={};this.U[b]={};var E=this.c.E[b];this.dZ[b]={};this.dC[b]={};for(var g in E){var d=E[g];if(d[1]){this.T[b][g]=false;this.U[b][g]=true;this.K[b].push(g);this.w[b][g]=d[0];if(d.length > 3){this.dZ[b][g]={latLng:[d[2],d[3]],f:d[0]}}this.dC[b][g]='hd'}else{this.dC[b][g]='hr'}}this.K[b].push(this.r.y);this.w[b][this.r.y]=this.r.f;this.T[b][this.r.y]=false;this.U[b][this.r.y]=true;this.K[b].sort();this.cb(b)},J:function(b){this.cG(b)},k:function(b){this.cl[b]=this.c.j.W(`rel_${this.n}_${b}`);this.cH(b,this.cj(b,this.cl[b]))}};function fG(c){this.c=c;this.fO={};this.F={};this.fw={};this.x={};this.fm={}};fG.prototype={cb:function(b){var l=``;l +=`<p>Filtering <span id="fstats_${b}"></span></p>`;this.c.m[b].html(l)},O:function(b){return this.c.j.W(`list`)==b},Y:function(b){var cY=this.c.cY;this.fm[b]={};for(var cn in cY){var gY=cY[cn];if(gY.cL(b)){this.fm[b][cn]=cY[cn]}}this.cb(b)},J:function(b){var L=this.c.m[b];var hf=this.c.G.cK(`cN`).m[b];this.fO[b]=L.find(`#fstats_${b}`);this.fw[b]=hf.find(`#table_${b}`);var gX=`<a class="showc fa fa-chevron-right" href="#" title="Show details"></a><a class="hidec fa fa-chevron-down" href="#" title="Hide details"></a>`;L.addClass(`•fD`);L.find(`p.•dc`).each(function(){var hp=$(this).html();$(this).html(`${gX}&nbsp;${hp}`)});L.find(`p.•dc`).closest(`div`).find(`table,.•dx`).show();L.find(`.hidec`).show();L.find(`.showc`).hide();L.find(`.hidec`).click(function(p){p.preventDefault();var dk=$(this).closest(`p`);var fk=$(this).closest(`div`).find(`table,.•dx`);fk.hide();dk.find(`.hidec`).hide();dk.find(`.showc`).show()});L.find(`.showc`).click(function(p){p.preventDefault();var dk=$(this).closest(`p`);var fk=$(this).closest(`div`).find(`table,.•dx`);fk.show();dk.find(`.hidec`).show();dk.find(`.showc`).hide()})},k:function(b){this.fw[b].find(`tr[id]`).hide();var hk=this.c.G.cK(`cN`);var F=hk.F[b];var cB=this.fm[b];this.x[b]=[];for(var cn in cB){var D=cB[cn].cc;D.x[b]=[]}F.forEach(function(fj,g){var ch=true;var dr=null;var dj=false;for(var cn in cB){if(!dj){var D=cB[cn].cc;var gy=D.ch(b,g);if(!gy){ch=false;if(dr==null){dr=D}else{dj=true}}}}if(!dj){if(ch){this.x[b].push(g);this.fw[b].find(`tr[id="r${fj[0]}"]`).show()}if(dr !=null){dr.x[b].push(g)}else{for(var cn in cB){var D=cB[cn].cc;D.x[b].push(g)}}}},this);for(var cn in cB){var D=cB[cn].cc;D.dN(b)}this.fO[b].html(`${this.x[b].length} of ${F.length}`)}};function fH(c){this.c=c;this.fc={};this.cs={};this.dY={};this.fL={};this.dD={};this.dA={};this.fg={};this.dB={};this.x={}};fH.prototype={cb:function(b){var l=`<div><p class="•dc">By full text search</p>`;l +=`<div id="fltw_${b}">`;l +=`<p id="•hH${b}" class="•dx •cS •dT ui-dw">`;l +=`<input id="flt_${b}" class="flt"/>`;l +=`<a href="#" class="•cS fa fa-close •hI" id="clearf_${b}"></a>`;l +=`<span •dT class="•R" id="stats_${b}"></span>&nbsp;`;l +=`</p>`;l +=`<div id="autoc_${b}" style="display: none;">here ${b}</div>`;l +=`</div>`;this.c.m[b].html(l)},cH:function(b){var dP=this.c.j.W(`flt_${b}`);this.cs[b].val(dP);this.cs[b].autocomplete(`search`,dP)},gN:function(b){return function(hM,hD){this.dB[b]={};hD.content.forEach(function(hC,g){this.dB[b][hC.value]=1},this);if(!(this.fg[b])){this.c.j.cf(`flt_${b}`,this.cs[b].val())}}.bind(this)},gO:function(b){this.dA[b].click(function(p){p.preventDefault();this.cs[b].val(``);this.cs[b].autocomplete(`search`,``)}.bind(this))},dN:function(b){var fv;if(this.cs[b].val()==``){fv=``;this.dD[b].removeClass(`•t`)}else{fv=`${this.D.x[b].length} of `;this.dD[b].addClass(`•t`)}this.dD[b].html(`${fv}${this.x[b].length}`)},ch:function(b,g){return(g in this.dB[b])},O:function(b){return(this.c.j.W(`list`)==b)},Y:function(b){this.cb(b)},J:function(b){if(!this.D){this.D=this.c.G.cK(`D`).cc}var F=this.c.G.cK(`cN`).F[b];this.fc[b]=[];F.forEach(function(fj,g){this.fc[b].push({label:fj[1],value:`${g}`})},this);this.dB[b]={};this.x[b]=[];var L=this.c.m[b];var df=L.find(`#fltw_${b}`);this.cs[b]=df.find(`#flt_${b}`);this.dY[b]=df.find(`#•hH${b}`);this.fL[b]=df.find(`#autoc_${b}`);this.dD[b]=df.find(`#stats_${b}`);this.dA[b]=df.find(`#clearf_${b}`);this.cs[b].autocomplete({appendTo:this.fL[b],source:this.fc[b],response:this.gN(b),minLength:0});this.gO(b);this.fg[b]=true;this.cH(b);this.fg[b]=false},k:function(b){var dP=this.cs[b].val();if(dP==``){this.dY[b].removeClass(`•t`);this.dA[b].hide()}else{this.dY[b].addClass(`•t`);this.dA[b].show()}}};var hL=(function(){`use strict`;var gV={'&':`&amp;`,'<':`&lt;`,'>':`&gt;`};return function(fx){return fx.replace(/[&<>]/g,function(gS){return gV[gS]})}}());var gD={dJ:function(f){return this.gn()[f]},gn:function(dS){var g,dJ,gp,gv,cD;cD={};if(!dS){dS=window.location.search}if(dS.indexOf("?")===-1){return{}}gv=dS.slice(1);gp=gv.split("&");gp.forEach(function(hs,g){dJ=hs.split("=");cD[dJ[0]]=dJ[1]});return cD}};var ft=gD.gn();var hg=$.initNamespaceStorage(`req`);var dp=hg.localStorage;function dX(c){this.c=c};dX.prototype={cb:function(b){var l=``;l +=`<table id="table_${b}">`;if(b==`contrib`){this.c.F[b].forEach(function(cp){l +=`<tr id="r${cp[0]}"><td><a href="#" rid="${cp[0]}">${cp[1]}</a></td></tr>`})}else if(b==`country`){this.c.F[b].forEach(function(cp){l +=`<tr id="r${cp[0]}"><td class="•gB">${cp[0]}<td><td class="•hG">${cp[1]}<td></tr>`})}else if(b==`type`){this.c.F[b].forEach(function(cp){l +=`<tr id="r${cp[0]}"><td class="•gB">${cp[0]}<td><td class="•hG">${cp[1]}<td></tr>`})}l +=`</table>`;this.c.m[b].html(l)},O:function(b){return this.c.j.W(`list`)==b},Y:function(b){this.cb(b)},J:function(b){},k:function(b){}};$(function(){new dz().k()});function dy(dh,hn){this.cV=$(`#${dh}`);this.fQ=$(`#trash_${dh}`);this.fR=this.fQ.closest(`p`);this.fQ.click(function(p){p.preventDefault();this.fX()}.bind(this));this.fM();this.fN=hn};dy.prototype={fM:function(){this.cV.hide();this.fR.hide()},gQ:function(){this.cV.show();if(this.cV.html()!=``){this.fR.show()}},fX:function(){this.cV.html(``);if(this.fN !=undefined){this.fN()}this.fM()},z:function(fx,fn){if(fn==undefined){fn=`info`}var hj=this.cV.html();this.cV.html(`${hj}<p class="${fn}">${fx}</p>`);this.gQ()}};function dz(){this.f=`page`;this.z=new dy(`msg_${this.f}`);this.j=new fI(this);this.dM={Y:true,J:true,k:false};this.gw={J:`Y`,k:`J`};var dH=this.j.hc(`list`);var fZ={contrib:1};this.cU={gb:{cJ:`left`,cg:dH,cw:null,I:dV},cN:{cJ:`middle`,cg:dH,cw:`list`,I:dX},D:{cJ:`gb`,cg:dH,cw:null,I:fG},dm:{cJ:`D`,cg:dH,cw:null,I:fH},dl:{cJ:`D`,cg:fZ,cw:`country`,I:dW},dF:{cJ:`D`,cg:fZ,cw:`type`,I:fF}},this.cT={Y:{D:{gb:1,cN:1},dm:{D:1},dl:{D:1,dm:1},dF:{D:1,dl:1}},J:{D:{dm:1,dl:1,dF:1},dm:{cN:1},dl:{cN:1},dF:{cN:1}},k:{D:{dm:1,dl:1,dF:1}}};this.ct={};for(var f in this.cU){var c=new dU(f,this.cU[f],this);c.cY={};this.ct[f]=c}for(var f in this.cU){var gU=this.ct[f];var gd=this.cU[f].cJ;if(gd in this.ct){var hv=this.ct[gd];hv.cY[f]=gU}}for(var f in this.ct){var c=this.ct[f];c.fW={};for(var s in this.cT){var fY=this.cT[s];c.fW[s]={};if(f in fY){for(var gT in fY[f]){c.fW[s][gT]=1}}}}this.gM();this.gP(80);History.Adapter.bind(window,`statechange`,this.j.k())};dz.prototype={gP(hy){var hF=`${window.innerHeight - hy}px`;for(var hE in{'middle':1,'left':1,'right':1}){$(`#${hE}`).css(`height`,hF)}},gM(){var dt=[];var ds={};var cZ={};for(var f in this.cU){for(var s in this.dM){dt.push(`${f}-${s}`)}}function fV(cz,cr){if(!(cz in ds)){ds[cz]={}}if(!(cr in cZ)){cZ[cr]={}}ds[cz][cr]=true;cZ[cr][cz]=true}for(var gm in this.gw){var fs=this.gw[gm];for(var f in this.cU){fV(`${f}-${fs}`,`${f}-${gm}`)}}for(var s in this.cT){for(var gl in this.cT[s]){for(var fr in this.cT[s][gl]){fV(`${fr}-${s}`,`${gl}-${s}`)}}}var cx=0;var cR=[];var db={};while(cx <=dt.length){cR.push({});if(cx==0){dt.forEach(function(cy){if(!(cy in cZ)){cR[cx][cy]=1}})}else{for(var cz in db){if(cz in ds){for(var cr in ds[cz]){if(!(cr in db)){var gf=true;for(var hq in cZ[cr]){if(!(hq in db)){gf=false;break}}if(gf){cR[cx][cr]=1}}}}}}if(!Object.keys(cR[cx]).length){break}for(var cy in cR[cx]){db[cy]=1}cx++}this.fd=[];this.fP={};if(Object.keys(db).length !=dt.length){var gc=[];dt.forEach(function(cy){if(!(cy in db)){gc.push(cy)}})}else{cR.forEach(function(hl,cx){for(var cy in hl){this.fd.push(cy)}},this);this.fP=cZ}},cK:function(f){return this.ct[f]},hb:function(f,cg){var m={};if(f in this.ct){m=this.ct[f].m}else{for(var b in cg){m[b]=$(`#${f}`)}}return m},gZ:function(f,s){var gs=[];var cr=`${f}-${s}`;for(var cz in(this.fP[cr]||{})){gs.push(cz.split(`-`))}return gs},k:function(){this.fd.forEach(function(dO){var gx=dO.split(`-`);var f=gx[0];var s=gx[1];var c=this.cK(f);for(var b in c.cg){c[s](b)}},this)}};function gC(c,P){this.c=c;this.x={};this.ck={};this.cl={};this.S={};this.v={};this.K={};this.w={};this.U={};this.T={};this.r={y:`-`,f:`-none`};this.n=P};gC.prototype={cb:function(b){var dg=2;var dv=this.c.j.cP(`list`,this.n,`cO`);var dR=this.c.j.cP(`list`,this.n,`dq`);var l=`<div><p class="•dc">By ${dv}</p>`;l +=`<p class="•fz"><span rv="_all" class="•R"></span> <a rv="_all" href="#" class="•cS">all ${this.n}s</a></p>
<table class="•fE" id="list-${this.n}-vals_${b}"><tr>`;this.K[b].forEach(function(d,g,C){if((g % dg==0)&&(g > 0)&&(g < C.length)){l +=`</tr><tr>`}l +=`<td><span rv="${d}" class="•R"></span></td><td><a rv="${d}" href="#" class="•cE">${this.w[b][d]}</a></td>`},this);l +=`</tr></table></div>`;this.c.m[b].html(l)},cG:function(b){var L=this.c.m[b];this.ck[b]=L.find(`#list-${this.n}-vals_${b}`);var h=this;this.ck[b].find(`.•cE`).click(function(p){p.preventDefault();var d=$(this).attr(`rv`);var H=h.cj(b,h.c.j.W(`rel_${h.n}_${b}`));H[d]=(d in H)?!H[d]:true;h.c.j.cf(`rel_${h.n}_${b}`,h.cm(H))});this.S[b]=this.c.m[b].find(`[rv="_all"]`);this.S[b].click(function(p){p.preventDefault();var dn=$(this).hasClass(`•t`);if(dn){h.c.j.cf(`rel_${h.n}_${b}`,h.cm(h.T[b]))}else{h.c.j.cf(`rel_${h.n}_${b}`,h.cm(h.U[b]))}})},cH:function(b,E){var cA=true;for(var d in this.w[b]){var cq=this.ck[b].find(`[rv="${d}"]`);if(d in E && E[d]){cq.addClass(`•t`)}else{cq.removeClass(`•t`,cq);cA=false}}if(cA){this.S[b].addClass(`•t`)}else{this.S[b].removeClass(`•t`)}},cm:function(A){var C=[];for(var Z in A){if(A[Z]){C.push(Z)}}return C.join(',')},cj:function(b,N){var A={};if(N !==null && N !=undefined && N !=''){var C=N.split(',');C.forEach(function(ch){A[ch]=true})}for(var d in this.w[b]){if(!(d in A)){A[d]=false}}return A},dN:function(b){this.v[b]={};for(var d in this.w[b]){this.v[b][d]=0}var M=this.c.F[b];for(var Z in this.x[b]){var g=this.x[b][Z];var cC=false;for(var d in M[g]){this.v[b][d]+=1;cC=true}if(!cC){this.v[b][this.r.y]+=1}}for(var d in this.v[b]){this.c.m[b].find(`span[rv="${d}"].•R`).html(this.v[b][d])}this.c.m[b].find(`span[rv="_all"].•R`).html(this.x[b].length)},ch:function(b,g){var M=this.c.F[b];var X=this.cj(b,this.cl[b]);if((g in M)&&(Object.keys(M[g]).length !=0)){for(var d in M[g]){if((d in X)&& X[d]){return true}}}else{if((this.r.y in X)&&(X[this.r.y])){return true}}return false},O:function(b){return(this.c.j.W(`list`)==b)},Y:function(b){this.K[b]=[];this.w[b]={};this.T[b]={};this.U[b]={};var E=this.c.E[b];for(var g in E){var d=E[g];this.T[b][g]=false;this.U[b][g]=true;this.K[b].push(g);this.w[b][g]=d}this.K[b].push(this.r.y);this.w[b][this.r.y]=this.r.f;this.T[b][this.r.y]=false;this.U[b][this.r.y]=true;this.K[b].sort();this.cb(b)},J:function(b){this.cG(b)},k:function(b){this.cl[b]=this.c.j.W(`rel_${this.n}_${b}`);this.cH(b,this.cj(b,this.cl[b]))}};function fI(G){this.cF={};this.G=G;this.z=G.z;this.gH();this.fK()};fI.prototype={cI:{list:{P:`string`,Q:{contrib:1,country:1,type:1},V:`contrib`},flt_contrib:{P:`string`,Q:null,V:``},flt_country:{P:`string`,Q:null,V:``},flt_type:{P:`string`,Q:null,V:``},rel_country_contrib:{P:`string`,Q:null,V:``},rel_type_contrib:{P:`string`,Q:null,V:``},id:{P:`integer`,dG:{gj:-1,gg:1000000},V:0},sort:{P:`boolean`,Q:{v:true,x:false},V:true}},fb:{list:{contrib:{cO:`contribution`,dq:`contributions`},country:{cO:`country`,dq:`countries`},type:{cO:`type`,dq:`types`}}},gR:function(f,q){var cd,hP;if(f in this.cI){var B=this.cI[f];if(B.P==`string`){if(B.Q){if(q in B.Q){cd=q}else{cd=B.V;this.z.z(`illegal string value for ${f}: "${q}" is replaced by "${B.V}"`,`warning`)}}else{cd=q}}else if(B.P==`integer`){if(/^(\-|\+)?[0-9]+$/.test(q)){cd=Number(q)}else{cd=B.V;this.z.z(`not a number value for ${f}: "${q}" is replaced by "${B.V}"`,`warning`)}if(cd < B.dG.gj){this.z.z(`number to small for ${f}: "${cd}" is replaced by "${B.dG.gj}"`,`warning`)}if(cd > B.dG.gg){this.z.z(`number to big for ${f}: "${cd}" is replaced by "${B.dG.gg}"`,`warning`)}}else if(B.P==`boolean`){if(q in B.Q){cd=B.Q[q]}else{cd=B.V;this.z.z(`illegal boolean value for ${f}: "${q}" is replaced by "${B.V}"`,`warning`)}}}else{cd=null;this.z.z(`unknown parameter: ${f}=${q}`,`warning`)}return cd},gI:function(){fy=[];for(var f in this.cF){var q=this.cF[f];var B=this.cI[f];if(B.P==`string` || B.P==`integer`){fy.push(`${f}=${q}`)}else if(B.P==`boolean`){for(var gz in B.Q){if(B.Q[gz]==q){fy.push(`${f}=${gz}`)}}}}return fy.join(`&`)},gH:function(){for(var f in ft){if(!(f in this.cI)){this.z.z(`unknown parameter: ${f}=${q}`,`warning`)}}for(var f in this.cI){var q=null;if(f in ft){var hx=ft[f];q=this.gR(f,hx);dp.set(f,q)}else if(dp.isSet(f)){q=dp.get(f)}else{q=this.cI[f].V;dp.set(f,q)}this.cF[f]=q}},fK:function(hQ,hS){var hB=`DARIAH contribution tool`;var hz=`${app_url}?${this.gI()}`;History.pushState(this.cF,hB,hz)},cf:function(f,q){this.cF[f]=q;dp.set(f,q);this.fK()},W:function(f){return this.cF[f]},hc:function(f){return this.cI[f].Q},cP:function(f,q,fq){var cD=q;var hO=(fq==undefined)?`cO`:fq;if(this.fb[f]!=undefined && this.fb[f][q]!=undefined){cD=this.fb[f][q][fq]}return cD},k:function(){return function(){var j=History.getState();if(j && j.data){this.cF=j.data;this.G.k()}}.bind(this)}};