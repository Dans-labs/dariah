var dh=(function(){`use strict`;var jg={'&':`&amp;`,'<':`&lt;`,'>':`&gt;`};return function(cH){return cH.replace(/[&<>]/g,function(cA){return jg[cA]})}}());var hJ={dS:function(d){return this.hg()[d]},hg:function(dZ){var j,dS,hh,hp,ct;ct={};if(!dZ){dZ=window.location.search}if(dZ.indexOf("?")===-1){return{}}hp=dZ.slice(1);hh=hp.split("&");hh.forEach(function(jG,j){dS=jG.split("=");ct[dS[0]]=dS[1]});return ct}};var fM=hJ.hg();var jx=$.initNamespaceStorage(`req`);var cs=jx.localStorage;function gO(){if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}};function jL(dL){gO();if(document.selection){var dm=document.body.createTextRange();dm.moveToElementText(document.getElementById(dL));dm.select()}else if(window.getSelection){var dm=document.createRange();dm.selectNode(document.getElementById(dL));window.getSelection().addRange(dm)}};function jT(cc,gQ,gR){var jP=(gQ==undefined)?cc.closest('div').find('.•hF'):gQ;jP.toggle();if(gR !=undefined){gR(cc)}var fR,fJ;if(cc.hasClass('fa-chevron-right')){fR='fa-chevron-right';fJ='fa-chevron-down'}else{fR='fa-chevron-down';fJ='fa-chevron-right'}cc.removeClass(fR);cc.addClass(fJ)};function gK(fz,jN,cH){return(cH.length > fz)?cH.replace(/[^ -]+/g,function(cV){return cV.substr(0,jN)}):cH};function dx(df,jD){this.cM=$(`#${df}`);this.gB=$(`#trash_${df}`);this.gC=this.gB.closest(`p`);this.gB.click(function(h){h.preventDefault();this.gJ()}.bind(this));this.gq();this.gw=jD};dx.prototype={gq:function(){this.cM.hide();this.gC.hide()},hY:function(){this.cM.show();if(this.cM.html()!=``){this.gC.show()}},gJ:function(){this.cM.html(``);if(this.gw !=undefined){this.gw()}this.gq()},v:function(cH,fG){if(fG==undefined){fG=`info`}var jz=this.cM.html();this.cM.html(`${jz}<p class="${fG}">${cH}</p>`);this.hY()}};function gk(C){this.cy={};this.C=C;this.v=C.v;this.hO();this.gm()};gk.prototype={cz:{list:{J:true,z:`string`,A:{contrib:1,country:1,type:1,tadiraha:1,tadiraho:1,tadiraht:1},B:`contrib`},flt_contrib:{J:false,z:`string`,A:null,B:``},flt_country:{J:false,z:`string`,A:null,B:``},flt_type:{J:false,z:`string`,A:null,B:``},flt_tadiraha:{J:false,z:`string`,A:null,B:``},flt_tadiraho:{J:false,z:`string`,A:null,B:``},flt_tadiraht:{J:false,z:`string`,A:null,B:``},rel_country_contrib:{J:false,z:`string`,A:null,B:``},rel_type_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraha_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraho_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraht_contrib:{J:false,z:`string`,A:null,B:``},id:{J:true,z:`integer`,dP:{gZ:-1,gX:1000000},B:0},sort:{J:false,z:`boolean`,A:{v:true,x:false},B:true}},fr:{list:{contrib:{cw:`contribution`,cR:`contributions`},country:{cw:`country`,cR:`countries`},type:{cw:`type`,cR:`types`},tadiraha:{cw:`tadirah activity`,cR:`tadirah activities`},tadiraho:{cw:`tadirah object`,cR:`tadirah objects`},tadiraht:{cw:`tadirah technique`,cR:`tadirah techniques`}}},hZ:function(d,q){var M,kx;if(d in this.cz){var w=this.cz[d];if(w.z==`string`){if(w.A){if(q in w.A){M=q}else{M=w.B;this.v.v(`illegal string value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}}else{M=q}}else if(w.z==`integer`){if(/^(\-|\+)?[0-9]+$/.test(q)){M=Number(q)}else{M=w.B;this.v.v(`not a number value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}if(M < w.dP.gZ){this.v.v(`number to small for ${d}: "${M}" is replaced by "${w.dP.gZ}"`,`warning`)}if(M > w.dP.gX){this.v.v(`number to big for ${d}: "${M}" is replaced by "${w.dP.gX}"`,`warning`)}}else if(w.z==`boolean`){if(q in w.A){M=w.A[q]}else{M=w.B;this.v.v(`illegal boolean value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}}}else{M=null;this.v.v(`unknown parameter: ${d}=${q}`,`warning`)}return M},dN:function(jj){fS=[];for(var d in this.cy){var q=this.cy[d];var w=this.cz[d];if(jj || w.J){if(w.z==`string` || w.z==`integer`){fS.push(`${d}=${q}`)}else if(w.z==`boolean`){for(var hv in w.A){if(w.A[hv]==q){fS.push(`${d}=${hv}`)}}}}}return fS.join(`&`)},hO:function(){for(var d in fM){if(!(d in this.cz)){this.v.v(`unknown parameter: ${d}=${q}`,`warning`)}}for(var d in this.cz){var q=null;if(d in fM){var jK=fM[d];q=this.hZ(d,jK);cs.set(d,q)}else if(cs.isSet(d)){q=cs.get(d)}else{q=this.cz[d].B;cs.set(d,q)}this.cy[d]=q}},gm:function(ky,kA){var jS=`DARIAH contribution tool`;var jQ=`${app_url}?${this.dN(false)}`;History.pushState(this.cy,jS,jQ)},cv:function(d,q){this.cy[d]=q;cs.set(d,q);this.gm()},Z:function(d){return this.cy[d]},jr:function(d){return this.cz[d].A},fN:function(d,q,X){var ct=q;var kw=(X==undefined)?`cw`:X;if(this.fr[d]!=undefined && this.fr[d][q]!=undefined){ct=this.fr[d][q][X]}return ct},g:function(){return function(){var m=History.getState();if(m && m.data){this.cy=m.data;this.C.g()}}.bind(this)}};function S(c,z,jh,fz){this.c=c;this.D={};this.fm={};this.fn={};this.fq={};this.dC={};this.Q={};this.cp={};this.T={};this.cY={};this.cX={};this.Y={cm:`-`,d:`-none`};this.G=z;this.hK=jh || 2;this.gp=fz || 14};S.prototype={cd:function(b){var jV=this.c.m.fN(`list`,this.G,`cw`);var jU=this.c.m.fN(`list`,this.G,`cR`);var k=``;k +=this.gy(b);k +=`<div><p class="•hE"><span fct="${this.c.d}-${b}"></span> By ${jV}</p>`;k +=`<p class="•kc"><span rv="_all" class="•cJ"></span> <a rv="_all" href="#" class="•hG">all ${jU}</a></p>
<table class="•km" id="list-${this.G}-vals_${b}"><tr>`;this.cp[b].forEach(function(f,j,cf){if((j % this.hK==0)&&(j > 0)&&(j < cf.length)){k +=`</tr><tr>`}var dn=this.T[b][f];k +=`<td><span rv="${f}" class="•cJ"></span></td><td><a rv="${f}" title="${dh(dn)}" href="#" class="•gb">${dh(gK(this.gp, 6,dn))}</a></td>`},this);k +=`</tr></table>`;k +=`<p class="•kn" id="list2-${this.G}-vals_${b}">`;this.cp[b].forEach(function(f,j,cf){var dn=this.T[b][f];k +=`<a href="#" rv="${f}" title="${dh(dn)}" class="•gd">${dh(gK(this.gp, 5,dn))}</a> `},this);k +=`</p>`;k +=`</div>`;this.c.n[b].html(k)},fk:function(b){var t=this.c.n[b];this.fm[b]=t.find(`#list-${this.G}-vals_${b}`);this.fn[b]=t.find(`#list2-${this.G}-vals_${b}`);var l=this;this.fm[b].find(`.•gb`).click(function(h){h.preventDefault();var f=$(this).attr(`rv`);var O=l.dF(b,l.c.m.Z(`rel_${l.G}_${b}`));O[f]=(f in O)?!O[f]:true;l.c.m.cv(`rel_${l.G}_${b}`,l.dI(O))});this.fn[b].find(`.•gd`).click(function(h){h.preventDefault();var f=$(this).attr(`rv`);var O=l.dF(b,l.c.m.Z(`rel_${l.G}_${b}`));O[f]=(f in O)?!O[f]:true;l.c.m.cv(`rel_${l.G}_${b}`,l.dI(O));$(this).closest(`div`).find(`.morec`).click()});this.dC[b]=this.c.n[b].find(`[rv="_all"]`);this.dC[b].click(function(h){h.preventDefault();var jv=$(this).hasClass(`•y`);if(jv){l.c.m.cv(`rel_${l.G}_${b}`,l.dI(l.cX[b]))}else{l.c.m.cv(`rel_${l.G}_${b}`,l.dI(l.cY[b]))}})},hV:function(b,s){var gH=true;for(var f in this.T[b]){var gS=this.fm[b].find(`[rv="${f}"]`);var gT=this.fn[b].find(`[rv="${f}"]`);if(f in s && s[f]){gS.addClass(`•y`);gT.addClass(`•y`)}else{gS.removeClass(`•y`);gT.removeClass(`•y`);gH=false}}if(gH){this.dC[b].addClass(`•y`)}else{this.dC[b].removeClass(`•y`)}},gl:function(cf){return cf.join(',')},dI:function(cE){var cf=[];for(var cV in cE){if(cE[cV]){cf.push(cV)}}return cf.join(',')},dF:function(b,cS){var cE={};if(cS !==null && cS !=undefined && cS !=''){var cf=cS.split(',');cf.forEach(function(cI){cE[cI]=true})}for(var f in this.T[b]){if(!(f in cE)){cE[f]=false}}return cE},hr:function(b){this.Q[b]={};for(var f in this.T[b]){this.Q[b][f]=0}var dp=this.c.H[b];for(var cV in this.D[b]){var j=this.D[b][cV];var gV=false;for(var f in dp[j]){this.Q[b][f]+=1;gV=true}if(!gV){this.Q[b][this.Y.cm]+=1}}for(var f in this.Q[b]){this.c.n[b].find(`span[rv="${f}"].•cJ`).html(this.Q[b][f])}this.c.n[b].find(`span[rv="_all"].•cJ`).html(this.D[b].length);this.gt(b)},cI:function(b,j){var dp=this.c.H[b];var dT=this.dF(b,this.fq[b]);if((j in dp)&&(Object.keys(dp[j]).length !=0)){for(var f in dp[j]){if((f in dT)&& dT[f]){return true}}}else{if((this.Y.cm in dT)&&(dT[this.Y.cm])){return true}}return false},I:function(b){return(this.c.m.Z(`list`)==b)},P:function(b){this.cp[b]=[];this.T[b]={};this.cX[b]={};this.cY[b]={};this.gx(b);this.gv(b);this.cp[b].push(this.Y.cm);this.T[b][this.Y.cm]=this.Y.d;this.cX[b][this.Y.cm]=false;this.cY[b][this.Y.cm]=true;this.cd(b)},F:function(b){this.gr(b);this.fk(b)},g:function(b){this.fq[b]=this.c.m.Z(`rel_${this.G}_${b}`);var s=this.dF(b,this.fq[b]);this.gs(b,s);this.hV(b,s)},gx:function(b){var s=this.c.s[b];for(var j in s){var f=s[j];this.cX[b][j]=false;this.cY[b][j]=true;this.cp[b].push(j);this.T[b][j]=f}this.cp[b].sort(function(cA,db){return(s[cA]< s[db])?-1:(s[cA]> s[db])?1:0})},gv:function(b){},gy:function(b){return ``},gr:function(b){},gs:function(b){},gt:function(b){}};function dw(c){S.call(this,c,`type`)};dw.prototype=Object.create(S.prototype);dw.prototype.constructor=dw;function dA(c){S.call(this,c,`tadiraho`)};dA.prototype=Object.create(S.prototype);dA.prototype.constructor=dA;function dz(c){S.call(this,c,`tadiraha`)};dz.prototype=Object.create(S.prototype);dz.prototype.constructor=dz;function dB(c){S.call(this,c,`tadiraht`,1,30)};dB.prototype=Object.create(S.prototype);dB.prototype.constructor=dB;function R(c){S.call(this,c,`country`);this.cO={};this.cN={};this.fp={};this.dG={};this.hQ={CY:true,KS:true,TR:true,MC:true,GE:true}};R.prototype=Object.create(S.prototype);R.prototype.constructor=R;R.prototype.gy=function(b){return `<div id="map-europe_${b}" class="•kk"><p class="•fd"><a class="fa fa-arrows" href="#" title="zoom to fit all countries"/></p></div>`};R.prototype.gr=function(b){var l=this;var t=this.c.n[b];this.cN[b]=t.find(`#map-europe_${b}`);var gW=this.cN[b].width()*0.6;this.cN[b].width(`100%`);this.cN[b].height(gW);this.cN[b].vectorMap({'map':`europe_mill`,backgroundColor:`#ccccff`,regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:`#008800`,'fill-opacity':0.2,stroke:`none`,'stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':1,'stroke-opacity':1},selected:{fill:`#008800`,'fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:`#bbbbbb`,'fill-opacity':1,stroke:`none`,'stroke-width':0,'stroke-opacity':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':3,'stroke-opacity':1},selected:{fill:`#dd8844`,'fill-opacity':1},selectedHover:{}},markers:this.fp[b],series:{markers:[{values:{},scale:[0,20],normalizeFunction:`linear`,attribute:`r`,min:0,max:100}],regions:[{scale:{'jF':`#ffffff`,'jt':`#ffddbb`},attribute:`fill`,values:this.dG[b]}]},onRegionTipShow:function(h,fB,f){fB.html(`${f}: ${(f in this.Q[b])?this.Q[b][f]:'not in DARIAH'}`)}.bind(this),onMarkerTipShow:function(h,fB,f){fB.html(`${f}: ${(f in this.Q[b])?this.Q[b][f]:'not in DARIAH'}`)}.bind(this),onRegionClick:function(h,f){if(!(f in this.T[b])){h.preventDefault()}}.bind(this),onMarkerClick:function(h,f){if(!(f in this.T[b])){h.preventDefault()}}.bind(this),onRegionSelected:function(h,f,j,O){if(this.fx){this.c.m.cv(`rel_${this.G}_${b}`,this.gl(O))}}.bind(this),onMarkerSelected:function(h,f,j,O){if(this.fx){this.c.m.cv(`rel_${this.G}_${b}`,this.gl(O))}}.bind(this)});var hx=t.find(`p.•fd`);hx.css(`top`,`${gW-20}px`);hx.css(`left`,`10px`);var kb=t.find(`p.•fd a`);kb.click(function(h){h.preventDefault();l.cO[b].setFocus({regions:[`GB`,`GR`]})});this.cO[b]=this.cN[b].vectorMap('get','mapObject');this.cO[b].setFocus({regions:[`GB`,`GR`]})};R.prototype.gs=function(b,s){this.fx=false;var fH={};for(var f in s){if(!(f in this.hQ)&& f !=this.Y.cm){fH[f]=s[f]}}this.cO[b].setSelectedRegions(fH);this.cO[b].setSelectedMarkers(fH);this.fx=true};R.prototype.gt=function(b){var dY=this.D[b].length;if(dY==0){dY=1}var hw={};for(var f in this.Q[b]){if(f !=this.Y.cm){var hj=100 * this.Q[b][f]/ dY;hw[f]=(dY < 10)?hj:(10*Math.sqrt(hj))}}this.cO[b].series.markers[0].setValues(hw)};R.prototype.gx=function(b){};R.prototype.gv=function(b){this.fp[b]={};this.dG[b]={};var s=this.c.s[b];for(var j in s){var f=s[j];if(f[1]){this.cX[b][j]=false;this.cY[b][j]=true;this.cp[b].push(j);this.T[b][j]=f[0];if(f.length > 3){this.fp[b][j]={latLng:[f[2],f[3]],d:f[0]}}this.dG[b][j]='jt'}else{this.dG[b][j]='jF'}}this.cp[b].sort(function(cA,db){return(s[cA]< s[db])?-1:(s[cA][0]> s[db][0])?1:0})};function gh(c){this.c=c;this.fs={};this.cn={};this.fl={};this.fj={};this.gn={};this.dH={};this.dD={};this.fw={};this.dE={};this.D={}};gh.prototype={cd:function(b){var k=`<div><p class="•hE"><span fct="${this.c.d}-${b}"></span> By full text search <span id="flt2_${b}" class="•hH"></span></p>`;k +=`<div id="fltw_${b}">`;k +=`<p id="•kg${b}" class="•gc •fb •fc ui-widget">`;k +=`<input id="flt_${b}" class="flt"/>`;k +=`<a href="#" class="•fb fa fa-close •kh" id="clearf_${b}"></a>`;k +=`<span •fc class="•cJ" id="stats_${b}"></span>&nbsp;`;k +=`</p>`;k +=`<div id="autoc_${b}" style="display: none;">here ${b}</div>`;k +=`</div>`;this.c.n[b].html(k)},hW:function(b){var cx=this.c.m.Z(`flt_${b}`);this.fl[b].html(cx);this.cn[b].val(cx);this.cn[b].autocomplete(`search`,cx)},hT:function(b){return function(kt,jX){this.dE[b]={};jX.content.forEach(function(jW,j){this.dE[b][jW.value]=1},this);if(!(this.fw[b])){var cx=this.cn[b].val();this.c.m.cv(`flt_${b}`,cx)}}.bind(this)},hU:function(b){this.dD[b].click(function(h){h.preventDefault();this.cn[b].val(``);this.cn[b].autocomplete(`search`,``)}.bind(this))},hr:function(b){var fP;if(this.cn[b].val()==``){fP=``;this.dH[b].removeClass(`•y`)}else{fP=`${this.p.D[b].length} of `;this.dH[b].addClass(`•y`)}this.dH[b].html(`${fP}${this.D[b].length}`)},cI:function(b,j){return(j in this.dE[b])},I:function(b){return(this.c.m.Z(`list`)==b)},P:function(b){this.cd(b)},F:function(b){if(!this.p){this.p=this.c.C.cB(`p`).L}var H=this.c.C.cB(`W`).H[b];this.fs[b]=[];H.forEach(function(cq,j){this.fs[b].push({label:cq[1],value:`${cq[0]}`})},this);this.dE[b]={};this.D[b]=[];var t=this.c.n[b];var dK=t.find(`#fltw_${b}`);this.cn[b]=$(`#flt_${b}`);this.fl[b]=$(`#flt2_${b}`);this.fj[b]=dK.find(`#•kg${b}`);this.gn[b]=dK.find(`#autoc_${b}`);this.dH[b]=dK.find(`#stats_${b}`);this.dD[b]=dK.find(`#clearf_${b}`);this.cn[b].autocomplete({appendTo:this.gn[b],source:this.fs[b],response:this.hT(b),minLength:0});this.fw[b]=true;this.hU(b);this.hW(b);this.fw[b]=false},g:function(b){var cx=this.c.m.Z(`flt_${b}`);if(cx==``){this.fj[b].removeClass(`•y`);this.dD[b].hide()}else{this.fj[b].addClass(`•y`);this.dD[b].show()}this.fl[b].html(cx)}};function gg(c){this.c=c;this.gz={};this.H={};this.fQ={};this.D={};this.fC={}};gg.prototype={cd:function(b){var k=``;k +=`<p><span fct="all"></span>Filtering <span id="fstats_${b}"></span></p>`;this.c.n[b].html(k)},I:function(b){return this.c.m.Z(`list`)==b},P:function(b){var cQ=this.c.cQ;this.fC[b]={};for(var V in cQ){var jn=cQ[V];if(jn.cC(b)){this.fC[b][V]=cQ[V]}}this.cd(b)},cW:function(dk,X){var l=this;var fA=dk.closest(`p`);var fE=fA.find(`.hidec`);var fI=fA.find(`.morec`);var fO=fA.find(`.showc`);var fD=dk.closest(`div`).find(`table,.•gc`);var fy=dk.closest(`div`).find(`.•kn,.•hH`);var dO=`fctx_${dk.closest('span').attr('fct')}`;var hb=X==undefined;if(hb){if(cs.isSet(dO)){X=cs.get(dO)}else{X=1}}var dJ=dO==`fctx_all`;if(dJ && !hb){dk.closest(`div`).find(`div.•kd span[fct]`).each(function(){l.cW($(this),X)})}cs.set(dO,X);if(X==0){fE.show();fI.hide();fO.hide();if(!dJ){fD.hide();fy.hide()}}else if(X==1){fE.hide();fI.show();fO.hide();if(!dJ){fD.hide();fy.show()}}else{fE.hide();fI.hide();fO.show();if(!dJ){fD.show();fy.hide()}}},F:function(b){var l=this;var t=this.c.n[b];var jw=this.c.C.cB(`W`).n[b];this.gz[b]=t.find(`#fstats_${b}`);this.fQ[b]=jw.find(`#table_${b}`);var fF=` details; click to change level of details`;var jl=`<a class="showc fa fa-reorder" href="#" title="full${fF}"></a><a class="morec fa fa-ellipsis-h" href="#" title="condensed${fF}"></a><a class="hidec fa fa-minus" href="#" title="hidden${fF}"></a>`;t.addClass(`•fZ`);t.find(`span[fct]`).each(function(){$(this).html(`${jl}&nbsp`);l.cW($(this))});t.find(`.hidec`).click(function(h){h.preventDefault();l.cW($(this),1)});t.find(`.morec`).click(function(h){h.preventDefault();l.cW($(this),2)});t.find(`.showc`).click(function(h){h.preventDefault();l.cW($(this),0)})},g:function(b){this.fQ[b].find(`tr[id]`).hide();var jA=this.c.C.cB(`W`);var H=jA.H[b];var cr=this.fC[b];this.D[b]=[];for(var V in cr){var p=cr[V].L;p.D[b]=[]}H.forEach(function(cq,j){var cI=true;var ds=null;var dg=false;for(var V in cr){if(!dg){var p=cr[V].L;var ht=p.cI(b,cq[0]);if(!ht){cI=false;if(ds==null){ds=p}else{dg=true}}}}if(!dg){if(cI){this.D[b].push(cq[0]);this.fQ[b].find(`tr[id="r${cq[0]}"]`).show()}if(ds !=null){ds.D[b].push(cq[0])}else{for(var V in cr){var p=cr[V].L;p.D[b].push(cq[0])}}}},this);for(var V in cr){var p=cr[V].L;p.hr(b)}this.gz[b].html(`${this.D[b].length} of ${H.length}`)}};function fh(c){this.c=c};fh.prototype={cd:function(b){var k=``;k +=`<table id="table_${b}">`;if(b==`contrib`){this.c.H[b].forEach(function(N){k +=`<tr id="r${N[0]}"><td><a href="#" rid="${N[0]}">${N[1]}</a></td></tr>`})}else if(b==`country`){this.c.H[b].forEach(function(N){js=(N[3]==1)?`dariah`:``;k +=`<tr id="r${N[0]}"><td class="•kf">${N[1]}<td><td class="•kD">${N[2]}<td><td class="•kj">${js}</td><td class="•hI">${N[4]}</td><td class="•hI">${N[5]}</td></tr>`})}else if(b==`type` || b==`tadiraha` || b==`tadiraho` || b==`tadiraht`){this.c.H[b].forEach(function(N){k +=`<tr id="r${N[0]}"><td class="•kl">${N[1]}<td></tr>`})}k +=`</table>`;this.c.n[b].html(k)},I:function(b){return this.c.m.Z(`list`)==b},P:function(b){this.cd(b)},F:function(b){},g:function(b){}};function fg(c){this.c=c;this.cc={};this.dM={}};fg.prototype={cd:function(b){this.c.n[b].html(`<a class="•fX" href="#">${this.c.m.fN('list', b, 'cw')}</a> `)},fk:function(b){this.dM[b].click(function(h){h.preventDefault();this.c.m.cv(`list`,b)}.bind(this))},hP:function(b){return this.c.m.Z(`list`)==b},I:function(b){return true},P:function(b){this.cd(b);this.cc[b]=this.c.n[b];this.cc[b].addClass(`•fW`);this.dM[b]=this.c.n[b].find(`a`)},F:function(b){this.fk(b)},g:function(b){if(this.hP(b)){this.dM[b].addClass(`•y`);this.cc[b].addClass(`•y`)}else{this.dM[b].removeClass(`•y`);this.cc[b].removeClass(`•y`)}}};function gj(c){this.c=c};gj.prototype={I:function(b){return true},P:function(b){var k=`
<p id="•fT">Cite</p>
<table align="center">
    <tr>
        <td class="•fU clr">
            <a lnk="" href="#" id="•hC" title="link to page content and appearance (markdown)" class="ctrl fa fa-level-down fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hA" title="link to page content and appearance (html)" class="ctrl fa fa-external-link-square fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hB" title="link to page content (html)" class="ctrl fa fa-external-link fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•fV" title="copy page content" class="ctrl fa fa-file-text-o fa-lg fa-fw"></a>
        </td>
    </tr>
    <tr>
        <th class="•fU" width="60px">page view</th>
    </tr>
    <tr class="•kB">
        <td class="•fU"><span id="•kq" class="ctrl fa fa-chevron-right fa-fw"></span><span id="•kp" class="•hF">share link to this page with or without view settings.</span></td>
    </tr>
</table>
<p id="•hy"></p>
<p id="•hz"></p>
`;this.c.n[b].html(k)},F:function(b){var l=this;var t=this.c.n[b];var dU=$(`#self_link`);dU.hide();t.addClass(`•gf`);t.find(`.•hF`).hide();t.find(`#•hC,#•hA,#•hB,#•kC`).click(function(h){h.preventDefault();window.prompt(`Press <Cmd-C> and then <Enter> to copy link on clipboard`,$(this).attr(`lnk`))});t.find(`#•fV`).click(function(h){h.preventDefault();var dL=`middle`;var cZ=app_url_cite+l.c.m.dN(true);dU.show();dU.attr(`href`,cZ);jL(dL)});t.find(`#•kq`).click(function(h){h.preventDefault();jT($(this),$(`#•kp`))});t.click(function(h){h.preventDefault();var cZ=app_url_cite+l.c.m.dN(true);var jc=app_url_cite+l.c.m.dN(false);$(`#•fT`).hide();$(`#•hy`).html(``);$(`#•hz`).html(``);$(`.•fU.clr,#•hy,#•hz`).removeClass(`error warning good special`);var hn=dh($(`title`).text());$(`#•hC`).attr(`lnk`,`[${hn}](${cZ})`);$(`#•hA`).attr(`lnk`,cZ);$(`#•hB`).attr(`lnk`,jc);$(`#•fV`).attr(`lnk`,cZ);$(`#•fV`).attr(`tit`,hn);$(this).animate({height:`100px`,width:`200px`,opacity:0.95},300)});t.mouseleave(function(){dU.hide();$(`#•fT`).show();t.animate({height:`20px`,width:`40px`,opacity:.7},300);return false})},g:function(b){}};function ff(d,cF,C){this.d=d;this.C=C;this.cF=cF;this.E=cF.E;this.cP={};for(var b in this.E){this.cP[b]={};for(var cS in this.C.dV){this.cP[b][cS]=true}}this.v={};this.n={};this.m=this.C.m;this.H={};this.s={};this.L=new cF.x(this)};ff.prototype={hc:function(b,r){return !this.cP[b][r].state ||(this.cP[b][r].state()==`rejected`)},hL:function(b,r,dR){var gY=this[dR].bind(this,b);var jR=this.C.jp(this.d,r);var hm=[];jR.forEach(function(dX){var fK=dX[0];var fL=dX[1];var hk=this.C.cB(fK);if(hk.cC(b)){hm.push(hk.cP[b][fL])}},this);this.cP[b][r]=$.when.apply($,hm).then(gY)},ch:function(b,r,dR){if(r in this.C.dV){if(!this.C.dV[r]|| this.hc(b,r)){this.hL(b,r,dR)}}},cC:function(b){return(b in this.E)},fv:function(b,jC){if(this.cC(b)){if(b in this.n){if(jC){this.n[b].show()}else{this.n[b].hide()}}}},hN:function(b){var K=url_tpl.replace(/_c_/,`data`).replace(/_f_/,`${this.cF.K}_${b}`)+`.json`;this.v[b].v(`fetching data ...`);var jJ=this.hR.bind(this,b);return $.ajax({type:`POST`,url:K,contentType:`application/json; charset=utf-8`,dataType:`json`}).then(function(cD){jJ(cD)})},hR:function(b,cD){this.v[b].gJ();cD.msgs.forEach(function(jy){this.v[b].v(jy)},this);if(cD.good){this.H[b]=cD.data;if(`relvals` in cD){this.s[b]=cD.relvals}}this.L.P(b)},gD:function(b){this.hM=this.C.jq(this.cF.U,this.E);this.n[b]=$(`#${this.d}_${b}`);if(this.n[b].length==0){var df=this.hM[b];df.append(`<div id="msg_${this.d}_${b}"></div>`);df.append(`<div id="${this.d}_${b}" class="•kd"></div>`);this.n[b]=$(`#${this.d}_${b}`)}this.v[b]=new dx(`msg_${this.d}_${b}`);if(this.cF.K !=null){return this.hN(b)}else{this.L.P(b)}},gE:function(b){this.L.F(b)},gF:function(b){this.fv(b,true);this.L.g(b)},g:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`P`,`gD`);this.ch(b,`F`,`gE`);this.ch(b,`g`,`gF`)}else{this.fv(b,false)}},P:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`P`,`gD`)}},F:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`F`,`gE`)}},g:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`g`,`gF`)}else{this.fv(b,false)}}};function dy(){this.d=`page`;this.v=new dx(`msg_${this.d}`);this.m=new gk(this);this.dV={P:true,F:true,g:false};this.hq={F:`P`,g:`F`};var dQ=this.m.jr(`list`);var dc={contrib:1};var jm={'':1};this.cL={jM:{U:`body`,E:jm,K:null,x:gj},gM:{U:`left`,E:dQ,K:null,x:fg},W:{U:`middle`,E:dQ,K:`list`,x:fh},p:{U:`gM`,E:dQ,K:null,x:gg},dl:{U:`p`,E:dQ,K:null,x:gh},dj:{U:`p`,E:dc,K:`country`,x:R},dd:{U:`p`,E:dc,K:`type`,x:dw},dq:{U:`p`,E:dc,K:`tadiraha`,x:dz},dr:{U:`p`,E:dc,K:`tadiraho`,x:dA},dW:{U:`p`,E:dc,K:`tadiraht`,x:dB}},this.cK={P:{p:{gM:1,W:1},dl:{p:1},dj:{p:1,dl:1},dd:{p:1,dj:1},dq:{p:1,dd:1},dr:{p:1,dq:1},dW:{p:1,dr:1},jM:{p:1,W:1}},F:{p:{dl:1,dj:1,dd:1,dq:1,dr:1,dW:1},dl:{W:1},dj:{W:1},dd:{W:1},dq:{W:1},dr:{W:1},dW:{W:1}},g:{p:{dl:1,dj:1,dd:1,dq:1,dr:1,dW:1}}};this.cg={};for(var d in this.cL){var c=new ff(d,this.cL[d],this);c.cQ={};this.cg[d]=c}for(var d in this.cL){var jf=this.cg[d];var gP=this.cL[d].U;if(gP in this.cg){var jI=this.cg[gP];jI.cQ[d]=jf}}for(var d in this.cg){var c=this.cg[d];c.gI={};for(var r in this.cK){var gL=this.cK[r];c.gI[r]={};if(d in gL){for(var jd in gL[d]){c.gI[r][jd]=1}}}}this.hS();this.hX(80);History.Adapter.bind(window,`statechange`,this.m.g())};dy.prototype={hX(jO){var jZ=`${window.innerHeight - jO}px`;for(var jY in{'middle':1,'left':1,'right':1}){$(`#${jY}`).css(`height`,jZ)}},hS(){var dv=[];var dt={};var cT={};for(var d in this.cL){for(var r in this.dV){dv.push(`${d}-${r}`)}}function gG(cl,cb){if(!(cl in dt)){dt[cl]={}}if(!(cb in cT)){cT[cb]={}}dt[cl][cb]=true;cT[cb][cl]=true}for(var hf in this.hq){var fL=this.hq[hf];for(var d in this.cL){gG(`${d}-${fL}`,`${d}-${hf}`)}}for(var r in this.cK){for(var hd in this.cK[r]){for(var fK in this.cK[r][hd]){gG(`${fK}-${r}`,`${hd}-${r}`)}}}var cj=0;var cG=[];var cU={};while(cj <=dv.length){cG.push({});if(cj==0){dv.forEach(function(ck){if(!(ck in cT)){cG[cj][ck]=1}})}else{for(var cl in cU){if(cl in dt){for(var cb in dt[cl]){if(!(cb in cU)){var gU=true;for(var jE in cT[cb]){if(!(jE in cU)){gU=false;break}}if(gU){cG[cj][cb]=1}}}}}}if(!Object.keys(cG[cj]).length){break}for(var ck in cG[cj]){cU[ck]=1}cj++}this.ft=[];this.gA={};if(Object.keys(cU).length !=dv.length){var gN=[];dv.forEach(function(ck){if(!(ck in cU)){gN.push(ck)}})}else{cG.forEach(function(jB,cj){for(var ck in jB){this.ft.push(ck)}},this);this.gA=cT}},cB:function(d){return this.cg[d]},jq:function(d,E){var n={};if(d in this.cg){n=this.cg[d].n}else{var jb=(d==`body`)?$(`body`):$(`#${d}`);for(var b in E){n[b]=jb}}return n},jp:function(d,r){var hl=[];var cb=`${d}-${r}`;for(var cl in(this.gA[cb]||{})){hl.push(cl.split(`-`))}return hl},g:function(){this.ft.forEach(function(dX){var hs=dX.split(`-`);var d=hs[0];var r=hs[1];var c=this.cB(d);for(var b in c.E){c[r](b)}},this)}};$(function(){new dy().g()});