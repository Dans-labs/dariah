var dj=(function(){`use strict`;var jj={'&':`&amp;`,'<':`&lt;`,'>':`&gt;`};return function(cH){return cH.replace(/[&<>]/g,function(cA){return jj[cA]})}}());var hL={dU:function(d){return this.hj()[d]},hj:function(fc){var j,dU,hk,hr,ct;ct={};if(!fc){fc=window.location.search}if(fc.indexOf("?")===-1){return{}}hr=fc.slice(1);hk=hr.split("&");hk.forEach(function(jI,j){dU=jI.split("=");ct[dU[0]]=dU[1]});return ct}};var fN=hL.hj();var jz=$.initNamespaceStorage(`req`);var cs=jz.localStorage;function gP(){if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}};function jN(dN){gP();if(document.selection){var dn=document.body.createTextRange();dn.moveToElementText(document.getElementById(dN));dn.select()}else if(window.getSelection){var dn=document.createRange();dn.selectNode(document.getElementById(dN));window.getSelection().addRange(dn)}};function jV(cc,gR,gS){var jR=(gR==undefined)?cc.closest('div').find('.•hH'):gR;jR.toggle();if(gS !=undefined){gS(cc)}var fS,fK;if(cc.hasClass('fa-chevron-right')){fS='fa-chevron-right';fK='fa-chevron-down'}else{fS='fa-chevron-down';fK='fa-chevron-right'}cc.removeClass(fS);cc.addClass(fK)};function gL(fA,jP,cH){return(cH.length > fA)?cH.replace(/[^ -]+/g,function(cV){return cV.substr(0,jP)}):cH};function dy(dg,jF){this.cM=$(`#${dg}`);this.gC=$(`#trash_${dg}`);this.gD=this.gC.closest(`p`);this.gC.click(function(h){h.preventDefault();this.gK()}.bind(this));this.gr();this.gx=jF};dy.prototype={gr:function(){this.cM.hide();this.gD.hide()},jb:function(){this.cM.show();if(this.cM.html()!=``){this.gD.show()}},gK:function(){this.cM.html(``);if(this.gx !=undefined){this.gx()}this.gr()},v:function(cH,fH){if(fH==undefined){fH=`info`}var jB=this.cM.html();this.cM.html(`${jB}<p class="${fH}">${cH}</p>`);this.jb()}};function gl(C){this.cy={};this.C=C;this.v=C.v;this.hQ();this.gn()};gl.prototype={cz:{list:{J:true,z:`string`,A:{contrib:1,country:1,type:1,tadiraha:1,tadiraho:1,tadiraht:1},B:`contrib`},flt_contrib:{J:false,z:`string`,A:null,B:``},flt_country:{J:false,z:`string`,A:null,B:``},flt_type:{J:false,z:`string`,A:null,B:``},flt_tadiraha:{J:false,z:`string`,A:null,B:``},flt_tadiraho:{J:false,z:`string`,A:null,B:``},flt_tadiraht:{J:false,z:`string`,A:null,B:``},rel_country_contrib:{J:false,z:`string`,A:null,B:``},rel_type_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraha_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraho_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraht_contrib:{J:false,z:`string`,A:null,B:``},id:{J:true,z:`integer`,dR:{hc:-1,gZ:1000000},B:0},sort:{J:false,z:`boolean`,A:{v:true,x:false},B:true}},fs:{list:{contrib:{cw:`contribution`,cR:`contributions`},country:{cw:`country`,cR:`countries`},type:{cw:`type`,cR:`types`},tadiraha:{cw:`tadirah activity`,cR:`tadirah activities`},tadiraho:{cw:`tadirah object`,cR:`tadirah objects`},tadiraht:{cw:`tadirah technique`,cR:`tadirah techniques`}}},jc:function(d,q){var M,kz;if(d in this.cz){var w=this.cz[d];if(w.z==`string`){if(w.A){if(q in w.A){M=q}else{M=w.B;this.v.v(`illegal string value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}}else{M=q}}else if(w.z==`integer`){if(/^(\-|\+)?[0-9]+$/.test(q)){M=Number(q)}else{M=w.B;this.v.v(`not a number value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}if(M < w.dR.hc){this.v.v(`number to small for ${d}: "${M}" is replaced by "${w.dR.hc}"`,`warning`)}if(M > w.dR.gZ){this.v.v(`number to big for ${d}: "${M}" is replaced by "${w.dR.gZ}"`,`warning`)}}else if(w.z==`boolean`){if(q in w.A){M=w.A[q]}else{M=w.B;this.v.v(`illegal boolean value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}}}else{M=null;this.v.v(`unknown parameter: ${d}=${q}`,`warning`)}return M},dP:function(jl){fT=[];for(var d in this.cy){var q=this.cy[d];var w=this.cz[d];if(jl || w.J){if(w.z==`string` || w.z==`integer`){fT.push(`${d}=${q}`)}else if(w.z==`boolean`){for(var hx in w.A){if(w.A[hx]==q){fT.push(`${d}=${hx}`)}}}}}return fT.join(`&`)},hQ:function(){for(var d in fN){if(!(d in this.cz)){this.v.v(`unknown parameter: ${d}=${q}`,`warning`)}}for(var d in this.cz){var q=null;if(d in fN){var jM=fN[d];q=this.jc(d,jM);cs.set(d,q)}else if(cs.isSet(d)){q=cs.get(d)}else{q=this.cz[d].B;cs.set(d,q)}this.cy[d]=q}},gn:function(kA,kC){var jU=`DARIAH contribution tool`;var jS=`${app_url}?${this.dP(false)}`;History.pushState(this.cy,jU,jS)},cv:function(d,q){this.cy[d]=q;cs.set(d,q);this.gn()},Z:function(d){return this.cy[d]},jt:function(d){return this.cz[d].A},fO:function(d,q,X){var ct=q;var ky=(X==undefined)?`cw`:X;if(this.fs[d]!=undefined && this.fs[d][q]!=undefined){ct=this.fs[d][q][X]}return ct},g:function(){return function(){var m=History.getState();if(m && m.data){this.cy=m.data;this.C.g()}}.bind(this)}};function S(c,z,jk,fA){this.c=c;this.D={};this.dH={};this.fp={};this.fr={};this.dD={};this.Q={};this.cp={};this.T={};this.cZ={};this.cY={};this.Y={cm:`-`,d:`-none`};this.G=z;this.hM=jk || 2;this.gq=fA || 14};S.prototype={cd:function(b){var jX=this.c.m.fO(`list`,this.G,`cw`);var jW=this.c.m.fO(`list`,this.G,`cR`);var l=``;l +=this.gz(b);l +=`<div><p class="•hG"><span fct="${this.c.d}-${b}"></span> By ${jX}</p>`;l +=`<p class="•kf"><span rv="_all" class="•cJ"></span> <a rv="_all" href="#" class="•hI">all ${jW}</a></p>
<table class="•kp" id="list-${this.G}-vals_${b}"><tr>`;this.cp[b].forEach(function(f,j,cf){if((j % this.hM==0)&&(j > 0)&&(j < cf.length)){l +=`</tr><tr>`}var dp=this.T[b][f];l +=`<td><span rv="${f}" class="•cJ"></span></td><td><a rv="${f}" title="${dj(dp)}" href="#" class="•gc">${dj(gL(this.gq, 6,dp))}</a></td>`},this);l +=`</tr></table>`;l +=`<p class="•kq" id="list2-${this.G}-vals_${b}">`;this.cp[b].forEach(function(f,j,cf){var dp=this.T[b][f];l +=`<a href="#" rv="${f}" title="${dj(dp)}" class="•gf">${dj(gL(this.gq, 5,dp))}</a> `},this);l +=`</p>`;l +=`</div>`;this.c.n[b].html(l)},fm:function(b){var s=this.c.n[b];this.dH[b]=s.find(`#list-${this.G}-vals_${b}`);this.fp[b]=s.find(`#list2-${this.G}-vals_${b}`);var k=this;this.dH[b].find(`.•gc`).click(function(h){h.preventDefault();var f=$(this).attr(`rv`);var O=k.dG(b,k.c.m.Z(`rel_${k.G}_${b}`));O[f]=(f in O)?!O[f]:true;k.c.m.cv(`rel_${k.G}_${b}`,k.dK(O));s.find(`.•cW`).removeClass(`•cW`);$(this).addClass(`•cW`)});this.fp[b].find(`.•gf`).click(function(h){h.preventDefault();var f=$(this).attr(`rv`);var O=k.dG(b,k.c.m.Z(`rel_${k.G}_${b}`));O[f]=(f in O)?!O[f]:true;k.c.m.cv(`rel_${k.G}_${b}`,k.dK(O));$(this).closest(`div`).find(`.morec`).click();var gY=k.dH[b].find(`a[rv="${f}"]`);s.find(`.•cW`).removeClass(`•cW`);gY.addClass(`•cW`);$(`#left`)[0].scrollTop=50;gY[0].scrollIntoView({behavior:`smooth`,alignToTop:`true`})});this.dD[b]=this.c.n[b].find(`[rv="_all"]`);this.dD[b].click(function(h){h.preventDefault();var jx=$(this).hasClass(`•y`);if(jx){k.c.m.cv(`rel_${k.G}_${b}`,k.dK(k.cY[b]))}else{k.c.m.cv(`rel_${k.G}_${b}`,k.dK(k.cZ[b]))}})},hX:function(b,t){var gI=true;for(var f in this.T[b]){var gT=this.dH[b].find(`[rv="${f}"]`);var gU=this.fp[b].find(`[rv="${f}"]`);if(f in t && t[f]){gT.addClass(`•y`);gU.addClass(`•y`)}else{gT.removeClass(`•y`);gU.removeClass(`•y`);gI=false}}if(gI){this.dD[b].addClass(`•y`)}else{this.dD[b].removeClass(`•y`)}},gm:function(cf){return cf.join(',')},dK:function(cE){var cf=[];for(var cV in cE){if(cE[cV]){cf.push(cV)}}return cf.join(',')},dG:function(b,cS){var cE={};if(cS !==null && cS !=undefined && cS !=''){var cf=cS.split(',');cf.forEach(function(cI){cE[cI]=true})}for(var f in this.T[b]){if(!(f in cE)){cE[f]=false}}return cE},ht:function(b){this.Q[b]={};for(var f in this.T[b]){this.Q[b][f]=0}var dq=this.c.H[b];for(var cV in this.D[b]){var j=this.D[b][cV];var gW=false;for(var f in dq[j]){this.Q[b][f]+=1;gW=true}if(!gW){this.Q[b][this.Y.cm]+=1}}for(var f in this.Q[b]){this.c.n[b].find(`span[rv="${f}"].•cJ`).html(this.Q[b][f])}this.c.n[b].find(`span[rv="_all"].•cJ`).html(this.D[b].length);this.gv(b)},cI:function(b,j){var dq=this.c.H[b];var dV=this.dG(b,this.fr[b]);if((j in dq)&&(Object.keys(dq[j]).length !=0)){for(var f in dq[j]){if((f in dV)&& dV[f]){return true}}}else{if((this.Y.cm in dV)&&(dV[this.Y.cm])){return true}}return false},I:function(b){return(this.c.m.Z(`list`)==b)},P:function(b){this.cp[b]=[];this.T[b]={};this.cY[b]={};this.cZ[b]={};this.gy(b);this.gw(b);this.cp[b].push(this.Y.cm);this.T[b][this.Y.cm]=this.Y.d;this.cY[b][this.Y.cm]=false;this.cZ[b][this.Y.cm]=true;this.cd(b)},F:function(b){this.gs(b);this.fm(b)},g:function(b){this.fr[b]=this.c.m.Z(`rel_${this.G}_${b}`);var t=this.dG(b,this.fr[b]);this.gt(b,t);this.hX(b,t)},gy:function(b){var t=this.c.t[b];for(var j in t){var f=t[j];this.cY[b][j]=false;this.cZ[b][j]=true;this.cp[b].push(j);this.T[b][j]=f}this.cp[b].sort(function(cA,dc){return(t[cA]< t[dc])?-1:(t[cA]> t[dc])?1:0})},gw:function(b){},gz:function(b){return ``},gs:function(b){},gt:function(b){},gv:function(b){}};function dx(c){S.call(this,c,`type`)};dx.prototype=Object.create(S.prototype);dx.prototype.constructor=dx;function dB(c){S.call(this,c,`tadiraho`)};dB.prototype=Object.create(S.prototype);dB.prototype.constructor=dB;function dA(c){S.call(this,c,`tadiraha`)};dA.prototype=Object.create(S.prototype);dA.prototype.constructor=dA;function dC(c){S.call(this,c,`tadiraht`,1,30)};dC.prototype=Object.create(S.prototype);dC.prototype.constructor=dC;function R(c){S.call(this,c,`country`);this.cO={};this.cN={};this.fq={};this.dI={};this.hS={CY:true,KS:true,TR:true,MC:true,GE:true}};R.prototype=Object.create(S.prototype);R.prototype.constructor=R;R.prototype.gz=function(b){return `<div id="map-europe_${b}" class="•km"><p class="•fg"><a class="fa fa-arrows" href="#" title="zoom to fit all countries"/></p></div>`};R.prototype.gs=function(b){var k=this;var s=this.c.n[b];this.cN[b]=s.find(`#map-europe_${b}`);var gX=this.cN[b].width()*0.6;this.cN[b].width(`100%`);this.cN[b].height(gX);this.cN[b].vectorMap({'map':`europe_mill`,backgroundColor:`#ccccff`,regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:`#008800`,'fill-opacity':0.2,stroke:`none`,'stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':1,'stroke-opacity':1},selected:{fill:`#008800`,'fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:`#bbbbbb`,'fill-opacity':1,stroke:`none`,'stroke-width':0,'stroke-opacity':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':3,'stroke-opacity':1},selected:{fill:`#dd8844`,'fill-opacity':1},selectedHover:{}},markers:this.fq[b],series:{markers:[{values:{},scale:[0,20],normalizeFunction:`linear`,attribute:`r`,min:0,max:100}],regions:[{scale:{'jH':`#ffffff`,'jw':`#ffddbb`},attribute:`fill`,values:this.dI[b]}]},onRegionTipShow:function(h,fC,f){fC.html(`${f}: ${(f in this.Q[b])?this.Q[b][f]:'not in DARIAH'}`)}.bind(this),onMarkerTipShow:function(h,fC,f){fC.html(`${f}: ${(f in this.Q[b])?this.Q[b][f]:'not in DARIAH'}`)}.bind(this),onRegionClick:function(h,f){if(!(f in this.T[b])){h.preventDefault()}}.bind(this),onMarkerClick:function(h,f){if(!(f in this.T[b])){h.preventDefault()}}.bind(this),onRegionSelected:function(h,f,j,O){if(this.fy){this.c.m.cv(`rel_${this.G}_${b}`,this.gm(O))}}.bind(this),onMarkerSelected:function(h,f,j,O){if(this.fy){this.c.m.cv(`rel_${this.G}_${b}`,this.gm(O))}}.bind(this)});var hz=s.find(`p.•fg`);hz.css(`top`,`${gX-20}px`);hz.css(`left`,`10px`);var kd=s.find(`p.•fg a`);kd.click(function(h){h.preventDefault();k.cO[b].setFocus({regions:[`GB`,`GR`]})});this.cO[b]=this.cN[b].vectorMap('get','mapObject');this.cO[b].setFocus({regions:[`GB`,`GR`]})};R.prototype.gt=function(b,t){this.fy=false;var fI={};for(var f in t){if(!(f in this.hS)&& f !=this.Y.cm){fI[f]=t[f]}}this.cO[b].setSelectedRegions(fI);this.cO[b].setSelectedMarkers(fI);this.fy=true};R.prototype.gv=function(b){var fb=this.D[b].length;if(fb==0){fb=1}var hy={};for(var f in this.Q[b]){if(f !=this.Y.cm){var hl=100 * this.Q[b][f]/ fb;hy[f]=(fb < 10)?hl:(10*Math.sqrt(hl))}}this.cO[b].series.markers[0].setValues(hy)};R.prototype.gy=function(b){};R.prototype.gw=function(b){this.fq[b]={};this.dI[b]={};var t=this.c.t[b];for(var j in t){var f=t[j];if(f[1]){this.cY[b][j]=false;this.cZ[b][j]=true;this.cp[b].push(j);this.T[b][j]=f[0];if(f.length > 3){this.fq[b][j]={latLng:[f[2],f[3]],d:f[0]}}this.dI[b][j]='jw'}else{this.dI[b][j]='jH'}}this.cp[b].sort(function(cA,dc){return(t[cA]< t[dc])?-1:(t[cA][0]> t[dc][0])?1:0})};function gj(c){this.c=c;this.ft={};this.cn={};this.fn={};this.fl={};this.gp={};this.dJ={};this.dE={};this.fx={};this.dF={};this.D={}};gj.prototype={cd:function(b){var l=`<div><p class="•hG"><span fct="${this.c.d}-${b}"></span> By full text search <span id="flt2_${b}" class="•hJ"></span></p>`;l +=`<div id="fltw_${b}">`;l +=`<p id="•kj${b}" class="•gd •fd •ff ui-widget">`;l +=`<input id="flt_${b}" class="flt"/>`;l +=`<a href="#" class="•fd fa fa-close •kk" id="clearf_${b}"></a>`;l +=`<span •ff class="•cJ" id="stats_${b}"></span>&nbsp;`;l +=`</p>`;l +=`<div id="autoc_${b}" style="display: none;">here ${b}</div>`;l +=`</div>`;this.c.n[b].html(l)},hY:function(b){var cx=this.c.m.Z(`flt_${b}`);this.fn[b].html(cx);this.cn[b].val(cx);this.cn[b].autocomplete(`search`,cx)},hV:function(b){return function(kw,jZ){this.dF[b]={};jZ.content.forEach(function(jY,j){this.dF[b][jY.value]=1},this);if(!(this.fx[b])){var cx=this.cn[b].val();this.c.m.cv(`flt_${b}`,cx)}}.bind(this)},hW:function(b){this.dE[b].click(function(h){h.preventDefault();this.cn[b].val(``);this.cn[b].autocomplete(`search`,``)}.bind(this))},ht:function(b){var fQ;if(this.cn[b].val()==``){fQ=``;this.dJ[b].removeClass(`•y`)}else{fQ=`${this.p.D[b].length} of `;this.dJ[b].addClass(`•y`)}this.dJ[b].html(`${fQ}${this.D[b].length}`)},cI:function(b,j){return(j in this.dF[b])},I:function(b){return(this.c.m.Z(`list`)==b)},P:function(b){this.cd(b)},F:function(b){if(!this.p){this.p=this.c.C.cB(`p`).L}var H=this.c.C.cB(`W`).H[b];this.ft[b]=[];H.forEach(function(cq,j){this.ft[b].push({label:cq[1],value:`${cq[0]}`})},this);this.dF[b]={};this.D[b]=[];var s=this.c.n[b];var dM=s.find(`#fltw_${b}`);this.cn[b]=$(`#flt_${b}`);this.fn[b]=$(`#flt2_${b}`);this.fl[b]=dM.find(`#•kj${b}`);this.gp[b]=dM.find(`#autoc_${b}`);this.dJ[b]=dM.find(`#stats_${b}`);this.dE[b]=dM.find(`#clearf_${b}`);this.cn[b].autocomplete({appendTo:this.gp[b],source:this.ft[b],response:this.hV(b),minLength:0});this.fx[b]=true;this.hW(b);this.hY(b);this.fx[b]=false},g:function(b){var cx=this.c.m.Z(`flt_${b}`);if(cx==``){this.fl[b].removeClass(`•y`);this.dE[b].hide()}else{this.fl[b].addClass(`•y`);this.dE[b].show()}this.fn[b].html(cx)}};function gh(c){this.c=c;this.gA={};this.H={};this.fR={};this.D={};this.fD={}};gh.prototype={cd:function(b){var l=``;l +=`<p><span fct="all"></span>Filtering <span id="fstats_${b}"></span></p>`;this.c.n[b].html(l)},I:function(b){return this.c.m.Z(`list`)==b},P:function(b){var cQ=this.c.cQ;this.fD[b]={};for(var V in cQ){var jq=cQ[V];if(jq.cC(b)){this.fD[b][V]=cQ[V]}}this.cd(b)},cX:function(dl,X){var k=this;var fB=dl.closest(`p`);var fF=fB.find(`.hidec`);var fJ=fB.find(`.morec`);var fP=fB.find(`.showc`);var fE=dl.closest(`div`).find(`table,.•gd`);var fz=dl.closest(`div`).find(`.•kq,.•hJ`);var dQ=`fctx_${dl.closest('span').attr('fct')}`;var hd=X==undefined;if(hd){if(cs.isSet(dQ)){X=cs.get(dQ)}else{X=1}}var dL=dQ==`fctx_all`;if(dL && !hd){dl.closest(`div`).find(`div.•kg span[fct]`).each(function(){k.cX($(this),X)})}cs.set(dQ,X);if(X==0){fF.show();fJ.hide();fP.hide();if(!dL){fE.hide();fz.hide()}}else if(X==1){fF.hide();fJ.show();fP.hide();if(!dL){fE.hide();fz.show()}}else{fF.hide();fJ.hide();fP.show();if(!dL){fE.show();fz.hide()}}},F:function(b){var k=this;var s=this.c.n[b];var jy=this.c.C.cB(`W`).n[b];this.gA[b]=s.find(`#fstats_${b}`);this.fR[b]=jy.find(`#table_${b}`);var fG=` details; click to change level of details`;var jn=`<a class="showc fa fa-list-ul" href="#" title="full${fG}"></a><a class="morec fa fa-align-left" href="#" title="condensed${fG}"></a><a class="hidec fa fa-minus" href="#" title="hidden${fG}"></a>`;s.addClass(`•gb`);s.find(`span[fct]`).each(function(){$(this).html(`${jn}&nbsp`);k.cX($(this))});s.find(`.hidec`).click(function(h){h.preventDefault();k.cX($(this),1)});s.find(`.morec`).click(function(h){h.preventDefault();k.cX($(this),2)});s.find(`.showc`).click(function(h){h.preventDefault();k.cX($(this),0)})},g:function(b){this.fR[b].find(`tr[id]`).hide();var jC=this.c.C.cB(`W`);var H=jC.H[b];var cr=this.fD[b];this.D[b]=[];for(var V in cr){var p=cr[V].L;p.D[b]=[]}H.forEach(function(cq,j){var cI=true;var dt=null;var dh=false;for(var V in cr){if(!dh){var p=cr[V].L;var hw=p.cI(b,cq[0]);if(!hw){cI=false;if(dt==null){dt=p}else{dh=true}}}}if(!dh){if(cI){this.D[b].push(cq[0]);this.fR[b].find(`tr[id="r${cq[0]}"]`).show()}if(dt !=null){dt.D[b].push(cq[0])}else{for(var V in cr){var p=cr[V].L;p.D[b].push(cq[0])}}}},this);for(var V in cr){var p=cr[V].L;p.ht(b)}this.gA[b].html(`${this.D[b].length} of ${H.length}`)}};function fk(c){this.c=c};fk.prototype={cd:function(b){var l=``;l +=`<table id="table_${b}">`;if(b==`contrib`){this.c.H[b].forEach(function(N){l +=`<tr id="r${N[0]}"><td><a href="#" rid="${N[0]}">${N[1]}</a></td></tr>`})}else if(b==`country`){this.c.H[b].forEach(function(N){jv=(N[3]==1)?`dariah`:``;l +=`<tr id="r${N[0]}"><td class="•kh">${N[1]}<td><td class="•kF">${N[2]}<td><td class="•kl">${jv}</td><td class="•hK">${N[4]}</td><td class="•hK">${N[5]}</td></tr>`})}else if(b==`type` || b==`tadiraha` || b==`tadiraho` || b==`tadiraht`){this.c.H[b].forEach(function(N){l +=`<tr id="r${N[0]}"><td class="•kn">${N[1]}<td></tr>`})}l +=`</table>`;this.c.n[b].html(l)},I:function(b){return this.c.m.Z(`list`)==b},P:function(b){this.cd(b)},F:function(b){},g:function(b){}};function fj(c){this.c=c;this.cc={};this.dO={}};fj.prototype={cd:function(b){this.c.n[b].html(`<a class="•fY" href="#">${this.c.m.fO('list', b, 'cw')}</a> `)},fm:function(b){this.dO[b].click(function(h){h.preventDefault();this.c.m.cv(`list`,b)}.bind(this))},hR:function(b){return this.c.m.Z(`list`)==b},I:function(b){return true},P:function(b){this.cd(b);this.cc[b]=this.c.n[b];this.cc[b].addClass(`•fX`);this.dO[b]=this.c.n[b].find(`a`)},F:function(b){this.fm(b)},g:function(b){if(this.hR(b)){this.dO[b].addClass(`•y`);this.cc[b].addClass(`•y`)}else{this.dO[b].removeClass(`•y`);this.cc[b].removeClass(`•y`)}}};function gk(c){this.c=c};gk.prototype={I:function(b){return true},P:function(b){var l=`
<p id="•fU">Cite</p>
<table align="center">
    <tr>
        <td class="•fV clr">
            <a lnk="" href="#" id="•hE" title="link to page content and appearance (markdown)" class="ctrl fa fa-level-down fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hC" title="link to page content and appearance (html)" class="ctrl fa fa-external-link-square fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hD" title="link to page content (html)" class="ctrl fa fa-external-link fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•fW" title="copy page content" class="ctrl fa fa-file-text-o fa-lg fa-fw"></a>
        </td>
    </tr>
    <tr>
        <th class="•fV" width="60px">page view</th>
    </tr>
    <tr class="•kD">
        <td class="•fV"><span id="•ks" class="ctrl fa fa-chevron-right fa-fw"></span><span id="•kr" class="•hH">share link to this page with or without view settings.</span></td>
    </tr>
</table>
<p id="•hA"></p>
<p id="•hB"></p>
`;this.c.n[b].html(l)},F:function(b){var k=this;var s=this.c.n[b];var dW=$(`#self_link`);dW.hide();s.addClass(`•gg`);s.find(`.•hH`).hide();s.find(`#•hE,#•hC,#•hD,#•kE`).click(function(h){h.preventDefault();window.prompt(`Press <Cmd-C> and then <Enter> to copy link on clipboard`,$(this).attr(`lnk`))});s.find(`#•fW`).click(function(h){h.preventDefault();var dN=`middle`;var db=app_url_cite+k.c.m.dP(true);dW.show();dW.attr(`href`,db);jN(dN)});s.find(`#•ks`).click(function(h){h.preventDefault();jV($(this),$(`#•kr`))});s.click(function(h){h.preventDefault();var db=app_url_cite+k.c.m.dP(true);var jf=app_url_cite+k.c.m.dP(false);$(`#•fU`).hide();$(`#•hA`).html(``);$(`#•hB`).html(``);$(`.•fV.clr,#•hA,#•hB`).removeClass(`error warning good special`);var hq=dj($(`title`).text());$(`#•hE`).attr(`lnk`,`[${hq}](${db})`);$(`#•hC`).attr(`lnk`,db);$(`#•hD`).attr(`lnk`,jf);$(`#•fW`).attr(`lnk`,db);$(`#•fW`).attr(`tit`,hq);$(this).animate({height:`100px`,width:`200px`,opacity:0.95},300)});s.mouseleave(function(){dW.hide();$(`#•fU`).show();s.animate({height:`20px`,width:`40px`,opacity:.7},300);return false})},g:function(b){}};function fh(d,cF,C){this.d=d;this.C=C;this.cF=cF;this.E=cF.E;this.cP={};for(var b in this.E){this.cP[b]={};for(var cS in this.C.dX){this.cP[b][cS]=true}}this.v={};this.n={};this.m=this.C.m;this.H={};this.t={};this.L=new cF.x(this)};fh.prototype={hf:function(b,r){return !this.cP[b][r].state ||(this.cP[b][r].state()==`rejected`)},hN:function(b,r,dT){var hb=this[dT].bind(this,b);var jT=this.C.jr(this.d,r);var hp=[];jT.forEach(function(dZ){var fL=dZ[0];var fM=dZ[1];var hm=this.C.cB(fL);if(hm.cC(b)){hp.push(hm.cP[b][fM])}},this);this.cP[b][r]=$.when.apply($,hp).then(hb)},ch:function(b,r,dT){if(r in this.C.dX){if(!this.C.dX[r]|| this.hf(b,r)){this.hN(b,r,dT)}}},cC:function(b){return(b in this.E)},fw:function(b,jE){if(this.cC(b)){if(b in this.n){if(jE){this.n[b].show()}else{this.n[b].hide()}}}},hP:function(b){var K=url_tpl.replace(/_c_/,`data`).replace(/_f_/,`${this.cF.K}_${b}`)+`.json`;this.v[b].v(`fetching data ...`);var jL=this.hT.bind(this,b);return $.ajax({type:`POST`,url:K,contentType:`application/json; charset=utf-8`,dataType:`json`}).then(function(cD){jL(cD)})},hT:function(b,cD){this.v[b].gK();cD.msgs.forEach(function(jA){this.v[b].v(jA)},this);if(cD.good){this.H[b]=cD.data;if(`relvals` in cD){this.t[b]=cD.relvals}}this.L.P(b)},gE:function(b){this.hO=this.C.js(this.cF.U,this.E);this.n[b]=$(`#${this.d}_${b}`);if(this.n[b].length==0){var dg=this.hO[b];dg.append(`<div id="msg_${this.d}_${b}"></div>`);dg.append(`<div id="${this.d}_${b}" class="•kg"></div>`);this.n[b]=$(`#${this.d}_${b}`)}this.v[b]=new dy(`msg_${this.d}_${b}`);if(this.cF.K !=null){return this.hP(b)}else{this.L.P(b)}},gF:function(b){this.L.F(b)},gG:function(b){this.fw(b,true);this.L.g(b)},g:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`P`,`gE`);this.ch(b,`F`,`gF`);this.ch(b,`g`,`gG`)}else{this.fw(b,false)}},P:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`P`,`gE`)}},F:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`F`,`gF`)}},g:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`g`,`gG`)}else{this.fw(b,false)}}};function dz(){this.d=`page`;this.v=new dy(`msg_${this.d}`);this.m=new gl(this);this.dX={P:true,F:true,g:false};this.hs={F:`P`,g:`F`};var dS=this.m.jt(`list`);var dd={contrib:1};var jp={'':1};this.cL={jO:{U:`body`,E:jp,K:null,x:gk},gN:{U:`left`,E:dS,K:null,x:fj},W:{U:`middle`,E:dS,K:`list`,x:fk},p:{U:`gN`,E:dS,K:null,x:gh},dm:{U:`p`,E:dS,K:null,x:gj},dk:{U:`p`,E:dd,K:`country`,x:R},df:{U:`p`,E:dd,K:`type`,x:dx},dr:{U:`p`,E:dd,K:`tadiraha`,x:dA},ds:{U:`p`,E:dd,K:`tadiraho`,x:dB},dY:{U:`p`,E:dd,K:`tadiraht`,x:dC}},this.cK={P:{p:{gN:1,W:1},dm:{p:1},dk:{p:1,dm:1},df:{p:1,dk:1},dr:{p:1,df:1},ds:{p:1,dr:1},dY:{p:1,ds:1},jO:{p:1,W:1}},F:{p:{dm:1,dk:1,df:1,dr:1,ds:1,dY:1},dm:{W:1},dk:{W:1},df:{W:1},dr:{W:1},ds:{W:1},dY:{W:1}},g:{p:{dm:1,dk:1,df:1,dr:1,ds:1,dY:1}}};this.cg={};for(var d in this.cL){var c=new fh(d,this.cL[d],this);c.cQ={};this.cg[d]=c}for(var d in this.cL){var jh=this.cg[d];var gQ=this.cL[d].U;if(gQ in this.cg){var jK=this.cg[gQ];jK.cQ[d]=jh}}for(var d in this.cg){var c=this.cg[d];c.gJ={};for(var r in this.cK){var gM=this.cK[r];c.gJ[r]={};if(d in gM){for(var jg in gM[d]){c.gJ[r][jg]=1}}}}this.hU();this.hZ(80);History.Adapter.bind(window,`statechange`,this.m.g())};dz.prototype={hZ(jQ){var kc=`${window.innerHeight - jQ}px`;for(var kb in{'middle':1,'left':1,'right':1}){$(`#${kb}`).css(`height`,kc)}},hU(){var dw=[];var dv={};var cT={};for(var d in this.cL){for(var r in this.dX){dw.push(`${d}-${r}`)}}function gH(cl,cb){if(!(cl in dv)){dv[cl]={}}if(!(cb in cT)){cT[cb]={}}dv[cl][cb]=true;cT[cb][cl]=true}for(var hh in this.hs){var fM=this.hs[hh];for(var d in this.cL){gH(`${d}-${fM}`,`${d}-${hh}`)}}for(var r in this.cK){for(var hg in this.cK[r]){for(var fL in this.cK[r][hg]){gH(`${fL}-${r}`,`${hg}-${r}`)}}}var cj=0;var cG=[];var cU={};while(cj <=dw.length){cG.push({});if(cj==0){dw.forEach(function(ck){if(!(ck in cT)){cG[cj][ck]=1}})}else{for(var cl in cU){if(cl in dv){for(var cb in dv[cl]){if(!(cb in cU)){var gV=true;for(var jG in cT[cb]){if(!(jG in cU)){gV=false;break}}if(gV){cG[cj][cb]=1}}}}}}if(!Object.keys(cG[cj]).length){break}for(var ck in cG[cj]){cU[ck]=1}cj++}this.fv=[];this.gB={};if(Object.keys(cU).length !=dw.length){var gO=[];dw.forEach(function(ck){if(!(ck in cU)){gO.push(ck)}})}else{cG.forEach(function(jD,cj){for(var ck in jD){this.fv.push(ck)}},this);this.gB=cT}},cB:function(d){return this.cg[d]},js:function(d,E){var n={};if(d in this.cg){n=this.cg[d].n}else{var jd=(d==`body`)?$(`body`):$(`#${d}`);for(var b in E){n[b]=jd}}return n},jr:function(d,r){var hn=[];var cb=`${d}-${r}`;for(var cl in(this.gB[cb]||{})){hn.push(cl.split(`-`))}return hn},g:function(){this.fv.forEach(function(dZ){var hv=dZ.split(`-`);var d=hv[0];var r=hv[1];var c=this.cB(d);for(var b in c.E){c[r](b)}},this)}};$(function(){new dz().g()});