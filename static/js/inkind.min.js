var dh=(function(){`use strict`;var jd={'&':`&amp;`,'<':`&lt;`,'>':`&gt;`};return function(cH){return cH.replace(/[&<>]/g,function(cA){return jd[cA]})}}());var hH={dP:function(d){return this.hc()[d]},hc:function(dV){var j,dP,hd,hl,ct;ct={};if(!dV){dV=window.location.search}if(dV.indexOf("?")===-1){return{}}hl=dV.slice(1);hd=hl.split("&");hd.forEach(function(jE,j){dP=jE.split("=");ct[dP[0]]=dP[1]});return ct}};var fJ=hH.hc();var jv=$.initNamespaceStorage(`req`);var cs=jv.localStorage;function gM(){if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}};function jJ(gJ){gM();if(document.selection){var dl=document.body.createTextRange();dl.moveToElementText(document.getElementById(gJ));dl.select()}else if(window.getSelection){var dl=document.createRange();dl.selectNode(document.getElementById(gJ));window.getSelection().addRange(dl)}};function jR(cc,gO,gP){var jN=(gO==undefined)?cc.closest('div').find('.•hD'):gO;jN.toggle();if(gP !=undefined){gP(cc)}var fO,fG;if(cc.hasClass('fa-chevron-right')){fO='fa-chevron-right';fG='fa-chevron-down'}else{fO='fa-chevron-down';fG='fa-chevron-right'}cc.removeClass(fO);cc.addClass(fG)};function gH(fv,jL,cH){return(cH.length > fv)?cH.replace(/[^ -]+/g,function(cV){return cV.substr(0,jL)}):cH};function dw(df,jB){this.cM=$(`#${df}`);this.gy=$(`#trash_${df}`);this.gz=this.gy.closest(`p`);this.gy.click(function(h){h.preventDefault();this.gG()}.bind(this));this.gm();this.gs=jB};dw.prototype={gm:function(){this.cM.hide();this.gz.hide()},hW:function(){this.cM.show();if(this.cM.html()!=``){this.gz.show()}},gG:function(){this.cM.html(``);if(this.gs !=undefined){this.gs()}this.gm()},v:function(cH,fD){if(fD==undefined){fD=`info`}var jx=this.cM.html();this.cM.html(`${jx}<p class="${fD}">${cH}</p>`);this.hW()}};function gg(C){this.cy={};this.C=C;this.v=C.v;this.hM();this.gj()};gg.prototype={cz:{list:{J:true,z:`string`,A:{contrib:1,country:1,type:1,tadiraha:1,tadiraho:1,tadiraht:1},B:`contrib`},flt_contrib:{J:false,z:`string`,A:null,B:``},flt_country:{J:false,z:`string`,A:null,B:``},flt_type:{J:false,z:`string`,A:null,B:``},flt_tadiraha:{J:false,z:`string`,A:null,B:``},flt_tadiraho:{J:false,z:`string`,A:null,B:``},flt_tadiraht:{J:false,z:`string`,A:null,B:``},rel_country_contrib:{J:false,z:`string`,A:null,B:``},rel_type_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraha_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraho_contrib:{J:false,z:`string`,A:null,B:``},rel_tadiraht_contrib:{J:false,z:`string`,A:null,B:``},id:{J:true,z:`integer`,dM:{gX:-1,gV:1000000},B:0},sort:{J:false,z:`boolean`,A:{v:true,x:false},B:true}},fm:{list:{contrib:{cw:`contribution`,cR:`contributions`},country:{cw:`country`,cR:`countries`},type:{cw:`type`,cR:`types`},tadiraha:{cw:`tadirah activity`,cR:`tadirah activities`},tadiraho:{cw:`tadirah object`,cR:`tadirah objects`},tadiraht:{cw:`tadirah technique`,cR:`tadirah techniques`}}},hX:function(d,q){var M,kx;if(d in this.cz){var w=this.cz[d];if(w.z==`string`){if(w.A){if(q in w.A){M=q}else{M=w.B;this.v.v(`illegal string value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}}else{M=q}}else if(w.z==`integer`){if(/^(\-|\+)?[0-9]+$/.test(q)){M=Number(q)}else{M=w.B;this.v.v(`not a number value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}if(M < w.dM.gX){this.v.v(`number to small for ${d}: "${M}" is replaced by "${w.dM.gX}"`,`warning`)}if(M > w.dM.gV){this.v.v(`number to big for ${d}: "${M}" is replaced by "${w.dM.gV}"`,`warning`)}}else if(w.z==`boolean`){if(q in w.A){M=w.A[q]}else{M=w.B;this.v.v(`illegal boolean value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}}}else{M=null;this.v.v(`unknown parameter: ${d}=${q}`,`warning`)}return M},dL:function(jg){fP=[];for(var d in this.cy){var q=this.cy[d];var w=this.cz[d];if(jg || w.J){if(w.z==`string` || w.z==`integer`){fP.push(`${d}=${q}`)}else if(w.z==`boolean`){for(var hs in w.A){if(w.A[hs]==q){fP.push(`${d}=${hs}`)}}}}}return fP.join(`&`)},hM:function(){for(var d in fJ){if(!(d in this.cz)){this.v.v(`unknown parameter: ${d}=${q}`,`warning`)}}for(var d in this.cz){var q=null;if(d in fJ){var jI=fJ[d];q=this.hX(d,jI);cs.set(d,q)}else if(cs.isSet(d)){q=cs.get(d)}else{q=this.cz[d].B;cs.set(d,q)}this.cy[d]=q}},gj:function(ky,kA){var jQ=`DARIAH contribution tool`;var jO=`${app_url}?${this.dL(false)}`;History.pushState(this.cy,jQ,jO)},cv:function(d,q){this.cy[d]=q;cs.set(d,q);this.gj()},W:function(d){return this.cy[d]},jp:function(d){return this.cz[d].A},fK:function(d,q,Y){var ct=q;var kw=(Y==undefined)?`cw`:Y;if(this.fm[d]!=undefined && this.fm[d][q]!=undefined){ct=this.fm[d][q][Y]}return ct},g:function(){return function(){var l=History.getState();if(l && l.data){this.cy=l.data;this.C.g()}}.bind(this)}};function S(c,z,jf,fv){this.c=c;this.D={};this.fh={};this.fj={};this.fl={};this.dB={};this.Q={};this.cp={};this.T={};this.cY={};this.cX={};this.Z={cm:`-`,d:`-none`};this.G=z;this.hI=jf || 2;this.gl=fv || 14};S.prototype={cd:function(b){var jT=this.c.l.fK(`list`,this.G,`cw`);var jS=this.c.l.fK(`list`,this.G,`cR`);var k=``;k +=this.gv(b);k +=`<div><p class="•hC"><span fct="${this.c.d}-${b}"></span> By ${jT}</p>`;k +=`<p class="•jZ"><span rv="_all" class="•cJ"></span> <a rv="_all" href="#" class="•hE">all ${jS}</a></p>
<table class="•kk" id="list-${this.G}-vals_${b}"><tr>`;this.cp[b].forEach(function(f,j,cf){if((j % this.hI==0)&&(j > 0)&&(j < cf.length)){k +=`</tr><tr>`}var dm=this.T[b][f];k +=`<td><span rv="${f}" class="•cJ"></span></td><td><a rv="${f}" title="${dh(dm)}" href="#" class="•fX">${dh(gH(this.gl, 6,dm))}</a></td>`},this);k +=`</tr></table>`;k +=`<p class="•kl" id="list2-${this.G}-vals_${b}">`;this.cp[b].forEach(function(f,j,cf){var dm=this.T[b][f];k +=`<a href="#" rv="${f}" title="${dh(dm)}" class="•fZ">${dh(gH(this.gl, 5,dm))}</a> `},this);k +=`</p>`;k +=`</div>`;this.c.n[b].html(k)},ff:function(b){var t=this.c.n[b];this.fh[b]=t.find(`#list-${this.G}-vals_${b}`);this.fj[b]=t.find(`#list2-${this.G}-vals_${b}`);var m=this;this.fh[b].find(`.•fX`).click(function(h){h.preventDefault();var f=$(this).attr(`rv`);var O=m.dE(b,m.c.l.W(`rel_${m.G}_${b}`));O[f]=(f in O)?!O[f]:true;m.c.l.cv(`rel_${m.G}_${b}`,m.dH(O))});this.fj[b].find(`.•fZ`).click(function(h){h.preventDefault();var f=$(this).attr(`rv`);var O=m.dE(b,m.c.l.W(`rel_${m.G}_${b}`));O[f]=(f in O)?!O[f]:true;m.c.l.cv(`rel_${m.G}_${b}`,m.dH(O));$(this).closest(`div`).find(`.morec`).click()});this.dB[b]=this.c.n[b].find(`[rv="_all"]`);this.dB[b].click(function(h){h.preventDefault();var js=$(this).hasClass(`•y`);if(js){m.c.l.cv(`rel_${m.G}_${b}`,m.dH(m.cX[b]))}else{m.c.l.cv(`rel_${m.G}_${b}`,m.dH(m.cY[b]))}})},hT:function(b,s){var gE=true;for(var f in this.T[b]){var gQ=this.fh[b].find(`[rv="${f}"]`);var gR=this.fj[b].find(`[rv="${f}"]`);if(f in s && s[f]){gQ.addClass(`•y`);gR.addClass(`•y`)}else{gQ.removeClass(`•y`);gR.removeClass(`•y`);gE=false}}if(gE){this.dB[b].addClass(`•y`)}else{this.dB[b].removeClass(`•y`)}},gh:function(cf){return cf.join(',')},dH:function(cE){var cf=[];for(var cV in cE){if(cE[cV]){cf.push(cV)}}return cf.join(',')},dE:function(b,cS){var cE={};if(cS !==null && cS !=undefined && cS !=''){var cf=cS.split(',');cf.forEach(function(cI){cE[cI]=true})}for(var f in this.T[b]){if(!(f in cE)){cE[f]=false}}return cE},hp:function(b){this.Q[b]={};for(var f in this.T[b]){this.Q[b][f]=0}var dn=this.c.H[b];for(var cV in this.D[b]){var j=this.D[b][cV];var gT=false;for(var f in dn[j]){this.Q[b][f]+=1;gT=true}if(!gT){this.Q[b][this.Z.cm]+=1}}for(var f in this.Q[b]){this.c.n[b].find(`span[rv="${f}"].•cJ`).html(this.Q[b][f])}this.c.n[b].find(`span[rv="_all"].•cJ`).html(this.D[b].length);this.gq(b)},cI:function(b,j){var dn=this.c.H[b];var dQ=this.dE(b,this.fl[b]);if((j in dn)&&(Object.keys(dn[j]).length !=0)){for(var f in dn[j]){if((f in dQ)&& dQ[f]){return true}}}else{if((this.Z.cm in dQ)&&(dQ[this.Z.cm])){return true}}return false},I:function(b){return(this.c.l.W(`list`)==b)},P:function(b){this.cp[b]=[];this.T[b]={};this.cX[b]={};this.cY[b]={};this.gt(b);this.gr(b);this.cp[b].push(this.Z.cm);this.T[b][this.Z.cm]=this.Z.d;this.cX[b][this.Z.cm]=false;this.cY[b][this.Z.cm]=true;this.cd(b)},F:function(b){this.gn(b);this.ff(b)},g:function(b){this.fl[b]=this.c.l.W(`rel_${this.G}_${b}`);var s=this.dE(b,this.fl[b]);this.gp(b,s);this.hT(b,s)},gt:function(b){var s=this.c.s[b];for(var j in s){var f=s[j];this.cX[b][j]=false;this.cY[b][j]=true;this.cp[b].push(j);this.T[b][j]=f}this.cp[b].sort(function(cA,db){return(s[cA]< s[db])?-1:(s[cA]> s[db])?1:0})},gr:function(b){},gv:function(b){return ``},gn:function(b){},gp:function(b){},gq:function(b){}};function dv(c){S.call(this,c,`type`)};dv.prototype=Object.create(S.prototype);dv.prototype.constructor=dv;function dz(c){S.call(this,c,`tadiraho`)};dz.prototype=Object.create(S.prototype);dz.prototype.constructor=dz;function dy(c){S.call(this,c,`tadiraha`)};dy.prototype=Object.create(S.prototype);dy.prototype.constructor=dy;function dA(c){S.call(this,c,`tadiraht`,1,30)};dA.prototype=Object.create(S.prototype);dA.prototype.constructor=dA;function R(c){S.call(this,c,`country`);this.cO={};this.cN={};this.fk={};this.dF={};this.hO={CY:true,KS:true,TR:true,MC:true,GE:true}};R.prototype=Object.create(S.prototype);R.prototype.constructor=R;R.prototype.gv=function(b){return `<div id="map-europe_${b}" class="•kg"><p class="•dY"><a class="fa fa-arrows" href="#" title="zoom to fit all countries"/></p></div>`};R.prototype.gn=function(b){var m=this;var t=this.c.n[b];this.cN[b]=t.find(`#map-europe_${b}`);var gU=this.cN[b].width()*0.6;this.cN[b].width(`100%`);this.cN[b].height(gU);this.cN[b].vectorMap({'map':`europe_mill`,backgroundColor:`#ccccff`,regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:`#008800`,'fill-opacity':0.2,stroke:`none`,'stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':1,'stroke-opacity':1},selected:{fill:`#008800`,'fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:`#bbbbbb`,'fill-opacity':1,stroke:`none`,'stroke-width':0,'stroke-opacity':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':3,'stroke-opacity':1},selected:{fill:`#dd8844`,'fill-opacity':1},selectedHover:{}},markers:this.fk[b],series:{markers:[{values:{},scale:[0,20],normalizeFunction:`linear`,attribute:`r`,min:0,max:100}],regions:[{scale:{'jD':`#ffffff`,'jr':`#ffddbb`},attribute:`fill`,values:this.dF[b]}]},onRegionTipShow:function(h,fx,f){fx.html(`${f}: ${(f in this.Q[b])?this.Q[b][f]:'not in DARIAH'}`)}.bind(this),onMarkerTipShow:function(h,fx,f){fx.html(`${f}: ${(f in this.Q[b])?this.Q[b][f]:'not in DARIAH'}`)}.bind(this),onRegionClick:function(h,f){if(!(f in this.T[b])){h.preventDefault()}}.bind(this),onMarkerClick:function(h,f){if(!(f in this.T[b])){h.preventDefault()}}.bind(this),onRegionSelected:function(h,f,j,O){if(this.fs){this.c.l.cv(`rel_${this.G}_${b}`,this.gh(O))}}.bind(this),onMarkerSelected:function(h,f,j,O){if(this.fs){this.c.l.cv(`rel_${this.G}_${b}`,this.gh(O))}}.bind(this)});var hv=t.find(`p.•dY`);hv.css(`top`,`${gU-20}px`);hv.css(`left`,`10px`);var jY=t.find(`p.•dY a`);jY.click(function(h){h.preventDefault();m.cO[b].setFocus({regions:[`GB`,`GR`]})});this.cO[b]=this.cN[b].vectorMap('get','mapObject');this.cO[b].setFocus({regions:[`GB`,`GR`]})};R.prototype.gp=function(b,s){this.fs=false;var fE={};for(var f in s){if(!(f in this.hO)&& f !=this.Z.cm){fE[f]=s[f]}}this.cO[b].setSelectedRegions(fE);this.cO[b].setSelectedMarkers(fE);this.fs=true};R.prototype.gq=function(b){var dU=this.D[b].length;if(dU==0){dU=1}var ht={};for(var f in this.Q[b]){if(f !=this.Z.cm){var hf=100 * this.Q[b][f]/ dU;ht[f]=(dU < 10)?hf:(10*Math.sqrt(hf))}}this.cO[b].series.markers[0].setValues(ht)};R.prototype.gt=function(b){};R.prototype.gr=function(b){this.fk[b]={};this.dF[b]={};var s=this.c.s[b];for(var j in s){var f=s[j];if(f[1]){this.cX[b][j]=false;this.cY[b][j]=true;this.cp[b].push(j);this.T[b][j]=f[0];if(f.length > 3){this.fk[b][j]={latLng:[f[2],f[3]],d:f[0]}}this.dF[b][j]='jr'}else{this.dF[b][j]='jD'}}this.cp[b].sort(function(cA,db){return(s[cA]< s[db])?-1:(s[cA][0]> s[db][0])?1:0})};function gd(c){this.c=c;this.fn={};this.cn={};this.fg={};this.fd={};this.gk={};this.dG={};this.dC={};this.fr={};this.dD={};this.D={}};gd.prototype={cd:function(b){var k=`<div><p class="•hC"><span fct="${this.c.d}-${b}"></span> By full text search <span id="flt2_${b}" class="•hF"></span></p>`;k +=`<div id="fltw_${b}">`;k +=`<p id="•kc${b}" class="•fY •dW •dX ui-widget">`;k +=`<input id="flt_${b}" class="flt"/>`;k +=`<a href="#" class="•dW fa fa-close •kd" id="clearf_${b}"></a>`;k +=`<span •dX class="•cJ" id="stats_${b}"></span>&nbsp;`;k +=`</p>`;k +=`<div id="autoc_${b}" style="display: none;">here ${b}</div>`;k +=`</div>`;this.c.n[b].html(k)},hU:function(b){var cx=this.c.l.W(`flt_${b}`);this.fg[b].html(cx);this.cn[b].val(cx);this.cn[b].autocomplete(`search`,cx)},hR:function(b){return function(ks,jV){this.dD[b]={};jV.content.forEach(function(jU,j){this.dD[b][jU.value]=1},this);if(!(this.fr[b])){var cx=this.cn[b].val();this.c.l.cv(`flt_${b}`,cx)}}.bind(this)},hS:function(b){this.dC[b].click(function(h){h.preventDefault();this.cn[b].val(``);this.cn[b].autocomplete(`search`,``)}.bind(this))},hp:function(b){var fM;if(this.cn[b].val()==``){fM=``;this.dG[b].removeClass(`•y`)}else{fM=`${this.p.D[b].length} of `;this.dG[b].addClass(`•y`)}this.dG[b].html(`${fM}${this.D[b].length}`)},cI:function(b,j){return(j in this.dD[b])},I:function(b){return(this.c.l.W(`list`)==b)},P:function(b){this.cd(b)},F:function(b){if(!this.p){this.p=this.c.C.cB(`p`).L}var H=this.c.C.cB(`X`).H[b];this.fn[b]=[];H.forEach(function(cq,j){this.fn[b].push({label:cq[1],value:`${cq[0]}`})},this);this.dD[b]={};this.D[b]=[];var t=this.c.n[b];var dI=t.find(`#fltw_${b}`);this.cn[b]=$(`#flt_${b}`);this.fg[b]=$(`#flt2_${b}`);this.fd[b]=dI.find(`#•kc${b}`);this.gk[b]=dI.find(`#autoc_${b}`);this.dG[b]=dI.find(`#stats_${b}`);this.dC[b]=dI.find(`#clearf_${b}`);this.cn[b].autocomplete({appendTo:this.gk[b],source:this.fn[b],response:this.hR(b),minLength:0});this.fr[b]=true;this.hS(b);this.hU(b);this.fr[b]=false},g:function(b){var cx=this.c.l.W(`flt_${b}`);if(cx==``){this.fd[b].removeClass(`•y`);this.dC[b].hide()}else{this.fd[b].addClass(`•y`);this.dC[b].show()}this.fg[b].html(cx)}};function gc(c){this.c=c;this.gw={};this.H={};this.fN={};this.D={};this.fy={}};gc.prototype={cd:function(b){var k=``;k +=`<p>Filtering <span id="fstats_${b}"></span></p>`;this.c.n[b].html(k)},cW:function(b,Y){},I:function(b){return this.c.l.W(`list`)==b},P:function(b){var cQ=this.c.cQ;this.fy[b]={};for(var V in cQ){var jl=cQ[V];if(jl.cC(b)){this.fy[b][V]=cQ[V]}}this.cd(b)},cW:function(dK,Y){var fC=`fctx_${dK.closest('span').attr('fct')}`;var fw=dK.closest(`p`);var fz=dK.closest(`div`).find(`table,.•fY`);var ft=dK.closest(`div`).find(`.•kl,.•hF`);var fA=fw.find(`.hidec`);var fF=fw.find(`.morec`);var fL=fw.find(`.showc`);if(Y==undefined){if(cs.isSet(fC)){Y=cs.get(fC)}else{Y=1}}cs.set(fC,Y);if(Y==0){fA.show();fF.hide();fL.hide();fz.hide();ft.hide()}else if(Y==1){fA.hide();fF.show();fL.hide();fz.hide();ft.show()}else{fA.hide();fF.hide();fL.show();fz.show();ft.hide()}},F:function(b){var m=this;var t=this.c.n[b];var jt=this.c.C.cB(`X`).n[b];this.gw[b]=t.find(`#fstats_${b}`);this.fN[b]=jt.find(`#table_${b}`);var fB=` details; click to change level of details`;var jj=`<a class="showc fa fa-reorder" href="#" title="full${fB}"></a><a class="morec fa fa-ellipsis-h" href="#" title="condensed${fB}"></a><a class="hidec fa fa-minus" href="#" title="hidden${fB}"></a>`;t.addClass(`•fW`);t.find(`span[fct]`).each(function(){$(this).html(`${jj}&nbsp`);m.cW($(this))});t.find(`.hidec`).click(function(h){h.preventDefault();m.cW($(this),1)});t.find(`.morec`).click(function(h){h.preventDefault();m.cW($(this),2)});t.find(`.showc`).click(function(h){h.preventDefault();m.cW($(this),0)})},g:function(b){this.fN[b].find(`tr[id]`).hide();var jy=this.c.C.cB(`X`);var H=jy.H[b];var cr=this.fy[b];this.D[b]=[];for(var V in cr){var p=cr[V].L;p.D[b]=[]}H.forEach(function(cq,j){var cI=true;var dr=null;var dg=false;for(var V in cr){if(!dg){var p=cr[V].L;var hr=p.cI(b,cq[0]);if(!hr){cI=false;if(dr==null){dr=p}else{dg=true}}}}if(!dg){if(cI){this.D[b].push(cq[0]);this.fN[b].find(`tr[id="r${cq[0]}"]`).show()}if(dr !=null){dr.D[b].push(cq[0])}else{for(var V in cr){var p=cr[V].L;p.D[b].push(cq[0])}}}},this);for(var V in cr){var p=cr[V].L;p.hp(b)}this.gw[b].html(`${this.D[b].length} of ${H.length}`)}};function fc(c){this.c=c};fc.prototype={cd:function(b){var k=``;k +=`<table id="table_${b}">`;if(b==`contrib`){this.c.H[b].forEach(function(N){k +=`<tr id="r${N[0]}"><td><a href="#" rid="${N[0]}">${N[1]}</a></td></tr>`})}else if(b==`country`){this.c.H[b].forEach(function(N){jq=(N[3]==1)?`dariah`:``;k +=`<tr id="r${N[0]}"><td class="•kb">${N[1]}<td><td class="•kE">${N[2]}<td><td class="•kf">${jq}</td><td class="•hG">${N[4]}</td><td class="•hG">${N[5]}</td></tr>`})}else if(b==`type` || b==`tadiraha` || b==`tadiraho` || b==`tadiraht`){this.c.H[b].forEach(function(N){k +=`<tr id="r${N[0]}"><td class="•kj">${N[1]}<td></tr>`})}k +=`</table>`;this.c.n[b].html(k)},I:function(b){return this.c.l.W(`list`)==b},P:function(b){this.cd(b)},F:function(b){},g:function(b){}};function fb(c){this.c=c;this.cc={};this.dJ={}};fb.prototype={cd:function(b){this.c.n[b].html(`<a class="•fU" href="#">${this.c.l.fK('list', b, 'cw')}</a> `)},ff:function(b){this.dJ[b].click(function(h){h.preventDefault();this.c.l.cv(`list`,b)}.bind(this))},hN:function(b){return this.c.l.W(`list`)==b},I:function(b){return true},P:function(b){this.cd(b);this.cc[b]=this.c.n[b];this.cc[b].addClass(`•fT`);this.dJ[b]=this.c.n[b].find(`a`)},F:function(b){this.ff(b)},g:function(b){if(this.hN(b)){this.dJ[b].addClass(`•y`);this.cc[b].addClass(`•y`)}else{this.dJ[b].removeClass(`•y`);this.cc[b].removeClass(`•y`)}}};function gf(c){this.c=c};gf.prototype={I:function(b){return true},P:function(b){var k=`
<p id="•fQ">Cite</p>
<table align="center">
    <tr>
        <td class="•fR clr">
            <a lnk="" href="#" id="•hA" title="link to page content and appearance (markdown)" class="ctrl fa fa-level-down fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hy" title="link to page content and appearance (html)" class="ctrl fa fa-external-link-square fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hz" title="link to page content (html)" class="ctrl fa fa-external-link fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•fS" title="copy page content" class="ctrl fa fa-file-text-o fa-lg fa-fw"></a>
        </td>
    </tr>
    <tr>
        <th class="•fR" width="60px">page view</th>
    </tr>
    <tr class="•kB">
        <td class="•fR"><span id="•kn" class="ctrl fa fa-chevron-right fa-fw"></span><span id="•km" class="•hD">share link to this page with or without view settings.</span></td>
    </tr>
</table>
<p id="•hw"></p>
<p id="•hx"></p>
`;this.c.n[b].html(k)},F:function(b){var m=this;var t=this.c.n[b];t.addClass(`•gb`);t.find(`.•hD`).hide();t.find(`#•hA,#•hy,#•hz,#•kC`).click(function(h){h.preventDefault();window.prompt(`Press <Cmd-C> and then <Enter> to copy link on clipboard`,$(this).attr(`lnk`))});t.find(`#•fS`).click(function(h){h.preventDefault();var cZ=app_url_cite+m.c.l.dL(true);var hm=$(`#•kh`);hm.show();hm.attr(`href`,cZ);jJ(kq=`kv${m.c.l.W('list')}`)});t.find(`#•kn`).click(function(h){h.preventDefault();jR($(this),$(`#•km`))});t.click(function(h){h.preventDefault();var cZ=app_url_cite+m.c.l.dL(true);var hZ=app_url_cite+m.c.l.dL(false);$(`#•fQ`).hide();$(`#•hw`).html(``);$(`#•hx`).html(``);$(`.•fR.clr,#•hw,#•hx`).removeClass(`error warning good special`);var hk=dh($(`title`).text());$(`#•hA`).attr(`lnk`,`[${hk}](${cZ})`);$(`#•hy`).attr(`lnk`,cZ);$(`#•hz`).attr(`lnk`,hZ);$(`#•fS`).attr(`lnk`,cZ);$(`#•fS`).attr(`tit`,hk);$(this).animate({height:`100px`,width:`200px`,opacity:0.95},300)});t.mouseleave(function(){$(`#•kh`).hide();gM();$(`#•fQ`).show();t.animate({height:`20px`,width:`40px`,opacity:.7},300);return false})},g:function(b){}};function dZ(d,cF,C){this.d=d;this.C=C;this.cF=cF;this.E=cF.E;this.cP={};for(var b in this.E){this.cP[b]={};for(var cS in this.C.dR){this.cP[b][cS]=true}}this.v={};this.n={};this.l=this.C.l;this.H={};this.s={};this.L=new cF.x(this)};dZ.prototype={gY:function(b,r){return !this.cP[b][r].state ||(this.cP[b][r].state()==`rejected`)},hJ:function(b,r,dO){var gW=this[dO].bind(this,b);var jP=this.C.jm(this.d,r);var hj=[];jP.forEach(function(dT){var fH=dT[0];var fI=dT[1];var hg=this.C.cB(fH);if(hg.cC(b)){hj.push(hg.cP[b][fI])}},this);this.cP[b][r]=$.when.apply($,hj).then(gW)},ch:function(b,r,dO){if(r in this.C.dR){if(!this.C.dR[r]|| this.gY(b,r)){this.hJ(b,r,dO)}}},cC:function(b){return(b in this.E)},fq:function(b,jA){if(this.cC(b)){if(b in this.n){if(jA){this.n[b].show()}else{this.n[b].hide()}}}},hL:function(b){var K=url_tpl.replace(/_c_/,`data`).replace(/_f_/,`${this.cF.K}_${b}`)+`.json`;this.v[b].v(`fetching data ...`);var jH=this.hP.bind(this,b);return $.ajax({type:`POST`,url:K,contentType:`application/json; charset=utf-8`,dataType:`json`}).then(function(cD){jH(cD)})},hP:function(b,cD){this.v[b].gG();cD.msgs.forEach(function(jw){this.v[b].v(jw)},this);if(cD.good){this.H[b]=cD.data;if(`relvals` in cD){this.s[b]=cD.relvals}}this.L.P(b)},gA:function(b){this.hK=this.C.jn(this.cF.U,this.E);this.n[b]=$(`#${this.d}_${b}`);if(this.n[b].length==0){var df=this.hK[b];df.append(`<div id="msg_${this.d}_${b}"></div>`);df.append(`<div id="${this.d}_${b}" class="•kD"></div>`);this.n[b]=$(`#${this.d}_${b}`)}this.v[b]=new dw(`msg_${this.d}_${b}`);if(this.cF.K !=null){return this.hL(b)}else{this.L.P(b)}},gB:function(b){this.L.F(b)},gC:function(b){this.fq(b,true);this.L.g(b)},g:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`P`,`gA`);this.ch(b,`F`,`gB`);this.ch(b,`g`,`gC`)}else{this.fq(b,false)}},P:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`P`,`gA`)}},F:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`F`,`gB`)}},g:function(b){if(this.cC(b)&& this.L.I(b)){this.ch(b,`g`,`gC`)}else{this.fq(b,false)}}};function dx(){this.d=`page`;this.v=new dw(`msg_${this.d}`);this.l=new gg(this);this.dR={P:true,F:true,g:false};this.hn={F:`P`,g:`F`};var dN=this.l.jp(`list`);var dc={contrib:1};var jk={'':1};this.cL={jK:{U:`body`,E:jk,K:null,x:gf},gK:{U:`left`,E:dN,K:null,x:fb},X:{U:`middle`,E:dN,K:`list`,x:fc},p:{U:`gK`,E:dN,K:null,x:gc},dk:{U:`p`,E:dN,K:null,x:gd},dj:{U:`p`,E:dc,K:`country`,x:R},dd:{U:`p`,E:dc,K:`type`,x:dv},dp:{U:`p`,E:dc,K:`tadiraha`,x:dy},dq:{U:`p`,E:dc,K:`tadiraho`,x:dz},dS:{U:`p`,E:dc,K:`tadiraht`,x:dA}},this.cK={P:{p:{gK:1,X:1},dk:{p:1},dj:{p:1,dk:1},dd:{p:1,dj:1},dp:{p:1,dd:1},dq:{p:1,dp:1},dS:{p:1,dq:1},jK:{p:1,X:1}},F:{p:{dk:1,dj:1,dd:1,dp:1,dq:1,dS:1},dk:{X:1},dj:{X:1},dd:{X:1},dp:{X:1},dq:{X:1},dS:{X:1}},g:{p:{dk:1,dj:1,dd:1,dp:1,dq:1,dS:1}}};this.cg={};for(var d in this.cL){var c=new dZ(d,this.cL[d],this);c.cQ={};this.cg[d]=c}for(var d in this.cL){var jc=this.cg[d];var gN=this.cL[d].U;if(gN in this.cg){var jG=this.cg[gN];jG.cQ[d]=jc}}for(var d in this.cg){var c=this.cg[d];c.gF={};for(var r in this.cK){var gI=this.cK[r];c.gF[r]={};if(d in gI){for(var jb in gI[d]){c.gF[r][jb]=1}}}}this.hQ();this.hV(80);History.Adapter.bind(window,`statechange`,this.l.g())};dx.prototype={hV(jM){var jX=`${window.innerHeight - jM}px`;for(var jW in{'middle':1,'left':1,'right':1}){$(`#${jW}`).css(`height`,jX)}},hQ(){var dt=[];var ds={};var cT={};for(var d in this.cL){for(var r in this.dR){dt.push(`${d}-${r}`)}}function gD(cl,cb){if(!(cl in ds)){ds[cl]={}}if(!(cb in cT)){cT[cb]={}}ds[cl][cb]=true;cT[cb][cl]=true}for(var hb in this.hn){var fI=this.hn[hb];for(var d in this.cL){gD(`${d}-${fI}`,`${d}-${hb}`)}}for(var r in this.cK){for(var gZ in this.cK[r]){for(var fH in this.cK[r][gZ]){gD(`${fH}-${r}`,`${gZ}-${r}`)}}}var cj=0;var cG=[];var cU={};while(cj <=dt.length){cG.push({});if(cj==0){dt.forEach(function(ck){if(!(ck in cT)){cG[cj][ck]=1}})}else{for(var cl in cU){if(cl in ds){for(var cb in ds[cl]){if(!(cb in cU)){var gS=true;for(var jC in cT[cb]){if(!(jC in cU)){gS=false;break}}if(gS){cG[cj][cb]=1}}}}}}if(!Object.keys(cG[cj]).length){break}for(var ck in cG[cj]){cU[ck]=1}cj++}this.fp=[];this.gx={};if(Object.keys(cU).length !=dt.length){var gL=[];dt.forEach(function(ck){if(!(ck in cU)){gL.push(ck)}})}else{cG.forEach(function(jz,cj){for(var ck in jz){this.fp.push(ck)}},this);this.gx=cT}},cB:function(d){return this.cg[d]},jn:function(d,E){var n={};if(d in this.cg){n=this.cg[d].n}else{var hY=(d==`body`)?$(`body`):$(`#${d}`);for(var b in E){n[b]=hY}}return n},jm:function(d,r){var hh=[];var cb=`${d}-${r}`;for(var cl in(this.gx[cb]||{})){hh.push(cl.split(`-`))}return hh},g:function(){this.fp.forEach(function(dT){var hq=dT.split(`-`);var d=hq[0];var r=hq[1];var c=this.cB(d);for(var b in c.E){c[r](b)}},this)}};$(function(){new dx().g()});