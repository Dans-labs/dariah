function dM(c,cC,v){this.c=c;this.v=v;this.cC=cC;this.P=cC.P;this.cL={};for(var b in this.P){this.cL[b]={};for(var W in this.v.dF){this.cL[b][W]=true}}this.w={};this.j={};this.l=this.v.l;this.H={};this.cp={};this.F=new cC.z(this)};dM.prototype={fZ:function(b,n){return !this.cL[b][n].state ||(this.cL[b][n].state()==`rejected`)},gx:function(b,n,dA){var fY=this[dA].bind(this,b);var hw=this.v.gS(this.c,n);var gj=[];hw.forEach(function(dH){var fg=dH[0];var fh=dH[1];gj.push(this.v.Y(fg).cL[b][fh])},this);this.cL[b][n]=$.when.apply($,gj).then(fY)},cg:function(b,n,dA){if(n in this.v.dF){if(!this.v.dF[n]|| this.fZ(b,n)){this.gx(b,n,dA)}}},cQ:function(b){return(b in this.P)},dS:function(b,hf){if(this.cQ(b)){if(b in this.j){if(hf){this.j[b].show()}else{this.j[b].hide()}}}},gy:function(b){var ch=url_tpl.replace(/_c_/,`data`).replace(/_f_/,`${this.cC.ch}_${b}`)+`.json`;this.w[b].w(`fetching data ...`);var hq=this.gC.bind(this,b);return $.ajax({type:`POST`,url:ch,contentType:`application/json; charset=utf-8`,dataType:`json`}).then(function(cE){hq(cE)})},gC:function(b,cE){this.w[b].fQ();cE.msgs.forEach(function(gX){this.w[b].w(gX)},this);if(cE.good){this.H[b]=cE.data;if(`relvals` in cE){this.cp[b]=cE.relvals}}this.F.Q(b)},fK:function(b){this.ct=this.v.gT(this.cC.cD,this.P);this.j[b]=$(`#${this.c}_${b}`);if(this.j[b].length==0){var cO=this.ct[b];cO.append(`<div id="msg_${this.c}_${b}"></div>`);cO.append(`<div id="${this.c}_${b}"></div>`);this.j[b]=$(`#${this.c}_${b}`)}this.w[b]=new ds(`msg_${this.c}_${b}`);if(this.cC.ch !=null){return this.gy(b)}else{this.F.Q(b)}},fL:function(b){this.F.E(b)},fM:function(b){this.dS(b,true);this.F.h(b)},h:function(b){if(this.cQ(b)&& this.F.K(b)){this.cg(b,`Q`,`fK`);this.cg(b,`E`,`fL`);this.cg(b,`h`,`fM`)}else{this.dS(b,false)}},Q:function(b){if(this.cQ(b)&& this.F.K(b)){this.cg(b,`Q`,`fK`)}},E:function(b){if(this.cQ(b)&& this.F.K(b)){this.cg(b,`E`,`fL`)}},h:function(b){if(this.cQ(b)&& this.F.K(b)){this.cg(b,`h`,`fM`)}else{this.dS(b,false)}}};function dN(d){this.d=d;this.dp={};this.dx={}};dN.prototype={R:function(b){this.d.j[b].html(`<a class="•fv" href="#">${this.d.l.hs('list', b, 'fk')}</a> `)},cV:function(b){this.dx[b].click(function(p){p.preventDefault();this.d.l.cb(`list`,b)}.bind(this))},gB:function(b){return this.d.l.T(`list`)==b},K:function(b){return true},Q:function(b){this.R(b);this.dp[b]=this.d.j[b];this.dp[b].addClass(`•ft`);this.dx[b]=this.d.j[b].find(`a`)},E:function(b){this.cV(b)},h:function(b){if(this.gB(b)){this.dx[b].addClass(`•s`);this.dp[b].addClass(`•s`)}else{this.dx[b].removeClass(`•s`);this.dp[b].removeClass(`•s`)}}};function fy(d){this.d=d;this.q=this.d.v.Y(`q`).F;this.t={};this.A={};this.cz={};this.cd={};this.x={};this.hO={};this.V={};this.B={};this.cr={};this.cq={};this.y={C:`-`,c:`-none`}};fy.prototype={R:function(b){var dV=2;var k=`<div><p class="•dq">By type</p>`;k +=`<p class="•gt"><span rv="_all" class="•X"></span> <a rv="_all" href="#" class="•cT">all types</a></p>
<table class="•gv" id="list-ctype_${b}"><tr>`;this.V[b].forEach(function(f,g,G){if((g % dV==0)&&(g > 0)&&(g < G.length)){k +=`</tr><tr>`}k +=`<td><span rv="${f}" class="•X"></span></td><td><a rv="${f}" href="#" class="•cU">${this.B[b][f]}</a></td>`},this);k +=`</tr></table></div>`;this.d.j[b].html(k)},cV:function(b){var r=this;this.cz[b]=$(`#list-ctype_${b}`);this.cz[b].find(`.•cU`).click(function(p){p.preventDefault();var f=$(this).attr(`rv`);var O=r.cy(b,r.d.l.T(`t_${b}`));O[f]=(f in O)?!O[f]:true;r.d.l.cb(`t_${b}`,r.cB(O))});this.cd[b]=this.d.j[b].find(`[rv="_all"]`);this.cd[b].click(function(p){p.preventDefault();var dZ=$(this).hasClass(`•s`);if(dZ){r.d.l.cb(`t_${b}`,r.cB(r.cq[b]))}else{r.d.l.cb(`t_${b}`,r.cB(r.cr[b]))}})},cX:function(b,gl){var cY=true;for(var f in this.B[b]){var cM=this.cz[b].find(`[rv="${f}"]`);if(f in gl && gl[f]){cM.addClass(`•s`)}else{cM.removeClass(`•s`,cM);cY=false}}if(cY){this.cd[b].addClass(`•s`)}else{this.cd[b].removeClass(`•s`)}},cB:function(J){var G=[];for(var cs in J){if(J[cs]){G.push(cs)}}return G.join(',')},cy:function(b,W){var J={};if(W !==null && W !=undefined && W !=''){var G=W.split(',');G.forEach(function(cc){J[cc]=true})}for(var f in this.B[b]){if(!(f in J)){J[f]=false}}return J},fm:function(b){this.x[b]={};for(var f in this.B[b]){this.x[b][f]=0}var U=this.d.H[b];for(var cs in this.t[b]){var g=this.t[b][cs];var dh=false;for(var f in U[g]){this.x[b][f]+=1;dh=true}if(!dh){this.x[b][this.y.C]+=1}}for(var f in this.x[b]){this.d.j[b].find(`span[rv="${f}"].•X`).html(this.x[b][f])}this.d.j[b].find(`span[rv="_all"].•X`).html(this.t[b].length)},cc:function(b,g){var U=this.d.H[b];var A=this.cy(b,this.A[b]);if((g in U)&&(Object.keys(U[g]).length !=0)){for(var f in U[g]){if((f in A)&& A[f]){return true}}}else{if((this.y.C in A)&&(A[this.y.C])){return true}}return false},K:function(b){return(this.d.l.T(`list`)==b)},Q:function(b){this.V[b]=[];this.B[b]={};this.cq[b]={};this.cr[b]={};var cp=this.d.cp[b];for(var g in cp){var f=cp[g];this.cq[b][g]=false;this.cr[b][g]=true;this.V[b].push(g);this.B[b][g]=f}this.V[b].push(this.y.C);this.B[b][this.y.C]=this.y.c;this.cq[b][this.y.C]=false;this.cr[b][this.y.C]=true;this.V[b].sort();this.R(b)},E:function(b){if(!this.q){this.q=this.d.v.Y(`q`).F}this.cV(b)},h:function(b){this.A[b]=this.d.l.T(`t_${b}`);this.cX(b,this.cy(b,this.A[b]))}};function dO(d){this.d=d;this.cW={};this.cK={};this.cz={};this.t={};this.A={};this.cd={};this.x={};this.V={};this.B={};this.cr={};this.cq={};this.fd={};this.dE={};this.hc={CY:true};this.y={C:`-`,c:`-none`}};dO.prototype={R:function(b){var dV=2;var k=`<div><p class="•dq">By country</p>`;k +=`<div id="map-europe_${b}"></div>
<p class="•gt"><span rv="_all" class="•X"></span> <a rv="_all" href="#" class="•cT">all DARIAH</a></p>
<table class="•gv" id="list-europe_${b}"><tr>`;this.V[b].forEach(function(f,g,G){if((g % dV==0)&&(g > 0)&&(g < G.length)){k +=`</tr><tr>`}var gP=this.B[b][f];k +=`<td><span rv="${f}" class="•X"></span></td><td><a rv="${f}" href="#" class="•cU">${gP}</a></td>`},this);k +=`</tr></table></div>`;this.d.j[b].html(k)},cV:function(b){var M=this.d.j[b];this.cK[b]=M.find(`#map-europe_${b}`);this.cz[b]=M.find(`#list-europe_${b}`);this.cK[b].width(`100%`);this.cK[b].height(this.cK[b].width()*0.6);this.cK[b].vectorMap({'map':`europe_mill`,backgroundColor:`#ccccff`,regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:`#008800`,'fill-opacity':0.2,stroke:`none`,'stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':1,'stroke-opacity':1},selected:{fill:`#008800`,'fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:`#bbbbbb`,'fill-opacity':1,stroke:`none`,'stroke-width':0,'stroke-opacity':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':3,'stroke-opacity':1},selected:{fill:`#dd8844`,'fill-opacity':1},selectedHover:{}},markers:this.fd[b],series:{markers:[{values:{},scale:[0,20],normalizeFunction:`linear`,attribute:`r`,min:0,max:100}],regions:[{scale:{'hk':`#ffffff`,'gV':`#ffeedd`},attribute:`fill`,values:this.dE[b]}]},onRegionTipShow:function(p,dX,f){dX.html(`${f}: ${(f in this.x[b])?this.x[b][f]:'not in DARIAH'}`)}.bind(this),onMarkerTipShow:function(p,dX,f){dX.html(`${f}: ${(f in this.x[b])?this.x[b][f]:'not in DARIAH'}`)}.bind(this),onRegionClick:function(p,cZ){if(!(cZ in this.B[b])){p.preventDefault()}}.bind(this),onMarkerClick:function(p,cZ){if(!(cZ in this.B[b])){p.preventDefault()}}.bind(this),onRegionSelected:function(p,cZ,g,O){if(this.dU){this.d.l.cb(`m_${b}`,this.fC(O))}}.bind(this),onMarkerSelected:function(p,cZ,g,O){if(this.dU){this.d.l.cb(`m_${b}`,this.fC(O))}}.bind(this)});this.cW[b]=this.cK[b].vectorMap('get','mapObject');this.cW[b].setFocus({regions:[`GB`,`GR`]});var r=this;this.cz[b].find(`.•cU`).click(function(p){p.preventDefault();var f=$(this).attr(`rv`);var O=r.cy(b,r.d.l.T(`m_${b}`));O[f]=(f in O)?!O[f]:true;r.d.l.cb(`m_${b}`,r.cB(O))});this.cd[b]=this.d.j[b].find(`[rv="_all"]`);var r=this;this.cd[b].click(function(p){p.preventDefault();var dZ=$(this).hasClass(`•s`);if(dZ){r.d.l.cb(`m_${b}`,r.cB(r.cq[b]))}else{r.d.l.cb(`m_${b}`,r.cB(r.cr[b]))}})},cX:function(b,dD){this.dU=false;var fc={};for(var dC in dD){if(!(dC in this.hc)&& dC !=this.y.C){fc[dC]=dD[dC]}}this.cW[b].setSelectedRegions(fc);this.cW[b].setSelectedMarkers(fc);this.dU=true;var cY=true;for(var f in this.B[b]){var cM=this.cz[b].find(`[rv="${f}"]`);if(f in dD && dD[f]){cM.addClass(`•s`)}else{cM.removeClass(`•s`);cY=false}}if(cY){this.cd[b].addClass(`•s`)}else{this.cd[b].removeClass(`•s`)}},fC:function(G){return G.join(',')},cB:function(J){var G=[];for(var cs in J){if(J[cs]){G.push(cs)}}return G.join(',')},cy:function(b,W){var J={};if(W !==null && W !=undefined && W !=''){var G=W.split(',');G.forEach(function(cc){J[cc]=true})}for(var f in this.B[b]){if(!(f in J)){J[f]=false}}return J},fm:function(b){this.x[b]={};for(var f in this.B[b]){this.x[b][f]=0}var U=this.d.H[b];for(var cs in this.t[b]){var g=this.t[b][cs];var dh=false;for(var f in U[g]){this.x[b][f]+=1;dh=true}if(!dh){this.x[b][this.y.C]+=1}}for(var f in this.x[b]){this.d.j[b].find(`span[rv="${f}"].•X`).html(this.x[b][f])}var dJ=this.t[b].length;if(dJ==0){dJ=1}var gr={};for(var f in this.x[b]){if(f !=this.y.C){var gg=100 * this.x[b][f]/ dJ;gr[f]=(dJ < 10)?gg:(10*Math.sqrt(gg))}}this.cW[b].series.markers[0].setValues(gr);this.d.j[b].find(`span[rv="_all"].•X`).html(this.t[b].length)},cc:function(b,g){var U=this.d.H[b];var A=this.cy(b,this.A[b]);if((g in U)&&(Object.keys(U[g]).length !=0)){for(var f in U[g]){if((f in A)&& A[f]){return true}}}else{if((this.y.C in A)&&(A[this.y.C])){return true}}return false},K:function(b){return(this.d.l.T(`list`)==b)},Q:function(b){this.V[b]=[];this.B[b]={};this.cq[b]={};this.cr[b]={};var cp=this.d.cp[b];this.fd[b]={};this.dE[b]={};for(var g in cp){var f=cp[g];if(f[1]){this.cq[b][g]=false;this.cr[b][g]=true;this.V[b].push(g);this.B[b][g]=f[0];if(f.length > 3){this.fd[b][g]={latLng:[f[2],f[3]],c:f[0]}}this.dE[b][g]='gV'}else{this.dE[b][g]='hk'}}this.V[b].push(this.y.C);this.B[b][this.y.C]=this.y.c;this.cq[b][this.y.C]=false;this.cr[b][this.y.C]=true;this.V[b].sort();this.R(b)},E:function(b){if(!this.q){this.q=this.d.v.Y(`q`).F}this.cV(b)},h:function(b){this.A[b]=this.d.l.T(`m_${b}`);this.cX(b,this.cy(b,this.A[b]))}};function fz(d){this.d=d;this.fG={};this.H={};this.fn={};this.t={};this.dY={}};fz.prototype={R:function(b){var k=``;k +=`<p>Filtering <span id="fstats_${b}"></span></p>`;this.d.j[b].html(k)},K:function(b){return this.d.l.T(`list`)==b},Q:function(b){var cN=this.d.cN;this.dY[b]={};for(var S in cN){var gR=cN[S];if(gR.cQ(b)){this.dY[b][S]=cN[S]}}this.R(b)},E:function(b){var M=this.d.j[b];var gW=this.d.v.Y(`cF`).j[b];this.fG[b]=M.find(`#fstats_${b}`);this.fn[b]=gW.find(`#table_${b}`);var gQ=`<a class="showc fa fa-chevron-right" href="#" title="Show details"></a><a class="hidec fa fa-chevron-down" href="#" title="Hide details"></a>`;M.addClass(`•fx`);M.find(`p.•dq`).each(function(){var hh=$(this).html();$(this).html(`${gQ}&nbsp;${hh}`)});M.find(`p.•dq`).closest(`div`).find(`table,.•dr`).show();M.find(`.hidec`).show();M.find(`.showc`).hide();M.find(`.hidec`).click(function(p){p.preventDefault();var dd=$(this).closest(`p`);var dW=$(this).closest(`div`).find(`table,.•dr`);dW.hide();dd.find(`.hidec`).hide();dd.find(`.showc`).show()});M.find(`.showc`).click(function(p){p.preventDefault();var dd=$(this).closest(`p`);var dW=$(this).closest(`div`).find(`table,.•dr`);dW.show();dd.find(`.hidec`).show();dd.find(`.showc`).hide()})},h:function(b){this.fn[b].find(`tr[id]`).hide();var gY=this.d.v.Y(`cF`);var H=gY.H[b];var cv=this.dY[b];this.t[b]=[];for(var S in cv){var q=cv[S].F;q.t[b]=[]}H.forEach(function(cO,g){var cc=true;var dl=null;var dc=false;for(var S in cv){if(!dc){var cP=cv[S].F;var gp=cP.cc(b,g);if(!gp){cc=false;if(dl==null){dl=cP}else{dc=true}}}}if(!dc){if(cc){this.t[b].push(g);this.fn[b].find(`tr[id="r${cO[0]}"]`).show()}if(dl !=null){dl.t[b].push(g)}else{for(var S in cv){var cP=cv[S].F;cP.t[b].push(g)}}}},this);for(var S in cv){var cP=cv[S].F;cP.fm(b)}this.fG[b].html(`${this.t[b].length} of ${H.length}`)}};function fA(d){this.d=d;this.fp={};this.cj={};this.dT={};this.fO={};this.dG={};this.dw={};this.dv={};this.t={};this.fs={}};fA.prototype={R:function(b){var k=`<div><p class="•dq">By full text search</p>`;k +=`<div id="fltw_${b}">`;k +=`<p id="•hD${b}" class="•dr •cT •dL ui-dp">`;k +=`<input id="flt_${b}" class="flt"/>`;k +=`<a href="#" class="•cT fa fa-close •hE" id="clearf_${b}"></a>`;k +=`<span •dL class="•X" id="stats_${b}"></span>&nbsp;`;k +=`</p>`;k +=`<div id="autoc_${b}" style="display: none;">here ${b}</div>`;k +=`</div>`;this.d.j[b].html(k)},cX:function(b){var dI=this.d.l.T(`f_${b}`);this.cj[b].val(dI);this.cj[b].autocomplete(`search`,dI)},gJ:function(b){var dI=this.cj[b].val();if(dI==``){this.dT[b].removeClass(`•s`);this.dw[b].hide()}else{this.dT[b].addClass(`•s`);this.dw[b].show()}},gE:function(b){return function(hI,hz){this.dv[b]={};hz.content.forEach(function(hy,g){this.dv[b][hy.value]=1},this);if(!(this.fs[b])){this.d.l.cb(`f_${b}`,this.cj[b].val())}}.bind(this)},gG:function(b){this.dw[b].click(function(p){p.preventDefault();this.cj[b].val(``);this.cj[b].autocomplete(`search`,``)}.bind(this))},fm:function(b){var fl;if(this.cj[b].val()==``){fl=``;this.dG[b].removeClass(`•s`)}else{fl=`${this.q.t[b].length} of `;this.dG[b].addClass(`•s`)}this.dG[b].html(`${fl}${this.t[b].length}`)},cc:function(b,g){return(g in this.dv[b])},K:function(b){return(this.d.l.T(`list`)==b)},Q:function(b){this.R(b)},E:function(b){if(!this.q){this.q=this.d.v.Y(`q`).F}var H=this.d.v.Y(`cF`).H[b];this.fp[b]=[];H.forEach(function(cO,g){this.fp[b].push({label:cO[1],value:`${g}`})},this);this.dv[b]={};this.t[b]=[];var M=this.d.j[b];var db=M.find(`#fltw_${b}`);this.cj[b]=db.find(`#flt_${b}`);this.dT[b]=db.find(`#•hD${b}`);this.fO[b]=db.find(`#autoc_${b}`);this.dG[b]=db.find(`#stats_${b}`);this.dw[b]=db.find(`#clearf_${b}`);this.cj[b].autocomplete({appendTo:this.fO[b],source:this.fp[b],response:this.gE(b),minLength:0});this.gG(b);this.fs[b]=true;this.cX(b);this.fs[b]=false},h:function(b){this.gJ(b)}};var hH=(function(){`use strict`;var gN={'&':`&amp;`,'<':`&lt;`,'>':`&gt;`};return function(fq){return fq.replace(/[&<>]/g,function(gK){return gN[gK]})}}());var gw={dB:function(c){return this.gd()[c]},gd:function(dK){var g,dB,gf,gk,cw;cw={};if(!dK){dK=window.location.search}if(dK.indexOf("?")===-1){return{}}gk=dK.slice(1);gf=gk.split("&");gf.forEach(function(hl,g){dB=hl.split("=");cw[dB[0]]=dB[1]});return cw}};var fj=gw.gd();var hd=$.initNamespaceStorage(`req`);var dj=hd.localStorage;function dP(d){this.d=d};dP.prototype={R:function(b){var k=``;k +=`<table id="table_${b}">`;if(b==`contrib`){this.d.H[b].forEach(function(cG){k +=`<tr id="r${cG[0]}"><td><a href="#" rid="${cG[0]}">${cG[1]}</a></td></tr>`})}else if(b==`country`){this.d.H[b].forEach(function(cG){k +=`<tr id="r${cG[0]}"><td class="•hC">${cG[0]}<td><td class="•hS">${cG[1]}<td></tr>`})}k +=`</table>`;this.d.j[b].html(k)},K:function(b){return this.d.l.T(`list`)==b},Q:function(b){this.R(b)},E:function(b){},h:function(b){}};var gq;$(function(){gq=new dt();gq.h()});function ds(fW,hg){this.ct=$(`#${fW}`);this.fI=$(`#trash_${fW}`);this.fJ=this.fI.closest(`p`);this.fI.click(function(p){p.preventDefault();this.fQ()}.bind(this));this.fE();this.fF=hg};ds.prototype={fE:function(){this.ct.hide();this.fJ.hide()},gH:function(){this.ct.show();if(this.ct.html()!=``){this.fJ.show()}},fQ:function(){this.ct.html(``);if(this.fF !=undefined){this.fF()}this.fE()},w:function(fq,fb){if(fb==undefined){fb=`info`}var gZ=this.ct.html();this.ct.html(`${gZ}<p class="${fb}">${fq}</p>`);this.gH()}};function dt(){this.c=`page`;this.w=new ds(`msg_${this.c}`);this.l=new fB(this);this.dF={Q:true,E:true,h:false};this.gm={E:`Q`,h:`E`};var dz=this.l.gU(`list`);var fS={contrib:1};this.cJ={fT:{cD:`left`,P:dz,ch:null,z:dN},cF:{cD:`middle`,P:dz,ch:`list`,z:dP},q:{cD:`fT`,P:dz,ch:null,z:fz},dg:{cD:`q`,P:dz,ch:null,z:fA},df:{cD:`q`,P:fS,ch:`country`,z:dO},dy:{cD:`q`,P:fS,ch:`type`,z:fy}},this.cI={Q:{q:{fT:1,cF:1},dg:{q:1},df:{q:1,dg:1},dy:{q:1,df:1}},E:{q:{dg:1,df:1,dy:1},dg:{cF:1},df:{cF:1},dy:{cF:1}},h:{q:{dg:1,df:1,dy:1}}};this.cf={};for(var c in this.cJ){var d=new dM(c,this.cJ[c],this);d.cN={};this.cf[c]=d}for(var c in this.cJ){var gM=this.cf[c];var fV=this.cJ[c].cD;if(fV in this.cf){var hn=this.cf[fV];hn.cN[c]=gM}}for(var c in this.cf){var d=this.cf[c];d.fP={};for(var n in this.cI){var fR=this.cI[n];d.fP[n]={};if(c in fR){for(var gL in fR[c]){d.fP[n][gL]=1}}}}this.gD();this.gF(80);History.Adapter.bind(window,`statechange`,this.l.h())};dt.prototype={gF(ht){var hB=`${window.innerHeight - ht}px`;for(var hA in{'middle':1,'left':1,'right':1}){$(`#${hA}`).css(`height`,hB)}},gD(){var dn=[];var dm={};var cR={};for(var c in this.cJ){for(var n in this.dF){dn.push(`${c}-${n}`)}}function fN(cn,Z){if(!(cn in dm)){dm[cn]={}}if(!(Z in cR)){cR[Z]={}}dm[cn][Z]=true;cR[Z][cn]=true}for(var gc in this.gm){var fh=this.gm[gc];for(var c in this.cJ){fN(`${c}-${fh}`,`${c}-${gc}`)}}for(var n in this.cI){for(var gb in this.cI[n]){for(var fg in this.cI[n][gb]){fN(`${fg}-${n}`,`${gb}-${n}`)}}}var ck=0;var cH=[];var cS={};while(ck <=dn.length){cH.push({});if(ck==0){dn.forEach(function(cm){if(!(cm in cR)){cH[ck][cm]=1}})}else{for(var cn in cS){if(cn in dm){for(var Z in dm[cn]){if(!(Z in cS)){var fX=true;for(var hj in cR[Z]){if(!(hj in cS)){fX=false;break}}if(fX){cH[ck][Z]=1}}}}}}if(!Object.keys(cH[ck]).length){break}for(var cm in cH[ck]){cS[cm]=1}ck++}this.dR=[];this.fH={};if(Object.keys(cS).length !=dn.length){var fU=[];dn.forEach(function(cm){if(!(cm in cS)){fU.push(cm)}})}else{cH.forEach(function(hb,ck){for(var cm in hb){this.dR.push(cm)}},this);this.fH=cR}},Y:function(c){return this.cf[c]},gT:function(c,P){var j={};if(c in this.cf){j=this.cf[c].j}else{for(var b in P){j[b]=$(`#${c}`)}}return j},gS:function(c,n){var gh=[];var Z=`${c}-${n}`;for(var cn in(this.fH[Z]||{})){gh.push(cn.split(`-`))}return gh},h:function(){this.dR.forEach(function(dH){var gn=dH.split(`-`);var c=gn[0];var n=gn[1];var d=this.Y(c);for(var b in d.P){d[n](b)}},this)}};function fB(v){this.cx={};this.v=v;this.w=v.w;this.gz();this.fD()};fB.prototype={cA:{list:{L:`string`,D:{contrib:1,country:1},I:`contrib`},f_contrib:{L:`string`,D:null,I:``},f_country:{L:`string`,D:null,I:``},m_contrib:{L:`string`,D:null,I:``},m_country:{L:`string`,D:null,I:``},t_contrib:{L:`string`,D:null,I:``},t_country:{L:`string`,D:null,I:``},id:{L:`integer`,D:{hN:-1,hK:1000000},I:0},sort:{L:`boolean`,D:{v:true,x:false},I:true}},dQ:{list:{contrib:{fk:`contribution`,hp:`contributions`},country:{fk:`country`,hp:`countries`}}},gI:function(c,m){var cl,hM;if(c in this.cA){var N=this.cA[c];if(N.L==`string`){if(N.D){if(m in N.D){cl=m}else{cl=N.I;this.w.w(`illegal string value for ${c}: "${m}" is replaced by "${N.I}"`,`warning`)}}else{cl=m}}else if(N.L==`integer`){if(/^(\-|\+)?[0-9]+$/.test(m)){cl=Number(m)}else{cl=N.I;this.w.w(`not a number value for ${c}: "${m}" is replaced by "${N.I}"`,`warning`)}}else if(N.L==`boolean`){if(m in N.D){cl=N.D[m]}else{cl=N.I;this.w.w(`illegal boolean value for ${c}: "${m}" is replaced by "${N.I}"`,`warning`)}}}else{cl=null;this.w.w(`unknown parameter: ${c}=${m}`,`warning`)}return cl},gA:function(){fr=[];for(var c in this.cx){var m=this.cx[c];var dk=this.cA[c];if(dk.L==`string` || dk.L==`integer`){fr.push(`${c}=${m}`)}else if(dk.L==`boolean`){for(var gs in dk.D){if(dk.D[gs]==m){fr.push(`${c}=${gs}`)}}}}return fr.join(`&`)},gz:function(){for(var c in fj){if(!(c in this.cA)){this.w.w(`unknown parameter: ${c}=${m}`,`warning`)}}for(var c in this.cA){var m=null;if(c in fj){var hr=fj[c];m=this.gI(c,hr);dj.set(c,m)}else if(dj.isSet(c)){m=dj.get(c)}else{m=this.cA[c].I;dj.set(c,m)}this.cx[c]=m}},fD:function(hP,hR){var hx=`DARIAH contribution tool`;var hv=`${app_url}?${this.gA()}`;History.pushState(this.cx,hx,hv)},cb:function(c,m){this.cx[c]=m;dj.set(c,m);this.fD()},T:function(c){return this.cx[c]},gU:function(c){return this.cA[c].D},hs:function(c,m,ff){var cw=m;var hL=(ff==undefined)?`fk`:ff;if(this.dQ[c]!=undefined && this.dQ[c][m]!=undefined){cw=this.dQ[c][m][ff]}return cw},h:function(){return function(){var l=History.getState();if(l && l.data){this.cx=l.data;this.v.h()}}.bind(this)}};