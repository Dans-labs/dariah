var dj=(function(){`use strict`;var jl={'&':`&amp;`,'<':`&lt;`,'>':`&gt;`};return function(cF){return cF.replace(/[&<>]/g,function(cz){return jl[cz]})}}());var hK={dU:function(d){return this.hh()[d]},hh:function(fc){var j,dU,hj,hq,cs;cs={};if(!fc){fc=window.location.search}if(fc.indexOf("?")===-1){return{}}hq=fc.slice(1);hj=hq.split("&");hj.forEach(function(jK,j){dU=jK.split("=");cs[dU[0]]=dU[1]});return cs}};var fM=hK.hh();var jB=$.initNamespaceStorage(`req`);var cr=jB.localStorage;function gM(){if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}};function jP(dN){gM();if(document.selection){var dn=document.body.createTextRange();dn.moveToElementText(document.getElementById(dN));dn.select()}else if(window.getSelection){var dn=document.createRange();dn.selectNode(document.getElementById(dN));window.getSelection().addRange(dn)}};function jX(cc,gO,gP){var jT=(gO==undefined)?cc.closest('div').find('.•hG'):gO;jT.toggle();if(gP !=undefined){gP(cc)}var fR,fJ;if(cc.hasClass('fa-chevron-right')){fR='fa-chevron-right';fJ='fa-chevron-down'}else{fR='fa-chevron-down';fJ='fa-chevron-right'}cc.removeClass(fR);cc.addClass(fJ)};function gI(fz,jR,cF){return(cF.length > fz)?cF.replace(/[^ -]+/g,function(cV){return cV.substr(0,jR)}):cF};function dy(dg,jH){this.cK=$(`#${dg}`);this.gB=$(`#trash_${dg}`);this.gC=this.gB.closest(`p`);this.gB.click(function(g){g.preventDefault();this.gH()}.bind(this));this.gq();this.gw=jH};dy.prototype={gq:function(){this.cK.hide();this.gC.hide()},hZ:function(){this.cK.show();if(this.cK.html()!=``){this.gC.show()}},gH:function(){this.cK.html(``);if(this.gw !=undefined){this.gw()}this.gq()},v:function(cF,fG){if(fG==undefined){fG=`info`}var jD=this.cK.html();this.cK.html(`${jD}<p class="${fG}">${cF}</p>`);this.hZ()}};function gk(C){this.cx={};this.C=C;this.v=C.v;this.hP();this.gm()};gk.prototype={cy:{list:{I:true,z:`string`,A:{contrib:1,country:1,type:1,tadiraha:1,tadiraho:1,tadiraht:1},B:`contrib`},flt_contrib:{I:false,z:`string`,A:null,B:``},flt_country:{I:false,z:`string`,A:null,B:``},flt_type:{I:false,z:`string`,A:null,B:``},flt_tadiraha:{I:false,z:`string`,A:null,B:``},flt_tadiraho:{I:false,z:`string`,A:null,B:``},flt_tadiraht:{I:false,z:`string`,A:null,B:``},rel_country_contrib:{I:false,z:`string`,A:null,B:``},rel_type_contrib:{I:false,z:`string`,A:null,B:``},rel_tadiraha_contrib:{I:false,z:`string`,A:null,B:``},rel_tadiraho_contrib:{I:false,z:`string`,A:null,B:``},rel_tadiraht_contrib:{I:false,z:`string`,A:null,B:``},id:{I:true,z:`integer`,dR:{hb:-1,gY:1000000},B:0},sort:{I:false,z:`boolean`,A:{v:true,x:false},B:true}},fs:{list:{contrib:{cv:`contribution`,cR:`contributions`},country:{cv:`country`,cR:`countries`},type:{cv:`type`,cR:`types`},tadiraha:{cv:`tadirah activity`,cR:`tadirah activities`},tadiraho:{cv:`tadirah object`,cR:`tadirah objects`},tadiraht:{cv:`tadirah technique`,cR:`tadirah techniques`}}},jb:function(d,q){var K,kB;if(d in this.cy){var w=this.cy[d];if(w.z==`string`){if(w.A){if(q in w.A){K=q}else{K=w.B;this.v.v(`illegal string value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}}else{K=q}}else if(w.z==`integer`){if(/^(\-|\+)?[0-9]+$/.test(q)){K=Number(q)}else{K=w.B;this.v.v(`not a number value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}if(K < w.dR.hb){this.v.v(`number to small for ${d}: "${K}" is replaced by "${w.dR.hb}"`,`warning`)}if(K > w.dR.gY){this.v.v(`number to big for ${d}: "${K}" is replaced by "${w.dR.gY}"`,`warning`)}}else if(w.z==`boolean`){if(q in w.A){K=w.A[q]}else{K=w.B;this.v.v(`illegal boolean value for ${d}: "${q}" is replaced by "${w.B}"`,`warning`)}}}else{K=null;this.v.v(`unknown parameter: ${d}=${q}`,`warning`)}return K},dP:function(jn){fS=[];for(var d in this.cx){var q=this.cx[d];var w=this.cy[d];if(jn || w.I){if(w.z==`string` || w.z==`integer`){fS.push(`${d}=${q}`)}else if(w.z==`boolean`){for(var hw in w.A){if(w.A[hw]==q){fS.push(`${d}=${hw}`)}}}}}return fS.join(`&`)},hP:function(){for(var d in fM){if(!(d in this.cy)){this.v.v(`unknown parameter: ${d}=${q}`,`warning`)}}for(var d in this.cy){var q=null;if(d in fM){var jO=fM[d];q=this.jb(d,jO);cr.set(d,q)}else if(cr.isSet(d)){q=cr.get(d)}else{q=this.cy[d].B;cr.set(d,q)}this.cx[d]=q}},gm:function(kC,kE){var jW=`DARIAH contribution tool`;var jU=`${app_url}?${this.dP(false)}`;History.pushState(this.cx,jW,jU)},ct:function(d,q){this.cx[d]=q;cr.set(d,q);this.gm()},Z:function(d){return this.cx[d]},jw:function(d){return this.cy[d].A},fN:function(d,q,X){var cs=q;var kA=(X==undefined)?`cv`:X;if(this.fs[d]!=undefined && this.fs[d][q]!=undefined){cs=this.fs[d][q][X]}return cs},h:function(){return function(){var m=History.getState();if(m && m.data){this.cx=m.data;this.C.h()}}.bind(this)}};function S(c,z,jm,fz){this.c=c;this.D={};this.dH={};this.fp={};this.fr={};this.dD={};this.N={};this.cn={};this.T={};this.cZ={};this.cY={};this.Y={cl:`-`,d:`-none`};this.G=z;this.hL=jm || 2;this.gp=fz || 14};S.prototype={cd:function(b){var jZ=this.c.m.fN(`list`,this.G,`cv`);var jY=this.c.m.fN(`list`,this.G,`cR`);var l=``;l +=this.gy(b);l +=`<div><p class="•hF"><span fct="${this.c.d}-${b}"></span> By ${jZ}</p>`;l +=`<p class="•kh"><span rv="_all" class="•cH"></span> <a rv="_all" href="#" class="•hH">all ${jY}</a></p>
<table class="•kr" id="list-${this.G}-vals_${b}"><tr>`;this.cn[b].forEach(function(f,j,cf){if((j % this.hL==0)&&(j > 0)&&(j < cf.length)){l +=`</tr><tr>`}var dp=this.T[b][f];l +=`<td><span rv="${f}" class="•cH"></span></td><td><a rv="${f}" title="${dj(dp)}" href="#" class="•gb">${dj(gI(this.gp, 6,dp))}</a></td>`},this);l +=`</tr></table>`;l +=`<p class="•ks" id="list2-${this.G}-vals_${b}">`;this.cn[b].forEach(function(f,j,cf){var dp=this.T[b][f];l +=`<a href="#" rv="${f}" title="${dj(dp)}" class="•gd">${dj(gI(this.gp, 5,dp))}</a> `},this);l +=`</p>`;l +=`</div>`;this.c.n[b].html(l)},fm:function(b){var s=this.c.n[b];this.dH[b]=s.find(`#list-${this.G}-vals_${b}`);this.fp[b]=s.find(`#list2-${this.G}-vals_${b}`);var k=this;this.dH[b].find(`.•gb`).click(function(g){g.preventDefault();var f=$(this).attr(`rv`);var M=k.dG(b,k.c.m.Z(`rel_${k.G}_${b}`));M[f]=(f in M)?!M[f]:true;k.c.m.ct(`rel_${k.G}_${b}`,k.dK(M));s.find(`.•cW`).removeClass(`•cW`);$(this).addClass(`•cW`)});this.fp[b].find(`.•gd`).click(function(g){g.preventDefault();var f=$(this).attr(`rv`);var M=k.dG(b,k.c.m.Z(`rel_${k.G}_${b}`));M[f]=(f in M)?!M[f]:true;k.c.m.ct(`rel_${k.G}_${b}`,k.dK(M));$(this).closest(`div`).find(`.morec`).click();var gX=k.dH[b].find(`a[rv="${f}"]`);s.find(`.•cW`).removeClass(`•cW`);gX.addClass(`•cW`);$(`#left`)[0].scrollTop=50;gX[0].scrollIntoView({behavior:`smooth`,alignToTop:`true`})});this.dD[b]=this.c.n[b].find(`[rv="_all"]`);this.dD[b].click(function(g){g.preventDefault();var jz=$(this).hasClass(`•x`);if(jz){k.c.m.ct(`rel_${k.G}_${b}`,k.dK(k.cY[b]))}else{k.c.m.ct(`rel_${k.G}_${b}`,k.dK(k.cZ[b]))}})},hW:function(b,t){var gF=true;for(var f in this.T[b]){var gQ=this.dH[b].find(`[rv="${f}"]`);var gR=this.fp[b].find(`[rv="${f}"]`);if(f in t && t[f]){gQ.addClass(`•x`);gR.addClass(`•x`)}else{gQ.removeClass(`•x`);gR.removeClass(`•x`);gF=false}}if(gF){this.dD[b].addClass(`•x`)}else{this.dD[b].removeClass(`•x`)}},gl:function(cf){return cf.join(',')},dK:function(cC){var cf=[];for(var cV in cC){if(cC[cV]){cf.push(cV)}}return cf.join(',')},dG:function(b,cS){var cC={};if(cS !==null && cS !=undefined && cS !=''){var cf=cS.split(',');cf.forEach(function(cG){cC[cG]=true})}for(var f in this.T[b]){if(!(f in cC)){cC[f]=false}}return cC},hs:function(b){this.N[b]={};for(var f in this.T[b]){this.N[b][f]=0}var dq=this.c.H[b];for(var cV in this.D[b]){var j=this.D[b][cV];var gV=false;for(var f in dq[j]){this.N[b][f]+=1;gV=true}if(!gV){this.N[b][this.Y.cl]+=1}}for(var f in this.N[b]){this.c.n[b].find(`span[rv="${f}"].•cH`).html(this.N[b][f])}this.c.n[b].find(`span[rv="_all"].•cH`).html(this.D[b].length);this.gt(b)},cG:function(b,j){var dq=this.c.H[b];var dV=this.dG(b,this.fr[b]);if((j in dq)&&(Object.keys(dq[j]).length !=0)){for(var f in dq[j]){if((f in dV)&& dV[f]){return true}}}else{if((this.Y.cl in dV)&&(dV[this.Y.cl])){return true}}return false},P:function(b){return(this.c.m.Z(`list`)==b)},Q:function(b){this.cn[b]=[];this.T[b]={};this.cY[b]={};this.cZ[b]={};this.gx(b);this.gv(b);this.cn[b].push(this.Y.cl);this.T[b][this.Y.cl]=this.Y.d;this.cY[b][this.Y.cl]=false;this.cZ[b][this.Y.cl]=true;this.cd(b)},F:function(b){this.gr(b);this.fm(b)},h:function(b){this.fr[b]=this.c.m.Z(`rel_${this.G}_${b}`);var t=this.dG(b,this.fr[b]);this.gs(b,t);this.hW(b,t)},gx:function(b){var t=this.c.t[b];for(var j in t){var f=t[j];this.cY[b][j]=false;this.cZ[b][j]=true;this.cn[b].push(j);this.T[b][j]=f}this.cn[b].sort(function(cz,dc){return(t[cz]< t[dc])?-1:(t[cz]> t[dc])?1:0})},gv:function(b){},gy:function(b){return ``},gr:function(b){},gs:function(b){},gt:function(b){}};function dx(c){S.call(this,c,`type`)};dx.prototype=Object.create(S.prototype);dx.prototype.constructor=dx;function dB(c){S.call(this,c,`tadiraho`)};dB.prototype=Object.create(S.prototype);dB.prototype.constructor=dB;function dA(c){S.call(this,c,`tadiraha`)};dA.prototype=Object.create(S.prototype);dA.prototype.constructor=dA;function dC(c){S.call(this,c,`tadiraht`,1,30)};dC.prototype=Object.create(S.prototype);dC.prototype.constructor=dC;function R(c){S.call(this,c,`country`);this.cM={};this.cL={};this.fq={};this.dI={};this.hR={CY:true,KS:true,TR:true,MC:true,GE:true}};R.prototype=Object.create(S.prototype);R.prototype.constructor=R;R.prototype.gy=function(b){return `<div id="map-europe_${b}" class="•kp"><p class="•fg"><a class="fa fa-arrows" href="#" title="zoom to fit all countries"/></p></div>`};R.prototype.gr=function(b){var k=this;var s=this.c.n[b];this.cL[b]=s.find(`#map-europe_${b}`);var gW=this.cL[b].width()*0.6;this.cL[b].width(`100%`);this.cL[b].height(gW);this.cL[b].vectorMap({'map':`europe_mill`,backgroundColor:`#ccccff`,regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:`#008800`,'fill-opacity':0.2,stroke:`none`,'stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':1,'stroke-opacity':1},selected:{fill:`#008800`,'fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:`#bbbbbb`,'fill-opacity':1,stroke:`none`,'stroke-width':0,'stroke-opacity':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':3,'stroke-opacity':1},selected:{fill:`#dd8844`,'fill-opacity':1},selectedHover:{}},markers:this.fq[b],series:{markers:[{values:{},scale:[0,20],normalizeFunction:`linear`,attribute:`r`,min:0,max:100}],regions:[{scale:{'jJ':`#ffffff`,'jy':`#ffddbb`},attribute:`fill`,values:this.dI[b]}]},onRegionTipShow:function(g,fB,f){fB.html(`${f}: ${(f in this.N[b])?this.N[b][f]:'not in DARIAH'}`)}.bind(this),onMarkerTipShow:function(g,fB,f){fB.html(`${f}: ${(f in this.N[b])?this.N[b][f]:'not in DARIAH'}`)}.bind(this),onRegionClick:function(g,f){if(!(f in this.T[b])){g.preventDefault()}}.bind(this),onMarkerClick:function(g,f){if(!(f in this.T[b])){g.preventDefault()}}.bind(this),onRegionSelected:function(g,f,j,M){if(this.fx){this.c.m.ct(`rel_${this.G}_${b}`,this.gl(M))}}.bind(this),onMarkerSelected:function(g,f,j,M){if(this.fx){this.c.m.ct(`rel_${this.G}_${b}`,this.gl(M))}}.bind(this)});var hy=s.find(`p.•fg`);hy.css(`top`,`${gW-20}px`);hy.css(`left`,`10px`);var kg=s.find(`p.•fg a`);kg.click(function(g){g.preventDefault();k.cM[b].setFocus({regions:[`GB`,`GR`]})});this.cM[b]=this.cL[b].vectorMap('get','mapObject');this.cM[b].setFocus({regions:[`GB`,`GR`]})};R.prototype.gs=function(b,t){this.fx=false;var fH={};for(var f in t){if(!(f in this.hR)&& f !=this.Y.cl){fH[f]=t[f]}}this.cM[b].setSelectedRegions(fH);this.cM[b].setSelectedMarkers(fH);this.fx=true};R.prototype.gt=function(b){var fb=this.D[b].length;if(fb==0){fb=1}var hx={};for(var f in this.N[b]){if(f !=this.Y.cl){var hk=100 * this.N[b][f]/ fb;hx[f]=(fb < 10)?hk:(10*Math.sqrt(hk))}}this.cM[b].series.markers[0].setValues(hx)};R.prototype.gx=function(b){};R.prototype.gv=function(b){this.fq[b]={};this.dI[b]={};var t=this.c.t[b];for(var j in t){var f=t[j];if(f[1]){this.cY[b][j]=false;this.cZ[b][j]=true;this.cn[b].push(j);this.T[b][j]=f[0];if(f.length > 3){this.fq[b][j]={latLng:[f[2],f[3]],d:f[0]}}this.dI[b][j]='jy'}else{this.dI[b][j]='jJ'}}this.cn[b].sort(function(cz,dc){return(t[cz]< t[dc])?-1:(t[cz][0]> t[dc][0])?1:0})};function gh(c){this.c=c;this.ft={};this.cm={};this.fn={};this.fl={};this.gn={};this.dJ={};this.dE={};this.fw={};this.dF={};this.D={}};gh.prototype={cd:function(b){var l=`<div><p class="•hF"><span fct="${this.c.d}-${b}"></span> By full text search
    <a href="#" title="modify full text filter" id="flt2_${b}" class="•hI"></a></p>`;l +=`<div id="fltw_${b}">`;l +=`<p id="•kl${b}" class="•gc •fd •ff ui-widget">`;l +=`<input id="flt_${b}" class="flt"/>`;l +=`<a href="#" class="•fd fa fa-close •km" id="clearf_${b}"></a>`;l +=`<span •ff class="•cH" id="stats_${b}"></span>&nbsp;`;l +=`</p>`;l +=`<div id="autoc_${b}" style="display: none;">here ${b}</div>`;l +=`</div>`;this.c.n[b].html(l)},hX:function(b){var cw=this.c.m.Z(`flt_${b}`);this.fn[b].html(cw);this.cm[b].val(cw);this.cm[b].autocomplete(`search`,cw)},hU:function(b){return function(ky,kc){this.dF[b]={};kc.content.forEach(function(kb,j){this.dF[b][kb.value]=1},this);if(!(this.fw[b])){var cw=this.cm[b].val();this.c.m.ct(`flt_${b}`,cw)}}.bind(this)},hV:function(b){this.dE[b].click(function(g){g.preventDefault();this.cm[b].val(``);this.cm[b].autocomplete(`search`,``)}.bind(this))},hs:function(b){var fP;if(this.cm[b].val()==``){fP=``;this.dJ[b].removeClass(`•x`)}else{fP=`${this.p.D[b].length} of `;this.dJ[b].addClass(`•x`)}this.dJ[b].html(`${fP}${this.D[b].length}`)},cG:function(b,j){return(j in this.dF[b])},P:function(b){return(this.c.m.Z(`list`)==b)},Q:function(b){this.cd(b)},F:function(b){if(!this.p){this.p=this.c.C.cA(`p`).O}var H=this.c.C.cA(`W`).H[b];this.ft[b]=[];H.forEach(function(cp,j){this.ft[b].push({label:cp[1],value:`${cp[0]}`})},this);this.dF[b]={};this.D[b]=[];var s=this.c.n[b];var dM=s.find(`#fltw_${b}`);var gS=$(`#flt_${b}`);this.cm[b]=gS;var gT=$(`#flt2_${b}`);this.fn[b]=gT;this.fl[b]=dM.find(`#•kl${b}`);this.gn[b]=dM.find(`#autoc_${b}`);this.dJ[b]=dM.find(`#stats_${b}`);this.dE[b]=dM.find(`#clearf_${b}`);this.cm[b].autocomplete({appendTo:this.gn[b],source:this.ft[b],response:this.hU(b),minLength:0});gT.click(function(g){g.preventDefault();$(this).closest(`div`).find(`.morec`).click();gS[0].focus()});this.fw[b]=true;this.hV(b);this.hX(b);this.fw[b]=false},h:function(b){var cw=this.c.m.Z(`flt_${b}`);if(cw==``){this.fl[b].removeClass(`•x`);this.dE[b].hide()}else{this.fl[b].addClass(`•x`);this.dE[b].show()}this.fn[b].html(cw)}};function gg(c){this.c=c;this.gz={};this.H={};this.fQ={};this.D={};this.fC={}};gg.prototype={cd:function(b){var l=``;l +=`<p><span fct="all"></span>Filtering <span id="fstats_${b}"></span></p>`;this.c.n[b].html(l)},P:function(b){return this.c.m.Z(`list`)==b},Q:function(b){var cO=this.c.cO;this.fC[b]={};for(var V in cO){var js=cO[V];if(js.cQ(b)){this.fC[b][V]=cO[V]}}this.cd(b)},cX:function(dl,X){var k=this;var fA=dl.closest(`p`);var fE=fA.find(`.hidec`);var fI=fA.find(`.morec`);var fO=fA.find(`.showc`);var fD=dl.closest(`div`).find(`table,.•gc`);var fy=dl.closest(`div`).find(`.•ks,.•hI`);var dQ=`fctx_${dl.closest('span').attr('fct')}`;var hc=X==undefined;if(hc){if(cr.isSet(dQ)){X=cr.get(dQ)}else{X=1}}var dL=dQ==`fctx_all`;if(dL && !hc){dl.closest(`div`).find(`div.•kj span[fct]`).each(function(){k.cX($(this),X)})}cr.set(dQ,X);if(X==0){fE.show();fI.hide();fO.hide();if(!dL){fD.hide();fy.hide()}}else if(X==1){fE.hide();fI.show();fO.hide();if(!dL){fD.hide();fy.show()}}else{fE.hide();fI.hide();fO.show();if(!dL){fD.show();fy.hide()}}},F:function(b){var k=this;var s=this.c.n[b];var jA=this.c.C.cA(`W`).n[b];this.gz[b]=s.find(`#fstats_${b}`);this.fQ[b]=jA.find(`#table_${b}`);var fF=` details; click to change level of details`;var jq=`<a class="showc fa fa-list-ul" href="#" title="full${fF}"></a><a class="morec fa fa-align-left" href="#" title="condensed${fF}"></a><a class="hidec fa fa-minus" href="#" title="hidden${fF}"></a>`;s.addClass(`•fZ`);s.find(`span[fct]`).each(function(){$(this).html(`${jq}&nbsp`);k.cX($(this))});s.find(`.hidec`).click(function(g){g.preventDefault();k.cX($(this),1)});s.find(`.morec`).click(function(g){g.preventDefault();k.cX($(this),2)});s.find(`.showc`).click(function(g){g.preventDefault();k.cX($(this),0)})},h:function(b){this.fQ[b].find(`tr[id]`).hide();var jE=this.c.C.cA(`W`);var H=jE.H[b];var cq=this.fC[b];this.D[b]=[];for(var V in cq){var p=cq[V].O;p.D[b]=[]}H.forEach(function(cp,j){var cG=true;var dt=null;var dh=false;for(var V in cq){if(!dh){var p=cq[V].O;var hv=p.cG(b,cp[0]);if(!hv){cG=false;if(dt==null){dt=p}else{dh=true}}}}if(!dh){if(cG){this.D[b].push(cp[0]);this.fQ[b].find(`tr[id="r${cp[0]}"]`).show()}if(dt !=null){dt.D[b].push(cp[0])}else{for(var V in cq){var p=cq[V].O;p.D[b].push(cp[0])}}}},this);for(var V in cq){var p=cq[V].O;p.hs(b)}this.gz[b].html(`${this.D[b].length} of ${H.length}`)}};function fk(c){this.c=c};fk.prototype={cd:function(b){var l=``;l +=`<table id="table_${b}">`;if(b==`contrib`){this.c.H[b].forEach(function(L){l +=`<tr id="r${L[0]}"><td><a href="#" rid="${L[0]}">${L[1]}</a></td></tr>`})}else if(b==`country`){this.c.H[b].forEach(function(L){jx=(L[3]==1)?`dariah`:``;l +=`<tr id="r${L[0]}"><td class="•kk">${L[1]}<td><td class="•kH">${L[2]}<td><td class="•kn">${jx}</td><td class="•hJ">${L[4]}</td><td class="•hJ">${L[5]}</td></tr>`})}else if(b==`type` || b==`tadiraha` || b==`tadiraho` || b==`tadiraht`){this.c.H[b].forEach(function(L){l +=`<tr id="r${L[0]}"><td class="•kq">${L[1]}<td></tr>`})}l +=`</table>`;this.c.n[b].html(l)},P:function(b){return this.c.m.Z(`list`)==b},Q:function(b){this.cd(b)},F:function(b){},h:function(b){}};function fj(c){this.c=c;this.cc={};this.dO={}};fj.prototype={cd:function(b){this.c.n[b].html(`<a class="•fX" href="#">${this.c.m.fN('list', b, 'cv')}</a> `)},fm:function(b){this.dO[b].click(function(g){g.preventDefault();this.c.m.ct(`list`,b)}.bind(this))},hQ:function(b){return this.c.m.Z(`list`)==b},P:function(b){return true},Q:function(b){this.cd(b);this.cc[b]=this.c.n[b];this.cc[b].addClass(`•fW`);this.dO[b]=this.c.n[b].find(`a`)},F:function(b){this.fm(b)},h:function(b){if(this.hQ(b)){this.dO[b].addClass(`•x`);this.cc[b].addClass(`•x`)}else{this.dO[b].removeClass(`•x`);this.cc[b].removeClass(`•x`)}}};function gj(c){this.c=c};gj.prototype={P:function(b){return true},Q:function(b){var l=`
<p id="•fT">Cite</p>
<table align="center">
    <tr>
        <td class="•fU clr">
            <a lnk="" href="#" id="•hD" title="link to page content and appearance (markdown)" class="ctrl fa fa-level-down fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hB" title="link to page content and appearance (html)" class="ctrl fa fa-external-link-square fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hC" title="link to page content (html)" class="ctrl fa fa-external-link fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•fV" title="copy page content" class="ctrl fa fa-file-text-o fa-lg fa-fw"></a>
        </td>
    </tr>
    <tr>
        <th class="•fU" width="60px">page view</th>
    </tr>
    <tr class="•kF">
        <td class="•fU"><span id="•kv" class="ctrl fa fa-chevron-right fa-fw"></span><span id="•kt" class="•hG">share link to this page with or without view settings.</span></td>
    </tr>
</table>
<p id="•hz"></p>
<p id="•hA"></p>
`;this.c.n[b].html(l)},F:function(b){var k=this;var s=this.c.n[b];var dW=$(`#self_link`);dW.hide();s.addClass(`•gf`);s.find(`.•hG`).hide();s.find(`#•hD,#•hB,#•hC,#•kG`).click(function(g){g.preventDefault();window.prompt(`Press <Cmd-C> and then <Enter> to copy link on clipboard`,$(this).attr(`lnk`))});s.find(`#•fV`).click(function(g){g.preventDefault();var dN=`middle`;var db=app_url_cite+k.c.m.dP(true);dW.show();dW.attr(`href`,db);jP(dN)});s.find(`#•kv`).click(function(g){g.preventDefault();jX($(this),$(`#•kt`))});s.click(function(g){g.preventDefault();var db=app_url_cite+k.c.m.dP(true);var jh=app_url_cite+k.c.m.dP(false);$(`#•fT`).hide();$(`#•hz`).html(``);$(`#•hA`).html(``);$(`.•fU.clr,#•hz,#•hA`).removeClass(`error warning good special`);var hp=dj($(`title`).text());$(`#•hD`).attr(`lnk`,`[${hp}](${db})`);$(`#•hB`).attr(`lnk`,db);$(`#•hC`).attr(`lnk`,jh);$(`#•fV`).attr(`lnk`,db);$(`#•fV`).attr(`tit`,hp);$(this).animate({height:`100px`,width:`200px`,opacity:0.95},300)});s.mouseleave(function(){dW.hide();$(`#•fT`).show();s.animate({height:`20px`,width:`40px`,opacity:.7},300);return false})},h:function(b){}};function fh(d,cD,C){this.d=d;this.C=C;this.cD=cD;this.E=cD.E;this.cN={};for(var b in this.E){this.cN[b]={};for(var cS in this.C.dX){this.cN[b][cS]=true}}this.v={};this.n={};this.m=this.C.m;this.H={};this.t={};this.O=new cD.y(this)};fh.prototype={hd:function(b,r){return !this.cN[b][r].state ||(this.cN[b][r].state()==`rejected`)},hM:function(b,r,dT){var gZ=this[dT].bind(this,b);var jV=this.C.jt(this.d,r);var hn=[];jV.forEach(function(dZ){var fK=dZ[0];var fL=dZ[1];var hl=this.C.cA(fK);if(hl.cQ(b)){hn.push(hl.cN[b][fL])}},this);this.cN[b][r]=$.when.apply($,hn).then(gZ)},cP:function(b,r,dT){if(r in this.C.dX){if(!this.C.dX[r]|| this.hd(b,r)){this.hM(b,r,dT)}}},cQ:function(b){return(b in this.E)},gD:function(b,jG){if(this.cQ(b)){if(b in this.n){if(jG){this.n[b].show()}else{this.n[b].hide()}}}},hO:function(b){var J=url_tpl.replace(/_c_/,`data`).replace(/_f_/,`${this.cD.J}_${b}`)+`.json`;this.v[b].v(`fetching data ...`);var jN=this.hS.bind(this,b);return $.ajax({type:`POST`,url:J,contentType:`application/json; charset=utf-8`,dataType:`json`}).then(function(cB){jN(cB)})},hS:function(b,cB){this.v[b].gH();cB.msgs.forEach(function(jC){this.v[b].v(jC)},this);if(cB.good){this.H[b]=cB.data;if(`relvals` in cB){this.t[b]=cB.relvals}}this.O.Q(b)},jc:function(b){this.hN=this.C.jv(this.cD.U,this.E);this.n[b]=$(`#${this.d}_${b}`);if(this.n[b].length==0){var dg=this.hN[b];dg.append(`<div id="msg_${this.d}_${b}"></div>`);dg.append(`<div id="${this.d}_${b}" class="•kj"></div>`);this.n[b]=$(`#${this.d}_${b}`)}this.v[b]=new dy(`msg_${this.d}_${b}`);if(this.cD.J !=null){return this.hO(b)}else{this.O.Q(b)}},jd:function(b){this.O.F(b)},jf:function(b){this.gD(b,true);this.O.h(b)},Q:function(b){if(this.cQ(b)&& this.O.P(b)){this.cP(b,`Q`,`jc`)}},F:function(b){if(this.cQ(b)&& this.O.P(b)){this.cP(b,`F`,`jd`)}},h:function(b){if(this.cQ(b)&& this.O.P(b)){this.cP(b,`h`,`jf`)}else{this.gD(b,false)}}};function dz(){this.d=`page`;this.v=new dy(`msg_${this.d}`);this.m=new gk(this);this.dX={Q:true,F:true,h:false};this.hr={F:`Q`,h:`F`};var dS=this.m.jw(`list`);var dd={contrib:1};var jr={'':1};this.cJ={jQ:{U:`body`,E:jr,J:null,y:gj},gK:{U:`left`,E:dS,J:null,y:fj},W:{U:`middle`,E:dS,J:`list`,y:fk},p:{U:`gK`,E:dS,J:null,y:gg},dm:{U:`p`,E:dS,J:null,y:gh},dk:{U:`p`,E:dd,J:`country`,y:R},df:{U:`p`,E:dd,J:`type`,y:dx},dr:{U:`p`,E:dd,J:`tadiraha`,y:dA},ds:{U:`p`,E:dd,J:`tadiraho`,y:dB},dY:{U:`p`,E:dd,J:`tadiraht`,y:dC}},this.cI={Q:{p:{gK:1,W:1},dm:{p:1},dk:{p:1,dm:1},df:{p:1,dk:1},dr:{p:1,df:1},ds:{p:1,dr:1},dY:{p:1,ds:1},jQ:{p:1,W:1}},F:{p:{dm:1,dk:1,df:1,dr:1,ds:1,dY:1},dm:{W:1},dk:{W:1},df:{W:1},dr:{W:1},ds:{W:1},dY:{W:1}},h:{p:{dm:1,dk:1,df:1,dr:1,ds:1,dY:1}}};this.cg={};for(var d in this.cJ){var c=new fh(d,this.cJ[d],this);c.cO={};this.cg[d]=c}for(var d in this.cJ){var jk=this.cg[d];var gN=this.cJ[d].U;if(gN in this.cg){var jM=this.cg[gN];jM.cO[d]=jk}}for(var d in this.cg){var c=this.cg[d];c.gG={};for(var r in this.cI){var gJ=this.cI[r];c.gG[r]={};if(d in gJ){for(var jj in gJ[d]){c.gG[r][jj]=1}}}}this.hT();this.hY(80);History.Adapter.bind(window,`statechange`,this.m.h())};dz.prototype={hY(jS){var kf=`${window.innerHeight - jS}px`;for(var kd in{'middle':1,'left':1,'right':1}){$(`#${kd}`).css(`height`,kf)}},hT(){var dw=[];var dv={};var cT={};for(var d in this.cJ){for(var r in this.dX){dw.push(`${d}-${r}`)}}function gE(ck,cb){if(!(ck in dv)){dv[ck]={}}if(!(cb in cT)){cT[cb]={}}dv[ck][cb]=true;cT[cb][ck]=true}for(var hg in this.hr){var fL=this.hr[hg];for(var d in this.cJ){gE(`${d}-${fL}`,`${d}-${hg}`)}}for(var r in this.cI){for(var hf in this.cI[r]){for(var fK in this.cI[r][hf]){gE(`${fK}-${r}`,`${hf}-${r}`)}}}var ch=0;var cE=[];var cU={};while(ch <=dw.length){cE.push({});if(ch==0){dw.forEach(function(cj){if(!(cj in cT)){cE[ch][cj]=1}})}else{for(var ck in cU){if(ck in dv){for(var cb in dv[ck]){if(!(cb in cU)){var gU=true;for(var jI in cT[cb]){if(!(jI in cU)){gU=false;break}}if(gU){cE[ch][cb]=1}}}}}}if(!Object.keys(cE[ch]).length){break}for(var cj in cE[ch]){cU[cj]=1}ch++}this.fv=[];this.gA={};if(Object.keys(cU).length !=dw.length){var gL=[];dw.forEach(function(cj){if(!(cj in cU)){gL.push(cj)}})}else{cE.forEach(function(jF,ch){for(var cj in jF){this.fv.push(cj)}},this);this.gA=cT}},cA:function(d){return this.cg[d]},jv:function(d,E){var n={};if(d in this.cg){n=this.cg[d].n}else{var jg=(d==`body`)?$(`body`):$(`#${d}`);for(var b in E){n[b]=jg}}return n},jt:function(d,r){var hm=[];var cb=`${d}-${r}`;for(var ck in(this.gA[cb]||{})){hm.push(ck.split(`-`))}return hm},h:function(){this.fv.forEach(function(dZ){var ht=dZ.split(`-`);var d=ht[0];var r=ht[1];var c=this.cA(d);for(var b in c.E){c[r](b)}},this)}};$(function(){new dz().h()});