{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app.min.js","components.js","control.js","ctype.js","eumap.js","facet.js","filter.js","generic.js","item.js","list.js","main.js","message.js","page.js","relative.js","share.js","skeleton.js","tadiraha.js","tadiraho.js","tadiraht.js","viewstate.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_interopRequireWildcard","newObj","key","Object","prototype","hasOwnProperty","_classCallCheck","instance","Constructor","TypeError","defineProperty","value","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","_generic","g","_message","_message2","_stage","_msg","_ids_fetched","_class","name","specs","page","this","variants","Map","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","vr","set","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","stages","keys","st","get","container","dst","state","data","related_info","related_values","implementation","specific","stage","promise","method","methodCall","bind","timing","getBefore","promises","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_step3$value","prev_name","prev_stage","prev_component","getComponent","hasVariant","$","when","apply","then","has","once","by_id","need","_deed","on","widget","show","hide","ids_to_fetch","fetch_url","url_tpl","replace","msg","postFetch","_postFetch","from","join","ajax","type","url","contentType","dataType","json","clear","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","msgs","m","good","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","relinfo","x","Set","relvals","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","add","weld","getContainer","dest","_destination","prepend","destination","append","_fetch","ids_asked_for","from_str","getState","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","size","wire","_visibility","work","ensure","./generic.js","./message","2","_widget","_control","component","html","showState","_this","click","preventDefault","setState","_html","addClass","find","_dressup","_isActive","removeClass","3","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_relative","_relative2","_Relative","getPrototypeOf","./relative","4","_map_object","_map_container","_marker","_setvalues","_not_mapped","_this2","cc","mapc","height","width","vectorMap","map","backgroundColor","regionsSelectable","markersSelectable","regionsSelectableOne","markersSelectableOne","markerStyle","initial","fill","fill-opacity","stroke","stroke-width","stroke-opacity","hover","cursor","selected","selectedHover","regionStyle","markers","series","values","scale","normalizeFunction","attribute","min","max","regions","outdariah","indariah","onRegionTipShow","el","related_value","rvs","statistics","onMarkerTipShow","onRegionClick","related_values_index","onMarkerClick","onRegionSelected","change_state","state_var_pref","a_to_str","_unmapped_selected","onMarkerSelected","zoom_p","css","zoom_control","setFocus","result","this_state","empty","map_regions","map_markers","related_state","d","member_dariah","no_values","mapo","setSelectedRegions","setSelectedMarkers","total","distilled","weighted_statistics","stat","pr","Math","sqrt","setValues","_this3","marker","setv","latitude","longitude","related_values_all","related_values_list","latLng","sort","b","5","_stats","_enabled_facets","table","h","children","_step$value","facet_name","facet_component","expand_control","mode","that","dt","closest","hidec","morec","showc","expanded_material","condensed_material","not_expanded_material","attr","mode_undef","localstorage_vars","isSet","all_facets","each","_display","info","detailcontrols","facets","changed","_step2$value","facet_comp","facet","mother_list","item_comp","getRecordIds","_facet","did","v","the_false","discard","_step6$value","_facet3","this_v","_step7$value","_facet2","_step5$value","_facet4","stats","select","6","_tags","_filter_control","_filter_control2","_clear_filter_control","_box","_completions_dst","_wire_mode","_distilled","filter_state","_stats_dst","varpfx","textf","filterc","val","autocomplete","event","ui","dstl","content","stat_prefix","statd","tgs","label","cf","flt","flt2","appendTo","source","response","_response","minLength","focus","_setClear","_setFilter","old_state","new_state","clearfc","7","_toConsumableArray","arr2","escapeHTML","text","chr","deselectText","document","selection","window","getSelection","removeAllRanges","selectText","containerid","range","body","createTextRange","moveToElementText","getElementById","_range","createRange","selectNode","addRange","toggleDetail","detail","extra","thedetail","toggle","thiscl","othercl","hasClass","compact","cutoff","substr","split","ar","to_str","set_equal","s1","s2","_Request","parameter","parameters","uri","location","search","indexOf","slice","paramval","_localstorage","request_vars","initNamespaceStorage","localStorage","8","open_items","it","iid","row","up","getRow","types","tp","in_dariah","after","control","open_ids","rid","with_detail","_set_it","row_status","shown","display","9","rowstart","rowend","10","_page","_page2","./page","11","_trash_control","_trash_control_para","_on_clear","on_clear","_hide","kind","message_text","_show","12","_viewstate","_viewstate2","_share","_share2","_ctype","_ctype2","_tadiraho","_tadiraho2","_tadiraha","_tadiraha2","_tadiraht","_tadiraht2","_eumap","_eumap2","_filter","_filter2","_list","_list2","_item","_item2","_control2","_components","_components2","_skeleton","_skeleton2","_by_id","_Skeleton","main_lists","getValues","contrib_list","empty_list","_component_specs","ignore","components","spec","child_component","dest_name","parent_component","resolveTiming","_setHeight","History","Adapter","subtract","wh","innerHeight","w","addto","prev_nodes","next_node","_timing","prev_node","_tasks","task","_task$split","_task$split2","./components","./control","./ctype","./eumap","./facet","./filter","./item","./list","./share","./skeleton","./tadiraha","./tadiraho","./tadiraht","./viewstate","13","_all_values_control","_cols","_cutoff","_shortsize","rtype","cols","shortsize","typ","type_sg","type_pl","_preHtml","ai","entries","raw_value","_raw_value","compact_value","last_handled","scrollTop","scrollIntoView","behavior","alignToTop","ison","all_selected","facet_cell","facet_cell2","_related_value","nv","_related_value2","_myStats","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_plainWeld","_myWeld","_myDressup","_mySetFacet","_setFacet","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","14","slink","prompt","app_url_raw","app_url_cite","getVars","app_url_rawc","pvtitle","animate","opacity","mouseleave","15","stages_prev","before","addEdge","timing_edges","timing_edges_inv","timing_nodes","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","next_stage","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","_name","nexts","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","_step14$value","next_name","prevs","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","subset","visited","node","other_prev_node","_node","cycle","_node2","console","log","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","nodes","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","_node3","16","17","18","19","_spec_info","_data","_specs","vars","vals","default_value","showas","sg","pl","_compile_specs","_getInitstate","_addHistory","newval","test","Number","limits","comprehensive","valid_val","trans_val","_step4$value","raw_val","_validate","title","view_url","tit","this_url","app_url","pushState"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);var _message=require('./message');var _message2=_interopRequireDefault(_message);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _stage=Symbol();var _msg=Symbol();var _ids_fetched=Symbol();var _class=function(){function _class(name,specs,page){_classCallCheck(this,_class);this.name=name;this.page=page;this.specs=specs;this.variants=specs.variants;this[_stage]=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.variants[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var vr=_step.value;this[_stage].set(vr,new Map);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.page.stages.keys()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var st=_step2.value;this[_stage].get(vr).set(st,true)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}this[_msg]=new Map;this[_ids_fetched]=new Map;this.container=new Map;this.dst=new Map;this.state=this.page.state;this.data=new Map;this.related_info=new Map;this.related_values=new Map;this.implementation=new specs.specific(this)}_createClass(_class,[{key:'need',value:function need(vr,stage){var promise=this[_stage].get(vr).get(stage);return!promise.state||promise.state()=='rejected'}},{key:'_deed',value:function _deed(vr,stage,method){var sdb=this.name=='item'&&stage=='weld';var methodCall=this[method].bind(this,vr);var timing=this.page.getBefore(this.name,stage);var promises=[];var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=timing[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var prev_name=_step3$value[0];var prev_stage=_step3$value[1];var prev_component=this.page.getComponent(prev_name);if(prev_component.hasVariant(vr)){promises.push(prev_component[_stage].get(vr).get(prev_stage))}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}this[_stage].get(vr).set(stage,$.when.apply($,promises).then(methodCall))}},{key:'ensure',value:function ensure(vr,stage,method){if(this.page.stages.has(stage)){var once=this.page.stages.get(stage)&&!this.specs.by_id;if(!once||this.need(vr,stage)){this._deed(vr,stage,method)}}}},{key:'hasVariant',value:function hasVariant(vr){return this.variants.has(vr)}},{key:'_visibility',value:function _visibility(vr,on){if(this.hasVariant(vr)){if(this.container.has(vr)){var widget=this.container.get(vr);if(on){widget.show()}else{widget.hide()}}}}},{key:'_fetch',value:function _fetch(vr,ids_to_fetch){var fetch_url=url_tpl.replace(/_c_/,'data').replace(/_f_/,this.specs.fetch_url+'_'+vr)+'.json';this[_msg].get(vr).msg('fetching data ...');var postFetch=this._postFetch.bind(this,vr);if(!(ids_to_fetch==undefined)){fetch_url+='?ids='+Array.from(ids_to_fetch).join(',')}return $.ajax({type:'POST',url:fetch_url,contentType:'application/json; charset=utf-8',dataType:'json'}).then(function(json){postFetch(json,ids_to_fetch)})}},{key:'_postFetch',value:function _postFetch(vr,json,ids_to_fetch){var sdb=this.name=='item';this[_msg].get(vr).clear();var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=json.msgs[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var m=_step4.value;this[_msg].get(vr).msg(m)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}if(json.good){if('data'in json){this.data.set(vr,json.data)}if('relinfo'in json){var r=new Map;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=json.relinfo[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var x=_step5.value;r.set(x[0],new Set(x[1]))}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}this.related_info.set(vr,r)}if('relvals'in json){this.related_values.set(vr,json.relvals)}if(this.specs.by_id){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=ids_to_fetch[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var i=_step6.value;this[_ids_fetched].get(vr).add(i)}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}}}this.implementation.weld(vr)}},{key:'_weld',value:function _weld(vr){this.dst=this.page.getContainer(this.specs.dest,this.variants);if(!this.specs.by_id){this.container.set(vr,$('#'+this.name+'_'+vr));if(this.container.get(vr).length==0){var destination=this.dst.get(vr);destination.append('<div id=\"msg_'+this.name+'_'+vr+'\"></div>');destination.append('<div id=\"'+this.name+'_'+vr+'\" class=\"component\"></div>');this.container.set(vr,$('#'+this.name+'_'+vr))}this[_msg].set(vr,new _message2.default('msg_'+this.name+'_'+vr))}else{if(!this[_msg].has(vr)){var _destination=this.dst.get(vr);_destination.prepend('<div id=\"msg_'+this.name+'_'+vr+'\"></div>');this[_msg].set(vr,new _message2.default('msg_'+this.name+'_'+vr))}if(!this[_ids_fetched].has(vr)){this[_ids_fetched].set(vr,new Set)}}if(this.specs.fetch_url!=null){if(this.specs.by_id){var ids_to_fetch=new Set;var ids_asked_for=g.from_str(this.state.getState(this.specs.fetch_url+'_'+vr));if(!this[_ids_fetched].has(vr)){this[_ids_fetched].set(vr,new Set)}this.data.set(vr,[]);this.related_info.set(vr,new Map);this.related_values.set(vr,new Map);var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=ids_asked_for[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var i=_step7.value;if(!this[_ids_fetched].get(vr).has(i)){ids_to_fetch.add(i)}}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}if(ids_to_fetch.size!=0){return this._fetch(vr,ids_to_fetch)}else{this.implementation.weld(vr)}}else{return this._fetch(vr)}}else{this.implementation.weld(vr)}}},{key:'_wire',value:function _wire(vr){this.implementation.wire(vr)}},{key:'_work',value:function _work(vr){this._visibility(vr,true);this.implementation.work(vr)}},{key:'weld',value:function weld(vr){if(this.hasVariant(vr)&&this.implementation.show(vr)){this.ensure(vr,'weld','_weld')}}},{key:'wire',value:function wire(vr){if(this.hasVariant(vr)&&this.implementation.show(vr)){this.ensure(vr,'wire','_wire')}}},{key:'work',value:function work(vr){if(this.hasVariant(vr)&&this.implementation.show(vr)){this.ensure(vr,'work','_work')}else{this._visibility(vr,false)}}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7,\"./message\":11}],2:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _widget=Symbol();var _control=Symbol();var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component;this[_widget]=new Map;this[_control]=new Map}_createClass(_class,[{key:'_html',value:function _html(vr){this.component.container.get(vr).html('<a class=\"control_title\" href=\"#\">'+this.component.state.showState('list',vr,'sg')+'</a> ')}},{key:'_dressup',value:function _dressup(vr){var _this=this;this[_control].get(vr).click(function(e){e.preventDefault();_this.component.state.setState('list',vr)})}},{key:'_isActive',value:function _isActive(vr){return this.component.state.getState('list')==vr}},{key:'show',value:function show(vr){return true}},{key:'weld',value:function weld(vr){this._html(vr);this[_widget].set(vr,this.component.container.get(vr));this[_widget].get(vr).addClass('control_big');this[_control].set(vr,this.component.container.get(vr).find('a'))}},{key:'wire',value:function wire(vr){this._dressup(vr)}},{key:'work',value:function work(vr){if(this._isActive(vr)){this[_control].get(vr).addClass('ison');this[_widget].get(vr).addClass('ison')}else{this[_control].get(vr).removeClass('ison');this[_widget].get(vr).removeClass('ison')}}}]);return _class}();exports.default=_class;\n\n},{}],3:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'type'))}return _class}(_relative2.default);exports.default=_class;\n\n},{\"./relative\":13}],4:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _map_object=Symbol();var _map_container=Symbol();var _marker=Symbol();var _setvalues=Symbol();var _not_mapped=Symbol();var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'country'));_this[_map_object]=new Map;_this[_map_container]=new Map;_this[_marker]=new Map;_this[_setvalues]=new Map;_this[_not_mapped]=new Set(['-','CY','KS','TR','MC','GE']);return _this}_createClass(_class,[{key:'_preHtml',value:function _preHtml(vr){return'<div id=\"map-europe_'+vr+'\" class=\"position\">\\n    <p class=\"zoom\"><a class=\"fa fa-arrows\" href=\"#\" title=\"zoom to fit all countries\"/></p>\\n</div>'}},{key:'_myDressup',value:function _myDressup(vr){var _this2=this;var that=this;var cc=this.component.container.get(vr);this[_map_container].set(vr,cc.find('#map-europe_'+vr));var mapc=this[_map_container].get(vr);var height=mapc.width()*0.6;mapc.width('100%');mapc.height(height);mapc.vectorMap({'map':'europe_mill',backgroundColor:'#ccccff',regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:'#008800','fill-opacity':0.2,stroke:'none','stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:'pointer',stroke:'#ffff44','stroke-width':1,'stroke-opacity':1},selected:{fill:'#008800','fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:'#bbbbbb','fill-opacity':1,stroke:'none','stroke-width':0,'stroke-opacity':1},hover:{cursor:'pointer',stroke:'#ffff44','stroke-width':3,'stroke-opacity':1},selected:{fill:'#dd8844','fill-opacity':1},selectedHover:{}},markers:this[_marker].get(vr),series:{markers:[{values:{},scale:[0,20],normalizeFunction:'linear',attribute:'r',min:0,max:100}],regions:[{scale:{'outdariah':'#ffffff','indariah':'#ffddbb'},attribute:'fill',values:this[_setvalues].get(vr)}]},onRegionTipShow:function(e,el,related_value){var rvs=this.statistics.get(vr);el.html(related_value+': '+(rvs.has(related_value)?rvs.get(related_value):'not in DARIAH'))}.bind(this),onMarkerTipShow:function(e,el,related_value){var rvs=this.statistics.get(vr);el.html(related_value+': '+(rvs.has(related_value)?rvs.get(related_value):'not in DARIAH'))}.bind(this),onRegionClick:function(e,related_value){if(!this.related_values_index.get(vr).has(related_value)){e.preventDefault()}}.bind(this),onMarkerClick:function(e,related_value){if(!this.related_values_index.get(vr).has(related_value)){e.preventDefault()}}.bind(this),onRegionSelected:function(e,related_value,i,selected){if(this.change_state){this.component.state.setState(this.state_var_pref+vr,g.a_to_str(selected)+this._unmapped_selected(vr))}}.bind(this),onMarkerSelected:function(e,related_value,i,selected){if(this.change_state){this.component.state.setState(this.state_var_pref+vr,g.a_to_str(selected)+this._unmapped_selected(vr))}}.bind(this)});var zoom_p=cc.find('p.zoom');zoom_p.css('top',height-20+'px');zoom_p.css('left','10px');var zoom_control=cc.find('p.zoom a');zoom_control.click(function(e){e.preventDefault();_this2[_map_object].get(vr).setFocus({regions:['GB','GR']})});this[_map_object].set(vr,mapc.vectorMap('get','mapObject'));this[_map_object].get(vr).setFocus({regions:['GB','GR']})}},{key:'_unmapped_selected',value:function _unmapped_selected(vr){var result=[];var this_state=g.from_str(vr,this.component.state.getState(this.state_var_pref+vr));var empty=true;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this[_not_mapped][Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var related_value=_step.value;if(this_state.has(related_value)){result.push(related_value);empty=false}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return empty?'':','+result.join(',')}},{key:'_mySetFacet',value:function _mySetFacet(vr){this.change_state=false;var map_regions={};var map_markers={};var related_values=this.related_state.get(vr);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.component.related_values.get(vr)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var d=_step2.value;var i=d['_id'];var related_value=d['name'];var member_dariah=d['inDARIAH'];if(!this[_not_mapped].has(i)&&i!=this.no_values.value){map_regions[i]=related_values.has(i);if(member_dariah){map_markers[i]=related_values.has(i)}}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var mapo=this[_map_object].get(vr);mapo.setSelectedRegions(map_regions);mapo.setSelectedMarkers(map_markers);this.change_state=true}},{key:'_myStats',value:function _myStats(vr){var total=this.distilled.get(vr).size;if(total==0){total=1}var weighted_statistics={};var rvs=this.statistics.get(vr);var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=rvs[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var related_value=_step3$value[0];var stat=_step3$value[1];if(related_value!=this.no_values.value){var pr=100*stat/total;weighted_statistics[related_value]=total<10?pr:10*Math.sqrt(pr)}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}this[_map_object].get(vr).series.markers[0].setValues(weighted_statistics)}},{key:'_plainWeld',value:function _plainWeld(vr){}},{key:'_myWeld',value:function _myWeld(vr){var _this3=this;this[_marker].set(vr,{});this[_setvalues].set(vr,{});var related_values=this.component.related_values.get(vr);var marker=this[_marker].get(vr);var setv=this[_setvalues].get(vr);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=related_values[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var d=_step4.value;var i=d['_id'];var related_value=d['name'];var member_dariah=d['inDARIAH'];var latitude=d['latitude'];var longitude=d['longitude'];if(member_dariah){this.related_values_all.get(vr).add(i);this.related_values_list.get(vr).push(i);this.related_values_index.get(vr).set(i,related_value);marker[i]={latLng:[latitude,longitude],name:related_value};setv[i]='indariah'}else{setv[i]='outdariah'}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}this.related_values_list.get(vr).sort(function(a,b){return _this3.related_values_index.get(a)<_this3.related_values_index.get(b)?-1:_this3.related_values_index.get(a)>_this3.related_values_index.get(b)?1:0})}}]);return _class}(_relative2.default);exports.default=_class;\n\n},{\"./generic.js\":7,\"./relative\":13}],5:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _stats=Symbol();var _enabled_facets=Symbol();var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component;this[_stats]=new Map;this[_enabled_facets]=new Map;this.table=new Map;this.distilled=new Map}_createClass(_class,[{key:'_html',value:function _html(vr){var h='<p><span fct=\"all\"></span>Filtering <span id=\"fstats_'+vr+'\"></span></p>';this.component.container.get(vr).html(h)}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){var children=this.component.children;this[_enabled_facets].set(vr,new Map);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=children[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2);var facet_name=_step$value[0];var facet_component=_step$value[1];if(facet_component.hasVariant(vr)){this[_enabled_facets].get(vr).set(facet_name,facet_component)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}this._html(vr)}},{key:'_display',value:function _display(expand_control,mode){var that=this;var dt=expand_control.closest('p');var hidec=dt.find('.hidec');var morec=dt.find('.morec');var showc=dt.find('.showc');var expanded_material=expand_control.closest('div').find('table,.flt');var condensed_material=expand_control.closest('div').find('.value_list2,.flt_compact');var not_expanded_material=expand_control.closest('div').find('.flt_not_expanded');var key='fctx_'+expand_control.closest('span').attr('fct');var mode_undef=mode==undefined;if(mode_undef){if(g.localstorage_vars.isSet(key)){mode=g.localstorage_vars.get(key)}else{mode=1}}var all_facets=key=='fctx_all';if(all_facets&&!mode_undef){expand_control.closest('div').find('div.component span[fct]').each(function(){that._display($(this),mode)})}g.localstorage_vars.set(key,mode);if(mode==0){hidec.show();morec.hide();showc.hide();if(!all_facets){not_expanded_material.show();expanded_material.hide();condensed_material.hide()}}else if(mode==1){hidec.hide();morec.show();showc.hide();if(!all_facets){not_expanded_material.show();expanded_material.hide();condensed_material.show()}}else{hidec.hide();morec.hide();showc.show();if(!all_facets){not_expanded_material.hide();expanded_material.show();condensed_material.hide()}}}},{key:'wire',value:function wire(vr){var that=this;var cc=this.component.container.get(vr);this[_stats].set(vr,cc.find('#fstats_'+vr));var info=' details; click to change level of details';var detailcontrols='<a class=\"showc fa fa-fw fa-list-ul\" href=\"#\" title=\"full'+info+'\"></a><a class=\"morec fa fa-fw fa-align-left\" href=\"#\" title=\"condensed'+info+'\"></a><a class=\"hidec fa fa-fw fa-minus\" href=\"#\" title=\"hidden'+info+'\"></a>';cc.addClass('facet');cc.find('span[fct]').each(function(){$(this).html(detailcontrols+'&nbsp');that._display($(this))});cc.find('.hidec').click(function(e){e.preventDefault();that._display($(this),1)});cc.find('.morec').click(function(e){e.preventDefault();that._display($(this),2)});cc.find('.showc').click(function(e){e.preventDefault();that._display($(this),0)})}},{key:'work',value:function work(vr){var facets=this[_enabled_facets].get(vr);var changed=false;var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=facets[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var facet_name=_step2$value[0];var facet_comp=_step2$value[1];var facet=facet_comp.implementation;if(facet.changed){changed=true;break}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}if(!changed){return}var mother_list=this.component.page.getComponent('list');var key=mother_list.item_comp+'_'+vr;var data=mother_list.implementation.getRecordIds(vr);this.distilled.set(vr,new Set);var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=facets[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var facet_name=_step3$value[0];var facet_comp=_step3$value[1];var _facet=facet_comp.implementation;_facet.distilled.set(vr,new Set)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=data[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var did=_step4.value;var v=true;var the_false=null;var discard=false;var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=facets[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _step6$value=_slicedToArray(_step6.value,2);var facet_name=_step6$value[0];var facet_comp=_step6$value[1];if(!discard){var _facet3=facet_comp.implementation;var this_v=_facet3.v(vr,did);if(!this_v){v=false;if(the_false==null){the_false=_facet3}else{discard=true}}}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}if(!discard){if(v){this.distilled.get(vr).add(did)}if(the_false!=null){the_false.distilled.get(vr).add(did)}else{var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=facets[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var _step7$value=_slicedToArray(_step7.value,2);var facet_name=_step7$value[0];var facet_comp=_step7$value[1];var _facet2=facet_comp.implementation;_facet2.distilled.get(vr).add(did)}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=facets[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _step5$value=_slicedToArray(_step5.value,2);var facet_name=_step5$value[0];var facet_comp=_step5$value[1];var _facet4=facet_comp.implementation;_facet4.stats(vr)}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}this[_stats].get(vr).html(this.distilled.get(vr).size+' of '+data.length);mother_list.implementation.select(vr)}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],6:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _tags=Symbol();var _filter_control=Symbol();var _filter_control2=Symbol();var _clear_filter_control=Symbol();var _box=Symbol();var _completions_dst=Symbol();var _wire_mode=Symbol();var _distilled=Symbol();var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component;this[_tags]=new Map;this.filter_state=new Map;this.changed=new Map;this[_filter_control]=new Map;this[_filter_control2]=new Map;this[_box]=new Map;this[_completions_dst]=new Map;this._stats_dst=new Map;this[_clear_filter_control]=new Map;this[_wire_mode]=new Map;this[_distilled]=new Map;this.distilled=new Map;this.state_var_pref=this.component.specs.varpfx+'_'}_createClass(_class,[{key:'_html',value:function _html(vr){var h='\\n<div>\\n    <p class=\"dctrl\"><span fct=\"'+this.component.name+'-'+vr+'\"></span> By full text search\\n        <a href=\"#\" title=\"modify full text filter\" id=\"flt2_'+vr+'\" class=\"flt_not_expanded facet_single ison flt_pat\"></a>\\n        <a href=\"#\" class=\"control_med fa fa-close filtc\" id=\"clearf_'+vr+'\"></a>\\n    </p>\\n    <div id=\"fltw_'+vr+'\">\\n        <p id=\"fbox_'+vr+'\" class=\"flt control_med fbox ui-widget\">\\n            <input id=\"flt_'+vr+'\" class=\"flt flt_pat\"/>\\n            <span fbox class=\"stats\" id=\"stats_'+vr+'\"></span>\\n        </p>\\n        <div id=\"autoc_'+vr+'\" style=\"display: none;\">here '+vr+'</div>\\n    </div>\\n</div>';this.component.container.get(vr).html(h)}},{key:'_setFilter',value:function _setFilter(vr){var textf=this.component.state.getState(this.state_var_pref+vr);var filterc=this[_filter_control].get(vr);this[_filter_control2].get(vr).html(textf);filterc.val(textf);filterc.autocomplete('search',textf)}},{key:'_response',value:function _response(vr){return function(event,ui){this[_distilled].set(vr,new Set);var dstl=this[_distilled].get(vr);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=ui.content[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var u=_step.value;dstl.add(u.value)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}if(!this[_wire_mode].get(vr)){var textf=this[_filter_control].get(vr).val();this.component.state.setState(this.state_var_pref+vr,textf)}}.bind(this)}},{key:'_setClear',value:function _setClear(vr){var _this=this;this[_clear_filter_control].get(vr).click(function(e){e.preventDefault();var filterc=_this[_filter_control].get(vr);filterc.val('');filterc.autocomplete('search','')})}},{key:'stats',value:function stats(vr){var stat_prefix=void 0;var statd=this._stats_dst.get(vr);if(this[_filter_control].get(vr).val()==''){stat_prefix='';statd.removeClass('ison')}else{stat_prefix=this.facet.distilled.get(vr).size+' of ';statd.addClass('ison')}statd.html(''+stat_prefix+this.distilled.get(vr).size)}},{key:'v',value:function v(vr,i){return this[_distilled].get(vr).has(i)}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){this._html(vr)}},{key:'wire',value:function wire(vr){if(!this.facet){this.facet=this.component.page.getComponent('facet').implementation}var data=this.component.page.getComponent('list').data.get(vr);this[_tags].set(vr,[]);var tgs=this[_tags].get(vr);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=data[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var d=_step2.value;if(vr=='country'){tgs.push({label:d['_id']+' '+d['name'],value:d['_id']})}else if(vr=='contrib'){tgs.push({label:d['title'],value:d['_id']})}else{tgs.push({label:d['value'],value:d['_id']})}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}this[_distilled].set(vr,new Set);this.distilled.set(vr,new Set);var cc=this.component.container.get(vr);var cf=cc.find('#fltw_'+vr);var flt=$('#flt_'+vr);this[_filter_control].set(vr,flt);var flt2=$('#flt2_'+vr);this[_filter_control2].set(vr,flt2);this[_box].set(vr,cf.find('#fbox_'+vr));this[_completions_dst].set(vr,cf.find('#autoc_'+vr));this._stats_dst.set(vr,cf.find('#stats_'+vr));this[_clear_filter_control].set(vr,cc.find('#clearf_'+vr));this[_filter_control].get(vr).autocomplete({appendTo:this[_completions_dst].get(vr),source:this[_tags].get(vr),response:this._response(vr),minLength:0});flt2.click(function(e){e.preventDefault();$(this).closest('div').find('.morec').click();flt[0].focus()});this[_wire_mode].set(vr,true);this._setClear(vr);this._setFilter(vr);this[_wire_mode].set(vr,false)}},{key:'work',value:function work(vr){var old_state=this.filter_state.has(vr)?this.filter_state.get(vr):'';var new_state=this.component.state.getState(this.state_var_pref+vr);this.changed=old_state!=new_state;if(this.changed){this.filter_state.set(vr,new_state);var clearfc=this[_clear_filter_control].get(vr);if(new_state==''){this[_box].get(vr).removeClass('ison');clearfc.hide()}else{this[_box].get(vr).addClass('ison');clearfc.show()}this[_filter_control2].get(vr).html(new_state)}}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],7:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.escapeHTML=escapeHTML;exports.deselectText=deselectText;exports.selectText=selectText;exports.toggleDetail=toggleDetail;exports.compact=compact;exports.from_str=from_str;exports.a_to_str=a_to_str;exports.to_str=to_str;exports.set_equal=set_equal;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var chr=new Map([['&','&amp;'],['<','&lt;'],['>','&gt;']]);function escapeHTML(text){return text.replace(/[&<>]/g,function(a){return chr.get(a)||a})};var _Request={parameter:function parameter(name){return this.parameters().get(name)},parameters:function parameters(){var result=new Map;var uri=window.location.search;if(uri.indexOf('?')===-1){return result}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=uri.slice(1).split('&')[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var paramval=_step.value;result.set.apply(result,_toConsumableArray(paramval.split('=')))}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return result}};var request_vars=exports.request_vars=_Request.parameters();var _localstorage=$.initNamespaceStorage('req');var localstorage_vars=exports.localstorage_vars=_localstorage.localStorage;function deselectText(){if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}};function selectText(containerid){deselectText();if(document.selection){var range=document.body.createTextRange();range.moveToElementText(document.getElementById(containerid));range.select()}else if(window.getSelection){var _range=document.createRange();_range.selectNode(document.getElementById(containerid));window.getSelection().addRange(_range)}};function toggleDetail(widget,detail,extra){var thedetail=detail==undefined?widget.closest('div').find('.detail'):detail;thedetail.toggle();if(extra!=undefined){extra(widget)}var thiscl=void 0,othercl=void 0;if(widget.hasClass('fa-chevron-right')){thiscl='fa-chevron-right';othercl='fa-chevron-down'}else{thiscl='fa-chevron-down';othercl='fa-chevron-right'}widget.removeClass(thiscl);widget.addClass(othercl)};function compact(cutoff,size,text){return text.length>cutoff?text.replace(/[^ -]+/g,function(x){return x.substr(0,size)}):text};function from_str(st){return st!==null&&st!=undefined&&st!=''?new Set(st.split(',')):new Set};function a_to_str(ar){return ar.join(',')};function to_str(set){return Array.from(set).join(',')};function set_equal(s1,s2){if(s1.size!=s2.size){return false}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=s1[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var e=_step2.value;if(!s2.has(e)){return false}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}return true}\n\n},{}],8:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component;this.open_items=new Map}_createClass(_class,[{key:'_html',value:function _html(vr,it){var iid=it['_id'];this.open_items.get(vr).add(iid);var row=this.component.up.implementation.getRow(vr,iid);var hidec=row.find('.hidec');var showc=row.find('.showc');var h='<tr iid=\"'+iid+'\"><td>&nbsp</td>';if(vr=='contrib'){var types=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=it['typeContribution'][Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var tp=_step.value;types.push('<a href=\"#\" tid=\"'+tp['_id']+'\">'+tp['value']+'</a>')}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}h+='\\n<td>\\n<b>Contact person:</b> '+it['contact_person_name']+'<br/>\\n<b>Country:</b> '+it['country'][0]['_id']+' = '+it['country'][0]['name']+'<br/>\\n<b>Types:</b> '+types.join(', ')+'<br/>\\n</td>\\n'}else if(vr=='country'){var in_dariah=it['inDARIAH']?'yes':'no';h+='\\n<td colspan=\"3\">\\n<b>Country code:</b> <span class=\"country_code\">'+it['_id']+'</span><br/>\\n<b>Country name:</b> <span class=\"country_name\">'+it['name']+'</span><br/>\\n<b>Member DARIAH?</b> <span class=\"in_dariah\">'+in_dariah+'</span><br/>\\n<b>Latitude, Longitude:</b> <span class=\"latlng\">'+it['latitude']+'</span>, <span class=\"latlng\">'+it['longitude']+'</span><br/>\\n</td>'}else if(vr=='type'||vr=='tadiraha'||vr=='tadiraho'||vr=='tadiraht'){h+='\\n<td>\\n<b>Value:</b> <span class=\"value\">'+it['value']+'</span><br/>\\n<td>'}h+='</tr>';row.after(h);hidec.hide();showc.show()}},{key:'_set_it',value:function _set_it(control,vr,state){var key=this.component.name+'_'+vr;var open_ids=g.from_str(this.component.state.getState(key));var rid=control.closest('tr').attr('rid');if(state){open_ids.add(rid)}else{open_ids.delete(rid)}this.component.state.setState(key,g.to_str(open_ids))}},{key:'display',value:function display(vr,iid,with_detail){if(this.open_items.get(vr).has(iid)==with_detail){return}var row=this.component.up.implementation.getRow(vr,iid);var hidec=row.find('.hidec');var showc=row.find('.showc');var detail=this.component.up.container.get(vr).find('tr[iid=\"'+iid+'\"]');if(with_detail){hidec.hide();showc.show();if(detail.length){detail.show()}}else{hidec.show();showc.hide();if(detail.length){detail.hide()}}if(with_detail){this.open_items.get(vr).add(iid)}else{this.open_items.get(vr).delete(iid)}}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){if(!this.open_items.has(vr)){this.open_items.set(vr,new Set)};var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.component.data.get(vr)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var it=_step2.value;this._html(vr,it)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}},{key:'wire',value:function wire(vr){var that=this;var cc=this.component.up.container.get(vr);cc.find('.hidec').click(function(e){e.preventDefault();that._set_it($(this),vr,true)});cc.find('.showc').click(function(e){e.preventDefault();that._set_it($(this),vr,false)})}},{key:'work',value:function work(vr){var open_ids=g.from_str(this.component.state.getState(this.component.name+'_'+vr));var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.component.up.implementation.row_status.get(vr)[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var iid=_step3$value[0];var shown=_step3$value[1];this.display(vr,iid,shown&&open_ids.has(iid))}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],9:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component;this.row_status=new Map}_createClass(_class,[{key:'_html',value:function _html(vr){this.row_status.set(vr,new Map);var h='';h+='<table id=\"table_'+vr+'\">';var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.component.data.get(vr)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var r=_step.value;var rid=r['_id'];this.row_status.get(vr).set(rid,true);var rowstart='<tr rid=\"'+rid+'\"><td><a class=\"showc fa fa-fw fa-list-ul\" href=\"#\" title=\"hide fields\"></a><a class=\"hidec fa fa-fw fa-minus\" href=\"#\" title=\"show fields\"></a></td>';var rowend='</tr>';if(vr=='contrib'){h+=rowstart+'<td>'+r['title']+'</td>'+rowend}else if(vr=='country'){var in_dariah=r['inDARIAH']?'in dariah':'';h+=rowstart+'<td class=\"country_code\">'+rid+'<td><td class=\"country_name\">'+r['name']+'<td><td class=\"in_dariah\">'+in_dariah+'</td>'+rowend}else if(vr=='type'){h+=rowstart+'<td class=\"value\">'+r['value']+'<td>'+rowend}else if(vr=='tadiraha'||vr=='tadiraho'||vr=='tadiraht'){h+=rowstart+'<td class=\"value\">'+r['value']+'<td>'+rowend}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}h+='</table>';this.component.container.get(vr).html(h)}},{key:'getRecordIds',value:function getRecordIds(vr){return this.row_status.get(vr).keys()}},{key:'getRow',value:function getRow(vr,rid){var destination=this.component.container.get(vr);return destination.find('tr[rid=\"'+rid+'\"]')}},{key:'select',value:function select(vr){var distilled=this.component.page.getComponent('facet').implementation.distilled.get(vr);var row_status=this.row_status.get(vr);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=row_status[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var rid=_step2$value[0];var shown=_step2$value[1];if(shown==distilled.has(rid)){continue}var row=this.component.container.get(vr).find('tr[rid=\"'+rid+'\"]');if(shown){row.hide()}else{row.show()}row_status.set(rid,!shown)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){this._html(vr)}},{key:'wire',value:function wire(vr){var showc=this.component.container.get(vr).find('.showc');showc.hide()}},{key:'work',value:function work(vr){}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],10:[function(require,module,exports){\n'use strict';var _page=require('./page');var _page2=_interopRequireDefault(_page);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}$(function(){new _page2.default().work()});\n\n},{\"./page\":12}],11:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _destination=Symbol();var _trash_control=Symbol();var _trash_control_para=Symbol();var _on_clear=Symbol();var _class=function(){function _class(destination,on_clear){var _this=this;_classCallCheck(this,_class);this[_destination]=$('#'+destination);this[_trash_control]=$('#trash_'+destination);this[_trash_control_para]=this[_trash_control].closest('p');this[_trash_control].click(function(e){e.preventDefault();_this.clear()});this._hide();this[_on_clear]=on_clear}_createClass(_class,[{key:'_hide',value:function _hide(){this[_destination].hide();this[_trash_control_para].hide()}},{key:'_show',value:function _show(){this[_destination].show();if(this[_destination].html()!=''){this[_trash_control_para].show()}}},{key:'clear',value:function clear(){this[_destination].html('');if(this[_on_clear]!=undefined){this[_on_clear]()}this._hide()}},{key:'msg',value:function msg(text,kind){if(kind==undefined){kind='info'}var message_text=this[_destination].html();this[_destination].html(message_text+'<p class=\"'+kind+'\">'+text+'</p>');this._show()}}]);return _class}();exports.default=_class;\n\n},{}],12:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);var _viewstate=require('./viewstate');var _viewstate2=_interopRequireDefault(_viewstate);var _share=require('./share');var _share2=_interopRequireDefault(_share);var _ctype=require('./ctype');var _ctype2=_interopRequireDefault(_ctype);var _tadiraho=require('./tadiraho');var _tadiraho2=_interopRequireDefault(_tadiraho);var _tadiraha=require('./tadiraha');var _tadiraha2=_interopRequireDefault(_tadiraha);var _tadiraht=require('./tadiraht');var _tadiraht2=_interopRequireDefault(_tadiraht);var _eumap=require('./eumap');var _eumap2=_interopRequireDefault(_eumap);var _filter=require('./filter');var _filter2=_interopRequireDefault(_filter);var _facet=require('./facet');var _facet2=_interopRequireDefault(_facet);var _list=require('./list');var _list2=_interopRequireDefault(_list);var _item=require('./item');var _item2=_interopRequireDefault(_item);var _control=require('./control');var _control2=_interopRequireDefault(_control);var _components=require('./components');var _components2=_interopRequireDefault(_components);var _skeleton=require('./skeleton');var _skeleton2=_interopRequireDefault(_skeleton);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _by_id=Symbol();var _class=function(_Skeleton){_inherits(_class,_Skeleton);function _class(){_classCallCheck(this,_class);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this));_this.name='page';_this.state=new _viewstate2.default(_this);var main_lists=_this.state.getValues('list');var contrib_list=new Set(['contrib']);var empty_list=new Set(['']);_this._component_specs=new Map([['share',{dest:'body',variants:empty_list,fetch_url:null,varpfx:null,specific:_share2.default}],['control',{dest:'left',variants:main_lists,fetch_url:null,varpfx:null,specific:_control2.default}],['list',{dest:'middle',variants:main_lists,fetch_url:'list',varpfx:null,specific:_list2.default}],['item',{dest:'list',variants:main_lists,fetch_url:'item',varpfx:null,specific:_item2.default}],['facet',{dest:'control',variants:main_lists,fetch_url:null,varpfx:null,specific:_facet2.default}],['filter',{dest:'facet',variants:main_lists,fetch_url:null,varpfx:'flt',specific:_filter2.default}],['eumap',{dest:'facet',variants:contrib_list,fetch_url:'country',varpfx:'rel',specific:_eumap2.default}],['ctype',{dest:'facet',variants:contrib_list,fetch_url:'type',varpfx:'rel',specific:_ctype2.default}],['tadiraha',{dest:'facet',variants:contrib_list,fetch_url:'tadiraha',varpfx:'rel',specific:_tadiraha2.default}],['tadiraho',{dest:'facet',variants:contrib_list,fetch_url:'tadiraho',varpfx:'rel',specific:_tadiraho2.default}],['tadiraht',{dest:'facet',variants:contrib_list,fetch_url:'tadiraht',varpfx:'rel',specific:_tadiraht2.default}]]),_this[_by_id]=new Set(['item']),_this.ignore=new Set([]),_this.components=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this._component_specs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2);var name=_step$value[0];var spec=_step$value[1];if(_this.ignore.has(name)){continue}spec.by_id=_this[_by_id].has(name);var component=new _components2.default(name,spec,_this);component.up=null;component.children=new Map;component.item_comp=null;_this.components.set(name,component)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=_this.components[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var name=_step2$value[0];var child_component=_step2$value[1];var dest_name=_this._component_specs.get(name).dest;if(_this.components.has(dest_name)){var parent_component=_this.components.get(dest_name);child_component.up=parent_component;parent_component.children.set(name,child_component);if(_this[_by_id].has(name)){parent_component.item_comp=name}}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}_this.resolveTiming();_this._setHeight(80);History.Adapter.bind(window,'statechange',_this.state.work());return _this}_createClass(_class,[{key:'_setHeight',value:function _setHeight(subtract){var wh=window.innerHeight-subtract+'px';var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=new Set(['middle','left','right'])[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var w=_step3.value;$('#'+w).css('height',wh)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}},{key:'getComponent',value:function getComponent(name){return this.components.get(name)}},{key:'getContainer',value:function getContainer(name,variants){if(this.components.has(name)){return this.components.get(name).container}else{var container=new Map;var addto=name=='body'?$('body'):$('#'+name);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=variants[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var vr=_step4.value;container.set(vr,addto)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}return container}}},{key:'getBefore',value:function getBefore(name,stage){var prev_nodes=[];var next_node=name+'-'+stage;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=(this._timing.get(next_node)||new Set)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var prev_node=_step5.value;prev_nodes.push(prev_node.split('-'))}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}return prev_nodes}},{key:'work',value:function work(){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=this._tasks[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var task=_step6.value;var _task$split=task.split('-');var _task$split2=_slicedToArray(_task$split,2);var name=_task$split2[0];var stage=_task$split2[1];var component=this.getComponent(name);var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=component.variants[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var vr=_step7.value;component[stage](vr)}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}}}]);return _class}(_skeleton2.default);exports.default=_class;\n\n},{\"./components\":1,\"./control\":2,\"./ctype\":3,\"./eumap\":4,\"./facet\":5,\"./filter\":6,\"./generic.js\":7,\"./item\":8,\"./list\":9,\"./share\":14,\"./skeleton\":15,\"./tadiraha\":16,\"./tadiraho\":17,\"./tadiraht\":18,\"./viewstate\":19}],13:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _list=Symbol();var _list2=Symbol();var _all_values_control=Symbol();var _cols=Symbol();var _cutoff=Symbol();var _shortsize=Symbol();var _class=function(){function _class(component,rtype,cols,cutoff,shortsize){_classCallCheck(this,_class);this.component=component;this.distilled=new Map;this[_list]=new Map;this[_list2]=new Map;this.related_state=new Map;this.changed=new Map;this[_all_values_control]=new Map;this.statistics=new Map;this.related_values_list=new Map;this.related_values_index=new Map;this.related_values_all=new Map;this.no_values={value:'-',name:'-none'};this.typ=rtype;this.state_var_pref=this.component.specs.varpfx+'_'+this.typ+'_';this[_cols]=cols||2;this[_cutoff]=cutoff||14;this[_shortsize]=shortsize||6}_createClass(_class,[{key:'_html',value:function _html(vr){var type_sg=this.component.state.showState('list',this.typ,'sg');var type_pl=this.component.state.showState('list',this.typ,'pl');var h='';h+=this._preHtml(vr);h+='\\n<div>\\n    <p class=\"dctrl\"><span fct=\"'+this.component.name+'-'+vr+'\"></span> By '+type_sg+'</p>\\n    <p class=\"all\"><span rv=\"_all\" class=\"stats\"></span> <a rv=\"_all\" href=\"#\" class=\"facet_single_all\">all '+type_pl+'</a></p>\\n    <table class=\"value_list\" id=\"list-'+this.typ+'-vals_'+vr+'\">\\n        <tr>\\n';var ar=this.related_values_list.get(vr);var ai=this.related_values_index.get(vr);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=ar.entries()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2);var i=_step$value[0];var related_value=_step$value[1];if(i%this[_cols]==0&&i>0&&i<ar.length){h+='</tr><tr>'}var raw_value=ai.get(related_value);h+='\\n            <td><span rv=\"'+related_value+'\" class=\"stats\"></span></td>\\n            <td><a rv=\"'+related_value+'\" href=\"#\" class=\"facet_single\">'+g.escapeHTML(raw_value)+'</a></td>\\n            '}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}h+='\\n        </tr>\\n    </table>\\n    <p class=\"value_list2\" id=\"list2-'+this.typ+'-vals_'+vr+'\">\\n';var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=ar.entries()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var i=_step2$value[0];var related_value=_step2$value[1];var _raw_value=this.related_values_index.get(vr).get(related_value);var compact_value=g.escapeHTML(g.compact(this[_cutoff],this[_shortsize],_raw_value));h+='<a href=\"#\" rv=\"'+related_value+'\" class=\"passive_small\" title=\"'+g.escapeHTML(_raw_value)+'\">'+compact_value+'</a> '}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}h+='\\n    </p>\\n</div>';this.component.container.get(vr).html(h)}},{key:'_dressup',value:function _dressup(vr){var cc=this.component.container.get(vr);this[_list].set(vr,cc.find('#list-'+this.typ+'-vals_'+vr));this[_list2].set(vr,cc.find('#list2-'+this.typ+'-vals_'+vr));var that=this;this[_list].get(vr).find('.facet_single').click(function(e){e.preventDefault();var related_value=$(this).attr('rv');var selected=g.from_str(that.component.state.getState(that.state_var_pref+vr));if(selected.has(related_value)){selected.delete(related_value)}else{selected.add(related_value)}that.component.state.setState(that.state_var_pref+vr,g.to_str(selected));cc.find('.last_handled').removeClass('last_handled');$(this).addClass('last_handled')});this[_list2].get(vr).find('.passive_small').click(function(e){e.preventDefault();var related_value=$(this).attr('rv');var selected=g.from_str(that.component.state.getState(that.state_var_pref+vr));if(selected.has(related_value)){selected.delete(related_value)}else{selected.add(related_value)}that.component.state.setState(that.state_var_pref+vr,g.to_str(selected));$(this).closest('div').find('.morec').click();var last_handled=that[_list].get(vr).find('a[rv=\"'+related_value+'\"]');cc.find('.last_handled').removeClass('last_handled');last_handled.addClass('last_handled');$('#left')[0].scrollTop=50;last_handled[0].scrollIntoView({behavior:'smooth',alignToTop:'true'})});this[_all_values_control].set(vr,this.component.container.get(vr).find('[rv=\"_all\"]'));this[_all_values_control].get(vr).click(function(e){e.preventDefault();var ison=$(this).hasClass('ison');if(ison){that.component.state.setState(that.state_var_pref+vr,'')}else{that.component.state.setState(that.state_var_pref+vr,g.to_str(that.related_values_all.get(vr)))}})}},{key:'_setFacet',value:function _setFacet(vr){var all_selected=true;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.related_values_index.get(vr).keys()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var related_value=_step3.value;var facet_cell=this[_list].get(vr).find('[rv=\"'+related_value+'\"]');var facet_cell2=this[_list2].get(vr).find('[rv=\"'+related_value+'\"]');if(this.related_state.get(vr).has(related_value)){facet_cell.addClass('ison');facet_cell2.addClass('ison')}else{facet_cell.removeClass('ison');facet_cell2.removeClass('ison');all_selected=false}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}if(all_selected){this[_all_values_control].get(vr).addClass('ison')}else{this[_all_values_control].get(vr).removeClass('ison')}}},{key:'stats',value:function stats(vr){this.statistics.set(vr,new Map);var rvs=this.statistics.get(vr);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this.related_values_index.get(vr).keys()[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var related_value=_step4.value;rvs.set(related_value,0)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var related_info=this.component.related_info.get(vr);var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=this.distilled.get(vr)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var i=_step5.value;var related_values=related_info.has(i)?related_info.get(i):new Set;if(related_values.size){var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=related_values[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var _related_value=_step7.value;rvs.set(_related_value,rvs.get(_related_value)+1)}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}else{var nv=this.no_values.value;rvs.set(nv,rvs.get(nv)+1)}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=rvs[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _step6$value=_slicedToArray(_step6.value,2);var _related_value2=_step6$value[0];var stat=_step6$value[1];this.component.container.get(vr).find('span[rv=\"'+_related_value2+'\"].stats').html(stat)}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}this.component.container.get(vr).find('span[rv=\"_all\"].stats').html(this.distilled.get(vr).size);this._myStats(vr)}},{key:'v',value:function v(vr,i){var related_info=this.component.related_info.get(vr);var related_state=this.related_state.get(vr);var related_values=related_info.has(i)?related_info.get(i):new Set;if(related_values.size){var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=related_values[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var related_value=_step8.value;if(related_state.has(related_value)){return true}}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}}else{if(related_state.has(this.no_values.value)){return true}}return false}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){this.related_values_list.set(vr,[]);this.related_values_index.set(vr,new Map);this.related_values_all.set(vr,new Set);this._plainWeld(vr);this._myWeld(vr);this.related_values_list.get(vr).push(this.no_values.value);this.related_values_index.get(vr).set(this.no_values.value,this.no_values.name);this.related_values_all.get(vr).add(this.no_values.value);this.related_state.set(vr,new Set);this.changed.set(vr,true);this._html(vr)}},{key:'wire',value:function wire(vr){this._myDressup(vr);this._dressup(vr)}},{key:'work',value:function work(vr){var old_state=this.related_state.get(vr);var new_state=g.from_str(this.component.state.getState(this.state_var_pref+vr));this.changed.set(vr,!g.set_equal(old_state,new_state));if(this.changed.get(vr)){this.related_state.set(vr,new_state);this._mySetFacet(vr);this._setFacet(vr)}}},{key:'_plainWeld',value:function _plainWeld(vr){var _this=this;var related_values=this.component.related_values.get(vr);var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=related_values[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var d=_step9.value;var i=d['_id'];var related_value=d['value'];this.related_values_list.get(vr).push(i);this.related_values_index.get(vr).set(i,related_value);this.related_values_all.get(vr).add(i)}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return()}}finally{if(_didIteratorError9){throw _iteratorError9}}}this.related_values_list.get(vr).sort(function(a,b){return _this.related_values_index.get(a)<_this.related_values_index.get(b)?-1:_this.related_values_index.get(a)>_this.related_values_index.get(b)?1:0})}},{key:'_myWeld',value:function _myWeld(vr){}},{key:'_preHtml',value:function _preHtml(vr){return''}},{key:'_myDressup',value:function _myDressup(vr){}},{key:'_mySetFacet',value:function _mySetFacet(vr){}},{key:'_myStats',value:function _myStats(vr){}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],14:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component}_createClass(_class,[{key:'show',value:function show(vr){return true}},{key:'weld',value:function weld(vr){var h='\\n<p id=\"citeh\">Cite</p>\\n<table align=\"center\">\\n    <tr>\\n        <td class=\"clip_pv clr\">\\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_md\" title=\"link to page content and appearance (markdown)\" class=\"ctrl fa fa-level-down fa-lg fa-fw\"></a>\\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_ht\" title=\"link to page content and appearance (html)\" class=\"ctrl fa fa-external-link-square fa-lg fa-fw\"></a>\\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_htc\" title=\"link to page content (html)\" class=\"ctrl fa fa-external-link fa-lg fa-fw\"></a>\\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_cn\" title=\"copy page content\" class=\"ctrl fa fa-file-text-o fa-lg fa-fw\"></a>\\n        </td>\\n    </tr>\\n    <tr>\\n        <th class=\"clip_pv\" width=\"60px\">page view</th>\\n    </tr>\\n    <tr class=\"citexpl\">\\n        <td class=\"clip_pv\"><span id=\"xc_pv\" class=\"ctrl fa fa-chevron-right fa-fw\"></span><span id=\"x_pv\" class=\"detail\">share link to this page with or without view settings.</span></td>\\n    </tr>\\n</table>\\n<p id=\"cdiagpub\"></p>\\n<p id=\"cdiagsts\"></p>\\n';this.component.container.get(vr).html(h)}},{key:'wire',value:function wire(vr){var that=this;var cc=this.component.container.get(vr);var slink=$('#self_link');slink.hide();cc.addClass('socialdrawer');cc.find('.detail').hide();cc.find('#clip_pv_md,#clip_pv_ht,#clip_pv_htc,#clip_pv_nl').click(function(e){e.preventDefault();window.prompt('Press <Cmd-C> and then <Enter> to copy link on clipboard',$(this).attr('lnk'))});cc.find('#clip_pv_cn').click(function(e){e.preventDefault();var containerid='middle';var app_url_raw=app_url_cite+that.component.state.getVars(true);slink.show();slink.attr('href',app_url_raw);g.selectText(containerid)});cc.find('#xc_pv').click(function(e){e.preventDefault();g.toggleDetail($(this),$('#x_pv'))});cc.click(function(e){e.preventDefault();var app_url_raw=app_url_cite+that.component.state.getVars(true);var app_url_rawc=app_url_cite+that.component.state.getVars(false);$('#citeh').hide();$('#cdiagpub').html('');$('#cdiagsts').html('');$('.clip_pv.clr,#cdiagpub,#cdiagsts').removeClass('error warning good special');var pvtitle=g.escapeHTML($('title').text());$('#clip_pv_md').attr('lnk','[${pvtitle}](${app_url_raw})');$('#clip_pv_ht').attr('lnk',app_url_raw);$('#clip_pv_htc').attr('lnk',app_url_rawc);$('#clip_pv_cn').attr('lnk',app_url_raw);$('#clip_pv_cn').attr('tit',pvtitle);$(this).animate({height:'100px',width:'200px',opacity:0.95},300)});cc.mouseleave(function(){slink.hide();$('#citeh').show();cc.animate({height:'20px',width:'40px',opacity:0.7},300);return false})}},{key:'work',value:function work(vr){}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],15:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _class=function(){function _class(){_classCallCheck(this,_class);this.stages=new Map([['weld',true],['wire',true],['work',false]]);this.stages_prev=new Map([['wire','weld'],['work','wire']]);this.before=new Map([['weld',new Map([['item',new Set(['list'])],['facet',new Set(['control','list'])],['filter',new Set(['facet'])],['eumap',new Set(['facet','filter'])],['ctype',new Set(['facet','eumap'])],['tadiraha',new Set(['facet','ctype'])],['tadiraho',new Set(['facet','tadiraha'])],['tadiraht',new Set(['facet','tadiraho'])],['share',new Set(['facet','list'])]])],['wire',new Map([['item',new Set(['list'])],['facet',new Set(['filter','eumap','ctype','tadiraha','tadiraho','tadiraht'])],['filter',new Set(['list'])],['eumap',new Set(['list'])],['ctype',new Set(['list'])],['tadiraha',new Set(['list'])],['tadiraho',new Set(['list'])],['tadiraht',new Set(['list'])]])],['work',new Map([['facet',new Set(['list','filter','eumap','ctype','tadiraha','tadiraho','tadiraht'])],['item',new Set(['facet'])]])]])}_createClass(_class,[{key:'resolveTiming',value:function resolveTiming(){var timing_nodes=[];var timing_edges=new Map;var timing_edges_inv=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.components.keys()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var name=_step.value;var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=this.stages.keys()[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var stage=_step12.value;timing_nodes.push(name+'-'+stage)}}catch(err){_didIteratorError12=true;_iteratorError12=err}finally{try{if(!_iteratorNormalCompletion12&&_iterator12.return){_iterator12.return()}}finally{if(_didIteratorError12){throw _iteratorError12}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}function addEdge(prev_node,next_node){if(!timing_edges.has(prev_node)){timing_edges.set(prev_node,new Set)}if(!timing_edges_inv.has(next_node)){timing_edges_inv.set(next_node,new Set)}timing_edges.get(prev_node).add(next_node);timing_edges_inv.get(next_node).add(prev_node)}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.stages_prev[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var next_stage=_step2$value[0];var prev_stage=_step2$value[1];var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=this.components.keys()[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var _name=_step13.value;addEdge(_name+'-'+prev_stage,_name+'-'+next_stage)}}catch(err){_didIteratorError13=true;_iteratorError13=err}finally{try{if(!_iteratorNormalCompletion13&&_iterator13.return){_iterator13.return()}}finally{if(_didIteratorError13){throw _iteratorError13}}}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.before[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var _stage=_step3$value[0];var nexts=_step3$value[1];var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=nexts[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var _step14$value=_slicedToArray(_step14.value,2);var next_name=_step14$value[0];var prevs=_step14$value[1];if(this.ignore.has(next_name)){continue}var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=prevs.keys()[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var prev_name=_step15.value;if(this.ignore.has(prev_name)){continue}addEdge(prev_name+'-'+_stage,next_name+'-'+_stage)}}catch(err){_didIteratorError15=true;_iteratorError15=err}finally{try{if(!_iteratorNormalCompletion15&&_iterator15.return){_iterator15.return()}}finally{if(_didIteratorError15){throw _iteratorError15}}}}}catch(err){_didIteratorError14=true;_iteratorError14=err}finally{try{if(!_iteratorNormalCompletion14&&_iterator14.return){_iterator14.return()}}finally{if(_didIteratorError14){throw _iteratorError14}}}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}var n=0;var subset=[];var visited=new Set;while(n<=timing_nodes.length){subset.push(new Set);if(n==0){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=timing_nodes[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var node=_step4.value;if(!timing_edges_inv.has(node)){subset[n].add(node)}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}else{var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=visited[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var prev_node=_step5.value;if(timing_edges.has(prev_node)){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=timing_edges.get(prev_node)[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var next_node=_step6.value;if(!visited.has(next_node)){var good=true;var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=timing_edges_inv.get(next_node)[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var other_prev_node=_step7.value;if(!visited.has(other_prev_node)){good=false;break}}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}if(good){subset[n].add(next_node)}}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}}if(subset[n].size==0){break}var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=subset[n][Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var _node=_step8.value;visited.add(_node)}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}n++}this._tasks=[];this._timing=new Map;if(visited.size!=timing_nodes.length){var cycle=[];var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=timing_nodes[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var _node2=_step9.value;if(!visited.has(_node2)){cycle.push(_node2)}}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return()}}finally{if(_didIteratorError9){throw _iteratorError9}}}console.log('Circular timing constraints detected',cycle)}else{var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=subset[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var nodes=_step10.value;var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=nodes[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var _node3=_step11.value;this._tasks.push(_node3)}}catch(err){_didIteratorError11=true;_iteratorError11=err}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return()}}finally{if(_didIteratorError11){throw _iteratorError11}}}}}catch(err){_didIteratorError10=true;_iteratorError10=err}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return()}}finally{if(_didIteratorError10){throw _iteratorError10}}}this._timing=timing_edges_inv;console.log('Timing resolved',this._tasks)}}}]);return _class}();exports.default=_class;\n\n},{}],16:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'tadiraha'))}return _class}(_relative2.default);exports.default=_class;\n\n},{\"./relative\":13}],17:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'tadiraho'))}return _class}(_relative2.default);exports.default=_class;\n\n},{\"./relative\":13}],18:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'tadiraht',1,30))}return _class}(_relative2.default);exports.default=_class;\n\n},{\"./relative\":13}],19:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);var _message=require('./message');var _message2=_interopRequireDefault(_message);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _spec_info=Symbol();var _data=Symbol();var _specs=Symbol();var _msg=Symbol();var _class=function(){function _class(page){_classCallCheck(this,_class);this[_spec_info]={vars:new Set(['list','flt_contrib','flt_country','flt_type','flt_tadiraha','flt_tadiraho','flt_tadiraht','rel_country_contrib','rel_type_contrib','rel_tadiraha_contrib','rel_tadiraho_contrib','rel_tadiraht_contrib','item_contrib','item_country','sort']),vals:new Map([['list',new Set(['contrib','country','type','tadiraha','tadiraho','tadiraht'])],['sort',new Map([['v',true],['x',false]])]]),default_value:new Map([['list','contrib'],['sort',true]]),typ:new Map([['sort','boolean']]),url:new Set(['list','item_contrib','item_country']),showas:new Map([['list',new Map([['contrib',{sg:'contribution',pl:'contributions'}],['country',{sg:'country',pl:'countries'}],['type',{sg:'type',pl:'types'}],['tadiraha',{sg:'tadirah activity',pl:'tadirah activities'}],['tadiraho',{sg:'tadirah object',pl:'tadirah objects'}],['tadiraht',{sg:'tadirah technique',pl:'tadirah techniques'}]])]])};this[_data]={};this[_specs]=new Map;this.page=page;this[_msg]=new _message2.default('msg_page');this._compile_specs();this._getInitstate();this._addHistory()}_createClass(_class,[{key:'_compile_specs',value:function _compile_specs(){var info=this[_spec_info];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=info.vars[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var v=_step.value;var spec={};spec.vals=info.vals.get(v)||null;spec.default_value=info.default_value.get(v)||'';spec.typ=info.typ.get(v)||'string';spec.url=info.url.has(v);spec.showas=info.showas.get(v)||{};this[_specs].set(v,spec)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:'_validate',value:function _validate(v,val){var newval=void 0,message=void 0;if(this[_specs].has(v)){var spec=this[_specs].get(v);if(spec.typ=='string'){if(spec.vals){if(spec.vals.has(val)){newval=val}else{newval=spec.default_value;this[_msg].msg('illegal string value for '+v+': \"'+val+'\" is replaced by \"'+spec.default_value+'\"','warning')}}else{newval=val}}else if(spec.typ=='integer'){if(/^(\\-|\\+)?[0-9]+$/.test(val)){newval=Number(val)}else{newval=spec.default_value;this[_msg].msg('not a number value for '+v+': \"'+val+'\" is replaced by \"'+spec.default_value+'\"','warning')}if(newval<spec.limits.min){this[_msg].msg('number to small for '+v+': \"'+newval+'\" is replaced by \"'+spec.limits.min+'\"','warning')}if(newval>spec.limits.max){this[_msg].msg('number to big for '+v+': \"'+newval+'\" is replaced by \"'+spec.limits.max+'\"','warning')}}else if(spec.typ=='boolean'){if(spec.vals.has(val)){newval=spec.vals.get(val)}else{newval=spec.default_value;this[_msg].msg('illegal boolean value for '+v+': \"'+val+'\" is replaced by \"'+spec.default_value+'\"','warning')}}}else{newval=null;this[_msg].msg('unknown parameter: '+v+'='+val,'warning')}return newval}},{key:'getVars',value:function getVars(comprehensive){var vars=[];for(var v in this[_data]){var val=this[_data][v];var spec=this[_specs].get(v);if(comprehensive||spec.url){if(spec.typ=='string'||spec.typ=='integer'){vars.push(v+'='+val)}else if(spec.typ=='boolean'){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=spec.vals[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var valid_val=_step2$value[0];var trans_val=_step2$value[1];if(trans_val==val){vars.push(v+'='+valid_val)}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}}return vars.join('&')}},{key:'_getInitstate',value:function _getInitstate(){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=g.request_vars[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var v=_step3$value[0];var val=_step3$value[1];if(!this[_specs].has(v)){this[_msg].msg('unknown parameter: '+v+'='+val,'warning')}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this[_specs][Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2);var v=_step4$value[0];var spec=_step4$value[1];var val=null;if(g.request_vars.has(v)){var raw_val=g.request_vars.get(v);val=this._validate(v,raw_val);g.localstorage_vars.set(v,val)}else if(g.localstorage_vars.isSet(v)){val=g.localstorage_vars.get(v)}else{val=spec.default_value;g.localstorage_vars.set(v,val)}this[_data][v]=val}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}},{key:'_addHistory',value:function _addHistory(title,view_url){var tit='DARIAH contribution tool';var this_url=app_url+'?'+this.getVars(false);History.pushState(this[_data],tit,this_url)}},{key:'setState',value:function setState(v,val){this[_data][v]=val;g.localstorage_vars.set(v,val);this._addHistory()}},{key:'getState',value:function getState(v){return this[_data][v]}},{key:'getValues',value:function getValues(v){return this[_specs].get(v).vals}},{key:'showState',value:function showState(v,val,mode){var result=val;var md=mode==undefined?'sg':mode;var showas=this[_specs].get(v).showas;if(showas.has(val)){result=showas.get(val)[mode]}return result}},{key:'work',value:function work(){return function(){var state=History.getState();if(state&&state.data){this[_data]=state.data;this.page.work()}}.bind(this)}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7,\"./message\":11}]},{},[10])\n\n","/* COMPONENTS \n * The Page function specifies and builds a list of components\n * Every component on the page corresponds to a function (with a prototype)\n * This function is stored in a generic Component function in a field called specific.\n * Every component has a list of subcomponents. For example, the 'list' component has a subcomponent 'contrib'\n * for the list of contributions, and a subcomponent 'country' for the list of countries.\n * The generic functions of a component take care of:\n * - generating HTML container divs for the subcomponents under specified destination elements if they does not already exist\n * - showing and hiding the subcomponents, and in general, work the current state data to the subcomponents \n * - fetching the subcomponent's data from the server, if needed\n * This *specific* functionality of the components are defined in separate files.\n * Of this specific functionality, the following will be called from the generic component function:\n * - show(vr): inspect the current state and determine whether the subcomponent should be shown or hidden\n * - wire(vr): after the data has been fetched, wrap the data into the desired HTML content of the subcomponent\n *   and add the wiring (click events, change events)\n * In turn, the specific functions can access their associated generic components by this.component\n */\n\n/* GENERIC COMPONENT\n * Here is the generic functionality of each component\n */\n\nimport * as g from './generic.js';\nimport Msg from './message';\n\n/* private attributes as symbols */\nconst _stage = Symbol();\nconst _msg = Symbol();\nconst _ids_fetched = Symbol();\n\nexport default class {\n    constructor(name, specs, page) {\n        this.name = name;\n        this.page = page;\n        this.specs = specs;\n        this.variants = specs.variants;\n        this[_stage] = new Map();\n        for (const vr of this.variants) {\n            this[_stage].set(vr, new Map());\n            for (const st of this.page.stages.keys()) {\n                this[_stage].get(vr).set(st, true);\n            }\n        }\n        this[_msg] = new Map();\n        this[_ids_fetched] = new Map();\n        this.container = new Map();\n        this.dst = new Map();\n        this.state = this.page.state;\n        this.data = new Map();\n        this.related_info = new Map();\n        this.related_values = new Map();\n        this.implementation = new specs.specific(this);\n    }\n    /* need, deed, ensure are wrappers around the promise mechanism.\n     * The stage is a stage in processing the component, such as fetch, wire, work.\n     * There should be a method method which does the work and which is expected to return a promise.\n     * If it does not, we detect it, and yield a promise that is resolved with the original return value.\n     * ensure takes care that the function of an action is promised to be execute once, by registering it\n     * as a promise for that stage.\n     * If there is already a fulfilled or pending promise for that action at that stage, no new promise will be made.\n     * Ensure returns a function with no arguments. If it is called, the promise will be made.\n     * So the result of ensure can be put inside the .then() of an other promise.\n     * Now is a function that calls a function and returns the result as promise.\n     */\n    need(vr, stage) { // check whether there is a promise and whether it has been fulfilled\n        const promise = this[_stage].get(vr).get(stage)\n        return !promise.state || (promise.state() == 'rejected');\n    }\n    _deed(vr, stage, method) { // register a promise to perform the method associated with stage by entering it in the book keeping of stages\n            /* we want to pass a method call to a .then() later on.\n             * If we pass it straight, like this.method, .then() will call this function and supplies its own promise object as the this.\n             * That is not our purpose: we want to call the method with the current component object as the this.\n             * Hence we use bind() in order to supply the right this.\n             * Whoever calls this new function methodCall, will perform a true method call of method method on object that.\n             * This is crucial, otherwise all the careful time logic gets mangled, because the promises are stored in the component object.\n             */\n        const sdb = this.name == 'item' && stage == 'weld';\n\n        const methodCall = this[method].bind(this, vr);\n        const timing = this.page.getBefore(this.name, stage);\n        const promises = [];\n        for (const [prev_name, prev_stage] of timing) {\n            const prev_component = this.page.getComponent(prev_name);\n            if (prev_component.hasVariant(vr)) {\n                promises.push(prev_component[_stage].get(vr).get(prev_stage));\n            }\n        }\n        this[_stage].get(vr).set(stage, $.when.apply($, promises).then(methodCall));\n    }\n    ensure(vr, stage, method) {\n        /* function to promise that method function will be executed once and once only or multiple times,\n         * but only if the before actions have been completed\n         */\n        if (this.page.stages.has(stage)) {\n            /* if the component works per id, the once setting of the stage is ignored\n             * because we have to look whether we should execute that stage for new identifiers\n             */\n            const once = this.page.stages.get(stage) && !this.specs.by_id;\n            if (!once || this.need(vr, stage)) {\n                this._deed(vr, stage, method);\n            }\n        }\n    }\n    /* here are the implementations of the functions that are to be wrapped as promises\n     * They can focus on the work, may or may not yield a promise\n     */    \n    hasVariant(vr) {\n        return this.variants.has(vr);\n    }\n    _visibility(vr, on) {\n        if (this.hasVariant(vr)) {\n            if (this.container.has(vr)) {\n                const widget = this.container.get(vr);\n                if (on) {\n                    widget.show();\n                }\n                else {\n                    widget.hide();\n                }\n            }\n        }\n    }\n    _fetch(vr, ids_to_fetch) { // get the material by AJAX if needed\n        let fetch_url = url_tpl.replace(/_c_/, 'data').replace(/_f_/, `${this.specs.fetch_url}_${vr}`)+'.json';\n        this[_msg].get(vr).msg('fetching data ...');\n        const postFetch = this._postFetch.bind(this, vr);\n        if (!(ids_to_fetch == undefined)) {\n            fetch_url += `?ids=${Array.from(ids_to_fetch).join(',')}`;\n        }\n        return $.ajax({\n            type: 'POST',\n            url: fetch_url,\n            contentType: 'application/json; charset=utf-8',\n            dataType: 'json',\n        }).then(json => {\n            postFetch(json, ids_to_fetch);\n        });\n    }\n    _postFetch(vr, json, ids_to_fetch) { // receive material after AJAX call\n        const sdb = this.name == 'item';\n        this[_msg].get(vr).clear();\n        for (const m of json.msgs) {\n            this[_msg].get(vr).msg(m);\n        }\n        if (json.good) {\n            if ('data' in json) {\n                this.data.set(vr, json.data);\n            }\n            if ('relinfo' in json) {\n                const r = new Map();\n                for (const x of json.relinfo) {\n                    r.set(x[0], new Set(x[1]))\n                }\n                this.related_info.set(vr, r);\n            }\n            if ('relvals' in json) {\n                this.related_values.set(vr, json.relvals);\n            }\n            if (this.specs.by_id) {\n                for (const i of ids_to_fetch) {\n                    this[_ids_fetched].get(vr).add(i);\n                }\n            }\n        }\n        this.implementation.weld(vr);\n    }\n    _weld(vr) {\n        this.dst = this.page.getContainer(this.specs.dest, this.variants);\n        if (!(this.specs.by_id)) {\n            this.container.set(vr, $(`#${this.name}_${vr}`));\n            if (this.container.get(vr).length == 0) {\n                const destination = this.dst.get(vr);\n                destination.append(`<div id=\"msg_${this.name}_${vr}\"></div>`);\n                destination.append(`<div id=\"${this.name}_${vr}\" class=\"component\"></div>`);\n                this.container.set(vr, $(`#${this.name}_${vr}`));\n            }\n            this[_msg].set(vr, new Msg(`msg_${this.name}_${vr}`));\n        }\n        else {\n            if (!this[_msg].has(vr)) {\n                const destination = this.dst.get(vr);\n                destination.prepend(`<div id=\"msg_${this.name}_${vr}\"></div>`);\n                this[_msg].set(vr, new Msg(`msg_${this.name}_${vr}`));\n            }\n            if (!this[_ids_fetched].has(vr)) {\n                this[_ids_fetched].set(vr, new Set());\n            }\n        }\n        if (this.specs.fetch_url != null) {\n            if (this.specs.by_id) {\n                const ids_to_fetch = new Set();\n                const ids_asked_for = g.from_str(this.state.getState(`${this.specs.fetch_url}_${vr}`));\n                if (!this[_ids_fetched].has(vr)) {\n                    this[_ids_fetched].set(vr, new Set());\n                }\n                this.data.set(vr, []);\n                this.related_info.set(vr, new Map());\n                this.related_values.set(vr, new Map());\n                for (const i of ids_asked_for) {\n                    if (!this[_ids_fetched].get(vr).has(i)) {\n                        ids_to_fetch.add(i);\n                    }\n                }\n                if (ids_to_fetch.size != 0) {\n                    return this._fetch(vr, ids_to_fetch);\n                }\n                else {\n                    this.implementation.weld(vr);\n                }\n            }\n            else {\n                return this._fetch(vr);\n            }\n        }\n        else {\n            this.implementation.weld(vr);\n        }\n    }\n    _wire(vr) {\n        this.implementation.wire(vr); // perform wire actions that are specific to this component\n    }\n    _work(vr) {\n        this._visibility(vr, true);\n        this.implementation.work(vr); // perform work actions that are specific to this component\n    }\n    weld(vr) {\n        if (this.hasVariant(vr) && this.implementation.show(vr)) {\n            this.ensure(vr, 'weld', '_weld');\n        }\n    }\n    wire(vr) {\n        if (this.hasVariant(vr) && this.implementation.show(vr)) {\n            this.ensure(vr, 'wire', '_wire');\n        }\n    }\n    work(vr) { // work (changed) state to current material\n        if (this.hasVariant(vr) && this.implementation.show(vr)) { // show/hide depending on the specific condition\n            this.ensure(vr, 'work', '_work');\n        }\n        else {\n            this._visibility(vr, false);\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: Control\n * This manages the controls that correspond to lists of records to be displayed in the middle column\n * Clicking on a control shows the corresponding list and hides all others.\n */\n\n/* private attributes as symbols */\nconst _widget = Symbol();\nconst _control = Symbol();\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n        this[_widget] = new Map();\n        this[_control] = new Map();\n    }\n    _html(vr) {\n        this.component.container.get(vr).html(`<a class=\"control_title\" href=\"#\">${this.component.state.showState('list', vr, 'sg')}</a> `);\n    }\n    _dressup(vr) {\n        this[_control].get(vr).click(e => {e.preventDefault();\n            this.component.state.setState('list', vr);\n        })\n    }\n    _isActive(vr) {\n        return this.component.state.getState('list') == vr;\n    }\n    show(vr) {\n        return true;\n    }\n    weld(vr) {\n        this._html(vr);\n        this[_widget].set(vr,  this.component.container.get(vr));\n        this[_widget].get(vr).addClass('control_big');\n        this[_control].set(vr,  this.component.container.get(vr).find('a'));\n    }\n    wire(vr) {\n        this._dressup(vr);\n    }\n    work(vr) {\n        if (this._isActive(vr)) {\n            this[_control].get(vr).addClass('ison');\n            this[_widget].get(vr).addClass('ison');\n        }\n        else {\n            this[_control].get(vr).removeClass('ison');\n            this[_widget].get(vr).removeClass('ison');\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: ctype\n * This manages the facet \"contribution type\"\n */\n\nimport Relative from './relative';\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'type');\n    }\n}\n","/* INDIVIDUAL COMPONENT: EUmap\n * This manages a clickable map of the EU countries\n * See http://jvectormap.com/documentation/javascript-api/jvm-map/\n */\n\nimport * as g from './generic.js';\nimport Relative from './relative';\n\n/* private attributes as symbols */\nconst _map_object = Symbol();\nconst _map_container = Symbol();\nconst _marker = Symbol();\nconst _setvalues = Symbol();\nconst _not_mapped = Symbol();\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'country');\n        this[_map_object] = new Map();\n        this[_map_container] = new Map();\n        this[_marker] = new Map();\n        this[_setvalues] = new Map();\n        this[_not_mapped] = new Set([\n            '-',\n            'CY',\n            'KS',\n            'TR',\n            'MC',\n            'GE',\n        ]);\n    }\n    _preHtml(vr) {\n        return `<div id=\"map-europe_${vr}\" class=\"position\">\n    <p class=\"zoom\"><a class=\"fa fa-arrows\" href=\"#\" title=\"zoom to fit all countries\"/></p>\n</div>`;\n    }\n    _myDressup(vr) {\n        const that = this;\n        const cc = this.component.container.get(vr);\n        this[_map_container].set(vr, cc.find(`#map-europe_${vr}`));\n        const mapc = this[_map_container].get(vr);\n        const height = mapc.width()*0.6;\n        mapc.width('100%');\n        mapc.height(height);\n        mapc.vectorMap({\n            'map': 'europe_mill',\n            backgroundColor: '#ccccff',\n            regionsSelectable: true,\n            markersSelectable: true,\n            regionsSelectableOne: false,\n            markersSelectableOne: false,\n            markerStyle: {\n                initial: {\n                    fill: '#008800',\n                    'fill-opacity': 0.2,\n                    stroke: 'none',\n                    'stroke-width': 0,\n                    'stroke-opacity': 0.2,\n                    'r': 1,\n                },\n                hover: {\n                    cursor: 'pointer',\n                    stroke: '#ffff44',\n                    'stroke-width': 1,\n                    'stroke-opacity': 1,\n                },\n                selected: {\n                    fill: '#008800',\n                    'fill-opacity': 1,\n                },\n                selectedHover: {\n                },\n            },\n            regionStyle: {\n                initial: {\n                    fill: '#bbbbbb',\n                    'fill-opacity': 1,\n                    stroke: 'none',\n                    'stroke-width': 0,\n                    'stroke-opacity': 1,\n                },\n                hover: {\n                    cursor: 'pointer',\n                    stroke: '#ffff44',\n                    'stroke-width': 3,\n                    'stroke-opacity': 1,\n                },\n                selected: {\n                    fill: '#dd8844',\n                    'fill-opacity': 1,\n                },\n                selectedHover: {\n                },\n            },\n            markers: this[_marker].get(vr),\n            series: {\n                markers: [{\n                    values: {},\n                        scale: [0,20],\n                        normalizeFunction: 'linear',\n                        attribute: 'r',\n                        min: 0,\n                        max: 100,\n                }],\n                regions: [{\n                        scale: {\n                            'outdariah': '#ffffff',\n                            'indariah': '#ffddbb',\n                        },\n                        attribute: 'fill',\n                        values: this[_setvalues].get(vr),\n                }],\n            },\n            onRegionTipShow: function(e, el, related_value) {\n                const rvs = this.statistics.get(vr);\n                el.html(`${related_value}: ${rvs.has(related_value)?rvs.get(related_value):'not in DARIAH'}`);\n            }.bind(this),\n            onMarkerTipShow: function(e, el, related_value) {\n                const rvs = this.statistics.get(vr);\n                el.html(`${related_value}: ${rvs.has(related_value)?rvs.get(related_value):'not in DARIAH'}`);\n            }.bind(this),\n            onRegionClick: function(e, related_value) {\n                if (!this.related_values_index.get(vr).has(related_value)) {\n                    e.preventDefault();\n                }\n            }.bind(this),\n            onMarkerClick: function(e, related_value) {\n                if (!this.related_values_index.get(vr).has(related_value)) {\n                    e.preventDefault();\n                }\n            }.bind(this),\n            onRegionSelected: function(e, related_value, i, selected) {\n                if (this.change_state) {\n                    this.component.state.setState(this.state_var_pref+vr, g.a_to_str(selected)+this._unmapped_selected(vr));\n                }\n            }.bind(this),\n            onMarkerSelected: function(e, related_value, i, selected) {\n                if (this.change_state) {\n                    this.component.state.setState(this.state_var_pref+vr, g.a_to_str(selected)+this._unmapped_selected(vr));\n                }\n            }.bind(this),\n        });\n        const zoom_p = cc.find('p.zoom');\n        zoom_p.css('top', `${height-20}px`);\n        zoom_p.css('left', '10px');\n        const zoom_control = cc.find('p.zoom a');\n        zoom_control.click(e => {e.preventDefault();\n            this[_map_object].get(vr).setFocus({regions: ['GB', 'GR']});\n        });\n        this[_map_object].set(vr, mapc.vectorMap('get', 'mapObject'));\n        this[_map_object].get(vr).setFocus({regions: ['GB', 'GR']});\n    }\n    _unmapped_selected(vr) {\n        const result = [];\n        const this_state = g.from_str(vr, this.component.state.getState(this.state_var_pref+vr));\n        let empty = true;\n        for (const related_value of this[_not_mapped]) {\n            if (this_state.has(related_value)) {\n                result.push(related_value);\n                empty = false;\n            }\n        }\n        return empty?'':(','+result.join(','));\n    }\n    _mySetFacet(vr) {\n        this.change_state = false;\n        /* some countries are not on the map, we do show those countries in the list but not on the map.\n         * Same for -, the key that denotes ALL countries\n         */\n        const map_regions = {};\n        const map_markers = {};\n        const related_values = this.related_state.get(vr);\n        for (const d of this.component.related_values.get(vr)) {\n            const i = d['_id'];\n            const related_value = d['name'];\n            const member_dariah = d['inDARIAH'];\n            if (!(this[_not_mapped].has(i)) && i != this.no_values.value) {\n                map_regions[i] = related_values.has(i);\n                if (member_dariah) {\n                    map_markers[i] = related_values.has(i);\n                }\n            }\n        }\n        const mapo = this[_map_object].get(vr);\n        mapo.setSelectedRegions(map_regions);\n        mapo.setSelectedMarkers(map_markers);\n        this.change_state = true;\n    }\n    _myStats(vr) {\n        let total = this.distilled.get(vr).size;\n        if (total == 0) {total = 1}\n        const weighted_statistics = {};\n        const rvs = this.statistics.get(vr);\n        for (const [related_value, stat] of rvs) {\n            if (related_value != this.no_values.value) {\n                const pr = 100 * stat / total;\n                weighted_statistics[related_value] = (total < 10)?pr:(10*Math.sqrt(pr));\n            }\n        }\n        this[_map_object].get(vr).series.markers[0].setValues(weighted_statistics);\n    }\n    _plainWeld(vr) {}\n    _myWeld(vr) {\n        this[_marker].set(vr, {});\n        this[_setvalues].set(vr, {});\n        const related_values = this.component.related_values.get(vr);\n        const marker = this[_marker].get(vr);\n        const setv = this[_setvalues].get(vr);\n        for (const d of related_values) {\n            const i = d['_id'];\n            const related_value = d['name'];\n            const member_dariah = d['inDARIAH'];\n            const latitude = d['latitude'];\n            const longitude = d['longitude'];\n            if (member_dariah) {\n                this.related_values_all.get(vr).add(i);\n                this.related_values_list.get(vr).push(i);\n                this.related_values_index.get(vr).set(i, related_value);\n                marker[i] = {latLng: [latitude, longitude], name: related_value};\n                setv[i] = 'indariah';\n            }\n            else {\n                setv[i] = 'outdariah';\n            }\n        }\n        this.related_values_list.get(vr).sort((a,b) => {\n            return (this.related_values_index.get(a) < this.related_values_index.get(b))?-1:(this.related_values_index.get(a) > this.related_values_index.get(b))?1:0; \n        });\n    }\n}\n","/* INDIVIDUAL COMPONENT: Facets\n * This sets up a list of facets for the lists of records to be displayed in the middle column\n * It will host individual facets\n */\n\nimport * as g from './generic.js';\n\n/* private attributes as symbols */\nconst _stats = Symbol();\nconst _enabled_facets = Symbol();\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n        this[_stats] = new Map();\n        this[_enabled_facets] = new Map();\n            /* the set of enabled facets is derived from the component_specs of the page object.\n             * It will not change due to user interaction.\n             * So if we want to compute whether facets have changed, we can restrict ourselves to the enabled facets.\n             */\n        this.table = new Map();\n        this.distilled = new Map();\n    }\n    _html(vr) {\n        const h = `<p><span fct=\"all\"></span>Filtering <span id=\"fstats_${vr}\"></span></p>`;\n        this.component.container.get(vr).html(h);\n    }\n    show(vr) {\n        return this.component.state.getState('list') == vr;\n    }\n    weld(vr) {\n        const children = this.component.children;\n        this[_enabled_facets].set(vr, new Map());\n        for (const [facet_name, facet_component] of children) {\n            if (facet_component.hasVariant(vr)) {\n                this[_enabled_facets].get(vr).set(facet_name, facet_component);\n            }\n        }\n        this._html(vr);\n    }\n    _display(expand_control, mode) {\n        const that = this;\n        const dt = expand_control.closest('p');\n        const hidec = dt.find('.hidec');\n        const morec = dt.find('.morec');\n        const showc = dt.find('.showc');\n        const expanded_material = expand_control.closest('div').find('table,.flt');\n        const condensed_material = expand_control.closest('div').find('.value_list2,.flt_compact');\n        const not_expanded_material = expand_control.closest('div').find('.flt_not_expanded');\n        const key = `fctx_${expand_control.closest('span').attr('fct')}`;\n        const mode_undef = mode == undefined;\n        if (mode_undef) {\n            if (g.localstorage_vars.isSet(key)) {\n                mode = g.localstorage_vars.get(key);\n            }\n            else {\n                mode = 1;\n            }\n        }\n        const all_facets = key == 'fctx_all';\n        if (all_facets && !mode_undef) {\n            expand_control.closest('div').find('div.component span[fct]').each(function() {\n                that._display($(this), mode);\n            });\n        }\n        g.localstorage_vars.set(key, mode);\n        if (mode == 0) {\n            hidec.show();\n            morec.hide();\n            showc.hide();\n            if (!all_facets) {\n                not_expanded_material.show();\n                expanded_material.hide();\n                condensed_material.hide();\n            }\n        }\n        else if (mode == 1) {\n            hidec.hide();\n            morec.show();\n            showc.hide();\n            if (!all_facets) {\n                not_expanded_material.show();\n                expanded_material.hide();\n                condensed_material.show();\n            }\n        }\n        else {\n            hidec.hide();\n            morec.hide();\n            showc.show();\n            if (!all_facets) {\n                not_expanded_material.hide();\n                expanded_material.show();\n                condensed_material.hide();\n            }\n        }\n    }\n    wire(vr) {\n        const that = this;\n        const cc = this.component.container.get(vr);\n        this[_stats].set(vr, cc.find(`#fstats_${vr}`));\n        const info = ' details; click to change level of details';\n        const detailcontrols = `<a class=\"showc fa fa-fw fa-list-ul\" href=\"#\" title=\"full${info}\"></a><a class=\"morec fa fa-fw fa-align-left\" href=\"#\" title=\"condensed${info}\"></a><a class=\"hidec fa fa-fw fa-minus\" href=\"#\" title=\"hidden${info}\"></a>`;\n        cc.addClass('facet');\n        cc.find('span[fct]').each(function() {\n            $(this).html(`${detailcontrols}&nbsp`);\n            that._display($(this));\n        });\n        cc.find('.hidec').click(function(e) {e.preventDefault();\n            that._display($(this), 1);\n        });\n        cc.find('.morec').click(function(e) {e.preventDefault();\n            that._display($(this), 2);\n        });\n        cc.find('.showc').click(function(e) {e.preventDefault();\n            that._display($(this), 0);\n        });\n    }\n    work(vr) {\n        const facets = this[_enabled_facets].get(vr);\n        /* this is an expensive operation: all rows in the main list must be evaluated against all facets.\n         * We will suppress this computation if none of the facets have changed.\n         */\n        let changed = false;\n        for (const [facet_name, facet_comp] of facets) {\n            const facet = facet_comp.implementation;\n            if (facet.changed) {\n                changed = true;\n                break;\n            }\n        }\n        if (!changed) {\n            return;\n        }\n\n        const mother_list = this.component.page.getComponent('list');\n        const key = `${mother_list.item_comp}_${vr}`;\n        const data = mother_list.implementation.getRecordIds(vr);\n        this.distilled.set(vr, new Set());\n        for (const [facet_name, facet_comp] of facets) {\n            const facet = facet_comp.implementation;\n            facet.distilled.set(vr, new Set());\n        }\n        for (const did of data) {\n            let v = true; // will hold whether this row passes all facets\n/* We collect in the distilled member of this facet object the collective results of all individual facets,\n * Moreover, for each facet, we collect in its distilled member the results when all facets are applied except the facet in question\n * so: \n * 1. rows with a failure for 2 or more facets are discarded\n * 2. rows with a failure for exactly one facet are added to the data for that facet\n * 3. rows which pass all facets are added to all facets, and also to the final filtered set\n */\n            let the_false = null; // which facet has yielded false (if there are more than one we'll discard the row\n            let discard = false; // becomes true when we have encounterd 2 facets that yield false\n            for (const [facet_name, facet_comp] of facets) {\n                if (!discard) {\n                    const facet = facet_comp.implementation;\n                    const this_v = facet.v(vr, did); // this_v: whether the row passes this facet\n                    if (!this_v) {\n                        v = false;\n                        if (the_false == null) { // this is the first failure, we store the facet number in the_false\n                            the_false = facet;\n                        } // else we discard the row altogether\n                        else {\n                            discard = true;\n                        }\n                    }\n                }\n            }\n            if (!discard) {\n                if (v) {\n                    this.distilled.get(vr).add(did);\n                }\n                if (the_false != null) {\n                    the_false.distilled.get(vr).add(did);\n                }\n                else {\n                    for (const [facet_name, facet_comp] of facets) {\n                        const facet = facet_comp.implementation;\n                        facet.distilled.get(vr).add(did);\n                    }\n                }\n            }\n        }\n        for (const [facet_name, facet_comp] of facets) {\n            const facet = facet_comp.implementation;\n            facet.stats(vr);\n        }\n        this[_stats].get(vr).html(`${this.distilled.get(vr).size} of ${data.length}`);\n        mother_list.implementation.select(vr);\n    }\n}\n","/* INDIVIDUAL COMPONENT: Filters\n * This is a list of filter controls corresponding to lists of records to be displayed in the middle column\n * Setting a filter control filters the associated list.\n */\n\nimport * as g from './generic.js';\n\n/* private attributes as symbols */\nconst _tags = Symbol();\nconst _filter_control = Symbol();\nconst _filter_control2 = Symbol();\nconst _clear_filter_control = Symbol();\nconst _box = Symbol();\nconst _completions_dst = Symbol();\nconst _wire_mode = Symbol();\nconst _distilled = Symbol();\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n        this[_tags] = new Map();\n        this.filter_state = new Map();\n        this.changed = new Map();\n        /*\n         * The content of the corresponding state variable is stored in this.filter_state.\n         * this.changed indicates whether state variable has changed recently.\n         * Both this.filter_state and this.changed are parametrized with the variant vr.\n        */\n        this[_filter_control] = new Map();\n        this[_filter_control2] = new Map();\n        this[_box] = new Map();\n        this[_completions_dst] = new Map();\n        this._stats_dst = new Map();\n        this[_clear_filter_control] = new Map();\n        this[_wire_mode] = new Map();\n        this[_distilled] = new Map();\n        this.distilled = new Map();\n        this.state_var_pref = `${this.component.specs.varpfx}_`; \n    }\n    _html(vr) {\n        const h = `\n<div>\n    <p class=\"dctrl\"><span fct=\"${this.component.name}-${vr}\"></span> By full text search\n        <a href=\"#\" title=\"modify full text filter\" id=\"flt2_${vr}\" class=\"flt_not_expanded facet_single ison flt_pat\"></a>\n        <a href=\"#\" class=\"control_med fa fa-close filtc\" id=\"clearf_${vr}\"></a>\n    </p>\n    <div id=\"fltw_${vr}\">\n        <p id=\"fbox_${vr}\" class=\"flt control_med fbox ui-widget\">\n            <input id=\"flt_${vr}\" class=\"flt flt_pat\"/>\n            <span fbox class=\"stats\" id=\"stats_${vr}\"></span>\n        </p>\n        <div id=\"autoc_${vr}\" style=\"display: none;\">here ${vr}</div>\n    </div>\n</div>`;\n        this.component.container.get(vr).html(h);\n    }\n    _setFilter(vr) {\n        const textf = this.component.state.getState(this.state_var_pref+vr);\n        const filterc = this[_filter_control].get(vr);\n        this[_filter_control2].get(vr).html(textf);\n        filterc.val(textf);\n        filterc.autocomplete('search', textf);\n    }\n    _response(vr) {\n        return function(event, ui) {\n            this[_distilled].set(vr, new Set());\n            const dstl = this[_distilled].get(vr);\n            for (const u of ui.content) {\n                dstl.add(u.value);\n            }\n            if (!(this[_wire_mode].get(vr))) {\n                const textf = this[_filter_control].get(vr).val();\n                this.component.state.setState(this.state_var_pref+vr, textf);\n            }\n        }.bind(this);\n    }\n    _setClear(vr) {\n        this[_clear_filter_control].get(vr).click(e => {e.preventDefault();\n            const filterc = this[_filter_control].get(vr);\n            filterc.val('');\n            filterc.autocomplete('search', '');\n        });\n    }\n    stats(vr) {\n        let stat_prefix;\n        const statd = this._stats_dst.get(vr);\n        if (this[_filter_control].get(vr).val() == '') {\n            stat_prefix = '';\n            statd.removeClass('ison');\n        }\n        else {\n            stat_prefix = `${this.facet.distilled.get(vr).size} of `;\n            statd.addClass('ison');\n        }\n        statd.html(`${stat_prefix}${this.distilled.get(vr).size}`);\n    }\n    v(vr, i) {\n        return (this[_distilled].get(vr).has(i));\n    }\n    show(vr) {\n        return (this.component.state.getState('list') == vr);\n    }\n    weld(vr) {\n        this._html(vr);\n    }\n    wire(vr) {\n        if (!this.facet) {\n            this.facet = this.component.page.getComponent('facet').implementation;\n        }\n        const data = this.component.page.getComponent('list').data.get(vr);\n        this[_tags].set(vr, []);\n        const tgs = this[_tags].get(vr);\n        for (const d of data) {\n            if (vr == 'country') {\n                tgs.push({label: `${d['_id']} ${d['name']}`, value: d['_id']});\n            }\n            else if (vr == 'contrib') {\n                tgs.push({label: d['title'], value: d['_id']});\n            }\n            else {\n                tgs.push({label: d['value'], value: d['_id']});\n            }\n        }\n        this[_distilled].set(vr, new Set());\n        this.distilled.set(vr, new Set());\n        const cc = this.component.container.get(vr);\n        const cf = cc.find(`#fltw_${vr}`);\n        const flt = $(`#flt_${vr}`);\n        this[_filter_control].set(vr, flt);\n        const flt2 = $(`#flt2_${vr}`);\n        this[_filter_control2].set(vr, flt2);\n        this[_box].set(vr, cf.find(`#fbox_${vr}`));\n        this[_completions_dst].set(vr, cf.find(`#autoc_${vr}`));\n        this._stats_dst.set(vr, cf.find(`#stats_${vr}`));\n        this[_clear_filter_control].set(vr, cc.find(`#clearf_${vr}`));\n        this[_filter_control].get(vr).autocomplete({\n            appendTo: this[_completions_dst].get(vr),\n            source: this[_tags].get(vr),\n            response: this._response(vr),\n            minLength: 0,\n        });\n        flt2.click(function(e) {e.preventDefault();\n            $(this).closest('div').find('.morec').click();\n            flt[0].focus();\n        });\n        this[_wire_mode].set(vr, true);\n        this._setClear(vr);\n        this._setFilter(vr);\n        this[_wire_mode].set(vr, false);\n    }\n    work(vr) {\n        const old_state = this.filter_state.has(vr)?this.filter_state.get(vr):'';\n        const new_state = this.component.state.getState(this.state_var_pref+vr);\n        this.changed = old_state != new_state;\n        if (this.changed) {\n            this.filter_state.set(vr, new_state);\n            const clearfc = this[_clear_filter_control].get(vr);\n            if (new_state == '') {\n                this[_box].get(vr).removeClass('ison');\n                clearfc.hide();\n            }\n            else {\n                this[_box].get(vr).addClass('ison');\n                clearfc.show();\n            }\n            this[_filter_control2].get(vr).html(new_state);\n        }\n    }\n}\n","/* GENERIC\n * Some function for very generic purposes\n */\n\nconst chr = new Map([\n    ['&', '&amp;'],\n    ['<', '&lt;'],\n    ['>', '&gt;'],\n]);\n\nexport function escapeHTML(text) {\n    return text.replace(/[&<>]/g, function (a) {return chr.get(a) || a;});\n};\n\nconst _Request = {\n    parameter(name) {\n        return this.parameters().get(name);\n    },\n    parameters() {\n        const result = new Map();\n        const uri = window.location.search;\n        if (uri.indexOf(\"?\") === -1) {\n            return result;\n        }\n        for (const paramval of uri.slice(1).split(\"&\")) {\n            result.set(...paramval.split(\"=\"));\n        }\n        return result;\n    }\n};\n\nexport const request_vars = _Request.parameters();\nconst _localstorage = $.initNamespaceStorage('req');\nexport const localstorage_vars = _localstorage.localStorage;\n\nexport function deselectText() {\n    if (document.selection) {\n        document.selection.empty();\n    }\n    else if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n    }\n};\n\nexport function selectText(containerid) {\n    deselectText();\n    if (document.selection) {\n        const range = document.body.createTextRange();\n        range.moveToElementText(document.getElementById(containerid));\n        range.select();\n    }\n    else if (window.getSelection) {\n        const range = document.createRange();\n        range.selectNode(document.getElementById(containerid));\n        window.getSelection().addRange(range);\n    }\n};\n\nexport function toggleDetail(widget, detail, extra) {\n    const thedetail = (detail == undefined)?widget.closest('div').find('.detail'):detail;\n    thedetail.toggle();\n    if (extra != undefined) {\n        extra(widget);\n    }\n    let thiscl, othercl;\n    if (widget.hasClass('fa-chevron-right')) {\n        thiscl = 'fa-chevron-right';\n        othercl = 'fa-chevron-down';\n    }\n    else {\n        thiscl = 'fa-chevron-down';\n        othercl = 'fa-chevron-right';\n    }\n    widget.removeClass(thiscl);\n    widget.addClass(othercl);\n};\n\nexport function compact(cutoff, size, text) {\n    return (text.length > cutoff)?text.replace(/[^ -]+/g, x => {return x.substr(0,size)}):text;\n};\n\nexport function from_str(st) {\n    return (st !== null && st != undefined && st != '')?new Set(st.split(',')):new Set();\n};\nexport function a_to_str(ar) {\n    return ar.join(',');\n};\nexport function to_str(set) {\n    return Array.from(set).join(',');\n};\nexport function set_equal(s1, s2) {\n    if (s1.size != s2.size) {return false}\n    for (const e of s1) {if (!s2.has(e)) {return false}}\n    return true;\n}\n\n","/* INDIVIDUAL COMPONENT: Item\n * This manages the actual records to be displayed inside the list in the middle column.\n * The subcomponents corresponds to the individual lists, such as country, countribution\n * There is an extra argument that specifies the ids of the items that should be displayed.\n * All functionality (except show) is delegated to specific functions\n */\n\nimport * as g from './generic.js';\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n        this.open_items = new Map();\n    }\n    _html(vr, it) {\n        const iid = it['_id'];\n        this.open_items.get(vr).add(iid);\n        const row = this.component.up.implementation.getRow(vr, iid);\n        const hidec = row.find('.hidec');\n        const showc = row.find('.showc');\n        let h = `<tr iid=\"${iid}\"><td>&nbsp</td>`;\n\n        if (vr == 'contrib') {\n            const types = [];\n            for (const tp of it['typeContribution']) {\n                types.push(`<a href=\"#\" tid=\"${tp['_id']}\">${tp['value']}</a>`);\n            }\n            h += `\n<td>\n<b>Contact person:</b> ${it['contact_person_name']}<br/>\n<b>Country:</b> ${it['country'][0]['_id']} = ${it['country'][0]['name']}<br/>\n<b>Types:</b> ${types.join(', ')}<br/>\n</td>\n`;\n        }\n        else if (vr == 'country') {\n            const in_dariah = it['inDARIAH']?'yes':'no';\n            h += `\n<td colspan=\"3\">\n<b>Country code:</b> <span class=\"country_code\">${it['_id']}</span><br/>\n<b>Country name:</b> <span class=\"country_name\">${it['name']}</span><br/>\n<b>Member DARIAH?</b> <span class=\"in_dariah\">${in_dariah}</span><br/>\n<b>Latitude, Longitude:</b> <span class=\"latlng\">${it['latitude']}</span>, <span class=\"latlng\">${it['longitude']}</span><br/>\n</td>`;\n        }\n        else if (vr == 'type' || vr == 'tadiraha' || vr == 'tadiraho' || vr == 'tadiraht') {\n            h += `\n<td>\n<b>Value:</b> <span class=\"value\">${it['value']}</span><br/>\n<td>`;\n        }\n        h += '</tr>';\n        row.after(h);\n        hidec.hide();\n        showc.show();\n    }\n    _set_it(control, vr, state) {\n        const key = `${this.component.name}_${vr}`;\n        const open_ids = g.from_str(this.component.state.getState(key));\n        const rid = control.closest('tr').attr('rid');\n        if (state) {\n            open_ids.add(rid);\n        }\n        else {\n            open_ids.delete(rid);\n        }\n        this.component.state.setState(key, g.to_str(open_ids));\n    }\n    display(vr, iid, with_detail) {\n        if (this.open_items.get(vr).has(iid) == with_detail) {return}\n        const row = this.component.up.implementation.getRow(vr, iid);\n        const hidec = row.find('.hidec');\n        const showc = row.find('.showc');\n        const detail = this.component.up.container.get(vr).find(`tr[iid=\"${iid}\"]`);\n        if (with_detail) {\n            hidec.hide();\n            showc.show();\n            if (detail.length) { /* it is possible that the detail is still being fetched\n                                    in that case: no problem, when it arrives it will be inserted,\n                                    no need to call show().\n                                    If the detail was already here and hidden, this show() will have effect\n                                 */ \n                detail.show();\n            }\n        }\n        else {\n            hidec.show();\n            showc.hide();\n            if (detail.length) {\n                detail.hide();\n            }\n        }\n        if (with_detail) {\n            this.open_items.get(vr).add(iid);\n        }\n        else {\n            this.open_items.get(vr).delete(iid);\n        }\n    }\n    show(vr) {\n        return this.component.state.getState('list') == vr;\n    }\n    weld(vr) {\n        if (!this.open_items.has(vr)) {this.open_items.set(vr, new Set())};\n        for (const it of this.component.data.get(vr)) {\n            this._html(vr, it);\n        }\n    }\n    wire(vr) {\n        const that = this;\n        const cc = this.component.up.container.get(vr);\n        cc.find('.hidec').click(function(e) {e.preventDefault();\n            that._set_it($(this), vr, true);\n        });\n        cc.find('.showc').click(function(e) {e.preventDefault();\n            that._set_it($(this), vr, false);\n        });\n    }\n    work(vr) {\n        const open_ids = g.from_str(this.component.state.getState(`${this.component.name}_${vr}`));\n        for (const [iid, shown] of this.component.up.implementation.row_status.get(vr)) {\n            this.display(vr, iid, shown && open_ids.has(iid));\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: List\n * This manages the actual lists of records to be displayed in the middle column.\n * The subcomponents corresponds to the individual lists, such as country, countribution\n * All functionality (except show) is delegated to specific functions\n */\n\nimport * as g from './generic.js';\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n        this.row_status = new Map();\n    }\n    _html(vr) {\n        this.row_status.set(vr, new Map());\n        let h = '';\n        h += `<table id=\"table_${vr}\">`;\n        for (const r of this.component.data.get(vr)) {\n            const rid = r['_id'];\n            this.row_status.get(vr).set(rid, true);\n            const rowstart = `<tr rid=\"${rid}\"><td><a class=\"showc fa fa-fw fa-list-ul\" href=\"#\" title=\"hide fields\"></a><a class=\"hidec fa fa-fw fa-minus\" href=\"#\" title=\"show fields\"></a></td>`;\n            const rowend = '</tr>';\n            if (vr == 'contrib') {\n                h += `${rowstart}<td>${r['title']}</td>${rowend}`;\n            }\n            else if (vr == 'country') {\n                const in_dariah = r['inDARIAH']?'in dariah':'';\n                h += `${rowstart}<td class=\"country_code\">${rid}<td><td class=\"country_name\">${r['name']}<td><td class=\"in_dariah\">${in_dariah}</td>${rowend}`;\n            }\n            else if (vr == 'type') {\n                h += `${rowstart}<td class=\"value\">${r['value']}<td>${rowend}`;\n            }\n            else if (vr == 'tadiraha' || vr == 'tadiraho' || vr == 'tadiraht') {\n                h += `${rowstart}<td class=\"value\">${r['value']}<td>${rowend}`;\n            }\n        }\n        h += '</table>';\n        this.component.container.get(vr).html(h);\n    }\n    getRecordIds(vr) {\n        return this.row_status.get(vr).keys();\n    }\n    getRow(vr, rid) {\n        const destination = this.component.container.get(vr);\n        return destination.find(`tr[rid=\"${rid}\"]`);\n    }\n    select(vr) {\n        const distilled = this.component.page.getComponent('facet').implementation.distilled.get(vr);\n        const row_status = this.row_status.get(vr);\n        for (const [rid, shown] of row_status) {\n            if (shown == (distilled.has(rid))) {continue}\n            const row = this.component.container.get(vr).find(`tr[rid=\"${rid}\"]`);\n            if (shown) {\n                row.hide();\n            }\n            else {\n                row.show();\n            }\n            row_status.set(rid, !shown);\n        }\n    }\n    show(vr) {\n        return this.component.state.getState('list') == vr;\n    }\n    weld(vr) {\n        this._html(vr);\n    }\n    wire(vr) {\n        const showc = this.component.container.get(vr).find(`.showc`);\n        showc.hide();\n    }\n    work(vr) {\n    }\n}\n","/* START PROCESSING\n * The dynamic construction of the page starts here\n */\n\nimport Page from './page';\n\n$(function () {\n    new Page().work();\n});\n","/* MESSAGES\n * Msg is a function that issues messages to a specified element.\n * It has also controls for clearing and hiding the messages.\n */\n\n/* private attributes as symbols */\nconst _destination = Symbol();\nconst _trash_control = Symbol();\nconst _trash_control_para = Symbol();\nconst _on_clear = Symbol();\n\nexport default class {\n    constructor(destination, on_clear) {\n        this[_destination] = $(`#${destination}`);\n        this[_trash_control] = $(`#trash_${destination}`);\n        this[_trash_control_para] = this[_trash_control].closest('p');\n        this[_trash_control].click(e => {e.preventDefault();\n            this.clear();\n        });\n        this._hide();\n        this[_on_clear] = on_clear;\n    }\n    _hide() {\n        this[_destination].hide();\n        this[_trash_control_para].hide();\n    }\n    _show() {\n        this[_destination].show();\n        if (this[_destination].html() != '') {\n            this[_trash_control_para].show();\n        }\n    }\n    clear() {\n        this[_destination].html('');\n        if (this[_on_clear] != undefined) {\n            this[_on_clear]();\n        }\n        this._hide();\n    }\n    msg(text, kind) {\n        if (kind == undefined) {\n            kind = 'info';\n        }\n        let message_text = this[_destination].html();\n        this[_destination].html(`${message_text}<p class=\"${kind}\">${text}</p>`);\n        this._show();\n    }\n}\n","/* TOP LEVEL: PAGE\n * This is the page function. \n * It creates a ViewState function, which contains the current state.\n * The state is created on the basis of request variables, and from then it\n * reflects the user actions.\n * The page specifies all components and initializes them.\n * A component is specfied by the following fields\n * - destination: left => left sidebar; right => right sidebar; middle => middle column\n * - name: a string that can be used to refer to the component later on, via method getComponent\n * - subcomponents: a list of names for which a subcomponent will be made. The html will be generated per subcomponent.\n * - fetch: boolean which says whether this component needs data from the server\n * - work first: boolean which says that child components can only be wired after work of the parent component.\n * - specific: an object that holds the specific functionality of this component.\n * The control component has work first = true, because only after choosing a list, the list control can fetch the specific list and wire itself.\n * All other components have work first = false, because it is desirable that child components start wiring as soon as possible.\n * For example: the facet component is parent of the individual facets.\n * When facet starts working, the individual controls should already be wired.\n * Because work first = false, wiring of the individual facets will be triggered after wiring of the generic facet component.\n * N.B. Individual facets can only be wired after the list component (their grandfather) has been wired.\n * This will go OK, because after wiring the list, the facet will be wired and then the individual facets.\n * The _routing dictionary specifies when the work methods of components should be triggered.\n * Its keys are the labels of components, and for every component a list of other component keys is given.\n * These are the components that will be applied (in that order) after the key component. \n * \n *  work from page: if true, this component's work method will be called directly by the page's work method;\n *   if false, the page will skip this component when working. It is assumed that this component will be applied by another component.\n *   This practice must be followed, if the application of state to a component should come after a fetch of another component.\n *   If the page would work the viewstate directly to this component, it would happen before the other's components data had been loaded.\n *   Example: a filter component F, that filters a big list fetched by another component L. L's work should call F's work.\n * After every user action, the state is changed, and a call to the Page's work() method is issued.\n * The page will issue the work call forth to all components.\n */\n\nimport * as g from './generic.js';\nimport ViewState from './viewstate';\nimport Share from './share';\nimport CType from './ctype';\nimport TadirahO from './tadiraho';\nimport TadirahA from './tadiraha';\nimport TadirahT from './tadiraht';\nimport EUmap from './eumap';\nimport Filter from './filter';\nimport Facet from './facet';\nimport List from './list';\nimport Item from './item';\nimport Control from './control';\nimport Component from './components';\nimport Skeleton from './skeleton';\n\n/* private attributes as symbols */\nconst _by_id = Symbol();\n\nexport default class extends Skeleton { // the one and only page object\n    constructor() {\n        super();\n        this.name = 'page';\n        this.state = new ViewState(this);\n        const main_lists = this.state.getValues('list');\n        const contrib_list = new Set(['contrib']);\n        const empty_list = new Set(['']);\n        this._component_specs = new Map([\n            ['share',    {dest: 'body',    variants: empty_list,   fetch_url: null,       varpfx: null,  specific: Share}], \n            ['control',  {dest: 'left',    variants: main_lists,   fetch_url: null,       varpfx: null,  specific: Control}],\n            ['list',     {dest: 'middle' , variants: main_lists,   fetch_url: 'list',     varpfx: null,  specific: List}],\n            ['item',     {dest: 'list',    variants: main_lists,   fetch_url: 'item',     varpfx: null,  specific: Item}],\n            ['facet',    {dest: 'control', variants: main_lists,   fetch_url: null,       varpfx: null,  specific: Facet}],\n            ['filter',   {dest: 'facet',   variants: main_lists,   fetch_url: null,       varpfx: 'flt', specific: Filter}],\n            ['eumap',    {dest: 'facet',   variants: contrib_list, fetch_url: 'country',  varpfx: 'rel', specific: EUmap}],\n            ['ctype',    {dest: 'facet',   variants: contrib_list, fetch_url: 'type',     varpfx: 'rel', specific: CType}],\n            ['tadiraha', {dest: 'facet',   variants: contrib_list, fetch_url: 'tadiraha', varpfx: 'rel', specific: TadirahA}],\n            ['tadiraho', {dest: 'facet',   variants: contrib_list, fetch_url: 'tadiraho', varpfx: 'rel', specific: TadirahO}],\n            ['tadiraht', {dest: 'facet',   variants: contrib_list, fetch_url: 'tadiraht', varpfx: 'rel', specific: TadirahT}],\n        ]),\n        /* dest: the html of the component will be appended to the dest components html container\n         * variants:  components code generic behaviour of lists, items, facets etc. But there are lists of contribs, countries, etc.\n         *            These are variants.\n         * fetch_url: if not null, the HTML for this component must be generated from data which will be fetched from the server by means\n         *            of a url constructed from fetch_url and variant.\n         * varpfx:    some components are associated with state variables, especially facets. If we need the names of those\n         *            variables, they can be computed from varpfx, fetch_url and the variant.\n         * specific:  Every component also has specific behaviour, not shared with the other components. This is implemented in a\n         *            special class, given in specific.\n         */ \n        /* some components are being dealt with on the basis of additional identifiers, such as item\n         * Those components are specified below, and the specs of all components will get an extra attribute\n         * by_id, which is true if the component needs an id.\n         * The actual ids come from a request variable name_xxx, where name is the name of the component and xxx is the name of a list.\n         */\n        this[_by_id] = new Set([\n            'item',\n        ]),\n        this.ignore = new Set([\n            //'ctype',\n            //'tadiraha',\n            //'tadiraht',\n            //'tadiraho',\n            //'eumap',\n            //'filter',\n        ]),\n        this.components = new Map();\n        for (const [name, spec] of this._component_specs) {\n            if (this.ignore.has(name)) {continue}\n            spec.by_id = this[_by_id].has(name);\n            const component = new Component(name, spec, this);\n            component.up = null;\n            component.children = new Map();\n            component.item_comp = null;\n            this.components.set(name, component);\n        }\n        for (const [name, child_component] of this.components) {\n            const dest_name = this._component_specs.get(name).dest;\n            if (this.components.has(dest_name)) {\n                const parent_component = this.components.get(dest_name);\n                child_component.up = parent_component;\n                parent_component.children.set(name, child_component);\n                if (this[_by_id].has(name)) {\n                    parent_component.item_comp = name;\n                }\n            }\n        }\n        this.resolveTiming();\n        this._setHeight(80);\n        History.Adapter.bind(window, 'statechange', this.state.work());\n    }\n    _setHeight(subtract) { // the heights of the sidebars are set, depending on the height of the window\n        const wh = `${window.innerHeight - subtract}px`;\n        for (const w of new Set(['middle', 'left', 'right'])) {\n            $(`#${w}`).css('height', wh);\n        }\n    }\n    getComponent(name) {\n        return this.components.get(name);\n    }\n    getContainer(name, variants) {\n        if (this.components.has(name)) {\n            return this.components.get(name).container;\n        }\n        else {\n            const container = new Map();\n            const addto = (name == 'body')?$('body'):$(`#${name}`);\n            for (const vr of variants) {\n                container.set(vr, addto);\n            }\n            return container;\n        }\n    }\n    getBefore(name, stage) {\n        const prev_nodes = [];\n        const next_node = `${name}-${stage}`;\n        for (const prev_node of (this._timing.get(next_node) || new Set())) {\n            prev_nodes.push(prev_node.split('-'));\n        }\n        return prev_nodes;\n    }\n    work() { \n        for (const task of this._tasks) {\n            const [name, stage] = task.split('-');\n            const component = this.getComponent(name);\n            for (const vr of component.variants) {\n                component[stage](vr);\n            }\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: generic facet based on related values\n * CType, Tadiraho and EUmap inherit from this.\n */\n\nimport * as g from './generic.js';\n\n/* private attributes as symbols */\nconst _list = Symbol();\nconst _list2 = Symbol();\nconst _all_values_control = Symbol();\nconst _cols = Symbol();\nconst _cutoff = Symbol();\nconst _shortsize = Symbol();\n\nexport default class {\n    constructor(component, rtype, cols, cutoff, shortsize) {\n        this.component = component;\n        this.distilled = new Map();\n        this[_list] = new Map();\n        this[_list2] = new Map();\n        this.related_state = new Map();\n        this.changed = new Map();\n        /*\n         * The content of the corresponding state variable is stored in this.related_state.\n         * this.changed indicates whether the corresponding state variable has changed recently.\n         * Both this.related_state and this.changed are parametrized with the variant vr.\n        */\n        this[_all_values_control] = new Map();\n        this.statistics = new Map();\n        this.related_values_list = new Map();\n        this.related_values_index = new Map();\n        this.related_values_all = new Map();\n        this.no_values = {value: '-', name: '-none'};\n        this.typ = rtype;\n        this.state_var_pref = `${this.component.specs.varpfx}_${this.typ}_`;\n        this[_cols] = cols || 2;\n        this[_cutoff] = cutoff || 14;\n        this[_shortsize] = shortsize || 6;\n    }\n    _html(vr) {\n        const type_sg = this.component.state.showState('list', this.typ, 'sg');\n        const type_pl = this.component.state.showState('list', this.typ, 'pl');\n        let h = '';\n        h += this._preHtml(vr);\n        h += `\n<div>\n    <p class=\"dctrl\"><span fct=\"${this.component.name}-${vr}\"></span> By ${type_sg}</p>\n    <p class=\"all\"><span rv=\"_all\" class=\"stats\"></span> <a rv=\"_all\" href=\"#\" class=\"facet_single_all\">all ${type_pl}</a></p>\n    <table class=\"value_list\" id=\"list-${this.typ}-vals_${vr}\">\n        <tr>\n`;\n        const ar = this.related_values_list.get(vr);\n        const ai = this.related_values_index.get(vr);\n        for (const [i, related_value] of ar.entries()) {\n            if ((i % this[_cols] == 0) && (i > 0) && (i < ar.length)) {\n                h += '</tr><tr>';\n            }\n            const raw_value = ai.get(related_value);\n            h += `\n            <td><span rv=\"${related_value}\" class=\"stats\"></span></td>\n            <td><a rv=\"${related_value}\" href=\"#\" class=\"facet_single\">${g.escapeHTML(raw_value)}</a></td>\n            `;\n        }\n        h += `\n        </tr>\n    </table>\n    <p class=\"value_list2\" id=\"list2-${this.typ}-vals_${vr}\">\n`;\n        for (const [i, related_value] of ar.entries()) {\n            const raw_value = this.related_values_index.get(vr).get(related_value);\n            const compact_value = g.escapeHTML(g.compact(this[_cutoff], this[_shortsize], raw_value));\n            h += `<a href=\"#\" rv=\"${related_value}\" class=\"passive_small\" title=\"${g.escapeHTML(raw_value)}\">${compact_value}</a> `;\n        }\n        h += `\n    </p>\n</div>`;\n        this.component.container.get(vr).html(h);\n    }\n    _dressup(vr) {\n        const cc = this.component.container.get(vr);\n        this[_list].set(vr, cc.find(`#list-${this.typ}-vals_${vr}`));\n        this[_list2].set(vr, cc.find(`#list2-${this.typ}-vals_${vr}`));\n        const that = this;\n        this[_list].get(vr).find('.facet_single').click(function(e) {e.preventDefault();\n            const related_value = $(this).attr('rv');\n            const selected = g.from_str(that.component.state.getState(that.state_var_pref+vr));\n            if (selected.has(related_value)) {\n                selected.delete(related_value);\n            }\n            else {\n                selected.add(related_value);\n            }\n            that.component.state.setState(that.state_var_pref+vr, g.to_str(selected));\n            cc.find('.last_handled').removeClass('last_handled');\n            $(this).addClass('last_handled');\n        });\n        this[_list2].get(vr).find('.passive_small').click(function(e) {e.preventDefault();\n            const related_value = $(this).attr('rv');\n            const selected = g.from_str(that.component.state.getState(that.state_var_pref+vr));\n            if (selected.has(related_value)) {\n                selected.delete(related_value);\n            }\n            else {\n                selected.add(related_value);\n            }\n            that.component.state.setState(that.state_var_pref+vr, g.to_str(selected));\n            $(this).closest('div').find('.morec').click();\n            const last_handled = that[_list].get(vr).find(`a[rv=\"${related_value}\"]`);\n            cc.find('.last_handled').removeClass('last_handled');\n            last_handled.addClass('last_handled');\n            $('#left')[0].scrollTop = 50;\n            last_handled[0].scrollIntoView({\n                behavior: 'smooth',\n                alignToTop: 'true',\n            });\n        });\n        this[_all_values_control].set(vr, this.component.container.get(vr).find('[rv=\"_all\"]'));\n        this[_all_values_control].get(vr).click(function(e) {e.preventDefault();\n            const ison = $(this).hasClass('ison');\n            if (ison) {\n                that.component.state.setState(that.state_var_pref+vr, '');\n            }\n            else {\n                that.component.state.setState(that.state_var_pref+vr, g.to_str(that.related_values_all.get(vr)));\n            }\n        });\n    }\n    _setFacet(vr) {\n        let all_selected = true;\n        for (const related_value of this.related_values_index.get(vr).keys()) {\n            const facet_cell = this[_list].get(vr).find(`[rv=\"${related_value}\"]`);\n            const facet_cell2 = this[_list2].get(vr).find(`[rv=\"${related_value}\"]`);\n            if (this.related_state.get(vr).has(related_value)) {\n                facet_cell.addClass('ison');\n                facet_cell2.addClass('ison');\n            }\n            else {\n                facet_cell.removeClass('ison');\n                facet_cell2.removeClass('ison');\n                all_selected = false;\n            }\n        }\n        if (all_selected) {\n            this[_all_values_control].get(vr).addClass('ison');\n        }\n        else {\n            this[_all_values_control].get(vr).removeClass('ison');\n        }\n    }\n    stats(vr) {\n        this.statistics.set(vr, new Map());\n        const rvs = this.statistics.get(vr);\n        for (const related_value of this.related_values_index.get(vr).keys()) {\n            rvs.set(related_value, 0);\n        } \n        const related_info = this.component.related_info.get(vr);\n        for (const i of this.distilled.get(vr)) {\n            const related_values = related_info.has(i)?related_info.get(i):new Set();\n            if (related_values.size) {\n                for (const related_value of related_values) {\n                    rvs.set(related_value, rvs.get(related_value) + 1);\n                }\n            }\n            else {\n                const nv = this.no_values.value;\n                rvs.set(nv, rvs.get(nv) + 1);\n            }\n        }\n        for (const [related_value, stat] of rvs) {\n            this.component.container.get(vr).find(`span[rv=\"${related_value}\"].stats`).html(stat);\n        }\n        this.component.container.get(vr).find(`span[rv=\"_all\"].stats`).html(this.distilled.get(vr).size);\n        this._myStats(vr);\n    }\n    v(vr, i) {\n        const related_info =  this.component.related_info.get(vr);\n        const related_state = this.related_state.get(vr);\n        const related_values = related_info.has(i)?related_info.get(i):new Set();\n        if (related_values.size) {\n            for (const related_value of related_values) {\n                if (related_state.has(related_value)) {\n                    return true;\n                }\n            }\n        }\n        else {\n            if (related_state.has(this.no_values.value)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    show(vr) {\n        return (this.component.state.getState('list') == vr);\n    }\n    weld(vr) {\n        this.related_values_list.set(vr, []);\n        this.related_values_index.set(vr, new Map());\n        this.related_values_all.set(vr, new Set());\n        this._plainWeld(vr);\n        this._myWeld(vr);\n        this.related_values_list.get(vr).push(this.no_values.value);\n        this.related_values_index.get(vr).set(this.no_values.value, this.no_values.name);\n        this.related_values_all.get(vr).add(this.no_values.value);\n        this.related_state.set(vr, new Set());\n        this.changed.set(vr, true);\n        this._html(vr);\n    }\n    wire(vr) {\n        this._myDressup(vr);\n        this._dressup(vr);\n    }\n    work(vr) {\n        const old_state = this.related_state.get(vr);\n        const new_state = g.from_str(this.component.state.getState(this.state_var_pref+vr));\n        this.changed.set(vr, !g.set_equal(old_state, new_state));\n        if (this.changed.get(vr)) {\n            this.related_state.set(vr, new_state);\n            this._mySetFacet(vr);\n            this._setFacet(vr);\n        }\n    }\n    _plainWeld(vr) {\n        const related_values = this.component.related_values.get(vr);\n        for (const d of related_values) {\n            const i = d['_id'];\n            const related_value = d['value'];\n            this.related_values_list.get(vr).push(i);\n            this.related_values_index.get(vr).set(i, related_value);\n            this.related_values_all.get(vr).add(i);\n        }\n        this.related_values_list.get(vr).sort((a,b) => {\n            return (this.related_values_index.get(a) < this.related_values_index.get(b))?-1:(this.related_values_index.get(a) > this.related_values_index.get(b))?1:0; \n        });\n    }\n    _myWeld(vr) {}\n    _preHtml(vr) {return ''}\n    _myDressup(vr) {}\n    _mySetFacet(vr) {}\n    _myStats(vr) {}\n}\n","/* INDIVIDUAL COMPONENT: Control\n * Manages the sharing drawer for generating hyperlinks to the current page.\n */\n\nimport * as g from './generic.js';\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n    }\n    show(vr) {\n        return true;\n    }\n    weld(vr) {\n\t    const h = `\n<p id=\"citeh\">Cite</p>\n<table align=\"center\">\n    <tr>\n        <td class=\"clip_pv clr\">\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_md\" title=\"link to page content and appearance (markdown)\" class=\"ctrl fa fa-level-down fa-lg fa-fw\"></a>\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_ht\" title=\"link to page content and appearance (html)\" class=\"ctrl fa fa-external-link-square fa-lg fa-fw\"></a>\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_htc\" title=\"link to page content (html)\" class=\"ctrl fa fa-external-link fa-lg fa-fw\"></a>\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_cn\" title=\"copy page content\" class=\"ctrl fa fa-file-text-o fa-lg fa-fw\"></a>\n        </td>\n    </tr>\n    <tr>\n        <th class=\"clip_pv\" width=\"60px\">page view</th>\n    </tr>\n    <tr class=\"citexpl\">\n        <td class=\"clip_pv\"><span id=\"xc_pv\" class=\"ctrl fa fa-chevron-right fa-fw\"></span><span id=\"x_pv\" class=\"detail\">share link to this page with or without view settings.</span></td>\n    </tr>\n</table>\n<p id=\"cdiagpub\"></p>\n<p id=\"cdiagsts\"></p>\n`;\t\n        this.component.container.get(vr).html(h);\n    }\n    wire(vr) {\n        const that = this;\n        const cc = this.component.container.get(vr);\n        const slink = $('#self_link');\n        slink.hide();\n        cc.addClass('socialdrawer');\n        cc.find('.detail').hide();\n        cc.find('#clip_pv_md,#clip_pv_ht,#clip_pv_htc,#clip_pv_nl').click(function(e) {e.preventDefault();\n            window.prompt('Press <Cmd-C> and then <Enter> to copy link on clipboard', $(this).attr('lnk'));\n        });\n        cc.find('#clip_pv_cn').click(e => {e.preventDefault();\n            const containerid = 'middle';\n            const app_url_raw = app_url_cite+that.component.state.getVars(true);\n            slink.show();\n            slink.attr('href', app_url_raw);\n            g.selectText(containerid);\n        });\n        cc.find('#xc_pv').click(function(e){e.preventDefault(); g.toggleDetail($(this), $('#x_pv'))});\n        cc.click(function(e){e.preventDefault();\n            const app_url_raw = app_url_cite+that.component.state.getVars(true);\n            const app_url_rawc = app_url_cite+that.component.state.getVars(false);\n            $('#citeh').hide();\n            $('#cdiagpub').html('');\n            $('#cdiagsts').html('');\n            $('.clip_pv.clr,#cdiagpub,#cdiagsts').removeClass('error warning good special');\n            const pvtitle = g.escapeHTML($('title').text());\n            $('#clip_pv_md').attr('lnk', '[${pvtitle}](${app_url_raw})');\n            $('#clip_pv_ht').attr('lnk', app_url_raw);\n            $('#clip_pv_htc').attr('lnk', app_url_rawc);\n            $('#clip_pv_cn').attr('lnk', app_url_raw);\n            $('#clip_pv_cn').attr('tit', pvtitle);\n            $(this).animate({height:'100px', width:'200px', opacity: 0.95}, 300);\n        });\n        cc.mouseleave(() => { \n            slink.hide();\n            //g.deselectText();\n            $('#citeh').show();\n            cc.animate({height:'20px', width: '40px', opacity: .7}, 300); \n            return false;\n        });\n    }\n    work(vr) {}\n}\n","/* Skeleton\n */\n\nexport default class { // the one and only page object\n    constructor() {\n        this.stages = new Map([\n            ['weld', true],\n            ['wire', true],\n            ['work', false],\n        ]); // true means: once only, false means: my be repeated\n        this.stages_prev = new Map([\n            ['wire', 'weld'],\n            ['work', 'wire'],\n        ]);\n        this.before = new Map([\n            ['weld', new Map([\n                ['item',     new Set(['list'])],\n                ['facet',    new Set(['control', 'list'])],\n                ['filter',   new Set(['facet'])],\n                ['eumap',    new Set(['facet', 'filter'])],\n                ['ctype',    new Set(['facet', 'eumap'])],\n                ['tadiraha', new Set(['facet', 'ctype'])],\n                ['tadiraho', new Set(['facet', 'tadiraha'])],\n                ['tadiraht', new Set(['facet', 'tadiraho'])],\n                ['share',    new Set(['facet', 'list'])],\n            ])],\n            ['wire', new Map([\n                ['item',     new Set(['list'])],\n                ['facet',    new Set(['filter', 'eumap', 'ctype', 'tadiraha', 'tadiraho', 'tadiraht'])],\n                ['filter',   new Set(['list'])],\n                ['eumap',    new Set(['list'])],\n                ['ctype',    new Set(['list'])],\n                ['tadiraha', new Set(['list'])],\n                ['tadiraho', new Set(['list'])],\n                ['tadiraht', new Set(['list'])],\n            ])],\n            ['work', new Map([\n                ['facet',    new Set(['list', 'filter', 'eumap', 'ctype', 'tadiraha', 'tadiraho', 'tadiraht'])],\n                ['item',     new Set(['facet'])],\n            ])],\n        ]);\n    }\n    resolveTiming() {\n        /* the time constraints must form a directed acyclic graph.\n         * If that is the case, we need a linear order in which we can make the promises\n         * This function will calculate that order (of course, several orders are possible)\n         * Algorithm:\n         *\n         * A: make a graph of all tasks, a task is the combination of a component with a stage.\n         *\n         * B: compute sets of nodes that have a longest predecessor path of fixed length n\n         *\n         * 1. determine all tasks without predecessors, this is S0                                                (max length of predecessor chain = 0)\n         * 2. determine all tasks with all predecessors in S0, this is S1                                             (max length of predecessor chain = 1)\n         * 3. determine all tasks with: all predecessors in S0 or S1, at least one predecessor in S1, this is S2  (max length of predecessor chain = 2)\n         * ...\n         * n+1. determine all tasks with: all predecessors in S0, S1, ..., Sn, at least ione predecessor in Sn\n         *\n         * C: \n         * Prove theorem 1: Sn = {all nodes with longest chain of predecessors has length n}.\n         * Prove theorem 2: all nodes outside union of all Sn: they are part of a cycle.\n         *\n         * D: \n         * The required order is: first the nodes of S0 (in any order), then those of S1, then those of S2, and so on.\n         */\n        const timing_nodes = [];\n        const timing_edges = new Map();   // keys are nodes that must come before other nodes\n        const timing_edges_inv = new Map; // keys are nodes that must come after other nodes\n        // A: collect the nodes: pairs of component name and stage\n        for (const name of this.components.keys()) {\n            for (const stage of this.stages.keys()) {\n                timing_nodes.push(`${name}-${stage}`);\n            }\n        }\n        // collect the edges (we need to store every edge both ways)\n        function addEdge(prev_node, next_node) {\n            if (!timing_edges.has(prev_node)) {\n                timing_edges.set(prev_node, new Set());\n            }\n            if (!timing_edges_inv.has(next_node)) {\n                timing_edges_inv.set(next_node, new Set());\n            }\n            timing_edges.get(prev_node).add(next_node);\n            timing_edges_inv.get(next_node).add(prev_node);\n        }\n        // 1. per component, the stages are ordered\n        for (const [next_stage, prev_stage] of this.stages_prev) {\n            for (const name of this.components.keys()) {\n                addEdge(`${name}-${prev_stage}`, `${name}-${next_stage}`);\n            }\n        }\n        // 2. add the specific time constraints\n        for (const [stage, nexts] of this.before) {\n            for (const [next_name, prevs] of nexts) {\n                if (this.ignore.has(next_name)) {continue}\n                for (const prev_name of prevs.keys()) {\n                    if (this.ignore.has(prev_name)) {continue}\n                    addEdge(`${prev_name}-${stage}`, `${next_name}-${stage}`);\n                }\n            }\n        }\n        // B: compute the Sn (in subset)\n        let n = 0;\n        const subset = [];\n        const visited = new Set(); // collect all nodes that end up in an Sn\n        while (n <= timing_nodes.length) {\n            subset.push(new Set());\n            if (n == 0) {                                                // first round\n                for (const node of timing_nodes) {                         // select all nodes without prev_nodes\n                    if (!timing_edges_inv.has(node)) {\n                        subset[n].add(node);                             // and store them in subset[0]              \n                    }\n                }\n            }\n            else {\n                for (const prev_node of visited) {                          // start with prev_nodes in visited\n                    if (timing_edges.has(prev_node)) {                    // and consider their next_nodes\n                        for (const next_node of timing_edges.get(prev_node)) {\n                            if (!visited.has(next_node)) {                // but only if the next_node is not yet visited\n                                let good = true;\n                                for (const other_prev_node of timing_edges_inv.get(next_node)) {// consider the other prev nodes of the next nodes\n                                    if (!visited.has(other_prev_node)) {  // and require that they have been visited already\n                                        good = false;\n                                        break;\n                                    }\n                                } \n                                if (good) {\n                                    subset[n].add(next_node);             // if all is well, we add next_node to subset[n]\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (subset[n].size == 0) {                      // if there are no new nodes, the next rounds will also not yield new nodes,\n                break;                                                    //  so we are done\n            }\n            for (const node of subset[n]) {                                 // after each round we add the saved next_nodes to the visited nodes\n                visited.add(node);\n            }\n            n++;\n        }\n        this._tasks = [];\n        this._timing = new Map();\n        if (visited.size != timing_nodes.length) {\n            const cycle = [];\n            for (const node of timing_nodes) {\n                if (!visited.has(node)) {\n                    cycle.push(node);\n                }\n            }\n            console.log('Circular timing constraints detected', cycle);\n        }\n        else {\n            for (const nodes of subset) {\n                for (const node of nodes) {\n                    this._tasks.push(node);\n                }\n            }\n            this._timing = timing_edges_inv;\n            console.log('Timing resolved', this._tasks);\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: ctype\n * This manages the facet \"contribution type\"\n */\n\nimport Relative from './relative';\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'tadiraha');\n    }\n}\n","/* INDIVIDUAL COMPONENT: ctype\n * This manages the facet \"contribution type\"\n */\n\nimport Relative from './relative';\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'tadiraho');\n    }\n}\n","/* INDIVIDUAL COMPONENT: ctype\n * This manages the facet \"contribution type\"\n */\n\nimport Relative from './relative';\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'tadiraht', 1, 30);\n    }\n}\n","/* VIEW STATE\n * Contains the current state, based on request variables and local storage.\n * Request variables have precedence over local storage.\n * Request variables are checked and validated and translated, translated values go to local storage.\n * There is a list of recognized request variables, with their types and allowable values.\n */\n\nimport * as g from './generic.js';\nimport Msg from './message';\n\n/* private attributes as symbols */\nconst _spec_info = Symbol()\nconst _data = Symbol()\nconst _specs = Symbol()\nconst _msg = Symbol()\n\nexport default class {\n    constructor(page) {\n        this[_spec_info] = {\n            vars: new Set([\n                'list',\n                'flt_contrib',\n                'flt_country',\n                'flt_type',\n                'flt_tadiraha',\n                'flt_tadiraho',\n                'flt_tadiraht',\n                'rel_country_contrib',\n                'rel_type_contrib',\n                'rel_tadiraha_contrib',\n                'rel_tadiraho_contrib',\n                'rel_tadiraht_contrib',\n                'item_contrib',\n                'item_country',\n                'sort', \n            ]),\n            vals: new Map([\n                ['list', new Set([\n                    'contrib',\n                    'country',\n                    'type',\n                    'tadiraha',\n                    'tadiraho',\n                    'tadiraht',\n                ])],\n                ['sort', new Map([\n                    ['v', true],\n                    ['x', false],\n                ])],\n            ]),\n            default_value: new Map([\n                ['list', 'contrib'],\n                ['sort', true],\n            ]),\n            typ: new Map([\n                ['sort', 'boolean'],\n            ]),\n            url: new Set([\n                'list',\n                'item_contrib',\n                'item_country',\n            ]),\n            showas: new Map([\n                ['list', new Map([\n                    ['contrib', {sg: 'contribution', pl: 'contributions'}],\n                    ['country', {sg: 'country', pl: 'countries'}],\n                    ['type', {sg: 'type', pl: 'types'}],\n                    ['tadiraha', {sg: 'tadirah activity', pl: 'tadirah activities'}],\n                    ['tadiraho', {sg: 'tadirah object', pl: 'tadirah objects'}],\n                    ['tadiraht', {sg: 'tadirah technique', pl: 'tadirah techniques'}],\n                ])],\n            ]),\n        };\n        this[_data] = {}; // this should be an object and not a collection such as Map. Otherwise it does not function well with popstate.\n        this[_specs] = new Map();\n        this.page = page;\n        this[_msg] = new Msg('msg_page');\n        this._compile_specs();\n        this._getInitstate();\n        this._addHistory();\n    }\n    _compile_specs() {\n        const info = this[_spec_info];\n        for (const v of info.vars) {\n            const spec = {};\n            spec.vals = info.vals.get(v) || null;\n            spec.default_value = info.default_value.get(v) || '';\n            spec.typ = info.typ.get(v) || 'string';\n            spec.url = info.url.has(v);\n            spec.showas = info.showas.get(v) || {};\n            this[_specs].set(v, spec);\n        }\n    }\n    _validate(v, val) {\n        let newval, message;\n        if (this[_specs].has(v)) {\n            const spec = this[_specs].get(v);\n            if (spec.typ == 'string') {\n                if (spec.vals) {\n                    if (spec.vals.has(val)) {\n                        newval = val;\n                    }\n                    else {\n                        newval = spec.default_value;\n                        this[_msg].msg(`illegal string value for ${v}: \"${val}\" is replaced by \"${spec.default_value}\"`, 'warning');\n                    }\n                }\n                else {\n                    newval = val;\n                }\n            }\n            else if (spec.typ == 'integer') {\n                if (/^(\\-|\\+)?[0-9]+$/.test(val)) {\n                    newval = Number(val);\n                }\n                else {\n                    newval = spec.default_value;\n                    this[_msg].msg(`not a number value for ${v}: \"${val}\" is replaced by \"${spec.default_value}\"`, 'warning');\n                }\n                if (newval < spec.limits.min) {\n                    this[_msg].msg(`number to small for ${v}: \"${newval}\" is replaced by \"${spec.limits.min}\"`, 'warning');\n                }\n                if (newval > spec.limits.max) {\n                    this[_msg].msg(`number to big for ${v}: \"${newval}\" is replaced by \"${spec.limits.max}\"`, 'warning');\n                }\n            }\n            else if (spec.typ == 'boolean') {\n                if (spec.vals.has(val)) {\n                    newval = spec.vals.get(val);\n                }\n                else {\n                    newval = spec.default_value;\n                    this[_msg].msg(`illegal boolean value for ${v}: \"${val}\" is replaced by \"${spec.default_value}\"`, 'warning');\n                }\n            }\n        }\n        else {\n            newval = null;\n            this[_msg].msg(`unknown parameter: ${v}=${val}`, 'warning');\n        }\n        return newval;\n    }\n    getVars(comprehensive) {\n        const vars = [];\n        for (const v in this[_data]) {\n            const val = this[_data][v]\n            const spec = this[_specs].get(v);\n            if (comprehensive || spec.url) {\n                if (spec.typ == 'string' || spec.typ == 'integer') {vars.push(`${v}=${val}`)}\n                else if (spec.typ == 'boolean') {\n                    for (const [valid_val, trans_val] of spec.vals) {\n                        if (trans_val == val) {vars.push(`${v}=${valid_val}`)}\n                    }\n                }\n            }\n        }\n        return vars.join('&')\n    }\n    _getInitstate() {\n        for (const [v, val] of g.request_vars) {\n            if (!(this[_specs].has(v))) {\n                this[_msg].msg(`unknown parameter: ${v}=${val}`, 'warning');\n            }\n        }\n        for (const [v, spec] of this[_specs]) {\n            let val = null;\n            if (g.request_vars.has(v)) {\n                const raw_val = g.request_vars.get(v);\n                val = this._validate(v, raw_val);\n                g.localstorage_vars.set(v, val);\n            }\n            else if (g.localstorage_vars.isSet(v)) {\n                val = g.localstorage_vars.get(v);\n            }\n            else {\n                val = spec.default_value;\n                g.localstorage_vars.set(v, val);\n            }\n            this[_data][v] = val;\n        }\n    }\n    _addHistory(title, view_url) {\n        const tit = 'DARIAH contribution tool';\n        const this_url = `${app_url}?${this.getVars(false)}`;\n        History.pushState(this[_data], tit, this_url);\n    }\n    setState(v, val) {\n        this[_data][v] = val;\n        g.localstorage_vars.set(v, val);\n        this._addHistory();\n    }\n    getState(v) {\n        return this[_data][v];\n    }\n    getValues(v) {\n        return this[_specs].get(v).vals;\n    }\n    showState(v, val, mode) {\n        let result = val;\n        const md = (mode == undefined)?'sg':mode;\n        const showas = this[_specs].get(v).showas;\n        if (showas.has(val)) {\n            result = showas.get(val)[mode];\n        }\n        return result;\n    }\n    work() {\n        return function () {\n            const state = History.getState();\n            if (state && state.data) {\n                this[_data] = state.data;\n                this.page.work();\n            }\n        }.bind(this)\n    }\n}\n"],"sourceRoot":"/source/"}