{"version":3,"sources":["node_modules/browser-pack/_prelude.js","app.min.js","components.js","control.js","ctype.js","eumap.js","facet.js","filter.js","generic.js","item.js","list.js","main.js","message.js","page.js","relative.js","share.js","skeleton.js","tadiraha.js","tadiraho.js","tadiraht.js","viewstate.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_interopRequireWildcard","newObj","key","Object","prototype","hasOwnProperty","_classCallCheck","instance","Constructor","TypeError","defineProperty","value","_slicedToArray","sliceIterator","arr","_arr","_n","_d","_e","undefined","_s","_i","Symbol","iterator","next","done","push","err","Array","isArray","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","_generic","g","_message","_message2","_stage","_msg","_ids_fetched","_class","name","specs","page","this","variants","Map","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","vr","set","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","stages","keys","st","get","Set","container","dst","state","data","related_info","related_values","implementation","specific","stage","promise","method","methodCall","bind","timing","getBefore","promises","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_step3$value","prev_name","prev_stage","prev_component","getComponent","hasVariant","$","when","apply","then","has","once","by_id","need","_deed","on","widget","show","hide","ids_to_fetch","fetch_url","url_tpl","replace","msg","postFetch","_postFetch","join","ajax","type","url","contentType","dataType","json","clear","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","msgs","m","good","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","relinfo","x","relvals","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","add","weld","getContainer","dest","_destination","prepend","destination","append","_fetch","ids_asked_for","from_str","getState","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","wire","_visibility","work","ensure","./generic.js","./message","2","_widget","_control","component","html","showState","_this","click","preventDefault","setState","_html","addClass","find","_dressup","_isActive","removeClass","3","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_relative","_relative2","_Relative","getPrototypeOf","./relative","4","_map_object","_map_container","_marker","_setvalues","_not_mapped","_this2","cc","mapc","height","width","vectorMap","map","backgroundColor","regionsSelectable","markersSelectable","regionsSelectableOne","markersSelectableOne","markerStyle","initial","fill","fill-opacity","stroke","stroke-width","stroke-opacity","hover","cursor","selected","selectedHover","regionStyle","markers","series","values","scale","normalizeFunction","attribute","min","max","regions","outdariah","indariah","onRegionTipShow","el","related_value","rvs","statistics","onMarkerTipShow","onRegionClick","related_values_index","onMarkerClick","onRegionSelected","change_state","typ","a_to_str","_unmapped_selected","onMarkerSelected","zoom_p","css","zoom_control","setFocus","result","this_state","empty","map_regions","map_markers","related_state","_step2$value","no_values","mapo","setSelectedRegions","setSelectedMarkers","total","distilled","weighted_statistics","stat","pr","Math","sqrt","setValues","marker","setv","_step4$value","related_values_all","related_values_list","latLng","sort","b","5","_stats","_enabled_facets","table","h","children","_step$value","facet_name","facet_component","expand_control","mode","that","dt","closest","hidec","morec","showc","expanded_material","condensed_material","not_expanded_material","attr","mode_undef","localstorage_vars","isSet","all_facets","each","_display","lc","info","detailcontrols","mother_list","facets","facet_comp","facet","d","v","the_false","discard","_step5$value","_facet2","this_v","_step6$value","_facet","_facet3","stats","6","_tags","_filter_control","_filter_control2","_clear_filter_control","_box","_completions_dst","_wire_mode","_distilled","_stats_dst","textf","filterc","val","autocomplete","event","ui","dstl","content","stat_prefix","statd","tgs","label","cf","flt","flt2","appendTo","source","response","_response","minLength","focus","_setClear","_setFilter","clearfc","7","_toConsumableArray","arr2","from","escapeHTML","text","chr","deselectText","document","selection","window","getSelection","removeAllRanges","selectText","containerid","range","body","createTextRange","moveToElementText","getElementById","select","_range","createRange","selectNode","addRange","toggleDetail","detail","extra","thedetail","toggle","thiscl","othercl","hasClass","compact","cutoff","size","substr","split","ar","to_str","_Request","parameter","parameters","uri","location","search","indexOf","slice","paramval","_localstorage","request_vars","initNamespaceStorage","localStorage","8","it","dest_row","types","tp","in_dariah","_r","after","9","rowstart","rowend","row","open_ids","rid","control","_set_it","10","_page","_page2","./page","11","_trash_control","_trash_control_para","_on_clear","on_clear","_hide","kind","message_text","_show","12","_viewstate","_viewstate2","_share","_share2","_ctype","_ctype2","_tadiraho","_tadiraho2","_tadiraha","_tadiraha2","_tadiraht","_tadiraht2","_eumap","_eumap2","_filter","_filter2","_list","_list2","_item","_item2","_control2","_components","_components2","_skeleton","_skeleton2","_by_id","_Skeleton","main_lists","getValues","contrib_list","empty_list","_component_specs","ignore","components","spec","child_component","dest_name","parent_component","resolveTiming","_setHeight","History","Adapter","subtract","wh","innerHeight","w","addto","prev_nodes","next_node","_timing","prev_node","_tasks","task","_task$split","_task$split2","./components","./control","./ctype","./eumap","./facet","./filter","./item","./list","./share","./skeleton","./tadiraha","./tadiraho","./tadiraht","./viewstate","13","_all_values_control","_cols","_cutoff","_shortsize","rtype","cols","shortsize","type_sg","type_pl","_preHtml","entries","raw_value","_raw_value","compact_value","last_handled","scrollTop","scrollIntoView","behavior","alignToTop","ison","all_selected","facet_cell","facet_cell2","has_related_value","_related_value","nv","_related_value2","_myStats","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_plainWeld","_myWeld","_myDressup","_mySetFacet","_setFacet","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","_step9$value","14","slink","prompt","app_url_raw","app_url_cite","getVars","app_url_rawc","pvtitle","animate","opacity","mouseleave","15","stages_prev","before","addEdge","timing_edges","timing_edges_inv","timing_nodes","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","next_stage","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","_name","nexts","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","_step14$value","next_name","prevs","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","subset","visited","node","other_prev_node","_node","cycle","_node2","console","log","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","nodes","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","_node3","16","17","18","19","_spec_info","_data","_specs","vars","vals","default_value","showas","sg","pl","_compile_specs","_getInitstate","_addHistory","newval","test","Number","limits","comprehensive","valid_val","trans_val","raw_val","_validate","title","view_url","tit","this_url","app_url","pushState"],"mappings":"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","file":"app.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);var _message=require('./message');var _message2=_interopRequireDefault(_message);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _stage=Symbol();var _msg=Symbol();var _ids_fetched=Symbol();var _class=function(){function _class(name,specs,page){_classCallCheck(this,_class);this.name=name;this.page=page;this.specs=specs;this.variants=specs.variants;this[_stage]=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.variants[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var vr=_step.value;this[_stage].set(vr,new Map);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.page.stages.keys()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var st=_step2.value;this[_stage].get(vr).set(st,true)}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}this[_msg]=new Map;this[_ids_fetched]=new Set;this.container=new Map;this.dst=new Map;this.state=this.page.state;this.data=new Map;this.related_info=new Map;this.related_values=new Map;this.implementation=new specs.specific(this)}_createClass(_class,[{key:'need',value:function need(vr,stage){var promise=this[_stage].get(vr).get(stage);return!promise.state||promise.state()=='rejected'}},{key:'_deed',value:function _deed(vr,stage,method){var methodCall=this[method].bind(this,vr);var timing=this.page.getBefore(this.name,stage);var promises=[];var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=timing[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var prev_name=_step3$value[0];var prev_stage=_step3$value[1];var prev_component=this.page.getComponent(prev_name);if(prev_component.hasVariant(vr)){promises.push(prev_component[_stage].get(vr).get(prev_stage))}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}this[_stage].get(vr).set(stage,$.when.apply($,promises).then(methodCall))}},{key:'ensure',value:function ensure(vr,stage,method){if(this.page.stages.has(stage)){var once=this.page.stages.get(stage)&&!this.specs.by_id;if(!once||this.need(vr,stage)){this._deed(vr,stage,method)}}}},{key:'hasVariant',value:function hasVariant(vr){return this.variants.has(vr)}},{key:'_visibility',value:function _visibility(vr,on){if(this.hasVariant(vr)){if(this.container.has(vr)){var widget=this.container.get(vr);if(on){widget.show()}else{widget.hide()}}}}},{key:'_fetch',value:function _fetch(vr,ids_to_fetch){var fetch_url=url_tpl.replace(/_c_/,'data').replace(/_f_/,this.specs.fetch_url+'_'+vr)+'.json';this[_msg].get(vr).msg('fetching data ...');var postFetch=this._postFetch.bind(this,vr);if(!(ids_to_fetch==undefined)){fetch_url+='?ids='+ids_to_fetch.join(',')}return $.ajax({type:'POST',url:fetch_url,contentType:'application/json; charset=utf-8',dataType:'json'}).then(function(json){postFetch(json,ids_to_fetch)})}},{key:'_postFetch',value:function _postFetch(vr,json,ids_to_fetch){this[_msg].get(vr).clear();var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=json.msgs[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var m=_step4.value;this[_msg].get(vr).msg(m)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}if(json.good){if('data'in json){this.data.set(vr,json.data)}if('relinfo'in json){var r=new Map;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=json.relinfo[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var x=_step5.value;r.set(x[0],new Set(x[1]))}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}this.related_info.set(vr,r)}if('relvals'in json){this.related_values.set(vr,new Map(json.relvals))}if(this.specs.by_id){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=ids_to_fetch[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var i=_step6.value;this[_ids_fetched].add(i)}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}}}this.implementation.weld(vr)}},{key:'_weld',value:function _weld(vr){this.dst=this.page.getContainer(this.specs.dest,this.variants);if(!this.specs.by_id){this.container.set(vr,$('#'+this.name+'_'+vr));if(this.container.get(vr).length==0){var destination=this.dst.get(vr);destination.append('<div id=\"msg_'+this.name+'_'+vr+'\"></div>');destination.append('<div id=\"'+this.name+'_'+vr+'\" class=\"component\"></div>');this.container.set(vr,$('#'+this.name+'_'+vr))}this[_msg].set(vr,new _message2.default('msg_'+this.name+'_'+vr))}else{if(!this[_msg].has(vr)){var _destination=this.dst.get(vr);_destination.prepend('<div id=\"msg_'+this.name+'_'+vr+'\"></div>');this[_msg].set(vr,new _message2.default('msg_'+this.name+'_'+vr))}}if(this.specs.fetch_url!=null){var ids_to_fetch=[];if(this.specs.by_id){var ids_asked_for=g.from_str(this.state.getState(this.specs.fetch_url+'_'+vr));var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=ids_asked_for[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var i=_step7.value;if(!this[_ids_fetched].has(i)){ids_to_fetch.push(i)}}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}if(ids_to_fetch.length!=0){return this._fetch(vr,ids_to_fetch)}}else{return this._fetch(vr)}}else{this.implementation.weld(vr)}}},{key:'_wire',value:function _wire(vr){this.implementation.wire(vr)}},{key:'_work',value:function _work(vr){this._visibility(vr,true);this.implementation.work(vr)}},{key:'weld',value:function weld(vr){if(this.hasVariant(vr)&&this.implementation.show(vr)){this.ensure(vr,'weld','_weld')}}},{key:'wire',value:function wire(vr){if(this.hasVariant(vr)&&this.implementation.show(vr)){this.ensure(vr,'wire','_wire')}}},{key:'work',value:function work(vr){if(this.hasVariant(vr)&&this.implementation.show(vr)){this.ensure(vr,'work','_work')}else{this._visibility(vr,false)}}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7,\"./message\":11}],2:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _widget=Symbol();var _control=Symbol();var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component;this[_widget]=new Map;this[_control]=new Map}_createClass(_class,[{key:'_html',value:function _html(vr){this.component.container.get(vr).html('<a class=\"control_title\" href=\"#\">'+this.component.state.showState('list',vr,'sg')+'</a> ')}},{key:'_dressup',value:function _dressup(vr){var _this=this;this[_control].get(vr).click(function(e){e.preventDefault();_this.component.state.setState('list',vr)})}},{key:'_isActive',value:function _isActive(vr){return this.component.state.getState('list')==vr}},{key:'show',value:function show(vr){return true}},{key:'weld',value:function weld(vr){this._html(vr);this[_widget].set(vr,this.component.container.get(vr));this[_widget].get(vr).addClass('control_big');this[_control].set(vr,this.component.container.get(vr).find('a'))}},{key:'wire',value:function wire(vr){this._dressup(vr)}},{key:'work',value:function work(vr){if(this._isActive(vr)){this[_control].get(vr).addClass('ison');this[_widget].get(vr).addClass('ison')}else{this[_control].get(vr).removeClass('ison');this[_widget].get(vr).removeClass('ison')}}}]);return _class}();exports.default=_class;\n\n},{}],3:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'type'))}return _class}(_relative2.default);exports.default=_class;\n\n},{\"./relative\":13}],4:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _map_object=Symbol();var _map_container=Symbol();var _marker=Symbol();var _setvalues=Symbol();var _not_mapped=Symbol();var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'country'));_this[_map_object]=new Map;_this[_map_container]=new Map;_this[_marker]=new Map;_this[_setvalues]=new Map;_this[_not_mapped]=new Set(['-','CY','KS','TR','MC','GE']);return _this}_createClass(_class,[{key:'_preHtml',value:function _preHtml(vr){return'<div id=\"map-europe_'+vr+'\" class=\"position\">\\n    <p class=\"zoom\"><a class=\"fa fa-arrows\" href=\"#\" title=\"zoom to fit all countries\"/></p>\\n</div>'}},{key:'_myDressup',value:function _myDressup(vr){var _this2=this;var that=this;var cc=this.component.container.get(vr);this[_map_container].set(vr,cc.find('#map-europe_'+vr));var mapc=this[_map_container].get(vr);var height=mapc.width()*0.6;mapc.width('100%');mapc.height(height);mapc.vectorMap({'map':'europe_mill',backgroundColor:'#ccccff',regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:'#008800','fill-opacity':0.2,stroke:'none','stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:'pointer',stroke:'#ffff44','stroke-width':1,'stroke-opacity':1},selected:{fill:'#008800','fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:'#bbbbbb','fill-opacity':1,stroke:'none','stroke-width':0,'stroke-opacity':1},hover:{cursor:'pointer',stroke:'#ffff44','stroke-width':3,'stroke-opacity':1},selected:{fill:'#dd8844','fill-opacity':1},selectedHover:{}},markers:this[_marker].get(vr),series:{markers:[{values:{},scale:[0,20],normalizeFunction:'linear',attribute:'r',min:0,max:100}],regions:[{scale:{'outdariah':'#ffffff','indariah':'#ffddbb'},attribute:'fill',values:this[_setvalues].get(vr)}]},onRegionTipShow:function(e,el,related_value){var rvs=this.statistics.get(vr);el.html(related_value+': '+(rvs.has(related_value)?rvs.get(related_value):'not in DARIAH'))}.bind(this),onMarkerTipShow:function(e,el,related_value){var rvs=this.statistics.get(vr);el.html(related_value+': '+(rvs.has(related_value)?rvs.get(related_value):'not in DARIAH'))}.bind(this),onRegionClick:function(e,related_value){if(!this.related_values_index.get(vr).has(related_value)){e.preventDefault()}}.bind(this),onMarkerClick:function(e,related_value){if(!this.related_values_index.get(vr).has(related_value)){e.preventDefault()}}.bind(this),onRegionSelected:function(e,related_value,i,selected){if(this.change_state){this.component.state.setState('rel_'+this.typ+'_'+vr,g.a_to_str(selected)+this._unmapped_selected(vr))}}.bind(this),onMarkerSelected:function(e,related_value,i,selected){if(this.change_state){this.component.state.setState('rel_'+this.typ+'_'+vr,g.a_to_str(selected)+this._unmapped_selected(vr))}}.bind(this)});var zoom_p=cc.find('p.zoom');zoom_p.css('top',height-20+'px');zoom_p.css('left','10px');var zoom_control=cc.find('p.zoom a');zoom_control.click(function(e){e.preventDefault();_this2[_map_object].get(vr).setFocus({regions:['GB','GR']})});this[_map_object].set(vr,mapc.vectorMap('get','mapObject'));this[_map_object].get(vr).setFocus({regions:['GB','GR']})}},{key:'_unmapped_selected',value:function _unmapped_selected(vr){var result=[];var this_state=g.from_str(vr,this.component.state.getState('rel_'+this.typ+'_'+vr));var empty=true;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this[_not_mapped][Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var related_value=_step.value;if(this_state.has(related_value)){result.push(related_value);empty=false}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return empty?'':','+result.join(',')}},{key:'_mySetFacet',value:function _mySetFacet(vr){this.change_state=false;var map_regions={};var map_markers={};var related_values=this.related_state.get(vr);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.component.related_values.get(vr)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var i=_step2$value[0];var related_value=_step2$value[1];if(!this[_not_mapped].has(i)&&i!=this.no_values.value){map_regions[i]=related_values.has(i);if(related_value[1]){map_markers[i]=related_values.has(i)}}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var mapo=this[_map_object].get(vr);mapo.setSelectedRegions(map_regions);mapo.setSelectedMarkers(map_markers);this.change_state=true}},{key:'_myStats',value:function _myStats(vr){var total=this.distilled.get(vr).length;if(total==0){total=1}var weighted_statistics={};var rvs=this.statistics.get(vr);var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=rvs[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var related_value=_step3$value[0];var stat=_step3$value[1];if(related_value!=this.no_values.value){var pr=100*stat/total;weighted_statistics[related_value]=total<10?pr:10*Math.sqrt(pr)}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}this[_map_object].get(vr).series.markers[0].setValues(weighted_statistics)}},{key:'_plainWeld',value:function _plainWeld(vr){}},{key:'_myWeld',value:function _myWeld(vr){this[_marker].set(vr,{});this[_setvalues].set(vr,{});var related_values=this.component.related_values.get(vr);var marker=this[_marker].get(vr);var setv=this[_setvalues].get(vr);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=related_values[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2);var i=_step4$value[0];var related_value=_step4$value[1];if(related_value[1]){this.related_values_all.get(vr).add(i);this.related_values_list.get(vr).push(i);this.related_values_index.get(vr).set(i,related_value[0]);marker[i]={latLng:[related_value[2],related_value[3]],name:related_value[0]};setv[i]='indariah'}else{setv[i]='outdariah'}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}this.related_values_list.get(vr).sort(function(a,b){return related_values.get(a)<related_values.get(b)?-1:related_values.get(a)[0]>related_values.get(b)[0]?1:0})}}]);return _class}(_relative2.default);exports.default=_class;\n\n},{\"./generic.js\":7,\"./relative\":13}],5:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _stats=Symbol();var _enabled_facets=Symbol();var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component;this[_stats]=new Map;this[_enabled_facets]=new Map;this.table=new Map;this.distilled=new Map}_createClass(_class,[{key:'_html',value:function _html(vr){var h='<p><span fct=\"all\"></span>Filtering <span id=\"fstats_'+vr+'\"></span></p>';this.component.container.get(vr).html(h)}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){var children=this.component.children;this[_enabled_facets].set(vr,new Map);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=children[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2);var facet_name=_step$value[0];var facet_component=_step$value[1];if(facet_component.hasVariant(vr)){this[_enabled_facets].get(vr).set(facet_name,facet_component)}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}this._html(vr)}},{key:'_display',value:function _display(expand_control,mode){var that=this;var dt=expand_control.closest('p');var hidec=dt.find('.hidec');var morec=dt.find('.morec');var showc=dt.find('.showc');var expanded_material=expand_control.closest('div').find('table,.flt');var condensed_material=expand_control.closest('div').find('.value_list2,.flt_compact');var not_expanded_material=expand_control.closest('div').find('.flt_not_expanded');var key='fctx_'+expand_control.closest('span').attr('fct');var mode_undef=mode==undefined;if(mode_undef){if(g.localstorage_vars.isSet(key)){mode=g.localstorage_vars.get(key)}else{mode=1}}var all_facets=key=='fctx_all';if(all_facets&&!mode_undef){expand_control.closest('div').find('div.component span[fct]').each(function(){that._display($(this),mode)})}g.localstorage_vars.set(key,mode);if(mode==0){hidec.show();morec.hide();showc.hide();if(!all_facets){not_expanded_material.show();expanded_material.hide();condensed_material.hide()}}else if(mode==1){hidec.hide();morec.show();showc.hide();if(!all_facets){not_expanded_material.show();expanded_material.hide();condensed_material.show()}}else{hidec.hide();morec.hide();showc.show();if(!all_facets){not_expanded_material.hide();expanded_material.show();condensed_material.hide()}}}},{key:'wire',value:function wire(vr){var that=this;var cc=this.component.container.get(vr);var lc=this.component.page.getComponent('list').container.get(vr);this[_stats].set(vr,cc.find('#fstats_'+vr));this.table.set(vr,lc.find('#table_'+vr));var info=' details; click to change level of details';var detailcontrols='<a class=\"showc fa fa-fw fa-list-ul\" href=\"#\" title=\"full'+info+'\"></a><a class=\"morec fa fa-fw fa-align-left\" href=\"#\" title=\"condensed'+info+'\"></a><a class=\"hidec fa fa-fw fa-minus\" href=\"#\" title=\"hidden'+info+'\"></a>';cc.addClass('facet');cc.find('span[fct]').each(function(){$(this).html(detailcontrols+'&nbsp');that._display($(this))});cc.find('.hidec').click(function(e){e.preventDefault();that._display($(this),1)});cc.find('.morec').click(function(e){e.preventDefault();that._display($(this),2)});cc.find('.showc').click(function(e){e.preventDefault();that._display($(this),0)})}},{key:'work',value:function work(vr){this.table.get(vr).find('tr[rid],tr[iid]').hide();var mother_list=this.component.page.getComponent('list');var data=mother_list.data.get(vr);var facets=this[_enabled_facets].get(vr);this.distilled.set(vr,[]);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=facets[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var facet_name=_step2$value[0];var facet_comp=_step2$value[1];var facet=facet_comp.implementation;facet.distilled.set(vr,[])}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=data[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var d=_step3.value;var v=true;var the_false=null;var discard=false;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=facets[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var _step5$value=_slicedToArray(_step5.value,2);var facet_name=_step5$value[0];var facet_comp=_step5$value[1];if(!discard){var _facet2=facet_comp.implementation;var this_v=_facet2.v(vr,d[0]);if(!this_v){v=false;if(the_false==null){the_false=_facet2}else{discard=true}}}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}if(!discard){if(v){this.distilled.get(vr).push(d[0]);this.table.get(vr).find('tr[rid=\"'+d[0]+'\"],tr[iid=\"'+d[0]+'\"]').show()}if(the_false!=null){the_false.distilled.get(vr).push(d[0])}else{var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=facets[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _step6$value=_slicedToArray(_step6.value,2);var facet_name=_step6$value[0];var facet_comp=_step6$value[1];var _facet=facet_comp.implementation;_facet.distilled.get(vr).push(d[0])}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}}}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=facets[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2);var facet_name=_step4$value[0];var facet_comp=_step4$value[1];var _facet3=facet_comp.implementation;_facet3.stats(vr)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}this[_stats].get(vr).html(this.distilled.get(vr).length+' of '+data.length)}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],6:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _tags=Symbol();var _filter_control=Symbol();var _filter_control2=Symbol();var _clear_filter_control=Symbol();var _box=Symbol();var _completions_dst=Symbol();var _wire_mode=Symbol();var _distilled=Symbol();var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component;this[_tags]=new Map;this[_filter_control]=new Map;this[_filter_control2]=new Map;this[_box]=new Map;this[_completions_dst]=new Map;this._stats_dst=new Map;this[_clear_filter_control]=new Map;this[_wire_mode]=new Map;this[_distilled]=new Map;this.distilled=new Map}_createClass(_class,[{key:'_html',value:function _html(vr){var h='\\n<div>\\n    <p class=\"dctrl\"><span fct=\"'+this.component.name+'-'+vr+'\"></span> By full text search\\n        <a href=\"#\" title=\"modify full text filter\" id=\"flt2_'+vr+'\" class=\"flt_not_expanded facet_single ison flt_pat\"></a>\\n        <a href=\"#\" class=\"control_med fa fa-close filtc\" id=\"clearf_'+vr+'\"></a>\\n    </p>\\n    <div id=\"fltw_'+vr+'\">\\n        <p id=\"fbox_'+vr+'\" class=\"flt control_med fbox ui-widget\">\\n            <input id=\"flt_'+vr+'\" class=\"flt flt_pat\"/>\\n            <span fbox class=\"stats\" id=\"stats_'+vr+'\"></span>\\n        </p>\\n        <div id=\"autoc_'+vr+'\" style=\"display: none;\">here '+vr+'</div>\\n    </div>\\n</div>';this.component.container.get(vr).html(h)}},{key:'_setFilter',value:function _setFilter(vr){var textf=this.component.state.getState('flt_'+vr);var filterc=this[_filter_control].get(vr);this[_filter_control2].get(vr).html(textf);filterc.val(textf);filterc.autocomplete('search',textf)}},{key:'_response',value:function _response(vr){return function(event,ui){this[_distilled].set(vr,{});var dstl=this[_distilled].get(vr);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=ui.content[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var u=_step.value;dstl[u.value]=1}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}if(!this[_wire_mode].get(vr)){var textf=this[_filter_control].get(vr).val();this.component.state.setState('flt_'+vr,textf)}}.bind(this)}},{key:'_setClear',value:function _setClear(vr){var _this=this;this[_clear_filter_control].get(vr).click(function(e){e.preventDefault();var filterc=_this[_filter_control].get(vr);filterc.val('');filterc.autocomplete('search','')})}},{key:'stats',value:function stats(vr){var stat_prefix=void 0;var statd=this._stats_dst.get(vr);if(this[_filter_control].get(vr).val()==''){stat_prefix='';statd.removeClass('ison')}else{stat_prefix=this.facet.distilled.get(vr).length+' of ';statd.addClass('ison')}statd.html(''+stat_prefix+this.distilled.get(vr).length)}},{key:'v',value:function v(vr,i){return i in this[_distilled].get(vr)}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){this._html(vr)}},{key:'wire',value:function wire(vr){if(!this.facet){this.facet=this.component.page.getComponent('facet').implementation}var data=this.component.page.getComponent('list').data.get(vr);this[_tags].set(vr,[]);var tgs=this[_tags].get(vr);var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=data[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var d=_step2.value;tgs.push({label:d[1],value:''+d[0]})}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}this[_distilled].set(vr,{});this.distilled.set(vr,[]);var cc=this.component.container.get(vr);var cf=cc.find('#fltw_'+vr);var flt=$('#flt_'+vr);this[_filter_control].set(vr,flt);var flt2=$('#flt2_'+vr);this[_filter_control2].set(vr,flt2);this[_box].set(vr,cf.find('#fbox_'+vr));this[_completions_dst].set(vr,cf.find('#autoc_'+vr));this._stats_dst.set(vr,cf.find('#stats_'+vr));this[_clear_filter_control].set(vr,cc.find('#clearf_'+vr));this[_filter_control].get(vr).autocomplete({appendTo:this[_completions_dst].get(vr),source:this[_tags].get(vr),response:this._response(vr),minLength:0});flt2.click(function(e){e.preventDefault();$(this).closest('div').find('.morec').click();flt[0].focus()});this[_wire_mode].set(vr,true);this._setClear(vr);this._setFilter(vr);this[_wire_mode].set(vr,false)}},{key:'work',value:function work(vr){var textf=this.component.state.getState('flt_'+vr);var clearfc=this[_clear_filter_control].get(vr);if(textf==''){this[_box].get(vr).removeClass('ison');clearfc.hide()}else{this[_box].get(vr).addClass('ison');clearfc.show()}this[_filter_control2].get(vr).html(textf)}}]);return _class}();exports.default=_class;\n\n},{}],7:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.escapeHTML=escapeHTML;exports.deselectText=deselectText;exports.selectText=selectText;exports.toggleDetail=toggleDetail;exports.compact=compact;exports.from_str=from_str;exports.a_to_str=a_to_str;exports.to_str=to_str;function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var chr=new Map([['&','&amp;'],['<','&lt;'],['>','&gt;']]);function escapeHTML(text){return text.replace(/[&<>]/g,function(a){return chr.get(a)||a})};var _Request={parameter:function parameter(name){return this.parameters().get(name)},parameters:function parameters(){var result=new Map;var uri=window.location.search;if(uri.indexOf('?')===-1){return result}var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=uri.slice(1).split('&')[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var paramval=_step.value;result.set.apply(result,_toConsumableArray(paramval.split('=')))}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return result}};var request_vars=exports.request_vars=_Request.parameters();var _localstorage=$.initNamespaceStorage('req');var localstorage_vars=exports.localstorage_vars=_localstorage.localStorage;function deselectText(){if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}};function selectText(containerid){deselectText();if(document.selection){var range=document.body.createTextRange();range.moveToElementText(document.getElementById(containerid));range.select()}else if(window.getSelection){var _range=document.createRange();_range.selectNode(document.getElementById(containerid));window.getSelection().addRange(_range)}};function toggleDetail(widget,detail,extra){var thedetail=detail==undefined?widget.closest('div').find('.detail'):detail;thedetail.toggle();if(extra!=undefined){extra(widget)}var thiscl=void 0,othercl=void 0;if(widget.hasClass('fa-chevron-right')){thiscl='fa-chevron-right';othercl='fa-chevron-down'}else{thiscl='fa-chevron-down';othercl='fa-chevron-right'}widget.removeClass(thiscl);widget.addClass(othercl)};function compact(cutoff,size,text){return text.length>cutoff?text.replace(/[^ -]+/g,function(x){return x.substr(0,size)}):text};function from_str(st){return st!==null&&st!=undefined&&st!=''?new Set(st.split(',')):new Set};function a_to_str(ar){return ar.join(',')};function to_str(set){return Array.from(set).join(',')};\n\n},{}],8:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component}_createClass(_class,[{key:'_html',value:function _html(vr,it){var destination=this.component.dst.get(vr);var dest_row=destination.find('tr[rid=\"'+it[0]+'\"]');var h='<tr iid=\"'+it[0]+'\">';if(vr=='contrib'){var types=[];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=it[5][Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var tp=_step.value;types.push('<a href=\"#\" tid=\"'+tp[0]+'\">'+tp[1]+'</a>')}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}h+='\\n<td colspan=\"2\">\\n<b>Contact person:</b> '+it[2]+'<br/>\\n<b>Country:</b> '+it[3]+' = '+it[4]+'<br/>\\n<b>Types:</b> '+types.join(', ')+'</br>\\n</td>\\n'}else if(vr=='country'){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.component.data.get(vr)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var r=_step2.value;in_dariah=r[3]==1?'dariah':'';h+='<td class=\"country_code\">'+r[1]+'<td><td class=\"country_name\">'+r[2]+'<td><td class=\"in_dariah\">'+in_dariah+'</td><td class=\"latlng\">'+r[4]+'</td><td class=\"latlng\">'+r[5]+'</td>'}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}else if(vr=='type'||vr=='tadiraha'||vr=='tadiraho'||vr=='tadiraht'){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.component.data.get(vr)[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _r=_step3.value;h+='<td class=\"value\">'+_r[1]+'<td>'}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}h+='</tr>';dest_row.after(h)}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this.component.data.get(vr)[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var it=_step4.value;this._html(vr,it)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}},{key:'wire',value:function wire(vr){}},{key:'work',value:function work(vr){}}]);return _class}();exports.default=_class;\n\n},{}],9:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component}_createClass(_class,[{key:'_html',value:function _html(vr){var h='';h+='<table id=\"table_'+vr+'\">';var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.component.data.get(vr)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var r=_step.value;var rowstart='<tr rid=\"'+r[0]+'\"><td><a class=\"showc fa fa-fw fa-list-ul\" href=\"#\" title=\"hide fields\"></a><a class=\"hidec fa fa-fw fa-minus\" href=\"#\" title=\"show fields\"></a></td>';var rowend='</tr>';if(vr=='contrib'){h+=rowstart+'<td><a href=\"#\" class=\"fa fa-fw fa-minus\"></a>'+r[1]+'</td>'+rowend}else if(vr=='country'){var in_dariah=r[3]==1?'dariah':'';h+=rowstart+'<td class=\"country_code\">'+r[1]+'<td><td class=\"country_name\">'+r[2]+'<td><td class=\"in_dariah\">'+in_dariah+'</td><td class=\"latlng\">'+r[4]+'</td><td class=\"latlng\">'+r[5]+'</td>'+rowend}else if(vr=='type'||vr=='tadiraha'||vr=='tadiraho'||vr=='tadiraht'){h+=rowstart+'<td class=\"value\">'+r[1]+'<td>'+rowend}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}h+='</table>';this.component.container.get(vr).html(h)}},{key:'_display',value:function _display(row,vr,open_ids){var that=this;var hidec=row.find('.hidec');var showc=row.find('.showc');var rid=row.attr('rid');var detail=this.component.container.get(vr).find('tr[iid=\"'+rid+'\"]');if(open_ids.has(rid)){hidec.show();showc.hide();if(detail.length){detail.show()}}else{hidec.hide();showc.hide();if(detail.length){detail.hide()}}}},{key:'_set_it',value:function _set_it(control,vr,state){var open_ids=g.from_str(this.state.getState(key));var rid=control.closest('tr').attr('rid');if(state){open_ids.add(rid)}else{open_ids.delete(rid)}this.state.setState(key,g.to_str(open_ids))}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){this._html(vr)}},{key:'wire',value:function wire(vr){var that=this;var cc=this.component.container.get(vr);var key=this.component.name+'_'+vr;cc.find('.hidec').click(function(e){e.preventDefault();that._set_it($(this),vr,true)});cc.find('.showc').click(function(e){e.preventDefault();that._set_it($(this),vr,false)})}},{key:'work',value:function work(vr){var that=this;var key=this.component.name+'_'+vr;var cc=this.component.container.get(vr);var open_ids=g.from_str(this.component.state.getState(this.component.name+'_'+vr));cc.find('tr[rid]').each(function(){that._display($(this),vr,open_ids)})}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],10:[function(require,module,exports){\n'use strict';var _page=require('./page');var _page2=_interopRequireDefault(_page);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}$(function(){new _page2.default().work()});\n\n},{\"./page\":12}],11:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _destination=Symbol();var _trash_control=Symbol();var _trash_control_para=Symbol();var _on_clear=Symbol();var _class=function(){function _class(destination,on_clear){var _this=this;_classCallCheck(this,_class);this[_destination]=$('#'+destination);this[_trash_control]=$('#trash_'+destination);this[_trash_control_para]=this[_trash_control].closest('p');this[_trash_control].click(function(e){e.preventDefault();_this.clear()});this._hide();this[_on_clear]=on_clear}_createClass(_class,[{key:'_hide',value:function _hide(){this[_destination].hide();this[_trash_control_para].hide()}},{key:'_show',value:function _show(){this[_destination].show();if(this[_destination].html()!=''){this[_trash_control_para].show()}}},{key:'clear',value:function clear(){this[_destination].html('');if(this[_on_clear]!=undefined){this[_on_clear]()}this._hide()}},{key:'msg',value:function msg(text,kind){if(kind==undefined){kind='info'}var message_text=this[_destination].html();this[_destination].html(message_text+'<p class=\"'+kind+'\">'+text+'</p>');this._show()}}]);return _class}();exports.default=_class;\n\n},{}],12:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);var _viewstate=require('./viewstate');var _viewstate2=_interopRequireDefault(_viewstate);var _share=require('./share');var _share2=_interopRequireDefault(_share);var _ctype=require('./ctype');var _ctype2=_interopRequireDefault(_ctype);var _tadiraho=require('./tadiraho');var _tadiraho2=_interopRequireDefault(_tadiraho);var _tadiraha=require('./tadiraha');var _tadiraha2=_interopRequireDefault(_tadiraha);var _tadiraht=require('./tadiraht');var _tadiraht2=_interopRequireDefault(_tadiraht);var _eumap=require('./eumap');var _eumap2=_interopRequireDefault(_eumap);var _filter=require('./filter');var _filter2=_interopRequireDefault(_filter);var _facet=require('./facet');var _facet2=_interopRequireDefault(_facet);var _list=require('./list');var _list2=_interopRequireDefault(_list);var _item=require('./item');var _item2=_interopRequireDefault(_item);var _control=require('./control');var _control2=_interopRequireDefault(_control);var _components=require('./components');var _components2=_interopRequireDefault(_components);var _skeleton=require('./skeleton');var _skeleton2=_interopRequireDefault(_skeleton);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _by_id=Symbol();var _class=function(_Skeleton){_inherits(_class,_Skeleton);function _class(){_classCallCheck(this,_class);var _this=_possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this));_this.name='page';_this.state=new _viewstate2.default(_this);var main_lists=_this.state.getValues('list');var contrib_list=new Set(['contrib']);var empty_list=new Set(['']);_this._component_specs=new Map([['share',{dest:'body',variants:empty_list,fetch_url:null,specific:_share2.default}],['control',{dest:'left',variants:main_lists,fetch_url:null,specific:_control2.default}],['list',{dest:'middle',variants:main_lists,fetch_url:'list',specific:_list2.default}],['item',{dest:'list',variants:main_lists,fetch_url:'item',specific:_item2.default}],['facet',{dest:'control',variants:main_lists,fetch_url:null,specific:_facet2.default}],['filter',{dest:'facet',variants:main_lists,fetch_url:null,specific:_filter2.default}],['eumap',{dest:'facet',variants:contrib_list,fetch_url:'country',specific:_eumap2.default}],['ctype',{dest:'facet',variants:contrib_list,fetch_url:'type',specific:_ctype2.default}],['tadiraha',{dest:'facet',variants:contrib_list,fetch_url:'tadiraha',specific:_tadiraha2.default}],['tadiraho',{dest:'facet',variants:contrib_list,fetch_url:'tadiraho',specific:_tadiraho2.default}],['tadiraht',{dest:'facet',variants:contrib_list,fetch_url:'tadiraht',specific:_tadiraht2.default}]]),_this[_by_id]=new Set(['item']),_this.ignore=new Set([]),_this.components=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=_this._component_specs[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2);var name=_step$value[0];var spec=_step$value[1];if(_this.ignore.has(name)){continue}spec.by_id=_this[_by_id].has(name);var component=new _components2.default(name,spec,_this);component.children=new Map;_this.components.set(name,component)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=_this.components[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var name=_step2$value[0];var child_component=_step2$value[1];var dest_name=_this._component_specs.get(name).dest;if(_this.components.has(dest_name)){var parent_component=_this.components.get(dest_name);parent_component.children.set(name,child_component)}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}_this.resolveTiming();_this._setHeight(80);History.Adapter.bind(window,'statechange',_this.state.work());return _this}_createClass(_class,[{key:'_setHeight',value:function _setHeight(subtract){var wh=window.innerHeight-subtract+'px';var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=new Set(['middle','left','right'])[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var w=_step3.value;$('#'+w).css('height',wh)}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}},{key:'getComponent',value:function getComponent(name){return this.components.get(name)}},{key:'getContainer',value:function getContainer(name,variants){if(this.components.has(name)){return this.components.get(name).container}else{var container=new Map;var addto=name=='body'?$('body'):$('#'+name);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=variants[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var vr=_step4.value;container.set(vr,addto)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}return container}}},{key:'getBefore',value:function getBefore(name,stage){var prev_nodes=[];var next_node=name+'-'+stage;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=(this._timing.get(next_node)||new Set)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var prev_node=_step5.value;prev_nodes.push(prev_node.split('-'))}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}return prev_nodes}},{key:'work',value:function work(){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=this._tasks[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var task=_step6.value;var _task$split=task.split('-');var _task$split2=_slicedToArray(_task$split,2);var name=_task$split2[0];var stage=_task$split2[1];var component=this.getComponent(name);var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=component.variants[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var vr=_step7.value;component[stage](vr)}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}}}]);return _class}(_skeleton2.default);exports.default=_class;\n\n},{\"./components\":1,\"./control\":2,\"./ctype\":3,\"./eumap\":4,\"./facet\":5,\"./filter\":6,\"./generic.js\":7,\"./item\":8,\"./list\":9,\"./share\":14,\"./skeleton\":15,\"./tadiraha\":16,\"./tadiraho\":17,\"./tadiraht\":18,\"./viewstate\":19}],13:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _list=Symbol();var _list2=Symbol();var _all_values_control=Symbol();var _cols=Symbol();var _cutoff=Symbol();var _shortsize=Symbol();var _class=function(){function _class(component,rtype,cols,cutoff,shortsize){_classCallCheck(this,_class);this.component=component;this.distilled=new Map;this[_list]=new Map;this[_list2]=new Map;this.related_state=new Map;this[_all_values_control]=new Map;this.statistics=new Map;this.related_values_list=new Map;this.related_values_index=new Map;this.related_values_all=new Map;this.no_values={value:'-',name:'-none'};this.typ=rtype;this[_cols]=cols||2;this[_cutoff]=cutoff||14;this[_shortsize]=shortsize||6}_createClass(_class,[{key:'_html',value:function _html(vr){var type_sg=this.component.state.showState('list',this.typ,'sg');var type_pl=this.component.state.showState('list',this.typ,'pl');var h='';h+=this._preHtml(vr);h+='\\n<div>\\n    <p class=\"dctrl\"><span fct=\"'+this.component.name+'-'+vr+'\"></span> By '+type_sg+'</p>\\n    <p class=\"all\"><span rv=\"_all\" class=\"stats\"></span> <a rv=\"_all\" href=\"#\" class=\"facet_single_all\">all '+type_pl+'</a></p>\\n    <table class=\"value_list\" id=\"list-'+this.typ+'-vals_'+vr+'\">\\n        <tr>\\n';var ar=this.related_values_list.get(vr);var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=ar.entries()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var _step$value=_slicedToArray(_step.value,2);var i=_step$value[0];var related_value=_step$value[1];if(i%this[_cols]==0&&i>0&&i<ar.length){h+='</tr><tr>'}var raw_value=this.related_values_index.get(vr).get(related_value);h+='\\n            <td><span rv=\"'+related_value+'\" class=\"stats\"></span></td>\\n            <td><a rv=\"'+related_value+'\" href=\"#\" class=\"facet_single\">'+g.escapeHTML(raw_value)+'</a></td>\\n            '}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}h+='\\n        </tr>\\n    </table>\\n    <p class=\"value_list2\" id=\"list2-'+this.typ+'-vals_'+vr+'\">\\n';var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=ar.entries()[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var i=_step2$value[0];var related_value=_step2$value[1];var _raw_value=this.related_values_index.get(vr).get(related_value);var compact_value=g.escapeHTML(g.compact(this[_cutoff],this[_shortsize],_raw_value));h+='<a href=\"#\" rv=\"'+related_value+'\" class=\"passive_small\" title=\"'+g.escapeHTML(_raw_value)+'\">'+compact_value+'</a> '}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}h+='\\n    </p>\\n</div>';this.component.container.get(vr).html(h)}},{key:'_dressup',value:function _dressup(vr){var cc=this.component.container.get(vr);this[_list].set(vr,cc.find('#list-'+this.typ+'-vals_'+vr));this[_list2].set(vr,cc.find('#list2-'+this.typ+'-vals_'+vr));var that=this;this[_list].get(vr).find('.facet_single').click(function(e){e.preventDefault();var related_value=$(this).attr('rv');var selected=g.from_str(that.component.state.getState('rel_'+that.typ+'_'+vr));if(selected.has(related_value)){selected.delete(related_value)}else{selected.add(related_value)}that.component.state.setState('rel_'+that.typ+'_'+vr,g.to_str(selected));cc.find('.last_handled').removeClass('last_handled');$(this).addClass('last_handled')});this[_list2].get(vr).find('.passive_small').click(function(e){e.preventDefault();var related_value=$(this).attr('rv');var selected=g.from_str(that.component.state.getState('rel_'+that.typ+'_'+vr));if(selected.has(related_value)){selected.delete(related_value)}else{selected.add(related_value)}that.component.state.setState('rel_'+that.typ+'_'+vr,g.to_str(selected));$(this).closest('div').find('.morec').click();var last_handled=that[_list].get(vr).find('a[rv=\"'+related_value+'\"]');cc.find('.last_handled').removeClass('last_handled');last_handled.addClass('last_handled');$('#left')[0].scrollTop=50;last_handled[0].scrollIntoView({behavior:'smooth',alignToTop:'true'})});this[_all_values_control].set(vr,this.component.container.get(vr).find('[rv=\"_all\"]'));this[_all_values_control].get(vr).click(function(e){e.preventDefault();var ison=$(this).hasClass('ison');if(ison){that.component.state.setState('rel_'+that.typ+'_'+vr,'')}else{that.component.state.setState('rel_'+that.typ+'_'+vr,g.to_str(that.related_values_all.get(vr)))}})}},{key:'_setFacet',value:function _setFacet(vr){var all_selected=true;var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.related_values_index.get(vr).keys()[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var related_value=_step3.value;var facet_cell=this[_list].get(vr).find('[rv=\"'+related_value+'\"]');var facet_cell2=this[_list2].get(vr).find('[rv=\"'+related_value+'\"]');if(this.related_state.get(vr).has(related_value+'')){facet_cell.addClass('ison');facet_cell2.addClass('ison')}else{facet_cell.removeClass('ison');facet_cell2.removeClass('ison');all_selected=false}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}if(all_selected){this[_all_values_control].get(vr).addClass('ison')}else{this[_all_values_control].get(vr).removeClass('ison')}}},{key:'stats',value:function stats(vr){this.statistics.set(vr,new Map);var rvs=this.statistics.get(vr);var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this.related_values_index.get(vr).keys()[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var related_value=_step4.value;rvs.set(related_value,0)}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}var related_info=this.component.related_info.get(vr);var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=this.distilled.get(vr)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var i=_step5.value;var has_related_value=false;if(related_info.has(i)){var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=related_info.get(i)[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var _related_value=_step7.value;rvs.set(_related_value,rvs.get(_related_value)+1);has_related_value=true}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}}if(!has_related_value){var nv=this.no_values.value;rvs.set(nv,rvs.get(nv)+1)}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=rvs[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var _step6$value=_slicedToArray(_step6.value,2);var _related_value2=_step6$value[0];var stat=_step6$value[1];this.component.container.get(vr).find('span[rv=\"'+_related_value2+'\"].stats').html(stat)}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}this.component.container.get(vr).find('span[rv=\"_all\"].stats').html(this.distilled.get(vr).length);this._myStats(vr)}},{key:'v',value:function v(vr,i){var related_info=this.component.related_info.get(vr);var related_state=this.related_state.get(vr);if(related_info.has(i)){var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=related_info.get(i)[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var related_value=_step8.value;if(related_state.has(related_value+'')){return true}}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}}else{if(related_state.has(this.no_values.value)){return true}}return false}},{key:'show',value:function show(vr){return this.component.state.getState('list')==vr}},{key:'weld',value:function weld(vr){this.related_values_list.set(vr,[]);this.related_values_index.set(vr,new Map);this.related_values_all.set(vr,new Set);this._plainWeld(vr);this._myWeld(vr);this.related_values_list.get(vr).push(this.no_values.value);this.related_values_index.get(vr).set(this.no_values.value,this.no_values.name);this.related_values_all.get(vr).add(this.no_values.value);this._html(vr)}},{key:'wire',value:function wire(vr){this._myDressup(vr);this._dressup(vr)}},{key:'work',value:function work(vr){this.related_state.set(vr,g.from_str(this.component.state.getState('rel_'+this.typ+'_'+vr)));this._mySetFacet(vr);this._setFacet(vr)}},{key:'_plainWeld',value:function _plainWeld(vr){var related_values=this.component.related_values.get(vr);var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=related_values[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var _step9$value=_slicedToArray(_step9.value,2);var i=_step9$value[0];var related_value=_step9$value[1];this.related_values_list.get(vr).push(i);this.related_values_index.get(vr).set(i,related_value);this.related_values_all.get(vr).add(i)}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return()}}finally{if(_didIteratorError9){throw _iteratorError9}}}this.related_values_list.get(vr).sort(function(a,b){return related_values.get(a)<related_values.get(b)?-1:related_values.get(a)>related_values.get(b)?1:0})}},{key:'_myWeld',value:function _myWeld(vr){}},{key:'_preHtml',value:function _preHtml(vr){return''}},{key:'_myDressup',value:function _myDressup(vr){}},{key:'_mySetFacet',value:function _mySetFacet(vr){}},{key:'_myStats',value:function _myStats(vr){}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],14:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _class=function(){function _class(component){_classCallCheck(this,_class);this.component=component}_createClass(_class,[{key:'show',value:function show(vr){return true}},{key:'weld',value:function weld(vr){var h='\\n<p id=\"citeh\">Cite</p>\\n<table align=\"center\">\\n    <tr>\\n        <td class=\"clip_pv clr\">\\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_md\" title=\"link to page content and appearance (markdown)\" class=\"ctrl fa fa-level-down fa-lg fa-fw\"></a>\\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_ht\" title=\"link to page content and appearance (html)\" class=\"ctrl fa fa-external-link-square fa-lg fa-fw\"></a>\\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_htc\" title=\"link to page content (html)\" class=\"ctrl fa fa-external-link fa-lg fa-fw\"></a>\\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_cn\" title=\"copy page content\" class=\"ctrl fa fa-file-text-o fa-lg fa-fw\"></a>\\n        </td>\\n    </tr>\\n    <tr>\\n        <th class=\"clip_pv\" width=\"60px\">page view</th>\\n    </tr>\\n    <tr class=\"citexpl\">\\n        <td class=\"clip_pv\"><span id=\"xc_pv\" class=\"ctrl fa fa-chevron-right fa-fw\"></span><span id=\"x_pv\" class=\"detail\">share link to this page with or without view settings.</span></td>\\n    </tr>\\n</table>\\n<p id=\"cdiagpub\"></p>\\n<p id=\"cdiagsts\"></p>\\n';this.component.container.get(vr).html(h)}},{key:'wire',value:function wire(vr){var that=this;var cc=this.component.container.get(vr);var slink=$('#self_link');slink.hide();cc.addClass('socialdrawer');cc.find('.detail').hide();cc.find('#clip_pv_md,#clip_pv_ht,#clip_pv_htc,#clip_pv_nl').click(function(e){e.preventDefault();window.prompt('Press <Cmd-C> and then <Enter> to copy link on clipboard',$(this).attr('lnk'))});cc.find('#clip_pv_cn').click(function(e){e.preventDefault();var containerid='middle';var app_url_raw=app_url_cite+that.component.state.getVars(true);slink.show();slink.attr('href',app_url_raw);g.selectText(containerid)});cc.find('#xc_pv').click(function(e){e.preventDefault();g.toggleDetail($(this),$('#x_pv'))});cc.click(function(e){e.preventDefault();var app_url_raw=app_url_cite+that.component.state.getVars(true);var app_url_rawc=app_url_cite+that.component.state.getVars(false);$('#citeh').hide();$('#cdiagpub').html('');$('#cdiagsts').html('');$('.clip_pv.clr,#cdiagpub,#cdiagsts').removeClass('error warning good special');var pvtitle=g.escapeHTML($('title').text());$('#clip_pv_md').attr('lnk','[${pvtitle}](${app_url_raw})');$('#clip_pv_ht').attr('lnk',app_url_raw);$('#clip_pv_htc').attr('lnk',app_url_rawc);$('#clip_pv_cn').attr('lnk',app_url_raw);$('#clip_pv_cn').attr('tit',pvtitle);$(this).animate({height:'100px',width:'200px',opacity:0.95},300)});cc.mouseleave(function(){slink.hide();$('#citeh').show();cc.animate({height:'20px',width:'40px',opacity:0.7},300);return false})}},{key:'work',value:function work(vr){}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7}],15:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _class=function(){function _class(){_classCallCheck(this,_class);this.stages=new Map([['weld',true],['wire',true],['work',false]]);this.stages_prev=new Map([['wire','weld'],['work','wire']]);this.before=new Map([['weld',new Map([['item',new Set(['list'])],['facet',new Set(['control','list'])],['filter',new Set(['facet'])],['eumap',new Set(['facet','filter'])],['ctype',new Set(['facet','eumap'])],['tadiraha',new Set(['facet','ctype'])],['tadiraho',new Set(['facet','tadiraha'])],['tadiraht',new Set(['facet','tadiraho'])],['share',new Set(['facet','list'])]])],['wire',new Map([['item',new Set(['list'])],['facet',new Set(['filter','eumap','ctype','tadiraha','tadiraho','tadiraht'])],['filter',new Set(['list'])],['eumap',new Set(['list'])],['ctype',new Set(['list'])],['tadiraha',new Set(['list'])],['tadiraho',new Set(['list'])],['tadiraht',new Set(['list'])]])],['work',new Map([['facet',new Set(['filter','eumap','ctype','tadiraha','tadiraho','tadiraht'])]])]])}_createClass(_class,[{key:'resolveTiming',value:function resolveTiming(){var timing_nodes=[];var timing_edges=new Map;var timing_edges_inv=new Map;var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=this.components.keys()[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var name=_step.value;var _iteratorNormalCompletion12=true;var _didIteratorError12=false;var _iteratorError12=undefined;try{for(var _iterator12=this.stages.keys()[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=true){var stage=_step12.value;timing_nodes.push(name+'-'+stage)}}catch(err){_didIteratorError12=true;_iteratorError12=err}finally{try{if(!_iteratorNormalCompletion12&&_iterator12.return){_iterator12.return()}}finally{if(_didIteratorError12){throw _iteratorError12}}}}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}function addEdge(prev_node,next_node){if(!timing_edges.has(prev_node)){timing_edges.set(prev_node,new Set)}if(!timing_edges_inv.has(next_node)){timing_edges_inv.set(next_node,new Set)}timing_edges.get(prev_node).add(next_node);timing_edges_inv.get(next_node).add(prev_node)}var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=this.stages_prev[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var next_stage=_step2$value[0];var prev_stage=_step2$value[1];var _iteratorNormalCompletion13=true;var _didIteratorError13=false;var _iteratorError13=undefined;try{for(var _iterator13=this.components.keys()[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=true){var _name=_step13.value;addEdge(_name+'-'+prev_stage,_name+'-'+next_stage)}}catch(err){_didIteratorError13=true;_iteratorError13=err}finally{try{if(!_iteratorNormalCompletion13&&_iterator13.return){_iterator13.return()}}finally{if(_didIteratorError13){throw _iteratorError13}}}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=this.before[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var _stage=_step3$value[0];var nexts=_step3$value[1];var _iteratorNormalCompletion14=true;var _didIteratorError14=false;var _iteratorError14=undefined;try{for(var _iterator14=nexts[Symbol.iterator](),_step14;!(_iteratorNormalCompletion14=(_step14=_iterator14.next()).done);_iteratorNormalCompletion14=true){var _step14$value=_slicedToArray(_step14.value,2);var next_name=_step14$value[0];var prevs=_step14$value[1];if(this.ignore.has(next_name)){continue}var _iteratorNormalCompletion15=true;var _didIteratorError15=false;var _iteratorError15=undefined;try{for(var _iterator15=prevs.keys()[Symbol.iterator](),_step15;!(_iteratorNormalCompletion15=(_step15=_iterator15.next()).done);_iteratorNormalCompletion15=true){var prev_name=_step15.value;if(this.ignore.has(prev_name)){continue}addEdge(prev_name+'-'+_stage,next_name+'-'+_stage)}}catch(err){_didIteratorError15=true;_iteratorError15=err}finally{try{if(!_iteratorNormalCompletion15&&_iterator15.return){_iterator15.return()}}finally{if(_didIteratorError15){throw _iteratorError15}}}}}catch(err){_didIteratorError14=true;_iteratorError14=err}finally{try{if(!_iteratorNormalCompletion14&&_iterator14.return){_iterator14.return()}}finally{if(_didIteratorError14){throw _iteratorError14}}}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}var n=0;var subset=[];var visited=new Set;while(n<=timing_nodes.length){subset.push(new Set);if(n==0){var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=timing_nodes[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var node=_step4.value;if(!timing_edges_inv.has(node)){subset[n].add(node)}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}else{var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=visited[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var prev_node=_step5.value;if(timing_edges.has(prev_node)){var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=timing_edges.get(prev_node)[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var next_node=_step6.value;if(!visited.has(next_node)){var good=true;var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=timing_edges_inv.get(next_node)[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var other_prev_node=_step7.value;if(!visited.has(other_prev_node)){good=false;break}}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}if(good){subset[n].add(next_node)}}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}}}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}}if(subset[n].size==0){break}var _iteratorNormalCompletion8=true;var _didIteratorError8=false;var _iteratorError8=undefined;try{for(var _iterator8=subset[n][Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=true){var _node=_step8.value;visited.add(_node)}}catch(err){_didIteratorError8=true;_iteratorError8=err}finally{try{if(!_iteratorNormalCompletion8&&_iterator8.return){_iterator8.return()}}finally{if(_didIteratorError8){throw _iteratorError8}}}n++}this._tasks=[];this._timing=new Map;if(visited.size!=timing_nodes.length){var cycle=[];var _iteratorNormalCompletion9=true;var _didIteratorError9=false;var _iteratorError9=undefined;try{for(var _iterator9=timing_nodes[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=true){var _node2=_step9.value;if(!visited.has(_node2)){cycle.push(_node2)}}}catch(err){_didIteratorError9=true;_iteratorError9=err}finally{try{if(!_iteratorNormalCompletion9&&_iterator9.return){_iterator9.return()}}finally{if(_didIteratorError9){throw _iteratorError9}}}console.log('Circular timing constraints detected',cycle)}else{var _iteratorNormalCompletion10=true;var _didIteratorError10=false;var _iteratorError10=undefined;try{for(var _iterator10=subset[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=true){var nodes=_step10.value;var _iteratorNormalCompletion11=true;var _didIteratorError11=false;var _iteratorError11=undefined;try{for(var _iterator11=nodes[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=true){var _node3=_step11.value;this._tasks.push(_node3)}}catch(err){_didIteratorError11=true;_iteratorError11=err}finally{try{if(!_iteratorNormalCompletion11&&_iterator11.return){_iterator11.return()}}finally{if(_didIteratorError11){throw _iteratorError11}}}}}catch(err){_didIteratorError10=true;_iteratorError10=err}finally{try{if(!_iteratorNormalCompletion10&&_iterator10.return){_iterator10.return()}}finally{if(_didIteratorError10){throw _iteratorError10}}}this._timing=timing_edges_inv;console.log('Timing resolved',this._tasks)}}}]);return _class}();exports.default=_class;\n\n},{}],16:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'tadiraha'))}return _class}(_relative2.default);exports.default=_class;\n\n},{\"./relative\":13}],17:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'tadiraho'))}return _class}(_relative2.default);exports.default=_class;\n\n},{\"./relative\":13}],18:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _relative=require('./relative');var _relative2=_interopRequireDefault(_relative);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError('this hasn\\'t been initialised - super() hasn\\'t been called')}return call&&(typeof call==='object'||typeof call==='function')?call:self}function _inherits(subClass,superClass){if(typeof superClass!=='function'&&superClass!==null){throw new TypeError('Super expression must either be null or a function, not '+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _class=function(_Relative){_inherits(_class,_Relative);function _class(component){_classCallCheck(this,_class);return _possibleConstructorReturn(this,Object.getPrototypeOf(_class).call(this,component,'tadiraht',1,30))}return _class}(_relative2.default);exports.default=_class;\n\n},{\"./relative\":13}],19:[function(require,module,exports){\n'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _slicedToArray=function(){function sliceIterator(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break}}catch(err){_d=true;_e=err}finally{try{if(!_n&&_i['return'])_i['return']()}finally{if(_d)throw _e}}return _arr}return function(arr,i){if(Array.isArray(arr)){return arr}else if(Symbol.iterator in Object(arr)){return sliceIterator(arr,i)}else{throw new TypeError('Invalid attempt to destructure non-iterable instance')}}}();var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if('value'in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _generic=require('./generic.js');var g=_interopRequireWildcard(_generic);var _message=require('./message');var _message2=_interopRequireDefault(_message);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _interopRequireWildcard(obj){if(obj&&obj.__esModule){return obj}else{var newObj={};if(obj!=null){for(var key in obj){if(Object.prototype.hasOwnProperty.call(obj,key))newObj[key]=obj[key]}}newObj.default=obj;return newObj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError('Cannot call a class as a function')}}var _spec_info=Symbol();var _data=Symbol();var _specs=Symbol();var _msg=Symbol();var _class=function(){function _class(page){_classCallCheck(this,_class);this[_spec_info]={vars:new Set(['list','flt_contrib','flt_country','flt_type','flt_tadiraha','flt_tadiraho','flt_tadiraht','rel_country_contrib','rel_type_contrib','rel_tadiraha_contrib','rel_tadiraho_contrib','rel_tadiraht_contrib','item_contrib','item_country','sort']),vals:new Map([['list',new Set(['contrib','country','type','tadiraha','tadiraho','tadiraht'])],['sort',new Map([['v',true],['x',false]])]]),default_value:new Map([['list','contrib'],['sort',true]]),typ:new Map([['sort','boolean']]),url:new Set(['list','item_contrib','item_country']),showas:new Map([['list',new Map([['contrib',{sg:'contribution',pl:'contributions'}],['country',{sg:'country',pl:'countries'}],['type',{sg:'type',pl:'types'}],['tadiraha',{sg:'tadirah activity',pl:'tadirah activities'}],['tadiraho',{sg:'tadirah object',pl:'tadirah objects'}],['tadiraht',{sg:'tadirah technique',pl:'tadirah techniques'}]])]])};this[_data]={};this[_specs]=new Map;this.page=page;this[_msg]=new _message2.default('msg_page');this._compile_specs();this._getInitstate();this._addHistory()}_createClass(_class,[{key:'_compile_specs',value:function _compile_specs(){var info=this[_spec_info];var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=info.vars[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var v=_step.value;var spec={};spec.vals=info.vals.get(v)||null;spec.default_value=info.default_value.get(v)||'';spec.typ=info.typ.get(v)||'string';spec.url=info.url.has(v);spec.showas=info.showas.get(v)||{};this[_specs].set(v,spec)}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:'_validate',value:function _validate(v,val){var newval=void 0,message=void 0;if(this[_specs].has(v)){var spec=this[_specs].get(v);if(spec.typ=='string'){if(spec.vals){if(spec.vals.has(val)){newval=val}else{newval=spec.default_value;this[_msg].msg('illegal string value for '+v+': \"'+val+'\" is replaced by \"'+spec.default_value+'\"','warning')}}else{newval=val}}else if(spec.typ=='integer'){if(/^(\\-|\\+)?[0-9]+$/.test(val)){newval=Number(val)}else{newval=spec.default_value;this[_msg].msg('not a number value for '+v+': \"'+val+'\" is replaced by \"'+spec.default_value+'\"','warning')}if(newval<spec.limits.min){this[_msg].msg('number to small for '+v+': \"'+newval+'\" is replaced by \"'+spec.limits.min+'\"','warning')}if(newval>spec.limits.max){this[_msg].msg('number to big for '+v+': \"'+newval+'\" is replaced by \"'+spec.limits.max+'\"','warning')}}else if(spec.typ=='boolean'){if(spec.vals.has(val)){newval=spec.vals.get(val)}else{newval=spec.default_value;this[_msg].msg('illegal boolean value for '+v+': \"'+val+'\" is replaced by \"'+spec.default_value+'\"','warning')}}}else{newval=null;this[_msg].msg('unknown parameter: '+v+'='+val,'warning')}return newval}},{key:'getVars',value:function getVars(comprehensive){var vars=[];for(var v in this[_data]){var val=this[_data][v];var spec=this[_specs].get(v);if(comprehensive||spec.url){if(spec.typ=='string'||spec.typ=='integer'){vars.push(v+'='+val)}else if(spec.typ=='boolean'){var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=spec.vals[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var _step2$value=_slicedToArray(_step2.value,2);var valid_val=_step2$value[0];var trans_val=_step2$value[1];if(trans_val==val){vars.push(v+'='+valid_val)}}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}}}}return vars.join('&')}},{key:'_getInitstate',value:function _getInitstate(){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=g.request_vars[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var _step3$value=_slicedToArray(_step3.value,2);var v=_step3$value[0];var val=_step3$value[1];if(!this[_specs].has(v)){this[_msg].msg('unknown parameter: '+v+'='+val,'warning')}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=this[_specs][Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var _step4$value=_slicedToArray(_step4.value,2);var v=_step4$value[0];var spec=_step4$value[1];var val=null;if(g.request_vars.has(v)){var raw_val=g.request_vars.get(v);val=this._validate(v,raw_val);g.localstorage_vars.set(v,val)}else if(g.localstorage_vars.isSet(v)){val=g.localstorage_vars.get(v)}else{val=spec.default_value;g.localstorage_vars.set(v,val)}this[_data][v]=val}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}},{key:'_addHistory',value:function _addHistory(title,view_url){var tit='DARIAH contribution tool';var this_url=app_url+'?'+this.getVars(false);History.pushState(this[_data],tit,this_url)}},{key:'setState',value:function setState(v,val){this[_data][v]=val;g.localstorage_vars.set(v,val);this._addHistory()}},{key:'getState',value:function getState(v){return this[_data][v]}},{key:'getValues',value:function getValues(v){return this[_specs].get(v).vals}},{key:'showState',value:function showState(v,val,mode){var result=val;var md=mode==undefined?'sg':mode;var showas=this[_specs].get(v).showas;if(showas.has(val)){result=showas.get(val)[mode]}return result}},{key:'work',value:function work(){return function(){var state=History.getState();if(state&&state.data){this[_data]=state.data;this.page.work()}}.bind(this)}}]);return _class}();exports.default=_class;\n\n},{\"./generic.js\":7,\"./message\":11}]},{},[10])\n\n","/* COMPONENTS \n * The Page function specifies and builds a list of components\n * Every component on the page corresponds to a function (with a prototype)\n * This function is stored in a generic Component function in a field called specific.\n * Every component has a list of subcomponents. For example, the 'list' component has a subcomponent 'contrib'\n * for the list of contributions, and a subcomponent 'country' for the list of countries.\n * The generic functions of a component take care of:\n * - generating HTML container divs for the subcomponents under specified destination elements if they does not already exist\n * - showing and hiding the subcomponents, and in general, work the current state data to the subcomponents \n * - fetching the subcomponent's data from the server, if needed\n * This *specific* functionality of the components are defined in separate files.\n * Of this specific functionality, the following will be called from the generic component function:\n * - show(vr): inspect the current state and determine whether the subcomponent should be shown or hidden\n * - wire(vr): after the data has been fetched, wrap the data into the desired HTML content of the subcomponent\n *   and add the wiring (click events, change events)\n * In turn, the specific functions can access their associated generic components by this.component\n */\n\n/* GENERIC COMPONENT\n * Here is the generic functionality of each component\n */\n\nimport * as g from './generic.js';\nimport Msg from './message';\n\n/* private attributes as symbols */\nconst _stage = Symbol();\nconst _msg = Symbol();\nconst _ids_fetched = Symbol();\n\nexport default class {\n    constructor(name, specs, page) {\n        this.name = name;\n        this.page = page;\n        this.specs = specs;\n        this.variants = specs.variants;\n        this[_stage] = new Map();\n        for (const vr of this.variants) {\n            this[_stage].set(vr, new Map());\n            for (const st of this.page.stages.keys()) {\n                this[_stage].get(vr).set(st, true);\n            }\n        }\n        this[_msg] = new Map();\n        this[_ids_fetched] = new Set();\n        this.container = new Map();\n        this.dst = new Map();\n        this.state = this.page.state;\n        this.data = new Map();\n        this.related_info = new Map();\n        this.related_values = new Map();\n        this.implementation = new specs.specific(this);\n    }\n    /* need, deed, ensure are wrappers around the promise mechanism.\n     * The stage is a stage in processing the component, such as fetch, wire, work.\n     * There should be a method method which does the work and which is expected to return a promise.\n     * If it does not, we detect it, and yield a promise that is resolved with the original return value.\n     * ensure takes care that the function of an action is promised to be execute once, by registering it\n     * as a promise for that stage.\n     * If there is already a fulfilled or pending promise for that action at that stage, no new promise will be made.\n     * Ensure returns a function with no arguments. If it is called, the promise will be made.\n     * So the result of ensure can be put inside the .then() of an other promise.\n     * Now is a function that calls a function and returns the result as promise.\n     */\n    need(vr, stage) { // check whether there is a promise and whether it has been fulfilled\n        const promise = this[_stage].get(vr).get(stage)\n        return !promise.state || (promise.state() == 'rejected');\n    }\n    _deed(vr, stage, method) { // register a promise to perform the method associated with stage by entering it in the book keeping of stages\n            /* we want to pass a method call to a .then() later on.\n             * If we pass it straight, like this.method, .then() will call this function and supplies its own promise object as the this.\n             * That is not our purpose: we want to call the method with the current component object as the this.\n             * Hence we use bind() in order to supply the right this.\n             * Whoever calls this new function methodCall, will perform a true method call of method method on object that.\n             * This is crucial, otherwise all the careful time logic gets mangled, because the promises are stored in the component object.\n             */\n        const methodCall = this[method].bind(this, vr);\n        const timing = this.page.getBefore(this.name, stage);\n        const promises = [];\n        for (const [prev_name, prev_stage] of timing) {\n            const prev_component = this.page.getComponent(prev_name);\n            if (prev_component.hasVariant(vr)) {\n                promises.push(prev_component[_stage].get(vr).get(prev_stage));\n            }\n        }\n        this[_stage].get(vr).set(stage, $.when.apply($, promises).then(methodCall));\n    }\n    ensure(vr, stage, method) {\n        /* function to promise that method fun will be executed once and once only or multiple times,\n         * but only if the before actions have been completed\n         */\n        if (this.page.stages.has(stage)) {\n            /* if the component works per id, the once setting of the stage is ignored\n             * because we have to look whether we should execute that stage for new identifiers\n             */\n            const once = this.page.stages.get(stage) && !this.specs.by_id;\n            if (!once || this.need(vr, stage)) {\n                this._deed(vr, stage, method);\n            }\n        }\n    }\n    /* here are the implementations of the functions that are to be wrapped as promises\n     * They can focus on the work, may or may not yield a promise\n     */    \n    hasVariant(vr) {\n        return this.variants.has(vr);\n    }\n    _visibility(vr, on) {\n        if (this.hasVariant(vr)) {\n            if (this.container.has(vr)) {\n                const widget = this.container.get(vr);\n                if (on) {\n                    widget.show();\n                }\n                else {\n                    widget.hide();\n                }\n            }\n        }\n    }\n    _fetch(vr, ids_to_fetch) { // get the material by AJAX if needed\n        let fetch_url = url_tpl.replace(/_c_/, 'data').replace(/_f_/, `${this.specs.fetch_url}_${vr}`)+'.json';\n        this[_msg].get(vr).msg('fetching data ...');\n        const postFetch = this._postFetch.bind(this, vr);\n        if (!(ids_to_fetch == undefined)) {\n            fetch_url += `?ids=${ids_to_fetch.join(',')}`;\n        }\n        return $.ajax({\n            type: 'POST',\n            url: fetch_url,\n            contentType: 'application/json; charset=utf-8',\n            dataType: 'json',\n        }).then(json => {\n            postFetch(json, ids_to_fetch);\n        });\n    }\n    _postFetch(vr, json, ids_to_fetch) { // receive material after AJAX call\n        this[_msg].get(vr).clear();\n        for (const m of json.msgs) {\n            this[_msg].get(vr).msg(m);\n        }\n        if (json.good) {\n            if ('data' in json) {\n                this.data.set(vr, json.data);\n            }\n            if ('relinfo' in json) {\n                const r = new Map();\n                for (const x of json.relinfo) {\n                    r.set(x[0], new Set(x[1]))\n                }\n                this.related_info.set(vr, r);\n            }\n            if ('relvals' in json) {\n                this.related_values.set(vr, new Map(json.relvals));\n            }\n            if (this.specs.by_id) {\n                for (const i of ids_to_fetch) {\n                    this[_ids_fetched].add(i);\n                }\n            }\n        }\n        this.implementation.weld(vr);\n    }\n    _weld(vr) {\n        this.dst = this.page.getContainer(this.specs.dest, this.variants);\n        if (!(this.specs.by_id)) {\n            this.container.set(vr, $(`#${this.name}_${vr}`));\n            if (this.container.get(vr).length == 0) {\n                const destination = this.dst.get(vr);\n                destination.append(`<div id=\"msg_${this.name}_${vr}\"></div>`);\n                destination.append(`<div id=\"${this.name}_${vr}\" class=\"component\"></div>`);\n                this.container.set(vr, $(`#${this.name}_${vr}`));\n            }\n            this[_msg].set(vr, new Msg(`msg_${this.name}_${vr}`));\n        }\n        else {\n            if (!this[_msg].has(vr)) {\n                const destination = this.dst.get(vr);\n                destination.prepend(`<div id=\"msg_${this.name}_${vr}\"></div>`);\n                this[_msg].set(vr, new Msg(`msg_${this.name}_${vr}`));\n            }\n        }\n        if (this.specs.fetch_url != null) {\n            const ids_to_fetch = [];\n            if (this.specs.by_id) {\n                const ids_asked_for = g.from_str(this.state.getState(`${this.specs.fetch_url}_${vr}`));\n                for (const i of ids_asked_for) {\n                    if (!this[_ids_fetched].has(i)) {\n                        ids_to_fetch.push(i);\n                    }\n                }\n                if (ids_to_fetch.length != 0) {\n                    return this._fetch(vr, ids_to_fetch);\n                }\n            }\n            else {\n                return this._fetch(vr);\n            }\n        }\n        else {\n            this.implementation.weld(vr);\n        }\n    }\n    _wire(vr) {\n        this.implementation.wire(vr); // perform wire actions that are specific to this component\n    }\n    _work(vr) {\n        this._visibility(vr, true);\n        this.implementation.work(vr); // perform work actions that are specific to this component\n    }\n    weld(vr) {\n        if (this.hasVariant(vr) && this.implementation.show(vr)) {\n            this.ensure(vr, 'weld', '_weld');\n        }\n    }\n    wire(vr) {\n        if (this.hasVariant(vr) && this.implementation.show(vr)) {\n            this.ensure(vr, 'wire', '_wire');\n        }\n    }\n    work(vr) { // work (changed) state to current material\n        if (this.hasVariant(vr) && this.implementation.show(vr)) { // show/hide depending on the specific condition\n            this.ensure(vr, 'work', '_work');\n        }\n        else {\n            this._visibility(vr, false);\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: Control\n * This manages the controls that correspond to lists of records to be displayed in the middle column\n * Clicking on a control shows the corresponding list and hides all others.\n */\n\n/* private attributes as symbols */\nconst _widget = Symbol();\nconst _control = Symbol();\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n        this[_widget] = new Map();\n        this[_control] = new Map();\n    }\n    _html(vr) {\n        this.component.container.get(vr).html(`<a class=\"control_title\" href=\"#\">${this.component.state.showState('list', vr, 'sg')}</a> `);\n    }\n    _dressup(vr) {\n        this[_control].get(vr).click(e => {e.preventDefault();\n            this.component.state.setState('list', vr);\n        })\n    }\n    _isActive(vr) {\n        return this.component.state.getState('list') == vr;\n    }\n    show(vr) {\n        return true;\n    }\n    weld(vr) {\n        this._html(vr);\n        this[_widget].set(vr,  this.component.container.get(vr));\n        this[_widget].get(vr).addClass('control_big');\n        this[_control].set(vr,  this.component.container.get(vr).find('a'));\n    }\n    wire(vr) {\n        this._dressup(vr);\n    }\n    work(vr) {\n        if (this._isActive(vr)) {\n            this[_control].get(vr).addClass('ison');\n            this[_widget].get(vr).addClass('ison');\n        }\n        else {\n            this[_control].get(vr).removeClass('ison');\n            this[_widget].get(vr).removeClass('ison');\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: ctype\n * This manages the facet \"contribution type\"\n */\n\nimport Relative from './relative';\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'type');\n    }\n}\n","/* INDIVIDUAL COMPONENT: EUmap\n * This manages a clickable map of the EU countries\n * See http://jvectormap.com/documentation/javascript-api/jvm-map/\n */\n\nimport * as g from './generic.js';\nimport Relative from './relative';\n\n/* private attributes as symbols */\nconst _map_object = Symbol();\nconst _map_container = Symbol();\nconst _marker = Symbol();\nconst _setvalues = Symbol();\nconst _not_mapped = Symbol();\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'country');\n        this[_map_object] = new Map();\n        this[_map_container] = new Map();\n        this[_marker] = new Map();\n        this[_setvalues] = new Map();\n        this[_not_mapped] = new Set([\n            '-',\n            'CY',\n            'KS',\n            'TR',\n            'MC',\n            'GE',\n        ]);\n    }\n    _preHtml(vr) {\n        return `<div id=\"map-europe_${vr}\" class=\"position\">\n    <p class=\"zoom\"><a class=\"fa fa-arrows\" href=\"#\" title=\"zoom to fit all countries\"/></p>\n</div>`;\n    }\n    _myDressup(vr) {\n        const that = this;\n        const cc = this.component.container.get(vr);\n        this[_map_container].set(vr, cc.find(`#map-europe_${vr}`));\n        const mapc = this[_map_container].get(vr);\n        const height = mapc.width()*0.6;\n        mapc.width('100%');\n        mapc.height(height);\n        mapc.vectorMap({\n            'map': 'europe_mill',\n            backgroundColor: '#ccccff',\n            regionsSelectable: true,\n            markersSelectable: true,\n            regionsSelectableOne: false,\n            markersSelectableOne: false,\n            markerStyle: {\n                initial: {\n                    fill: '#008800',\n                    'fill-opacity': 0.2,\n                    stroke: 'none',\n                    'stroke-width': 0,\n                    'stroke-opacity': 0.2,\n                    'r': 1,\n                },\n                hover: {\n                    cursor: 'pointer',\n                    stroke: '#ffff44',\n                    'stroke-width': 1,\n                    'stroke-opacity': 1,\n                },\n                selected: {\n                    fill: '#008800',\n                    'fill-opacity': 1,\n                },\n                selectedHover: {\n                },\n            },\n            regionStyle: {\n                initial: {\n                    fill: '#bbbbbb',\n                    'fill-opacity': 1,\n                    stroke: 'none',\n                    'stroke-width': 0,\n                    'stroke-opacity': 1,\n                },\n                hover: {\n                    cursor: 'pointer',\n                    stroke: '#ffff44',\n                    'stroke-width': 3,\n                    'stroke-opacity': 1,\n                },\n                selected: {\n                    fill: '#dd8844',\n                    'fill-opacity': 1,\n                },\n                selectedHover: {\n                },\n            },\n            markers: this[_marker].get(vr),\n            series: {\n                markers: [{\n                    values: {},\n                        scale: [0,20],\n                        normalizeFunction: 'linear',\n                        attribute: 'r',\n                        min: 0,\n                        max: 100,\n                }],\n                regions: [{\n                        scale: {\n                            'outdariah': '#ffffff',\n                            'indariah': '#ffddbb',\n                        },\n                        attribute: 'fill',\n                        values: this[_setvalues].get(vr),\n                }],\n            },\n            onRegionTipShow: function(e, el, related_value) {\n                const rvs = this.statistics.get(vr);\n                el.html(`${related_value}: ${rvs.has(related_value)?rvs.get(related_value):'not in DARIAH'}`);\n            }.bind(this),\n            onMarkerTipShow: function(e, el, related_value) {\n                const rvs = this.statistics.get(vr);\n                el.html(`${related_value}: ${rvs.has(related_value)?rvs.get(related_value):'not in DARIAH'}`);\n            }.bind(this),\n            onRegionClick: function(e, related_value) {\n                if (!this.related_values_index.get(vr).has(related_value)) {\n                    e.preventDefault();\n                }\n            }.bind(this),\n            onMarkerClick: function(e, related_value) {\n                if (!this.related_values_index.get(vr).has(related_value)) {\n                    e.preventDefault();\n                }\n            }.bind(this),\n            onRegionSelected: function(e, related_value, i, selected) {\n                if (this.change_state) {\n                    this.component.state.setState(`rel_${this.typ}_${vr}`, g.a_to_str(selected)+this._unmapped_selected(vr));\n                }\n            }.bind(this),\n            onMarkerSelected: function(e, related_value, i, selected) {\n                if (this.change_state) {\n                    this.component.state.setState(`rel_${this.typ}_${vr}`, g.a_to_str(selected)+this._unmapped_selected(vr));\n                }\n            }.bind(this),\n        });\n        const zoom_p = cc.find('p.zoom');\n        zoom_p.css('top', `${height-20}px`);\n        zoom_p.css('left', '10px');\n        const zoom_control = cc.find('p.zoom a');\n        zoom_control.click(e => {e.preventDefault();\n            this[_map_object].get(vr).setFocus({regions: ['GB', 'GR']});\n        });\n        this[_map_object].set(vr, mapc.vectorMap('get', 'mapObject'));\n        this[_map_object].get(vr).setFocus({regions: ['GB', 'GR']});\n    }\n    _unmapped_selected(vr) {\n        const result = [];\n        const this_state = g.from_str(vr, this.component.state.getState(`rel_${this.typ}_${vr}`));\n        let empty = true;\n        for (const related_value of this[_not_mapped]) {\n            if (this_state.has(related_value)) {\n                result.push(related_value);\n                empty = false;\n            }\n        }\n        return empty?'':(','+result.join(','));\n    }\n    _mySetFacet(vr) {\n        this.change_state = false;\n        /* some countries are not on the map, we do show those countries in the list but not on the map.\n         * Same for -, the key that denotes ALL countries\n         */\n        const map_regions = {};\n        const map_markers = {};\n        const related_values = this.related_state.get(vr);\n        for (const [i, related_value] of this.component.related_values.get(vr)) {\n            if (!(this[_not_mapped].has(i)) && i != this.no_values.value) {\n                map_regions[i] = related_values.has(i);\n                if (related_value[1]) {\n                    map_markers[i] = related_values.has(i);\n                }\n            }\n        }\n        const mapo = this[_map_object].get(vr);\n        mapo.setSelectedRegions(map_regions);\n        mapo.setSelectedMarkers(map_markers);\n        this.change_state = true;\n    }\n    _myStats(vr) {\n        let total = this.distilled.get(vr).length;\n        if (total == 0) {total = 1}\n        const weighted_statistics = {};\n        const rvs = this.statistics.get(vr);\n        for (const [related_value, stat] of rvs) {\n            if (related_value != this.no_values.value) {\n                const pr = 100 * stat / total;\n                weighted_statistics[related_value] = (total < 10)?pr:(10*Math.sqrt(pr));\n            }\n        }\n        this[_map_object].get(vr).series.markers[0].setValues(weighted_statistics);\n    }\n    _plainWeld(vr) {}\n    _myWeld(vr) {\n        this[_marker].set(vr, {});\n        this[_setvalues].set(vr, {});\n        const related_values = this.component.related_values.get(vr);\n        const marker = this[_marker].get(vr);\n        const setv = this[_setvalues].get(vr);\n        for (const [i, related_value] of related_values) {\n            if (related_value[1]) {\n                this.related_values_all.get(vr).add(i);\n                this.related_values_list.get(vr).push(i);\n                this.related_values_index.get(vr).set(i, related_value[0]);\n                marker[i] = {latLng: [related_value[2], related_value[3]], name: related_value[0]};\n                setv[i] = 'indariah';\n            }\n            else {\n                setv[i] = 'outdariah';\n            }\n        }\n        this.related_values_list.get(vr).sort((a,b) => {\n            return (related_values.get(a) < related_values.get(b))?-1:(related_values.get(a)[0] > related_values.get(b)[0])?1:0; \n        });\n    }\n}\n","/* INDIVIDUAL COMPONENT: Facets\n * This sets up a list of facets for the lists of records to be displayed in the middle column\n * It will host individual facets\n */\n\nimport * as g from './generic.js';\n\n/* private attributes as symbols */\nconst _stats = Symbol();\nconst _enabled_facets = Symbol();\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n        this[_stats] = new Map();\n        this[_enabled_facets] = new Map();\n        this.table = new Map();\n        this.distilled = new Map();\n    }\n    _html(vr) {\n        const h = `<p><span fct=\"all\"></span>Filtering <span id=\"fstats_${vr}\"></span></p>`;\n        this.component.container.get(vr).html(h);\n    }\n    show(vr) {\n        return this.component.state.getState('list') == vr;\n    }\n    weld(vr) {\n        const children = this.component.children;\n        this[_enabled_facets].set(vr, new Map());\n        for (const [facet_name, facet_component] of children) {\n            if (facet_component.hasVariant(vr)) {\n                this[_enabled_facets].get(vr).set(facet_name, facet_component);\n            }\n        }\n        this._html(vr);\n    }\n    _display(expand_control, mode) {\n        const that = this;\n        const dt = expand_control.closest('p');\n        const hidec = dt.find('.hidec');\n        const morec = dt.find('.morec');\n        const showc = dt.find('.showc');\n        const expanded_material = expand_control.closest('div').find('table,.flt');\n        const condensed_material = expand_control.closest('div').find('.value_list2,.flt_compact');\n        const not_expanded_material = expand_control.closest('div').find('.flt_not_expanded');\n        const key = `fctx_${expand_control.closest('span').attr('fct')}`;\n        const mode_undef = mode == undefined;\n        if (mode_undef) {\n            if (g.localstorage_vars.isSet(key)) {\n                mode = g.localstorage_vars.get(key);\n            }\n            else {\n                mode = 1;\n            }\n        }\n        const all_facets = key == 'fctx_all';\n        if (all_facets && !mode_undef) {\n            expand_control.closest('div').find('div.component span[fct]').each(function() {\n                that._display($(this), mode);\n            });\n        }\n        g.localstorage_vars.set(key, mode);\n        if (mode == 0) {\n            hidec.show();\n            morec.hide();\n            showc.hide();\n            if (!all_facets) {\n                not_expanded_material.show();\n                expanded_material.hide();\n                condensed_material.hide();\n            }\n        }\n        else if (mode == 1) {\n            hidec.hide();\n            morec.show();\n            showc.hide();\n            if (!all_facets) {\n                not_expanded_material.show();\n                expanded_material.hide();\n                condensed_material.show();\n            }\n        }\n        else {\n            hidec.hide();\n            morec.hide();\n            showc.show();\n            if (!all_facets) {\n                not_expanded_material.hide();\n                expanded_material.show();\n                condensed_material.hide();\n            }\n        }\n    }\n    wire(vr) {\n        const that = this;\n        const cc = this.component.container.get(vr);\n        const lc = this.component.page.getComponent('list').container.get(vr);\n        this[_stats].set(vr, cc.find(`#fstats_${vr}`));\n        this.table.set(vr,  lc.find(`#table_${vr}`));\n        const info = ' details; click to change level of details';\n        const detailcontrols = `<a class=\"showc fa fa-fw fa-list-ul\" href=\"#\" title=\"full${info}\"></a><a class=\"morec fa fa-fw fa-align-left\" href=\"#\" title=\"condensed${info}\"></a><a class=\"hidec fa fa-fw fa-minus\" href=\"#\" title=\"hidden${info}\"></a>`;\n        cc.addClass('facet');\n        cc.find('span[fct]').each(function() {\n            $(this).html(`${detailcontrols}&nbsp`);\n            that._display($(this));\n        });\n        cc.find('.hidec').click(function(e) {e.preventDefault();\n            that._display($(this), 1);\n        });\n        cc.find('.morec').click(function(e) {e.preventDefault();\n            that._display($(this), 2);\n        });\n        cc.find('.showc').click(function(e) {e.preventDefault();\n            that._display($(this), 0);\n        });\n    }\n    work(vr) {\n        this.table.get(vr).find('tr[rid],tr[iid]').hide();\n        const mother_list = this.component.page.getComponent('list');\n        const data = mother_list.data.get(vr);\n        const facets = this[_enabled_facets].get(vr);\n        this.distilled.set(vr, []);\n        for (const [facet_name, facet_comp] of facets) {\n            const facet = facet_comp.implementation;\n            facet.distilled.set(vr, []);\n        }\n        for (const d of data) {\n            let v = true; // will hold whether this row passes all facets\n/* We collect in the distilled member of this facet object the collective results of all individual facets,\n * Moreover, for each facet, we collect in its distilled member the results when all facets are applied except the facet in question\n * so: \n * 1. rows with a failure for 2 or more facets are discarded\n * 2. rows with a failure for exactly one facet are added to the data for that facet\n * 3. rows which pass all facets are added to all facets, and also to the final filtered set\n */\n            let the_false = null; // which facet has yielded false (if there are more than one we'll discard the row\n            let discard = false; // becomes true when we have encounterd 2 facets that yield false\n            for (const [facet_name, facet_comp] of facets) {\n                if (!discard) {\n                    const facet = facet_comp.implementation;\n                    const this_v = facet.v(vr, d[0]); // this_v: whether the row passes this facet\n                    if (!this_v) {\n                        v = false;\n                        if (the_false == null) { // this is the first failure, we store the facet number in the_false\n                            the_false = facet;\n                        } // else we discard the row altogether\n                        else {\n                            discard = true;\n                        }\n                    }\n                }\n            }\n            if (!discard) {\n                if (v) {\n                    this.distilled.get(vr).push(d[0]);\n                    this.table.get(vr).find(`tr[rid=\"${d[0]}\"],tr[iid=\"${d[0]}\"]`).show();\n                }\n                if (the_false != null) {\n                    the_false.distilled.get(vr).push(d[0]);\n                }\n                else {\n                    for (const [facet_name, facet_comp] of facets) {\n                        const facet = facet_comp.implementation;\n                        facet.distilled.get(vr).push(d[0]);\n                    }\n                }\n            }\n        }\n        for (const [facet_name, facet_comp] of facets) {\n            const facet = facet_comp.implementation;\n            facet.stats(vr);\n        }\n        this[_stats].get(vr).html(`${this.distilled.get(vr).length} of ${data.length}`);\n    }\n}\n","/* INDIVIDUAL COMPONENT: Filters\n * This is a list of filter controls corresponding to lists of records to be displayed in the middle column\n * Setting a filter control filters the associated list.\n */\n\n/* private attributes as symbols */\nconst _tags = Symbol();\nconst _filter_control = Symbol();\nconst _filter_control2 = Symbol();\nconst _clear_filter_control = Symbol();\nconst _box = Symbol();\nconst _completions_dst = Symbol();\nconst _wire_mode = Symbol();\nconst _distilled = Symbol();\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n        this[_tags] = new Map();\n        this[_filter_control] = new Map();\n        this[_filter_control2] = new Map();\n        this[_box] = new Map();\n        this[_completions_dst] = new Map();\n        this._stats_dst = new Map();\n        this[_clear_filter_control] = new Map();\n        this[_wire_mode] = new Map();\n        this[_distilled] = new Map();\n        this.distilled = new Map();\n    }\n    _html(vr) {\n        const h = `\n<div>\n    <p class=\"dctrl\"><span fct=\"${this.component.name}-${vr}\"></span> By full text search\n        <a href=\"#\" title=\"modify full text filter\" id=\"flt2_${vr}\" class=\"flt_not_expanded facet_single ison flt_pat\"></a>\n        <a href=\"#\" class=\"control_med fa fa-close filtc\" id=\"clearf_${vr}\"></a>\n    </p>\n    <div id=\"fltw_${vr}\">\n        <p id=\"fbox_${vr}\" class=\"flt control_med fbox ui-widget\">\n            <input id=\"flt_${vr}\" class=\"flt flt_pat\"/>\n            <span fbox class=\"stats\" id=\"stats_${vr}\"></span>\n        </p>\n        <div id=\"autoc_${vr}\" style=\"display: none;\">here ${vr}</div>\n    </div>\n</div>`;\n        this.component.container.get(vr).html(h);\n    }\n    _setFilter(vr) {\n        const textf = this.component.state.getState(`flt_${vr}`);\n        const filterc = this[_filter_control].get(vr);\n        this[_filter_control2].get(vr).html(textf);\n        filterc.val(textf);\n        filterc.autocomplete('search', textf);\n    }\n    _response(vr) {\n        return function(event, ui) {\n            this[_distilled].set(vr, {});\n            const dstl = this[_distilled].get(vr);\n            for (const u of ui.content) {\n                dstl[u.value] = 1;\n            }\n            if (!(this[_wire_mode].get(vr))) {\n                const textf = this[_filter_control].get(vr).val();\n                this.component.state.setState(`flt_${vr}`, textf);\n            }\n        }.bind(this);\n    }\n    _setClear(vr) {\n        this[_clear_filter_control].get(vr).click(e => {e.preventDefault();\n            const filterc = this[_filter_control].get(vr);\n            filterc.val('');\n            filterc.autocomplete('search', '');\n        });\n    }\n    stats(vr) {\n        let stat_prefix;\n        const statd = this._stats_dst.get(vr);\n        if (this[_filter_control].get(vr).val() == '') {\n            stat_prefix = '';\n            statd.removeClass('ison');\n        }\n        else {\n            stat_prefix = `${this.facet.distilled.get(vr).length} of `;\n            statd.addClass('ison');\n        }\n        statd.html(`${stat_prefix}${this.distilled.get(vr).length}`);\n    }\n    v(vr, i) {\n        return (i in this[_distilled].get(vr));\n    }\n    show(vr) {\n        return (this.component.state.getState('list') == vr);\n    }\n    weld(vr) {\n        this._html(vr);\n    }\n    wire(vr) {\n        if (!this.facet) {\n            this.facet = this.component.page.getComponent('facet').implementation;\n        }\n        const data = this.component.page.getComponent('list').data.get(vr);\n        this[_tags].set(vr, []);\n        const tgs = this[_tags].get(vr);\n        for (const d of data) {\n            tgs.push({label: d[1], value: `${d[0]}`});\n        }\n        this[_distilled].set(vr, {});\n        this.distilled.set(vr, []);\n        const cc = this.component.container.get(vr);\n        const cf = cc.find(`#fltw_${vr}`);\n        const flt = $(`#flt_${vr}`);\n        this[_filter_control].set(vr, flt);\n        const flt2 = $(`#flt2_${vr}`);\n        this[_filter_control2].set(vr, flt2);\n        this[_box].set(vr, cf.find(`#fbox_${vr}`));\n        this[_completions_dst].set(vr, cf.find(`#autoc_${vr}`));\n        this._stats_dst.set(vr, cf.find(`#stats_${vr}`));\n        this[_clear_filter_control].set(vr, cc.find(`#clearf_${vr}`));\n        this[_filter_control].get(vr).autocomplete({\n            appendTo: this[_completions_dst].get(vr),\n            source: this[_tags].get(vr),\n            response: this._response(vr),\n            minLength: 0,\n        });\n        flt2.click(function(e) {e.preventDefault();\n            $(this).closest('div').find('.morec').click();\n            flt[0].focus();\n        });\n        this[_wire_mode].set(vr, true);\n        this._setClear(vr);\n        this._setFilter(vr);\n        this[_wire_mode].set(vr, false);\n    }\n    work(vr) {\n        const textf = this.component.state.getState(`flt_${vr}`);\n        const clearfc = this[_clear_filter_control].get(vr);\n        if (textf == '') {\n            this[_box].get(vr).removeClass('ison');\n            clearfc.hide();\n        }\n        else {\n            this[_box].get(vr).addClass('ison');\n            clearfc.show();\n        }\n        this[_filter_control2].get(vr).html(textf);\n    }\n}\n","/* GENERIC\n * Some function for very generic purposes\n */\n\nconst chr = new Map([\n    ['&', '&amp;'],\n    ['<', '&lt;'],\n    ['>', '&gt;'],\n]);\n\nexport function escapeHTML(text) {\n    return text.replace(/[&<>]/g, function (a) {return chr.get(a) || a;});\n};\n\nconst _Request = {\n    parameter(name) {\n        return this.parameters().get(name);\n    },\n    parameters() {\n        const result = new Map();\n        const uri = window.location.search;\n        if (uri.indexOf(\"?\") === -1) {\n            return result;\n        }\n        for (const paramval of uri.slice(1).split(\"&\")) {\n            result.set(...paramval.split(\"=\"));\n        }\n        return result;\n    }\n};\n\nexport const request_vars = _Request.parameters();\nconst _localstorage = $.initNamespaceStorage('req');\nexport const localstorage_vars = _localstorage.localStorage;\n\nexport function deselectText() {\n    if (document.selection) {\n        document.selection.empty();\n    }\n    else if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n    }\n};\n\nexport function selectText(containerid) {\n    deselectText();\n    if (document.selection) {\n        const range = document.body.createTextRange();\n        range.moveToElementText(document.getElementById(containerid));\n        range.select();\n    }\n    else if (window.getSelection) {\n        const range = document.createRange();\n        range.selectNode(document.getElementById(containerid));\n        window.getSelection().addRange(range);\n    }\n};\n\nexport function toggleDetail(widget, detail, extra) {\n    const thedetail = (detail == undefined)?widget.closest('div').find('.detail'):detail;\n    thedetail.toggle();\n    if (extra != undefined) {\n        extra(widget);\n    }\n    let thiscl, othercl;\n    if (widget.hasClass('fa-chevron-right')) {\n        thiscl = 'fa-chevron-right';\n        othercl = 'fa-chevron-down';\n    }\n    else {\n        thiscl = 'fa-chevron-down';\n        othercl = 'fa-chevron-right';\n    }\n    widget.removeClass(thiscl);\n    widget.addClass(othercl);\n};\n\nexport function compact(cutoff, size, text) {\n    return (text.length > cutoff)?text.replace(/[^ -]+/g, x => {return x.substr(0,size)}):text;\n};\n\nexport function from_str(st) {\n    return (st !== null && st != undefined && st != '')?new Set(st.split(',')):new Set();\n};\nexport function a_to_str(ar) {\n    return ar.join(',');\n};\nexport function to_str(set) {\n    return Array.from(set).join(',');\n};\n\n","/* INDIVIDUAL COMPONENT: Item\n * This manages the actual records to be displayed inside the list in the middle column.\n * The subcomponents corresponds to the individual lists, such as country, countribution\n * There is an extra argument that specifies the ids of the items that should be displayed.\n * All functionality (except show) is delegated to specific functions\n */\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n    }\n    _html(vr, it) {\n        const destination = this.component.dst.get(vr);\n        const dest_row = destination.find(`tr[rid=\"${it[0]}\"]`);\n        let h = `<tr iid=\"${it[0]}\">`;\n\n        if (vr == 'contrib') {\n            const types = [];\n            for (const tp of it[5]) {\n                types.push(`<a href=\"#\" tid=\"${tp[0]}\">${tp[1]}</a>`);\n            }\n            h += `\n<td colspan=\"2\">\n<b>Contact person:</b> ${it[2]}<br/>\n<b>Country:</b> ${it[3]} = ${it[4]}<br/>\n<b>Types:</b> ${types.join(', ')}</br>\n</td>\n`;\n        }\n        else if (vr == 'country') {\n            for (const r of this.component.data.get(vr)) {\n                in_dariah = (r[3] == 1)?'dariah':'';\n                h += `<td class=\"country_code\">${r[1]}<td><td class=\"country_name\">${r[2]}<td><td class=\"in_dariah\">${in_dariah}</td><td class=\"latlng\">${r[4]}</td><td class=\"latlng\">${r[5]}</td>`;\n            }\n        }\n        else if (vr == 'type' || vr == 'tadiraha' || vr == 'tadiraho' || vr == 'tadiraht') {\n            for (const r of this.component.data.get(vr)) {\n                h += `<td class=\"value\">${r[1]}<td>`;\n            }\n        }\n        h += '</tr>';\n        dest_row.after(h);\n    }\n    show(vr) {\n        return this.component.state.getState('list') == vr;\n    }\n    weld(vr) {\n        for (const it of this.component.data.get(vr)) {\n            this._html(vr, it);\n        }\n    }\n    wire(vr) {}\n    work(vr) {}\n}\n","/* INDIVIDUAL COMPONENT: List\n * This manages the actual lists of records to be displayed in the middle column.\n * The subcomponents corresponds to the individual lists, such as country, countribution\n * All functionality (except show) is delegated to specific functions\n */\n\nimport * as g from './generic.js';\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n    }\n    _html(vr) {\n        let h = '';\n        h += `<table id=\"table_${vr}\">`;\n        for (const r of this.component.data.get(vr)) {\n            const rowstart = `<tr rid=\"${r[0]}\"><td><a class=\"showc fa fa-fw fa-list-ul\" href=\"#\" title=\"hide fields\"></a><a class=\"hidec fa fa-fw fa-minus\" href=\"#\" title=\"show fields\"></a></td>`;\n            const rowend = '</tr>';\n            if (vr == 'contrib') {\n                h += `${rowstart}<td><a href=\"#\" class=\"fa fa-fw fa-minus\"></a>${r[1]}</td>${rowend}`;\n            }\n            else if (vr == 'country') {\n                const in_dariah = (r[3] == 1)?'dariah':'';\n                h += `${rowstart}<td class=\"country_code\">${r[1]}<td><td class=\"country_name\">${r[2]}<td><td class=\"in_dariah\">${in_dariah}</td><td class=\"latlng\">${r[4]}</td><td class=\"latlng\">${r[5]}</td>${rowend}`;\n            }\n            else if (vr == 'type' || vr == 'tadiraha' || vr == 'tadiraho' || vr == 'tadiraht') {\n                h += `${rowstart}<td class=\"value\">${r[1]}<td>${rowend}`;\n            }\n        }\n        h += '</table>';\n        this.component.container.get(vr).html(h);\n    }\n    _display(row, vr, open_ids) {\n        const that = this;\n        const hidec = row.find('.hidec');\n        const showc = row.find('.showc');\n        const rid = row.attr('rid');\n        const detail = this.component.container.get(vr).find(`tr[iid=\"${rid}\"]`);\n        if (open_ids.has(rid)) {\n            hidec.show();\n            showc.hide();\n            if (detail.length) {\n                detail.show();\n            }\n        }\n        else {\n            hidec.hide();\n            showc.hide();\n            if (detail.length) {\n                detail.hide();\n            }\n        }\n    }\n    _set_it(control, vr, state) {\n        const open_ids = g.from_str(this.state.getState(key));\n        const rid = control.closest('tr').attr('rid');\n        if (state) {\n            open_ids.add(rid);\n        }\n        else {\n            open_ids.delete(rid);\n        }\n        this.state.setState(key, g.to_str(open_ids));\n    }\n    show(vr) {\n        return this.component.state.getState('list') == vr;\n    }\n    weld(vr) {\n        this._html(vr);\n    }\n    wire(vr) {\n        const that = this;\n        const cc = this.component.container.get(vr);\n        const key = `${this.component.name}_${vr}`;\n        cc.find('.hidec').click(function(e) {e.preventDefault();\n            that._set_it($(this), vr, true);\n        });\n        cc.find('.showc').click(function(e) {e.preventDefault();\n            that._set_it($(this), vr, false);\n        });\n    }\n    work(vr) {\n        const that = this;\n        const key = `${this.component.name}_${vr}`;\n        const cc = this.component.container.get(vr);\n        const open_ids = g.from_str(this.component.state.getState(`${this.component.name}_${vr}`));\n        cc.find('tr[rid]').each(function() {\n            that._display($(this), vr, open_ids);\n        });\n    }\n}\n","/* START PROCESSING\n * The dynamic construction of the page starts here\n */\n\nimport Page from './page';\n\n$(function () {\n  new Page().work();\n});","/* MESSAGES\n * Msg is a function that issues messages to a specified element.\n * It has also controls for clearing and hiding the messages.\n */\n\n/* private attributes as symbols */\nconst _destination = Symbol();\nconst _trash_control = Symbol();\nconst _trash_control_para = Symbol();\nconst _on_clear = Symbol();\n\nexport default class {\n    constructor(destination, on_clear) {\n        this[_destination] = $(`#${destination}`);\n        this[_trash_control] = $(`#trash_${destination}`);\n        this[_trash_control_para] = this[_trash_control].closest('p');\n        this[_trash_control].click(e => {e.preventDefault();\n            this.clear();\n        });\n        this._hide();\n        this[_on_clear] = on_clear;\n    }\n    _hide() {\n        this[_destination].hide();\n        this[_trash_control_para].hide();\n    }\n    _show() {\n        this[_destination].show();\n        if (this[_destination].html() != '') {\n            this[_trash_control_para].show();\n        }\n    }\n    clear() {\n        this[_destination].html('');\n        if (this[_on_clear] != undefined) {\n            this[_on_clear]();\n        }\n        this._hide();\n    }\n    msg(text, kind) {\n        if (kind == undefined) {\n            kind = 'info';\n        }\n        let message_text = this[_destination].html();\n        this[_destination].html(`${message_text}<p class=\"${kind}\">${text}</p>`);\n        this._show();\n    }\n}\n","/* TOP LEVEL: PAGE\n * This is the page function. \n * It creates a ViewState function, which contains the current state.\n * The state is created on the basis of request variables, and from then it\n * reflects the user actions.\n * The page specifies all components and initializes them.\n * A component is specfied by the following fields\n * - destination: left => left sidebar; right => right sidebar; middle => middle column\n * - name: a string that can be used to refer to the component later on, via method getComponent\n * - subcomponents: a list of names for which a subcomponent will be made. The html will be generated per subcomponent.\n * - fetch: boolean which says whether this component needs data from the server\n * - work first: boolean which says that child components can only be wired after work of the parent component.\n * - specific: an object that holds the specific functionality of this component.\n * The control component has work first = true, because only after choosing a list, the list control can fetch the specific list and wire itself.\n * All other components have work first = false, because it is desirable that child components start wiring as soon as possible.\n * For example: the facet component is parent of the individual facets.\n * When facet starts working, the individual controls should already be wired.\n * Because work first = false, wiring of the individual facets will be triggered after wiring of the generic facet component.\n * N.B. Individual facets can only be wired after the list component (their grandfather) has been wired.\n * This will go OK, because after wiring the list, the facet will be wired and then the individual facets.\n * The _routing dictionary specifies when the work methods of components should be triggered.\n * Its keys are the labels of components, and for every component a list of other component keys is given.\n * These are the components that will be applied (in that order) after the key component. \n * \n *  work from page: if true, this component's work method will be called directly by the page's work method;\n *   if false, the page will skip this component when working. It is assumed that this component will be applied by another component.\n *   This practice must be followed, if the application of state to a component should come after a fetch of another component.\n *   If the page would work the viewstate directly to this component, it would happen before the other's components data had been loaded.\n *   Example: a filter component F, that filters a big list fetched by another component L. L's work should call F's work.\n * After every user action, the state is changed, and a call to the Page's work() method is issued.\n * The page will issue the work call forth to all components.\n */\n\nimport * as g from './generic.js';\nimport ViewState from './viewstate';\nimport Share from './share';\nimport CType from './ctype';\nimport TadirahO from './tadiraho';\nimport TadirahA from './tadiraha';\nimport TadirahT from './tadiraht';\nimport EUmap from './eumap';\nimport Filter from './filter';\nimport Facet from './facet';\nimport List from './list';\nimport Item from './item';\nimport Control from './control';\nimport Component from './components';\nimport Skeleton from './skeleton';\n\n/* private attributes as symbols */\nconst _by_id = Symbol();\n\nexport default class extends Skeleton { // the one and only page object\n    constructor() {\n        super();\n        this.name = 'page';\n        this.state = new ViewState(this);\n        const main_lists = this.state.getValues('list');\n        const contrib_list = new Set(['contrib']);\n        const empty_list = new Set(['']);\n        this._component_specs = new Map([\n            ['share',    {dest: 'body',    variants: empty_list,   fetch_url: null,       specific: Share}], \n            ['control',  {dest: 'left',    variants: main_lists,   fetch_url: null,       specific: Control}],\n            ['list',     {dest: 'middle' , variants: main_lists,   fetch_url: 'list',     specific: List}],\n            ['item',     {dest: 'list',    variants: main_lists,   fetch_url: 'item',     specific: Item}],\n            ['facet',    {dest: 'control', variants: main_lists,   fetch_url: null,       specific: Facet}],\n            ['filter',   {dest: 'facet',   variants: main_lists,   fetch_url: null,       specific: Filter}],\n            ['eumap',    {dest: 'facet',   variants: contrib_list, fetch_url: 'country',  specific: EUmap}],\n            ['ctype',    {dest: 'facet',   variants: contrib_list, fetch_url: 'type',     specific: CType}],\n            ['tadiraha', {dest: 'facet',   variants: contrib_list, fetch_url: 'tadiraha', specific: TadirahA}],\n            ['tadiraho', {dest: 'facet',   variants: contrib_list, fetch_url: 'tadiraho', specific: TadirahO}],\n            ['tadiraht', {dest: 'facet',   variants: contrib_list, fetch_url: 'tadiraht', specific: TadirahT}],\n        ]),\n        /* some components are being dealt with on the basis of additional identifiers, such as item\n         * Those components are specified below, and the specs of all components will get an extra attribute\n         * by_id, which is true if the component needs an id.\n         * The actual ids come from a request variable name_xxx, where name is the name of the component and xxx is the name of a list.\n         */\n        this[_by_id] = new Set([\n            'item',\n        ]),\n        this.ignore = new Set([\n            //'ctype',\n            //'tadiraha',\n            //'tadiraht',\n            //'tadiraho',\n            //'eumap',\n            //'filter',\n        ]),\n        this.components = new Map();\n        for (const [name, spec] of this._component_specs) {\n            if (this.ignore.has(name)) {continue}\n            spec.by_id = this[_by_id].has(name);\n            const component = new Component(name, spec, this);\n            component.children = new Map();\n            this.components.set(name, component);\n        }\n        for (const [name, child_component] of this.components) {\n            const dest_name = this._component_specs.get(name).dest;\n            if (this.components.has(dest_name)) {\n                const parent_component = this.components.get(dest_name);\n                parent_component.children.set(name, child_component);\n            }\n        }\n        this.resolveTiming();\n        this._setHeight(80);\n        History.Adapter.bind(window, 'statechange', this.state.work());\n    }\n    _setHeight(subtract) { // the heights of the sidebars are set, depending on the height of the window\n        const wh = `${window.innerHeight - subtract}px`;\n        for (const w of new Set(['middle', 'left', 'right'])) {\n            $(`#${w}`).css('height', wh);\n        }\n    }\n    getComponent(name) {\n        return this.components.get(name);\n    }\n    getContainer(name, variants) {\n        if (this.components.has(name)) {\n            return this.components.get(name).container;\n        }\n        else {\n            const container = new Map();\n            const addto = (name == 'body')?$('body'):$(`#${name}`);\n            for (const vr of variants) {\n                container.set(vr, addto);\n            }\n            return container;\n        }\n    }\n    getBefore(name, stage) {\n        const prev_nodes = [];\n        const next_node = `${name}-${stage}`;\n        for (const prev_node of (this._timing.get(next_node) || new Set())) {\n            prev_nodes.push(prev_node.split('-'));\n        }\n        return prev_nodes;\n    }\n    work() { \n        for (const task of this._tasks) {\n            const [name, stage] = task.split('-');\n            const component = this.getComponent(name);\n            for (const vr of component.variants) {\n                component[stage](vr);\n            }\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: generic facet based on related values\n * CType, Tadiraho and EUmap inherit from this.\n */\n\nimport * as g from './generic.js';\n\n/* private attributes as symbols */\nconst _list = Symbol();\nconst _list2 = Symbol();\nconst _all_values_control = Symbol();\nconst _cols = Symbol();\nconst _cutoff = Symbol();\nconst _shortsize = Symbol();\n\nexport default class {\n    constructor(component, rtype, cols, cutoff, shortsize) {\n        this.component = component;\n        this.distilled = new Map();\n        this[_list] = new Map();\n        this[_list2] = new Map();\n        this.related_state = new Map();\n        this[_all_values_control] = new Map();\n        this.statistics = new Map();\n        this.related_values_list = new Map();\n        this.related_values_index = new Map();\n        this.related_values_all = new Map();\n        this.no_values = {value: '-', name: '-none'};\n        this.typ = rtype;\n        this[_cols] = cols || 2;\n        this[_cutoff] = cutoff || 14;\n        this[_shortsize] = shortsize || 6;\n    }\n    _html(vr) {\n        const type_sg = this.component.state.showState('list', this.typ, 'sg');\n        const type_pl = this.component.state.showState('list', this.typ, 'pl');\n        let h = '';\n        h += this._preHtml(vr);\n        h += `\n<div>\n    <p class=\"dctrl\"><span fct=\"${this.component.name}-${vr}\"></span> By ${type_sg}</p>\n    <p class=\"all\"><span rv=\"_all\" class=\"stats\"></span> <a rv=\"_all\" href=\"#\" class=\"facet_single_all\">all ${type_pl}</a></p>\n    <table class=\"value_list\" id=\"list-${this.typ}-vals_${vr}\">\n        <tr>\n`;\n        const ar = this.related_values_list.get(vr);\n        for (const [i, related_value] of ar.entries()) {\n            if ((i % this[_cols] == 0) && (i > 0) && (i < ar.length)) {\n                h += '</tr><tr>';\n            }\n            const raw_value = this.related_values_index.get(vr).get(related_value);\n            h += `\n            <td><span rv=\"${related_value}\" class=\"stats\"></span></td>\n            <td><a rv=\"${related_value}\" href=\"#\" class=\"facet_single\">${g.escapeHTML(raw_value)}</a></td>\n            `;\n        }\n        h += `\n        </tr>\n    </table>\n    <p class=\"value_list2\" id=\"list2-${this.typ}-vals_${vr}\">\n`;\n        for (const [i, related_value] of ar.entries()) {\n            const raw_value = this.related_values_index.get(vr).get(related_value);\n            const compact_value = g.escapeHTML(g.compact(this[_cutoff], this[_shortsize], raw_value));\n            h += `<a href=\"#\" rv=\"${related_value}\" class=\"passive_small\" title=\"${g.escapeHTML(raw_value)}\">${compact_value}</a> `;\n        }\n        h += `\n    </p>\n</div>`;\n        this.component.container.get(vr).html(h);\n    }\n    _dressup(vr) {\n        const cc = this.component.container.get(vr);\n        this[_list].set(vr, cc.find(`#list-${this.typ}-vals_${vr}`));\n        this[_list2].set(vr, cc.find(`#list2-${this.typ}-vals_${vr}`));\n        const that = this;\n        this[_list].get(vr).find('.facet_single').click(function(e) {e.preventDefault();\n            const related_value = $(this).attr('rv');\n            const selected = g.from_str(that.component.state.getState(`rel_${that.typ}_${vr}`));\n            if (selected.has(related_value)) {\n                selected.delete(related_value);\n            }\n            else {\n                selected.add(related_value);\n            }\n            that.component.state.setState(`rel_${that.typ}_${vr}`, g.to_str(selected));\n            cc.find('.last_handled').removeClass('last_handled');\n            $(this).addClass('last_handled');\n        });\n        this[_list2].get(vr).find('.passive_small').click(function(e) {e.preventDefault();\n            const related_value = $(this).attr('rv');\n            const selected = g.from_str(that.component.state.getState(`rel_${that.typ}_${vr}`));\n            if (selected.has(related_value)) {\n                selected.delete(related_value);\n            }\n            else {\n                selected.add(related_value);\n            }\n            that.component.state.setState(`rel_${that.typ}_${vr}`, g.to_str(selected));\n            $(this).closest('div').find('.morec').click();\n            const last_handled = that[_list].get(vr).find(`a[rv=\"${related_value}\"]`);\n            cc.find('.last_handled').removeClass('last_handled');\n            last_handled.addClass('last_handled');\n            $('#left')[0].scrollTop = 50;\n            last_handled[0].scrollIntoView({\n                behavior: 'smooth',\n                alignToTop: 'true',\n            });\n        });\n        this[_all_values_control].set(vr, this.component.container.get(vr).find('[rv=\"_all\"]'));\n        this[_all_values_control].get(vr).click(function(e) {e.preventDefault();\n            const ison = $(this).hasClass('ison');\n            if (ison) {\n                that.component.state.setState(`rel_${that.typ}_${vr}`, '');\n            }\n            else {\n                that.component.state.setState(`rel_${that.typ}_${vr}`, g.to_str(that.related_values_all.get(vr)));\n            }\n        });\n    }\n    _setFacet(vr) {\n        let all_selected = true;\n        for (const related_value of this.related_values_index.get(vr).keys()) {\n            const facet_cell = this[_list].get(vr).find(`[rv=\"${related_value}\"]`);\n            const facet_cell2 = this[_list2].get(vr).find(`[rv=\"${related_value}\"]`);\n            if (this.related_state.get(vr).has(related_value+'')) {\n                facet_cell.addClass('ison');\n                facet_cell2.addClass('ison');\n            }\n            else {\n                facet_cell.removeClass('ison');\n                facet_cell2.removeClass('ison');\n                all_selected = false;\n            }\n        }\n        if (all_selected) {\n            this[_all_values_control].get(vr).addClass('ison');\n        }\n        else {\n            this[_all_values_control].get(vr).removeClass('ison');\n        }\n    }\n    stats(vr) {\n        this.statistics.set(vr, new Map());\n        const rvs = this.statistics.get(vr);\n        for (const related_value of this.related_values_index.get(vr).keys()) {\n            rvs.set(related_value, 0);\n        } \n        const related_info = this.component.related_info.get(vr);\n        for (const i of this.distilled.get(vr)) {\n            let has_related_value = false;\n            if (related_info.has(i)) {\n                for (const related_value of related_info.get(i)) {\n                    rvs.set(related_value, rvs.get(related_value) + 1);\n                    has_related_value = true;\n                }\n            }\n            if (!has_related_value) {\n                const nv = this.no_values.value;\n                rvs.set(nv, rvs.get(nv) + 1);\n            }\n        }\n        for (const [related_value, stat] of rvs) {\n            this.component.container.get(vr).find(`span[rv=\"${related_value}\"].stats`).html(stat);\n        }\n        this.component.container.get(vr).find(`span[rv=\"_all\"].stats`).html(this.distilled.get(vr).length);\n        this._myStats(vr);\n    }\n    v(vr, i) {\n        const related_info =  this.component.related_info.get(vr);\n        const related_state = this.related_state.get(vr);\n        if (related_info.has(i)) {\n            for (const related_value of related_info.get(i)) {\n                if (related_state.has(related_value+'')) {\n                    return true;\n                }\n            }\n        }\n        else {\n            if (related_state.has(this.no_values.value)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    show(vr) {\n        return (this.component.state.getState('list') == vr);\n    }\n    weld(vr) {\n        this.related_values_list.set(vr, []);\n        this.related_values_index.set(vr, new Map());\n        this.related_values_all.set(vr, new Set());\n        this._plainWeld(vr);\n        this._myWeld(vr);\n        this.related_values_list.get(vr).push(this.no_values.value);\n        this.related_values_index.get(vr).set(this.no_values.value, this.no_values.name);\n        this.related_values_all.get(vr).add(this.no_values.value);\n        this._html(vr);\n    }\n    wire(vr) {\n        this._myDressup(vr);\n        this._dressup(vr);\n    }\n    work(vr) {\n        this.related_state.set(vr, g.from_str(this.component.state.getState(`rel_${this.typ}_${vr}`)));\n        this._mySetFacet(vr);\n        this._setFacet(vr);\n    }\n    _plainWeld(vr) {\n        const related_values = this.component.related_values.get(vr);\n        for (const [i, related_value] of related_values) {\n            this.related_values_list.get(vr).push(i);\n            this.related_values_index.get(vr).set(i, related_value);\n            this.related_values_all.get(vr).add(i);\n        }\n        this.related_values_list.get(vr).sort((a,b) => {\n            return (related_values.get(a) < related_values.get(b))?-1:(related_values.get(a) > related_values.get(b))?1:0; \n        });\n    }\n    _myWeld(vr) {}\n    _preHtml(vr) {return ''}\n    _myDressup(vr) {}\n    _mySetFacet(vr) {}\n    _myStats(vr) {}\n}\n","/* INDIVIDUAL COMPONENT: Control\n * Manages the sharing drawer for generating hyperlinks to the current page.\n */\n\nimport * as g from './generic.js';\n\nexport default class {\n    constructor(component) {\n        this.component = component;\n    }\n    show(vr) {\n        return true;\n    }\n    weld(vr) {\n\t    const h = `\n<p id=\"citeh\">Cite</p>\n<table align=\"center\">\n    <tr>\n        <td class=\"clip_pv clr\">\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_md\" title=\"link to page content and appearance (markdown)\" class=\"ctrl fa fa-level-down fa-lg fa-fw\"></a>\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_ht\" title=\"link to page content and appearance (html)\" class=\"ctrl fa fa-external-link-square fa-lg fa-fw\"></a>\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_htc\" title=\"link to page content (html)\" class=\"ctrl fa fa-external-link fa-lg fa-fw\"></a>\n            <a lnk=\"\" href=\"#\" id=\"clip_pv_cn\" title=\"copy page content\" class=\"ctrl fa fa-file-text-o fa-lg fa-fw\"></a>\n        </td>\n    </tr>\n    <tr>\n        <th class=\"clip_pv\" width=\"60px\">page view</th>\n    </tr>\n    <tr class=\"citexpl\">\n        <td class=\"clip_pv\"><span id=\"xc_pv\" class=\"ctrl fa fa-chevron-right fa-fw\"></span><span id=\"x_pv\" class=\"detail\">share link to this page with or without view settings.</span></td>\n    </tr>\n</table>\n<p id=\"cdiagpub\"></p>\n<p id=\"cdiagsts\"></p>\n`;\t\n        this.component.container.get(vr).html(h);\n    }\n    wire(vr) {\n        const that = this;\n        const cc = this.component.container.get(vr);\n        const slink = $('#self_link');\n        slink.hide();\n        cc.addClass('socialdrawer');\n        cc.find('.detail').hide();\n        cc.find('#clip_pv_md,#clip_pv_ht,#clip_pv_htc,#clip_pv_nl').click(function(e) {e.preventDefault();\n            window.prompt('Press <Cmd-C> and then <Enter> to copy link on clipboard', $(this).attr('lnk'));\n        });\n        cc.find('#clip_pv_cn').click(e => {e.preventDefault();\n            const containerid = 'middle';\n            const app_url_raw = app_url_cite+that.component.state.getVars(true);\n            slink.show();\n            slink.attr('href', app_url_raw);\n            g.selectText(containerid);\n        });\n        cc.find('#xc_pv').click(function(e){e.preventDefault(); g.toggleDetail($(this), $('#x_pv'))});\n        cc.click(function(e){e.preventDefault();\n            const app_url_raw = app_url_cite+that.component.state.getVars(true);\n            const app_url_rawc = app_url_cite+that.component.state.getVars(false);\n            $('#citeh').hide();\n            $('#cdiagpub').html('');\n            $('#cdiagsts').html('');\n            $('.clip_pv.clr,#cdiagpub,#cdiagsts').removeClass('error warning good special');\n            const pvtitle = g.escapeHTML($('title').text());\n            $('#clip_pv_md').attr('lnk', '[${pvtitle}](${app_url_raw})');\n            $('#clip_pv_ht').attr('lnk', app_url_raw);\n            $('#clip_pv_htc').attr('lnk', app_url_rawc);\n            $('#clip_pv_cn').attr('lnk', app_url_raw);\n            $('#clip_pv_cn').attr('tit', pvtitle);\n            $(this).animate({height:'100px', width:'200px', opacity: 0.95}, 300);\n        });\n        cc.mouseleave(() => { \n            slink.hide();\n            //g.deselectText();\n            $('#citeh').show();\n            cc.animate({height:'20px', width: '40px', opacity: .7}, 300); \n            return false;\n        });\n    }\n    work(vr) {}\n}\n","/* Skeleton\n */\n\nexport default class { // the one and only page object\n    constructor() {\n        this.stages = new Map([\n            ['weld', true],\n            ['wire', true],\n            ['work', false],\n        ]); // true means: once only, false means: my be repeated\n        this.stages_prev = new Map([\n            ['wire', 'weld'],\n            ['work', 'wire'],\n        ]);\n        this.before = new Map([\n            ['weld', new Map([\n                ['item',     new Set(['list'])],\n                ['facet',    new Set(['control', 'list'])],\n                ['filter',   new Set(['facet'])],\n                ['eumap',    new Set(['facet', 'filter'])],\n                ['ctype',    new Set(['facet', 'eumap'])],\n                ['tadiraha', new Set(['facet', 'ctype'])],\n                ['tadiraho', new Set(['facet', 'tadiraha'])],\n                ['tadiraht', new Set(['facet', 'tadiraho'])],\n                ['share',    new Set(['facet', 'list'])],\n            ])],\n            ['wire', new Map([\n                ['item',     new Set(['list'])],\n                ['facet',    new Set(['filter', 'eumap', 'ctype', 'tadiraha', 'tadiraho', 'tadiraht'])],\n                ['filter',   new Set(['list'])],\n                ['eumap',    new Set(['list'])],\n                ['ctype',    new Set(['list'])],\n                ['tadiraha', new Set(['list'])],\n                ['tadiraho', new Set(['list'])],\n                ['tadiraht', new Set(['list'])],\n            ])],\n            ['work', new Map([\n                ['facet',    new Set(['filter', 'eumap', 'ctype', 'tadiraha', 'tadiraho', 'tadiraht'])],\n            ])],\n        ]);\n    }\n    resolveTiming() {\n        /* the time constraints must form a directed acyclic graph.\n         * If that is the case, we need a linear order in which we can make the promises\n         * This function will calculate that order (of course, several orders are possible)\n         * Algorithm:\n         *\n         * A: make a graph of all tasks, a task is the combination of a component with a stage.\n         *\n         * B: compute sets of nodes that have a longest predecessor path of fixed length n\n         *\n         * 1. determine all tasks without predecessors, this is S0                                                (max length of predecessor chain = 0)\n         * 2. determine all tasks with all predecessors in S0, this is S1                                             (max length of predecessor chain = 1)\n         * 3. determine all tasks with: all predecessors in S0 or S1, at least one predecessor in S1, this is S2  (max length of predecessor chain = 2)\n         * ...\n         * n+1. determine all tasks with: all predecessors in S0, S1, ..., Sn, at least ione predecessor in Sn\n         *\n         * C: \n         * Prove theorem 1: Sn = {all nodes with longest chain of predecessors has length n}.\n         * Prove theorem 2: all nodes outside union of all Sn: they are part of a cycle.\n         *\n         * D: \n         * The required order is: first the nodes of S0 (in any order), then those of S1, then those of S2, and so on.\n         */\n        const timing_nodes = [];\n        const timing_edges = new Map();   // keys are nodes that must come before other nodes\n        const timing_edges_inv = new Map; // keys are nodes that must come after other nodes\n        // A: collect the nodes: pairs of component name and stage\n        for (const name of this.components.keys()) {\n            for (const stage of this.stages.keys()) {\n                timing_nodes.push(`${name}-${stage}`);\n            }\n        }\n        // collect the edges (we need to store every edge both ways)\n        function addEdge(prev_node, next_node) {\n            if (!timing_edges.has(prev_node)) {\n                timing_edges.set(prev_node, new Set());\n            }\n            if (!timing_edges_inv.has(next_node)) {\n                timing_edges_inv.set(next_node, new Set());\n            }\n            timing_edges.get(prev_node).add(next_node);\n            timing_edges_inv.get(next_node).add(prev_node);\n        }\n        // 1. per component, the stages are ordered\n        for (const [next_stage, prev_stage] of this.stages_prev) {\n            for (const name of this.components.keys()) {\n                addEdge(`${name}-${prev_stage}`, `${name}-${next_stage}`);\n            }\n        }\n        // 2. add the specific time constraints\n        for (const [stage, nexts] of this.before) {\n            for (const [next_name, prevs] of nexts) {\n                if (this.ignore.has(next_name)) {continue}\n                for (const prev_name of prevs.keys()) {\n                    if (this.ignore.has(prev_name)) {continue}\n                    addEdge(`${prev_name}-${stage}`, `${next_name}-${stage}`);\n                }\n            }\n        }\n        // B: compute the Sn (in subset)\n        let n = 0;\n        const subset = [];\n        const visited = new Set(); // collect all nodes that end up in an Sn\n        while (n <= timing_nodes.length) {\n            subset.push(new Set());\n            if (n == 0) {                                                // first round\n                for (const node of timing_nodes) {                         // select all nodes without prev_nodes\n                    if (!timing_edges_inv.has(node)) {\n                        subset[n].add(node);                             // and store them in subset[0]              \n                    }\n                }\n            }\n            else {\n                for (const prev_node of visited) {                          // start with prev_nodes in visited\n                    if (timing_edges.has(prev_node)) {                    // and consider their next_nodes\n                        for (const next_node of timing_edges.get(prev_node)) {\n                            if (!visited.has(next_node)) {                // but only if the next_node is not yet visited\n                                let good = true;\n                                for (const other_prev_node of timing_edges_inv.get(next_node)) {// consider the other prev nodes of the next nodes\n                                    if (!visited.has(other_prev_node)) {  // and require that they have been visited already\n                                        good = false;\n                                        break;\n                                    }\n                                } \n                                if (good) {\n                                    subset[n].add(next_node);             // if all is well, we add next_node to subset[n]\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n            if (subset[n].size == 0) {                      // if there are no new nodes, the next rounds will also not yield new nodes,\n                break;                                                    //  so we are done\n            }\n            for (const node of subset[n]) {                                 // after each round we add the saved next_nodes to the visited nodes\n                visited.add(node);\n            }\n            n++;\n        }\n        this._tasks = [];\n        this._timing = new Map();\n        if (visited.size != timing_nodes.length) {\n            const cycle = [];\n            for (const node of timing_nodes) {\n                if (!visited.has(node)) {\n                    cycle.push(node);\n                }\n            }\n            console.log('Circular timing constraints detected', cycle);\n        }\n        else {\n            for (const nodes of subset) {\n                for (const node of nodes) {\n                    this._tasks.push(node);\n                }\n            }\n            this._timing = timing_edges_inv;\n            console.log('Timing resolved', this._tasks);\n        }\n    }\n}\n","/* INDIVIDUAL COMPONENT: ctype\n * This manages the facet \"contribution type\"\n */\n\nimport Relative from './relative';\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'tadiraha');\n    }\n}\n","/* INDIVIDUAL COMPONENT: ctype\n * This manages the facet \"contribution type\"\n */\n\nimport Relative from './relative';\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'tadiraho');\n    }\n}\n","/* INDIVIDUAL COMPONENT: ctype\n * This manages the facet \"contribution type\"\n */\n\nimport Relative from './relative';\n\nexport default class extends Relative {\n    constructor(component) {\n        super(component, 'tadiraht', 1, 30);\n    }\n}\n","/* VIEW STATE\n * Contains the current state, based on request variables and local storage.\n * Request variables have precedence over local storage.\n * Request variables are checked and validated and translated, translated values go to local storage.\n * There is a list of recognized request variables, with their types and allowable values.\n */\n\nimport * as g from './generic.js';\nimport Msg from './message';\n\n/* private attributes as symbols */\nconst _spec_info = Symbol()\nconst _data = Symbol()\nconst _specs = Symbol()\nconst _msg = Symbol()\n\nexport default class {\n    constructor(page) {\n        this[_spec_info] = {\n            vars: new Set([\n                'list',\n                'flt_contrib',\n                'flt_country',\n                'flt_type',\n                'flt_tadiraha',\n                'flt_tadiraho',\n                'flt_tadiraht',\n                'rel_country_contrib',\n                'rel_type_contrib',\n                'rel_tadiraha_contrib',\n                'rel_tadiraho_contrib',\n                'rel_tadiraht_contrib',\n                'item_contrib',\n                'item_country',\n                'sort', \n            ]),\n            vals: new Map([\n                ['list', new Set([\n                    'contrib',\n                    'country',\n                    'type',\n                    'tadiraha',\n                    'tadiraho',\n                    'tadiraht',\n                ])],\n                ['sort', new Map([\n                    ['v', true],\n                    ['x', false],\n                ])],\n            ]),\n            default_value: new Map([\n                ['list', 'contrib'],\n                ['sort', true],\n            ]),\n            typ: new Map([\n                ['sort', 'boolean'],\n            ]),\n            url: new Set([\n                'list',\n                'item_contrib',\n                'item_country',\n            ]),\n            showas: new Map([\n                ['list', new Map([\n                    ['contrib', {sg: 'contribution', pl: 'contributions'}],\n                    ['country', {sg: 'country', pl: 'countries'}],\n                    ['type', {sg: 'type', pl: 'types'}],\n                    ['tadiraha', {sg: 'tadirah activity', pl: 'tadirah activities'}],\n                    ['tadiraho', {sg: 'tadirah object', pl: 'tadirah objects'}],\n                    ['tadiraht', {sg: 'tadirah technique', pl: 'tadirah techniques'}],\n                ])],\n            ]),\n        };\n        this[_data] = {}; // this should be an object and not a collection such as Map. Otherwise it does not function well with popstate.\n        this[_specs] = new Map();\n        this.page = page;\n        this[_msg] = new Msg('msg_page');\n        this._compile_specs();\n        this._getInitstate();\n        this._addHistory();\n    }\n    _compile_specs() {\n        const info = this[_spec_info];\n        for (const v of info.vars) {\n            const spec = {};\n            spec.vals = info.vals.get(v) || null;\n            spec.default_value = info.default_value.get(v) || '';\n            spec.typ = info.typ.get(v) || 'string';\n            spec.url = info.url.has(v);\n            spec.showas = info.showas.get(v) || {};\n            this[_specs].set(v, spec);\n        }\n    }\n    _validate(v, val) {\n        let newval, message;\n        if (this[_specs].has(v)) {\n            const spec = this[_specs].get(v);\n            if (spec.typ == 'string') {\n                if (spec.vals) {\n                    if (spec.vals.has(val)) {\n                        newval = val;\n                    }\n                    else {\n                        newval = spec.default_value;\n                        this[_msg].msg(`illegal string value for ${v}: \"${val}\" is replaced by \"${spec.default_value}\"`, 'warning');\n                    }\n                }\n                else {\n                    newval = val;\n                }\n            }\n            else if (spec.typ == 'integer') {\n                if (/^(\\-|\\+)?[0-9]+$/.test(val)) {\n                    newval = Number(val);\n                }\n                else {\n                    newval = spec.default_value;\n                    this[_msg].msg(`not a number value for ${v}: \"${val}\" is replaced by \"${spec.default_value}\"`, 'warning');\n                }\n                if (newval < spec.limits.min) {\n                    this[_msg].msg(`number to small for ${v}: \"${newval}\" is replaced by \"${spec.limits.min}\"`, 'warning');\n                }\n                if (newval > spec.limits.max) {\n                    this[_msg].msg(`number to big for ${v}: \"${newval}\" is replaced by \"${spec.limits.max}\"`, 'warning');\n                }\n            }\n            else if (spec.typ == 'boolean') {\n                if (spec.vals.has(val)) {\n                    newval = spec.vals.get(val);\n                }\n                else {\n                    newval = spec.default_value;\n                    this[_msg].msg(`illegal boolean value for ${v}: \"${val}\" is replaced by \"${spec.default_value}\"`, 'warning');\n                }\n            }\n        }\n        else {\n            newval = null;\n            this[_msg].msg(`unknown parameter: ${v}=${val}`, 'warning');\n        }\n        return newval;\n    }\n    getVars(comprehensive) {\n        const vars = [];\n        for (const v in this[_data]) {\n            const val = this[_data][v]\n            const spec = this[_specs].get(v);\n            if (comprehensive || spec.url) {\n                if (spec.typ == 'string' || spec.typ == 'integer') {vars.push(`${v}=${val}`)}\n                else if (spec.typ == 'boolean') {\n                    for (const [valid_val, trans_val] of spec.vals) {\n                        if (trans_val == val) {vars.push(`${v}=${valid_val}`)}\n                    }\n                }\n            }\n        }\n        return vars.join('&')\n    }\n    _getInitstate() {\n        for (const [v, val] of g.request_vars) {\n            if (!(this[_specs].has(v))) {\n                this[_msg].msg(`unknown parameter: ${v}=${val}`, 'warning');\n            }\n        }\n        for (const [v, spec] of this[_specs]) {\n            let val = null;\n            if (g.request_vars.has(v)) {\n                const raw_val = g.request_vars.get(v);\n                val = this._validate(v, raw_val);\n                g.localstorage_vars.set(v, val);\n            }\n            else if (g.localstorage_vars.isSet(v)) {\n                val = g.localstorage_vars.get(v);\n            }\n            else {\n                val = spec.default_value;\n                g.localstorage_vars.set(v, val);\n            }\n            this[_data][v] = val;\n        }\n    }\n    _addHistory(title, view_url) {\n        const tit = 'DARIAH contribution tool';\n        const this_url = `${app_url}?${this.getVars(false)}`;\n        History.pushState(this[_data], tit, this_url);\n    }\n    setState(v, val) {\n        this[_data][v] = val;\n        g.localstorage_vars.set(v, val);\n        this._addHistory();\n    }\n    getState(v) {\n        return this[_data][v];\n    }\n    getValues(v) {\n        return this[_specs].get(v).vals;\n    }\n    showState(v, val, mode) {\n        let result = val;\n        const md = (mode == undefined)?'sg':mode;\n        const showas = this[_specs].get(v).showas;\n        if (showas.has(val)) {\n            result = showas.get(val)[mode];\n        }\n        return result;\n    }\n    work() {\n        return function () {\n            const state = History.getState();\n            if (state && state.data) {\n                this[_data] = state.data;\n                this.page.work();\n            }\n        }.bind(this)\n    }\n}\n"],"sourceRoot":"/source/"}