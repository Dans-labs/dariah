var dY=(function(){`use strict`;var jJ={'&':`&amp;`,'<':`&lt;`,'>':`&gt;`};return function(cO){return cO.replace(/[&<>]/g,function(cJ){return jJ[cJ]})}}());var jl={ff:function(d){return this.hF()[d]},hF:function(fp){var l,ff,hG,hM,cd;cd={};if(!fp){fp=window.location.search}if(fp.indexOf("?")===-1){return{}}hM=fp.slice(1);hG=hM.split("&");hG.forEach(function(kp,l){ff=kp.split("=");cd[ff[0]]=ff[1]});return cd}};var gj=jl.hF();var jZ=$.initNamespaceStorage(`req`);var cD=jZ.localStorage;function hl(){if(document.selection){document.selection.empty()}else if(window.getSelection){window.getSelection().removeAllRanges()}};function kv(dV){hl();if(document.selection){var dy=document.body.createTextRange();dy.moveToElementText(document.getElementById(dV));dy.select()}else if(window.getSelection){var dy=document.createRange();dy.selectNode(document.getElementById(dV));window.getSelection().addRange(dy)}};function kE(cm,cK,hq){var kA=(cK==undefined)?cm.closest('div').find('.•jg'):cK;kA.toggle();if(hq !=undefined){hq(cm)}var gr,gg;if(cm.hasClass('fa-chevron-right')){gr='fa-chevron-right';gg='fa-chevron-down'}else{gr='fa-chevron-down';gg='fa-chevron-right'}cm.removeClass(gr);cm.addClass(gg)};function jL(fQ,ky,cO){return(cO.length > fQ)?cO.replace(/[^ -]+/g,function(dj){return dj.substr(0,ky)}):cO};function fV(cf){var cl={};if(cf !==null && cf !=undefined && cf !=''){var cb=cf.split(',');cb.forEach(function(cv){cl[cv]=true})}return cl};function hf(cb){return cb.join(',')};function dG(cl){var cb=[];for(var dj in cl){if(cl[dj]){cb.push(dj)}}return cb.join(',')};function dl(cn,kk){this.cQ=$(`#${cn}`);this.gZ=$(`#trash_${cn}`);this.hb=this.gZ.closest(`p`);this.gZ.click(function(g){g.preventDefault();this.hj()}.bind(this));this.gN();this.gT=kk};dl.prototype={gN:function(){this.cQ.hide();this.hb.hide()},jB:function(){this.cQ.show();if(this.cQ.html()!=``){this.hb.show()}},hj:function(){this.cQ.html(``);if(this.gT !=undefined){this.gT()}this.gN()},s:function(cO,fY){if(fY==undefined){fY=`info`}var kd=this.cQ.html();this.cQ.html(`${kd}<p class="${fY}">${cO}</p>`);this.jB()}};function gI(C){this.cG={};this.C=C;this.s=C.s;this.jq();this.gJ()};gI.prototype={cI:{list:{L:true,A:`string`,y:{contrib:1,country:1,type:1,tadiraha:1,tadiraho:1,tadiraht:1},B:`contrib`},flt_contrib:{L:false,A:`string`,y:null,B:``},flt_country:{L:false,A:`string`,y:null,B:``},flt_type:{L:false,A:`string`,y:null,B:``},flt_tadiraha:{L:false,A:`string`,y:null,B:``},flt_tadiraho:{L:false,A:`string`,y:null,B:``},flt_tadiraht:{L:false,A:`string`,y:null,B:``},rel_country_contrib:{L:false,A:`string`,y:null,B:``},rel_type_contrib:{L:false,A:`string`,y:null,B:``},rel_tadiraha_contrib:{L:false,A:`string`,y:null,B:``},rel_tadiraho_contrib:{L:false,A:`string`,y:null,B:``},rel_tadiraht_contrib:{L:false,A:`string`,y:null,B:``},item_contrib:{L:true,A:`string`,y:null,B:``},item_country:{L:true,A:`string`,y:null,B:``},sort:{L:false,A:`boolean`,y:{v:true,x:false},B:true}},fJ:{list:{contrib:{cE:`contribution`,dc:`contributions`},country:{cE:`country`,dc:`countries`},type:{cE:`type`,dc:`types`},tadiraha:{cE:`tadirah activity`,dc:`tadirah activities`},tadiraho:{cE:`tadirah object`,dc:`tadirah objects`},tadiraht:{cE:`tadirah technique`,dc:`tadirah techniques`}}},jC:function(d,r){var P,ld;if(d in this.cI){var v=this.cI[d];if(v.A==`string`){if(v.y){if(r in v.y){P=r}else{P=v.B;this.s.s(`illegal string value for ${d}: "${r}" is replaced by "${v.B}"`,`warning`)}}else{P=r}}else if(v.A==`integer`){if(/^(\-|\+)?[0-9]+$/.test(r)){P=Number(r)}else{P=v.B;this.s.s(`not a number value for ${d}: "${r}" is replaced by "${v.B}"`,`warning`)}if(P < v.fZ.kf){this.s.s(`number to small for ${d}: "${P}" is replaced by "${v.fZ.kf}"`,`warning`)}if(P > v.fZ.kc){this.s.s(`number to big for ${d}: "${P}" is replaced by "${v.fZ.kc}"`,`warning`)}}else if(v.A==`boolean`){if(r in v.y){P=v.y[r]}else{P=v.B;this.s.s(`illegal boolean value for ${d}: "${r}" is replaced by "${v.B}"`,`warning`)}}}else{P=null;this.s.s(`unknown parameter: ${d}=${r}`,`warning`)}return P},dZ:function(jN){gt=[];for(var d in this.cG){var r=this.cG[d];var v=this.cI[d];if(jN || v.L){if(v.A==`string` || v.A==`integer`){gt.push(`${d}=${r}`)}else if(v.A==`boolean`){for(var hT in v.y){if(v.y[hT]==r){gt.push(`${d}=${hT}`)}}}}}return gt.join(`&`)},jq:function(){for(var d in gj){if(!(d in this.cI)){this.s.s(`unknown parameter: ${d}=${r}`,`warning`)}}for(var d in this.cI){var r=null;if(d in gj){var kt=gj[d];r=this.jC(d,kt);cD.set(d,r)}else if(cD.isSet(d)){r=cD.get(d)}else{r=this.cI[d].B;cD.set(d,r)}this.cG[d]=r}},gJ:function(lf,lg){var kD=`DARIAH contribution tool`;var kB=`${app_url}?${this.dZ(false)}`;History.pushState(this.cG,kD,kB)},ct:function(d,r){this.cG[d]=r;cD.set(d,r);this.gJ()},K:function(d){return this.cG[d]},jU:function(d){return this.cI[d].y},gn:function(d,r,O){var cd=r;var lc=(O==undefined)?`cE`:O;if(this.fJ[d]!=undefined && this.fJ[d][r]!=undefined){cd=this.fJ[d][r][O]}return cd},j:function(){return function(){var h=History.getState();if(h && h.data){this.cG=h.data;this.C.j()}}.bind(this)}};function X(c,A,jK,fQ,kx){this.c=c;this.F={};this.dR={};this.fG={};this.fI={};this.dM={};this.U={};this.cy={};this.Z={};this.dp={};this.dn={};this.cg={cw:`-`,d:`-none`};this.H=A;this.jm=jK || 2;this.jn=fQ || 14;this.jA=kx || 6};X.prototype={Y:function(b){var kG=this.c.h.gn(`list`,this.H,`cE`);var kF=this.c.h.gn(`list`,this.H,`dc`);var q=``;q +=this.gV(b);q +=`
<div>
    <p class="•jf"><span fct="${this.c.d}-${b}"></span> By ${kG}</p>
    <p class="•kM"><span rv="_all" class="•cP"></span> <a rv="_all" href="#" class="•jh">all ${kF}</a></p>
    <table class="•kT" id="list-${this.H}-vals_${b}">
        <tr>
`;this.cy[b].forEach(function(f,l,cb){if((l % this.jm==0)&&(l > 0)&&(l < cb.length)){q +=`</tr><tr>`}var fh=this.Z[b][f];q +=`
            <td><span rv="${f}" class="•cP"></span></td>
            <td><a rv="${f}" href="#" class="•fr">${dY(fh)}</a></td>
            `},this);q +=`
        </tr>
    </table>
    <p class="•kU" id="list2-${this.H}-vals_${b}">
`;this.cy[b].forEach(function(f,l,cb){var fh=this.Z[b][f];var jM=dY(jL(this.jn,this.jA,fh));q +=`<a href="#" rv="${f}" class="•gD" title="${dY(fh)}">${jM}</a> `},this);q +=`
    </p>
</div>`;this.c.n[b].html(q)},fC:function(b){var m=this.c.n[b];this.dR[b]=m.find(`#list-${this.H}-vals_${b}`);this.fG[b]=m.find(`#list2-${this.H}-vals_${b}`);var k=this;this.dR[b].find(`.•fr`).click(function(g){g.preventDefault();var f=$(this).attr(`rv`);var Q=k.dm(b,k.c.h.K(`rel_${k.H}_${b}`));Q[f]=(f in Q)?!Q[f]:true;k.c.h.ct(`rel_${k.H}_${b}`,dG(Q));m.find(`.•dk`).removeClass(`•dk`);$(this).addClass(`•dk`)});this.fG[b].find(`.•gD`).click(function(g){g.preventDefault();var f=$(this).attr(`rv`);var Q=k.dm(b,k.c.h.K(`rel_${k.H}_${b}`));Q[f]=(f in Q)?!Q[f]:true;k.c.h.ct(`rel_${k.H}_${b}`,dG(Q));$(this).closest(`div`).find(`.morec`).click();var hA=k.dR[b].find(`a[rv="${f}"]`);m.find(`.•dk`).removeClass(`•dk`);hA.addClass(`•dk`);$(`#left`)[0].scrollTop=50;hA[0].scrollIntoView({behavior:`smooth`,alignToTop:`true`})});this.dM[b]=this.c.n[b].find(`[rv="_all"]`);this.dM[b].click(function(g){g.preventDefault();var jX=$(this).hasClass(`•z`);if(jX){k.c.h.ct(`rel_${k.H}_${b}`,dG(k.dn[b]))}else{k.c.h.ct(`rel_${k.H}_${b}`,dG(k.dp[b]))}})},jx:function(b,t){var hh=true;for(var f in this.Z[b]){var hr=this.dR[b].find(`[rv="${f}"]`);var hs=this.fG[b].find(`[rv="${f}"]`);if(f in t && t[f]){hr.addClass(`•z`);hs.addClass(`•z`)}else{hr.removeClass(`•z`);hs.removeClass(`•z`);hh=false}}if(hh){this.dM[b].addClass(`•z`)}else{this.dM[b].removeClass(`•z`)}},dm:function(b,cf){var cl={};if(cf !==null && cf !=undefined && cf !=''){var cb=cf.split(',');cb.forEach(function(cv){cl[cv]=true})}for(var f in this.Z[b]){if(!(f in cl)){cl[f]=false}}return cl},hO:function(b){this.U[b]={};for(var f in this.Z[b]){this.U[b][f]=0}var dz=this.c.J[b];for(var dj in this.F[b]){var l=this.F[b][dj];var hx=false;for(var f in dz[l]){this.U[b][f]+=1;hx=true}if(!hx){this.U[b][this.cg.cw]+=1}}for(var f in this.U[b]){this.c.n[b].find(`span[rv="${f}"].•cP`).html(this.U[b][f])}this.c.n[b].find(`span[rv="_all"].•cP`).html(this.F[b].length);this.gQ(b)},cv:function(b,l){var dz=this.c.J[b];var fj=this.dm(b,this.fI[b]);if((l in dz)&&(Object.keys(dz[l]).length !=0)){for(var f in dz[l]){if((f in fj)&& fj[f]){return true}}}else{if((this.cg.cw in fj)&&(fj[this.cg.cw])){return true}}return false},N:function(b){return(this.c.h.K(`list`)==b)},S:function(b){this.cy[b]=[];this.Z[b]={};this.dn[b]={};this.dp[b]={};this.gU(b);this.gR(b);this.cy[b].push(this.cg.cw);this.Z[b][this.cg.cw]=this.cg.d;this.dn[b][this.cg.cw]=false;this.dp[b][this.cg.cw]=true;this.Y(b)},G:function(b){this.gO(b);this.fC(b)},j:function(b){this.fI[b]=this.c.h.K(`rel_${this.H}_${b}`);var t=this.dm(b,this.fI[b]);this.gP(b,t);this.jx(b,t)},gU:function(b){var t=this.c.t[b];for(var l in t){var f=t[l];this.dn[b][l]=false;this.dp[b][l]=true;this.cy[b].push(l);this.Z[b][l]=f}this.cy[b].sort(function(cJ,dr){return(t[cJ]< t[dr])?-1:(t[cJ]> t[dr])?1:0})},gR:function(b){},gV:function(b){return ``},gO:function(b){},gP:function(b){},gQ:function(b){}};function dH(c){X.call(this,c,`type`)};dH.prototype=Object.create(X.prototype);dH.prototype.constructor=dH;function dK(c){X.call(this,c,`tadiraho`)};dK.prototype=Object.create(X.prototype);dK.prototype.constructor=dK;function dJ(c){X.call(this,c,`tadiraha`)};dJ.prototype=Object.create(X.prototype);dJ.prototype.constructor=dJ;function dL(c){X.call(this,c,`tadiraht`,1,30)};dL.prototype=Object.create(X.prototype);dL.prototype.constructor=dL;function T(c){X.call(this,c,`country`);this.cS={};this.cR={};this.fH={};this.dS={};this.gS={'-':true,CY:true,KS:true,TR:true,MC:true,GE:true}};T.prototype=Object.create(X.prototype);T.prototype.constructor=T;T.prototype.gV=function(b){return `<div id="map-europe_${b}" class="•kS"><p class="•fw"><a class="fa fa-arrows" href="#" title="zoom to fit all countries"/></p></div>`};T.prototype.gO=function(b){var k=this;var m=this.c.n[b];this.cR[b]=m.find(`#map-europe_${b}`);var hy=this.cR[b].width()*0.6;this.cR[b].width(`100%`);this.cR[b].height(hy);this.cR[b].vectorMap({'map':`europe_mill`,backgroundColor:`#ccccff`,regionsSelectable:true,markersSelectable:true,regionsSelectableOne:false,markersSelectableOne:false,markerStyle:{initial:{fill:`#008800`,'fill-opacity':0.2,stroke:`none`,'stroke-width':0,'stroke-opacity':0.2,'r':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':1,'stroke-opacity':1},selected:{fill:`#008800`,'fill-opacity':1},selectedHover:{}},regionStyle:{initial:{fill:`#bbbbbb`,'fill-opacity':1,stroke:`none`,'stroke-width':0,'stroke-opacity':1},hover:{cursor:`pointer`,stroke:`#ffff44`,'stroke-width':3,'stroke-opacity':1},selected:{fill:`#dd8844`,'fill-opacity':1},selectedHover:{}},markers:this.fH[b],series:{markers:[{values:{},scale:[0,20],normalizeFunction:`linear`,attribute:`r`,min:0,max:100}],regions:[{scale:{'kn':`#ffffff`,'jW':`#ffddbb`},attribute:`fill`,values:this.dS[b]}]},onRegionTipShow:function(g,fS,f){fS.html(`${f}: ${(f in this.U[b])?this.U[b][f]:'not in DARIAH'}`)}.bind(this),onMarkerTipShow:function(g,fS,f){fS.html(`${f}: ${(f in this.U[b])?this.U[b][f]:'not in DARIAH'}`)}.bind(this),onRegionClick:function(g,f){if(!(f in this.Z[b])){g.preventDefault()}}.bind(this),onMarkerClick:function(g,f){if(!(f in this.Z[b])){g.preventDefault()}}.bind(this),onRegionSelected:function(g,f,l,Q){if(this.fO){this.c.h.ct(`rel_${this.H}_${b}`,hf(Q)+this.hc(b))}}.bind(this),onMarkerSelected:function(g,f,l,Q){if(this.fO){this.c.h.ct(`rel_${this.H}_${b}`,hf(Q)+this.hc(b))}}.bind(this)});var hV=m.find(`p.•fw`);hV.css(`top`,`${hy-20}px`);hV.css(`left`,`10px`);var kL=m.find(`p.•fw a`);kL.click(function(g){g.preventDefault();k.cS[b].setFocus({regions:[`GB`,`GR`]})});this.cS[b]=this.cR[b].vectorMap('get','mapObject');this.cS[b].setFocus({regions:[`GB`,`GR`]})};T.prototype.hc=function(b){var cd=[];var hQ=this.dm(b,this.c.h.K(`rel_${this.H}_${b}`));var hp=true;for(var f in this.gS){if(f in hQ && hQ[f]){cd.push(f);hp=false}}return hp?``:(`,`+cd.join(','))};T.prototype.gP=function(b,t){this.fO=false;var gb={};for(var f in t){if(!(f in this.gS)&& f !=this.cg.cw){gb[f]=t[f]}}this.cS[b].setSelectedRegions(gb);this.cS[b].setSelectedMarkers(gb);this.fO=true};T.prototype.gQ=function(b){var fn=this.F[b].length;if(fn==0){fn=1}var hU={};for(var f in this.U[b]){if(f !=this.cg.cw){var hH=100 * this.U[b][f]/ fn;hU[f]=(fn < 10)?hH:(10*Math.sqrt(hH))}}this.cS[b].series.markers[0].setValues(hU)};T.prototype.gU=function(b){};T.prototype.gR=function(b){this.fH[b]={};this.dS[b]={};var t=this.c.t[b];for(var l in t){var f=t[l];if(f[1]){this.dn[b][l]=false;this.dp[b][l]=true;this.cy[b].push(l);this.Z[b][l]=f[0];if(f.length > 3){this.fH[b][l]={latLng:[f[2],f[3]],d:f[0]}}this.dS[b][l]='jW'}else{this.dS[b][l]='kn'}}this.cy[b].sort(function(cJ,dr){return(t[cJ]< t[dr])?-1:(t[cJ][0]> t[dr][0])?1:0})};function gG(c){this.c=c;this.fK={};this.cx={};this.fE={};this.fB={};this.gL={};this.dT={};this.dO={};this.fM={};this.dQ={};this.F={}};gG.prototype={Y:function(b){var q=`
<div>
    <p class="•jf"><span fct="${this.c.d}-${b}"></span> By full text search
        <a href="#" title="modify full text filter" id="flt2_${b}" class="•kR •fr •z •gC"></a>
        <a href="#" class="•fq fa fa-close •kQ" id="clearf_${b}"></a>
    </p>
    <div id="fltw_${b}">
        <p id="•kP${b}" class="•ft •fq •fs ui-widget">
            <input id="flt_${b}" class="•ft •gC"/>
            <span •fs class="•cP" id="stats_${b}"></span>
        </p>
        <div id="autoc_${b}" style="display: none;">here ${b}</div>
    </div>
</div>`;this.c.n[b].html(q)},jy:function(b){var cF=this.c.h.K(`flt_${b}`);this.fE[b].html(cF);this.cx[b].val(cF);this.cx[b].autocomplete(`search`,cF)},jv:function(b){return function(kZ,kI){this.dQ[b]={};kI.content.forEach(function(kH,l){this.dQ[b][kH.value]=1},this);if(!(this.fM[b])){var cF=this.cx[b].val();this.c.h.ct(`flt_${b}`,cF)}}.bind(this)},jw:function(b){this.dO[b].click(function(g){g.preventDefault();this.cx[b].val(``);this.cx[b].autocomplete(`search`,``)}.bind(this))},hO:function(b){var gp;if(this.cx[b].val()==``){gp=``;this.dT[b].removeClass(`•z`)}else{gp=`${this.p.F[b].length} of `;this.dT[b].addClass(`•z`)}this.dT[b].html(`${gp}${this.F[b].length}`)},cv:function(b,l){return(l in this.dQ[b])},N:function(b){return(this.c.h.K(`list`)==b)},S:function(b){this.Y(b)},G:function(b){if(!this.p){this.p=this.c.C.cL(`p`).W}var J=this.c.C.cL(`M`).J[b];this.fK[b]=[];J.forEach(function(cz,l){this.fK[b].push({label:cz[1],value:`${cz[0]}`})},this);this.dQ[b]={};this.F[b]=[];var m=this.c.n[b];var fN=m.find(`#fltw_${b}`);var ht=$(`#flt_${b}`);this.cx[b]=ht;var hv=$(`#flt2_${b}`);this.fE[b]=hv;this.fB[b]=fN.find(`#•kP${b}`);this.gL[b]=fN.find(`#autoc_${b}`);this.dT[b]=fN.find(`#stats_${b}`);this.dO[b]=m.find(`#clearf_${b}`);this.cx[b].autocomplete({appendTo:this.gL[b],source:this.fK[b],response:this.jv(b),minLength:0});hv.click(function(g){g.preventDefault();$(this).closest(`div`).find(`.morec`).click();ht[0].focus()});this.fM[b]=true;this.jw(b);this.jy(b);this.fM[b]=false},j:function(b){var cF=this.c.h.K(`flt_${b}`);if(cF==``){this.fB[b].removeClass(`•z`);this.dO[b].hide()}else{this.fB[b].addClass(`•z`);this.dO[b].show()}this.fE[b].html(cF)}};function gF(c){this.c=c;this.gX={};this.J={};this.gq={};this.F={};this.fT={}};gF.prototype={Y:function(b){var q=``;q +=`<p><span fct="all"></span>Filtering <span id="fstats_${b}"></span></p>`;this.c.n[b].html(q)},N:function(b){return this.c.h.K(`list`)==b},S:function(b){var cU=this.c.cU;this.fT[b]={};for(var cc in cU){var jR=cU[cc];if(jR.cZ(b)){this.fT[b][cc]=cU[cc]}}this.Y(b)},cH:function(cX,O){var k=this;var fR=cX.closest(`p`);var db=fR.find(`.hidec`);var gc=fR.find(`.morec`);var dd=fR.find(`.showc`);var fU=cX.closest(`div`).find(`table,.•ft`);var fP=cX.closest(`div`).find(`.•kU,.•lk`);var gf=cX.closest(`div`).find(`.•kR`);var cC=`fctx_${cX.closest('span').attr('fct')}`;var hC=O==undefined;if(hC){if(cD.isSet(cC)){O=cD.get(cC)}else{O=1}}var dU=cC==`fctx_all`;if(dU && !hC){cX.closest(`div`).find(`div.•kN span[fct]`).each(function(){k.cH($(this),O)})}cD.set(cC,O);if(O==0){db.show();gc.hide();dd.hide();if(!dU){gf.show();fU.hide();fP.hide()}}else if(O==1){db.hide();gc.show();dd.hide();if(!dU){gf.show();fU.hide();fP.show()}}else{db.hide();gc.hide();dd.show();if(!dU){gf.hide();fU.show();fP.hide()}}},G:function(b){var k=this;var m=this.c.n[b];var jY=this.c.C.cL(`M`).n[b];this.gX[b]=m.find(`#fstats_${b}`);this.gq[b]=jY.find(`#table_${b}`);var fX=` details; click to change level of details`;var jP=`<a class="showc fa fa-fw fa-list-ul" href="#" title="full${fX}"></a><a class="morec fa fa-fw fa-align-left" href="#" title="condensed${fX}"></a><a class="hidec fa fa-fw fa-minus" href="#" title="hidden${fX}"></a>`;m.addClass(`•gB`);m.find(`span[fct]`).each(function(){$(this).html(`${jP}&nbsp`);k.cH($(this))});m.find(`.hidec`).click(function(g){g.preventDefault();k.cH($(this),1)});m.find(`.morec`).click(function(g){g.preventDefault();k.cH($(this),2)});m.find(`.showc`).click(function(g){g.preventDefault();k.cH($(this),0)})},j:function(b){this.gq[b].find(`tr[id]`).hide();var kg=this.c.C.cL(`M`);var J=kg.J[b];var cA=this.fT[b];this.F[b]=[];for(var cc in cA){var p=cA[cc].W;p.F[b]=[]}J.forEach(function(cz,l){var cv=true;var dD=null;var dw=false;for(var cc in cA){if(!dw){var p=cA[cc].W;var hR=p.cv(b,cz[0]);if(!hR){cv=false;if(dD==null){dD=p}else{dw=true}}}}if(!dw){if(cv){this.F[b].push(cz[0]);this.gq[b].find(`tr[id="r${cz[0]}"]`).show()}if(dD !=null){dD.F[b].push(cz[0])}else{for(var cc in cA){var p=cA[cc].W;p.F[b].push(cz[0])}}}},this);for(var cc in cA){var p=cA[cc].W;p.hO(b)}this.gX[b].html(`${this.F[b].length} of ${J.length}`)}};function fA(c){this.c=c};fA.prototype={Y:function(b){var q=``;q +=`<table id="table_${b}">`;this.c.J[b].forEach(function(D){var gm=`<tr rid="${D[0]}"><td><a class="showc fa fa-fw fa-list-ul" href="#" title="hide fields"></a><a class="hidec fa fa-fw fa-minus" href="#" title="show fields"></a></td>`;var gl=`</tr>`;if(b==`contrib`){q +=`${gm}<td><a href="#" class="fa fa-fw fa-minus"></a>${D[1]}</td>${gl}`}else if(b==`country`){fW=(D[3]==1)?`dariah`:``;q +=`${gm}<td class="•jd">${D[1]}<td><td class="•kO">${D[2]}<td><td class="•jj">${fW}</td><td class="•fv">${D[4]}</td><td class="•fv">${D[5]}</td>${gl}`}else if(b==`type` || b==`tadiraha` || b==`tadiraho` || b==`tadiraht`){q +=`${gm}<td class="•jk">${D[1]}<td>${gl}`}});q +=`</table>`;this.c.n[b].html(q)},cH:function(gk,b,cM){var k=this;var db=gk.find(`.hidec`);var dd=gk.find(`.showc`);var dA=gk.attr(`rid`);var cK=this.c.n[b].find(`tr[iid="${dA}"]`);var O=(dA in cM)&& cM[dA];if(O){db.show();dd.hide();if(cK.length){cK.show()}}else{db.hide();dd.hide();if(cK.length){cK.hide()}}},gW:function(dW,b,h){var cM=fV(this.h.K(cC));var dA=dW.closest(`tr`).attr(`rid`);cM[dA]=h;this.h.ct(cC,dG(cM))},N:function(b){return this.c.h.K(`list`)==b},S:function(b){this.Y(b)},G:function(b){var k=this;var m=this.c.n[b];var cC=`${this.c.d}_${b}`;m.find(`.hidec`).click(function(g){g.preventDefault();k.gW($(this),b,true)});m.find(`.showc`).click(function(g){g.preventDefault();k.gW($(this),b,false)})},j:function(b){var k=this;var cC=`${this.c.d}_${b}`;var m=this.c.n[b];var cM=fV(this.c.h.K(`${this.c.d}_${b}`));m.find(`tr[rid]`).each(function(){k.cH($(this),b,cM)})}};function fz(c){this.c=c};fz.prototype={Y:function(b,cp){var cn=this.c.fD[b];var hn=cn.find(`tr[id="r${cp[0]}"]`);var q=`<tr iid="${cp[0]}">`;if(b==`contrib`){var gs=[];cp[5].forEach(function(hS){gs.push(`<a href="#" tid="${hS[0]}">${hS[1]}</a>`)});q +=`
<td>
<b>Contact person:</b> ${cp[2]}<br/>
<b>Country:</b> ${cp[3]} = ${cp[4]}<br/>
<b>Types:</b> ${gs.join(`,`)}</br>
</td>
`}else if(b==`country`){this.c.J[b].forEach(function(D){fW=(D[3]==1)?`dariah`:``;q +=`<tr id="r${D[0]}"><td class="•jd">${D[1]}<td><td class="•kO">${D[2]}<td><td class="•jj">${fW}</td><td class="•fv">${D[4]}</td><td class="•fv">${D[5]}</td></tr>`})}else if(b==`type` || b==`tadiraha` || b==`tadiraho` || b==`tadiraht`){this.c.J[b].forEach(function(D){q +=`<tr id="r${D[0]}"><td class="•jk">${D[1]}<td></tr>`})}q +=`</tr>`;hn.after(q)},N:function(b){return this.c.h.K(`list`)==b},S:function(b){this.c.J[b].forEach(function(cp){this.Y(b,cp)},this)},G:function(b){},j:function(b){}};function fy(c){this.c=c;this.cm={};this.dX={}};fy.prototype={Y:function(b){this.c.n[b].html(`<a class="•gz" href="#">${this.c.h.gn('list', b, 'cE')}</a> `)},fC:function(b){this.dX[b].click(function(g){g.preventDefault();this.c.h.ct(`list`,b)}.bind(this))},jr:function(b){return this.c.h.K(`list`)==b},N:function(b){return true},S:function(b){this.Y(b);this.cm[b]=this.c.n[b];this.cm[b].addClass(`•gy`);this.dX[b]=this.c.n[b].find(`a`)},G:function(b){this.fC(b)},j:function(b){if(this.jr(b)){this.dX[b].addClass(`•z`);this.cm[b].addClass(`•z`)}else{this.dX[b].removeClass(`•z`);this.cm[b].removeClass(`•z`)}}};function gH(c){this.c=c};gH.prototype={N:function(b){return true},S:function(b){var q=`
<p id="•gv">Cite</p>
<table align="center">
    <tr>
        <td class="•gw clr">
            <a lnk="" href="#" id="•jb" title="link to page content and appearance (markdown)" class="ctrl fa fa-level-down fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hY" title="link to page content and appearance (html)" class="ctrl fa fa-external-link-square fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•hZ" title="link to page content (html)" class="ctrl fa fa-external-link fa-lg fa-fw"></a>
            <a lnk="" href="#" id="•gx" title="copy page content" class="ctrl fa fa-file-text-o fa-lg fa-fw"></a>
        </td>
    </tr>
    <tr>
        <th class="•gw" width="60px">page view</th>
    </tr>
    <tr class="•lh">
        <td class="•gw"><span id="•kW" class="ctrl fa fa-chevron-right fa-fw"></span><span id="•kV" class="•jg">share link to this page with or without view settings.</span></td>
    </tr>
</table>
<p id="•hW"></p>
<p id="•hX"></p>
`;this.c.n[b].html(q)},G:function(b){var k=this;var m=this.c.n[b];var fk=$(`#self_link`);fk.hide();m.addClass(`•gE`);m.find(`.•jg`).hide();m.find(`#•jb,#•hY,#•hZ,#•lj`).click(function(g){g.preventDefault();window.prompt(`Press <Cmd-C> and then <Enter> to copy link on clipboard`,$(this).attr(`lnk`))});m.find(`#•gx`).click(function(g){g.preventDefault();var dV=`middle`;var dq=app_url_cite+k.c.h.dZ(true);fk.show();fk.attr(`href`,dq);kv(dV)});m.find(`#•kW`).click(function(g){g.preventDefault();kE($(this),$(`#•kV`))});m.click(function(g){g.preventDefault();var dq=app_url_cite+k.c.h.dZ(true);var jH=app_url_cite+k.c.h.dZ(false);$(`#•gv`).hide();$(`#•hW`).html(``);$(`#•hX`).html(``);$(`.•gw.clr,#•hW,#•hX`).removeClass(`error warning good special`);var hL=dY($(`title`).text());$(`#•jb`).attr(`lnk`,`[${hL}](${dq})`);$(`#•hY`).attr(`lnk`,dq);$(`#•hZ`).attr(`lnk`,jH);$(`#•gx`).attr(`lnk`,dq);$(`#•gx`).attr(`tit`,hL);$(this).animate({height:`100px`,width:`200px`,opacity:0.95},300)});m.mouseleave(function(){fk.hide();$(`#•gv`).show();m.animate({height:`20px`,width:`40px`,opacity:.7},300);return false})},j:function(b){}};function fx(d,R,C){this.d=d;this.C=C;this.R=R;this.E=R.E;this.cT={};for(var b in this.E){this.cT[b]={};for(var cf in this.C.fl){this.cT[b][cf]=true}}this.s={};this.n={};this.h=this.C.h;this.J={};this.t={};this.hz={};this.W=new R.w(this)};fx.prototype={hD:function(b,x){return !this.cT[b][x].state ||(this.cT[b][x].state()==`rejected`)},jp:function(b,x,fd){var hB=this[fd].bind(this,b);var kC=this.C.jS(this.d,x);var hK=[];kC.forEach(function(fm){var fg=fm[0];var gh=fm[1];var hI=this.C.cL(fg);if(hI.cZ(b)){hK.push(hI.cT[b][gh])}},this);this.cT[b][x]=$.when.apply($,hK).then(hB)},cV:function(b,x,fd){if(x in this.C.fl){var kl=this.C.fl[x]&& !this.R.ds;if(!kl || this.hD(b,x)){this.jp(b,x,fd)}}},cZ:function(b){return(b in this.E)},hd:function(b,kj){if(this.cZ(b)){if(b in this.n){if(kj){this.n[b].show()}else{this.n[b].hide()}}}},gM:function(b,cj){var I=url_tpl.replace(/_c_/,`data`).replace(/_f_/,`${this.R.I}_${b}`)+`.json`;this.s[b].s(`fetching data ...`);var ks=this.js.bind(this,b);if(!(cj==undefined)){I +=`?ids=${cj.join(',')}`}return $.ajax({type:`POST`,url:I,contentType:`application/json; charset=utf-8`,dataType:`json`}).then(function(cB){ks(cB,cj)})},js:function(b,cB,cj){this.s[b].hj();cB.msgs.forEach(function(kb){this.s[b].s(kb)},this);if(cB.good){this.J[b]=cB.data;if(this.R.ds){}if(`relvals` in cB){this.t[b]=cB.relvals}if(this.R.ds){cj.forEach(function(fb){this.hz[fb]=true},this)}}this.W.S(b)},jD:function(b){this.fD=this.C.jT(this.R.V,this.E);if(!(this.R.ds)){this.n[b]=$(`#${this.d}_${b}`);if(this.n[b].length==0){var cn=this.fD[b];cn.append(`<div id="msg_${this.d}_${b}"></div>`);cn.append(`<div id="${this.d}_${b}" class="•kN"></div>`);this.n[b]=$(`#${this.d}_${b}`)}this.s[b]=new dl(`msg_${this.d}_${b}`)}else{if(!(b in this.s)){var cn=this.fD[b];cn.prepend(`<div id="msg_${this.d}_${b}"></div>`);this.s[b]=new dl(`msg_${this.d}_${b}`)}}if(this.R.I !=null){var cj=[];if(this.R.ds){var jV=fV(this.h.K(`${this.R.I}_${b}`));for(var fb in jV){if(!(fb in this.hz)){cj.push(fb)}}if(cj.length !=0){return this.gM(b,cj)}}else{return this.gM(b)}}else{this.W.S(b)}},jE:function(b){this.W.G(b)},jF:function(b){this.hd(b,true);this.W.j(b)},S:function(b){if(this.cZ(b)&& this.W.N(b)){this.cV(b,`S`,`jD`)}},G:function(b){if(this.cZ(b)&& this.W.N(b)){this.cV(b,`G`,`jE`)}},j:function(b){if(this.cZ(b)&& this.W.N(b)){this.cV(b,`j`,`jF`)}else{this.hd(b,false)}}};function dI(){this.d=`page`;this.s=new dl(`msg_${this.d}`);this.h=new gI(this);this.fl={S:true,G:true,j:false};this.hN={G:`S`,j:`G`};var dx=this.h.jU(`list`);var dt={contrib:1};var jQ={'':1};this.dP={kw:{V:`body`,E:jQ,I:null,w:gH},dW:{V:`left`,E:dx,I:null,w:fy},M:{V:`middle`,E:dx,I:`list`,w:fA},fc:{V:`M`,E:dx,I:`item`,w:fz},p:{V:`dW`,E:dx,I:null,w:gF},cY:{V:`p`,E:dx,I:null,w:gG},cW:{V:`p`,E:dt,I:`country`,w:T},dv:{V:`p`,E:dt,I:`type`,w:dH},dB:{V:`p`,E:dt,I:`tadiraha`,w:dJ},df:{V:`p`,E:dt,I:`tadiraho`,w:dK},dC:{V:`p`,E:dt,I:`tadiraht`,w:dL}},this.gK={fc:true},this.dN={S:{fc:{M:1},p:{dW:1,M:1},cY:{p:1},cW:{p:1,cY:1},dv:{p:1,cW:1},dB:{p:1,dv:1},df:{p:1,dB:1},dC:{p:1,df:1},kw:{p:1,M:1}},G:{fc:{M:1},p:{cY:1,cW:1,dv:1,dB:1,df:1,dC:1},cY:{M:1},cW:{M:1},dv:{M:1},dB:{M:1},df:{M:1},dC:{M:1}},j:{p:{cY:1,cW:1,dv:1,dB:1,df:1,dC:1}}};this.fF={},this.ch={};for(var d in this.dP){if(d in this.fF){continue}this.dP[d].ds=(d in this.gK)&& this.gK[d];var c=new fx(d,this.dP[d],this);c.cU={};this.ch[d]=c}for(var d in this.ch){var jI=this.ch[d];var hm=this.dP[d].V;if(hm in this.ch){var kr=this.ch[hm];kr.cU[d]=jI}}this.jt();this.jz(80);History.Adapter.bind(window,`statechange`,this.h.j())};dI.prototype={jz(kz){var kK=`${window.innerHeight - kz}px`;for(var kJ in{'middle':1,'left':1,'right':1}){$(`#${kJ}`).css(`height`,kK)}},jt(){var dF=[];var dE={};var dg={};for(var d in this.ch){for(var x in this.fl){dF.push(`${d}-${x}`)}}function hg(cs,ck){if(!(cs in dE)){dE[cs]={}}if(!(ck in dg)){dg[ck]={}}dE[cs][ck]=true;dg[ck][cs]=true}for(var hE in this.hN){var gh=this.hN[hE];for(var d in this.ch){hg(`${d}-${gh}`,`${d}-${hE}`)}}for(var x in this.dN){for(var gd in this.dN[x]){if(gd in this.fF){continue}for(var fg in this.dN[x][gd]){if(fg in this.fF){continue}hg(`${fg}-${x}`,`${gd}-${x}`)}}}var cq=0;var cN=[];var dh={};while(cq <=dF.length){cN.push({});if(cq==0){dF.forEach(function(cr){if(!(cr in dg)){cN[cq][cr]=1}})}else{for(var cs in dh){if(cs in dE){for(var ck in dE[cs]){if(!(ck in dh)){var hw=true;for(var km in dg[ck]){if(!(km in dh)){hw=false;break}}if(hw){cN[cq][ck]=1}}}}}}if(!Object.keys(cN[cq]).length){break}for(var cr in cN[cq]){dh[cr]=1}cq++}this.fL=[];this.gY={};if(Object.keys(dh).length !=dF.length){var hk=[];dF.forEach(function(cr){if(!(cr in dh)){hk.push(cr)}})}else{cN.forEach(function(kh,cq){for(var cr in kh){this.fL.push(cr)}},this);this.gY=dg}},cL:function(d){return this.ch[d]},jT:function(d,E){var n={};if(d in this.ch){n=this.ch[d].n}else{var jG=(d==`body`)?$(`body`):$(`#${d}`);for(var b in E){n[b]=jG}}return n},jS:function(d,x){var hJ=[];var ck=`${d}-${x}`;for(var cs in(this.gY[ck]||{})){hJ.push(cs.split(`-`))}return hJ},j:function(){this.fL.forEach(function(fm){var hP=fm.split(`-`);var d=hP[0];var x=hP[1];var c=this.cL(d);for(var b in c.E){c[x](b)}},this)}};$(function(){new dI().j()});