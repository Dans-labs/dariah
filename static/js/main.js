!function t(e,i,r){function a(s,o){if(!i[s]){if(!e[s]){var l="function"==typeof require&&require;if(!o&&l)return l(s,!0);if(n)return n(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){var i=e[s][1][t];return a(i?i:t)},h,h.exports,t,e,i,r)}return i[s].exports}for(var n="function"==typeof require&&require,s=0;s<r.length;s++)a(r[s]);return a}({1:[function(t,e,i){"use strict";function r(t,e,i){this.name=t,this.page=i,this.specs=e,this.variants=e.variants,this._stage=new Map;var r=!0,a=!1,n=void 0;try{for(var s,o=this.variants[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;this._stage.set(l,new Map);var c=!0,h=!1,f=void 0;try{for(var d,u=this.page.stages.keys()[Symbol.iterator]();!(c=(d=u.next()).done);c=!0){var _=d.value;this._stage.get(l).set(_,!0)}}catch(p){h=!0,f=p}finally{try{!c&&u["return"]&&u["return"]()}finally{if(h)throw f}}}}catch(p){a=!0,n=p}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}this._msg=new Map,this._ids_fetched=new Set,this.container=new Map,this.dst=new Map,this.state=this.page.state,this.data=new Map,this.related_info=new Map,this.related_values=new Map,this.implementation=new e.specific(this)}var a=function(){function t(t,e){var i=[],r=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(l){a=!0,n=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=t("./generic.js"),s=t("./message.js");r.prototype={need:function(t,e){var i=this._stage.get(t).get(e);return!i.state||"rejected"==i.state()},_deed:function(t,e,i){var r=this[i].bind(this,t),n=this.page.getBefore(this.name,e),s=[],o=!0,l=!1,c=void 0;try{for(var h,f=n[Symbol.iterator]();!(o=(h=f.next()).done);o=!0){var d=a(h.value,2),u=d[0],_=d[1],p=this.page.getComponent(u);p.hasVariant(t)&&s.push(p._stage.get(t).get(_))}}catch(v){l=!0,c=v}finally{try{!o&&f["return"]&&f["return"]()}finally{if(l)throw c}}this._stage.get(t).set(e,$.when.apply($,s).then(r))},ensure:function(t,e,i){if(this.page.stages.has(e)){var r=this.page.stages.get(e)&&!this.specs.by_id;r&&!this.need(t,e)||this._deed(t,e,i)}},hasVariant:function(t){return this.variants.has(t)},_visibility:function(t,e){if(this.hasVariant(t)&&this.container.has(t)){var i=this.container.get(t);e?i.show():i.hide()}},_fetch:function(t,e){var i=url_tpl.replace(/_c_/,"data").replace(/_f_/,this.specs.fetch_url+"_"+t)+".json";this._msg.get(t).msg("fetching data ...");var r=this._postFetch.bind(this,t);return void 0!=e&&(i+="?ids="+e.join(",")),$.ajax({type:"POST",url:i,contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(t){r(t,e)})},_postFetch:function(t,e,i){this._msg.get(t).clear();var r=!0,a=!1,n=void 0;try{for(var s,o=e.msgs[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;this._msg.get(t).msg(l)}}catch(c){a=!0,n=c}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}if(e.good){if("data"in e&&this.data.set(t,e.data),"relinfo"in e){var h=new Map,f=!0,d=!1,u=void 0;try{for(var _,p=e.relinfo[Symbol.iterator]();!(f=(_=p.next()).done);f=!0){var v=_.value;h.set(v[0],new Set(v[1]))}}catch(c){d=!0,u=c}finally{try{!f&&p["return"]&&p["return"]()}finally{if(d)throw u}}this.related_info.set(t,h)}if("relvals"in e&&this.related_values.set(t,new Map(e.relvals)),this.specs.by_id){var y=!0,m=!1,g=void 0;try{for(var w,b=i[Symbol.iterator]();!(y=(w=b.next()).done);y=!0){var S=w.value;this._ids_fetched.add(S)}}catch(c){m=!0,g=c}finally{try{!y&&b["return"]&&b["return"]()}finally{if(m)throw g}}}}this.implementation.weld(t)},_weld:function(t){if(this.dst=this.page.getContainer(this.specs.dest,this.variants),this.specs.by_id){if(!this._msg.has(t)){var e=this.dst.get(t);e.prepend('<div id="msg_'+this.name+"_"+t+'"></div>'),this._msg.set(t,new s("msg_"+this.name+"_"+t))}}else{if(this.container.set(t,$("#"+this.name+"_"+t)),0==this.container.get(t).length){var i=this.dst.get(t);i.append('<div id="msg_'+this.name+"_"+t+'"></div>'),i.append('<div id="'+this.name+"_"+t+'" class="component"></div>'),this.container.set(t,$("#"+this.name+"_"+t))}this._msg.set(t,new s("msg_"+this.name+"_"+t))}if(null!=this.specs.fetch_url){var r=[];if(!this.specs.by_id)return this._fetch(t);var a=n.from_str(this.state.getState(this.specs.fetch_url+"_"+t)),o=!0,l=!1,c=void 0;try{for(var h,f=a[Symbol.iterator]();!(o=(h=f.next()).done);o=!0){var d=h.value;this._ids_fetched.has(d)||r.push(d)}}catch(u){l=!0,c=u}finally{try{!o&&f["return"]&&f["return"]()}finally{if(l)throw c}}if(0!=r.length)return this._fetch(t,r)}else this.implementation.weld(t)},_wire:function(t){this.implementation.wire(t)},_work:function(t){this._visibility(t,!0),this.implementation.work(t)},weld:function(t){this.hasVariant(t)&&this.implementation.show(t)&&this.ensure(t,"weld","_weld")},wire:function(t){this.hasVariant(t)&&this.implementation.show(t)&&this.ensure(t,"wire","_wire")},work:function(t){this.hasVariant(t)&&this.implementation.show(t)?this.ensure(t,"work","_work"):this._visibility(t,!1)}},e.exports=r},{"./generic.js":7,"./message.js":11}],2:[function(t,e,i){"use strict";function r(t){this.component=t,this._widget=new Map,this._control=new Map}r.prototype={_html:function(t){this.component.container.get(t).html('<a class="control_title" href="#">'+this.component.state.showState("list",t,"sg")+"</a> ")},_dressup:function(t){var e=this;this._control.get(t).click(function(i){i.preventDefault(),e.component.state.setState("list",t)})},_isActive:function(t){return this.component.state.getState("list")==t},show:function(t){return!0},weld:function(t){this._html(t),this._widget.set(t,this.component.container.get(t)),this._widget.get(t).addClass("control_big"),this._control.set(t,this.component.container.get(t).find("a"))},wire:function(t){this._dressup(t)},work:function(t){this._isActive(t)?(this._control.get(t).addClass("ison"),this._widget.get(t).addClass("ison")):(this._control.get(t).removeClass("ison"),this._widget.get(t).removeClass("ison"))}},e.exports=r},{}],3:[function(t,e,i){"use strict";function r(t){a.call(this,t,"type")}var a=t("./relative.js");r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r},{"./relative.js":13}],4:[function(t,e,i){"use strict";function r(t){s.call(this,t,"country"),this._map_object=new Map,this._map_container=new Map,this._marker=new Map,this._setvalues=new Map,this._not_mapped=new Set(["-","CY","KS","TR","MC","GE"])}var a=function(){function t(t,e){var i=[],r=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(l){a=!0,n=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=t("./generic.js"),s=t("./relative.js");r.prototype=Object.create(s.prototype),r.prototype.constructor=r,r.prototype._preHtml=function(t){return'<div id="map-europe_'+t+'" class="position"><p class="zoom"><a class="fa fa-arrows" href="#" title="zoom to fit all countries"/></p></div>'},r.prototype._myDressup=function(t){var e=this,i=this.component.container.get(t);this._map_container.set(t,i.find("#map-europe_"+t));var r=this._map_container.get(t),a=.6*r.width();r.width("100%"),r.height(a),r.vectorMap({map:"europe_mill",backgroundColor:"#ccccff",regionsSelectable:!0,markersSelectable:!0,regionsSelectableOne:!1,markersSelectableOne:!1,markerStyle:{initial:{fill:"#008800","fill-opacity":.2,stroke:"none","stroke-width":0,"stroke-opacity":.2,r:1},hover:{cursor:"pointer",stroke:"#ffff44","stroke-width":1,"stroke-opacity":1},selected:{fill:"#008800","fill-opacity":1},selectedHover:{}},regionStyle:{initial:{fill:"#bbbbbb","fill-opacity":1,stroke:"none","stroke-width":0,"stroke-opacity":1},hover:{cursor:"pointer",stroke:"#ffff44","stroke-width":3,"stroke-opacity":1},selected:{fill:"#dd8844","fill-opacity":1},selectedHover:{}},markers:this._marker.get(t),series:{markers:[{values:{},scale:[0,20],normalizeFunction:"linear",attribute:"r",min:0,max:100}],regions:[{scale:{outdariah:"#ffffff",indariah:"#ffddbb"},attribute:"fill",values:this._setvalues.get(t)}]},onRegionTipShow:function(e,i,r){var a=this._statistics.get(t);i.html(r+": "+(a.has(r)?a.get(r):"not in DARIAH"))}.bind(this),onMarkerTipShow:function(e,i,r){var a=this._statistics.get(t);i.html(r+": "+(a.has(r)?a.get(r):"not in DARIAH"))}.bind(this),onRegionClick:function(e,i){this._related_values_index.get(t).has(i)||e.preventDefault()}.bind(this),onMarkerClick:function(e,i){this._related_values_index.get(t).has(i)||e.preventDefault()}.bind(this),onRegionSelected:function(e,i,r,a){this.change_state&&this.component.state.setState("rel_"+this._type+"_"+t,n.a_to_str(a)+this._unmapped_selected(t))}.bind(this),onMarkerSelected:function(e,i,r,a){this.change_state&&this.component.state.setState("rel_"+this._type+"_"+t,n.a_to_str(a)+this._unmapped_selected(t))}.bind(this)});var s=i.find("p.zoom");s.css("top",a-20+"px"),s.css("left","10px");var o=i.find("p.zoom a");o.click(function(i){i.preventDefault(),e._map_object.get(t).setFocus({regions:["GB","GR"]})}),this._map_object.set(t,r.vectorMap("get","mapObject")),this._map_object.get(t).setFocus({regions:["GB","GR"]})},r.prototype._unmapped_selected=function(t){var e=[],i=n.from_str(t,this.component.state.getState("rel_"+this._type+"_"+t)),r=!0,a=!0,s=!1,o=void 0;try{for(var l,c=this._not_mapped[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var h=l.value;i.has(h)&&(e.push(h),r=!1)}}catch(f){s=!0,o=f}finally{try{!a&&c["return"]&&c["return"]()}finally{if(s)throw o}}return r?"":","+e.join(",")},r.prototype._mySetFacet=function(t){this.change_state=!1;var e={},i={},r=this._related_state.get(t),n=!0,s=!1,o=void 0;try{for(var l,c=this.component.related_values.get(t)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var h=a(l.value,2),f=h[0],d=h[1];this._not_mapped.has(f)||f==this._no_values.value||(e[f]=r.has(f),d[1]&&(i[f]=r.has(f)))}}catch(u){s=!0,o=u}finally{try{!n&&c["return"]&&c["return"]()}finally{if(s)throw o}}var _=this._map_object.get(t);_.setSelectedRegions(e),_.setSelectedMarkers(i),this.change_state=!0},r.prototype._myStats=function(t){var e=this.distilled.get(t).length;0==e&&(e=1);var i={},r=this._statistics.get(t),n=!0,s=!1,o=void 0;try{for(var l,c=r[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var h=a(l.value,2),f=h[0],d=h[1];if(f!=this._no_values.value){var u=100*d/e;i[f]=10>e?u:10*Math.sqrt(u)}}}catch(_){s=!0,o=_}finally{try{!n&&c["return"]&&c["return"]()}finally{if(s)throw o}}this._map_object.get(t).series.markers[0].setValues(i)},r.prototype._plainWeld=function(t){},r.prototype._myWeld=function(t){this._marker.set(t,{}),this._setvalues.set(t,{});var e=this.component.related_values.get(t),i=this._marker.get(t),r=this._setvalues.get(t),n=!0,s=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var h=a(l.value,2),f=h[0],d=h[1];d[1]?(this._related_values_all.get(t).add(f),this._related_values_list.get(t).push(f),this._related_values_index.get(t).set(f,d[0]),i[f]={latLng:[d[2],d[3]],name:d[0]},r[f]="indariah"):r[f]="outdariah"}}catch(u){s=!0,o=u}finally{try{!n&&c["return"]&&c["return"]()}finally{if(s)throw o}}this._related_values_list.get(t).sort(function(t,i){return e.get(t)<e.get(i)?-1:e.get(t)[0]>e.get(i)[0]?1:0})},e.exports=r},{"./generic.js":7,"./relative.js":13}],5:[function(t,e,i){"use strict";function r(t){this.component=t,this._stats=new Map,this._enabled_facets=new Map,this.table=new Map,this.distilled=new Map}var a=function(){function t(t,e){var i=[],r=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(l){a=!0,n=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=t("./generic.js");r.prototype={_html:function(t){var e='<p><span fct="all"></span>Filtering <span id="fstats_'+t+'"></span></p>';this.component.container.get(t).html(e)},show:function(t){return this.component.state.getState("list")==t},weld:function(t){var e=this.component.children;this._enabled_facets.set(t,new Map);var i=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=a(s.value,2),c=l[0],h=l[1];h.hasVariant(t)&&this._enabled_facets.get(t).set(c,h)}}catch(f){r=!0,n=f}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw n}}this._html(t)},_display:function(t,e){var i=this,r=t.closest("p"),a=r.find(".hidec"),s=r.find(".morec"),o=r.find(".showc"),l=t.closest("div").find("table,.flt"),c=t.closest("div").find(".value_list2,.flt_compact"),h=t.closest("div").find(".flt_not_expanded"),f="fctx_"+t.closest("span").attr("fct"),d=void 0==e;d&&(e=n.localstorage_vars.isSet(f)?n.localstorage_vars.get(f):1);var u="fctx_all"==f;u&&!d&&t.closest("div").find("div.component span[fct]").each(function(){i._display($(this),e)}),n.localstorage_vars.set(f,e),0==e?(a.show(),s.hide(),o.hide(),u||(h.show(),l.hide(),c.hide())):1==e?(a.hide(),s.show(),o.hide(),u||(h.show(),l.hide(),c.show())):(a.hide(),s.hide(),o.show(),u||(h.hide(),l.show(),c.hide()))},wire:function(t){var e=this,i=this.component.container.get(t),r=this.component.page.getComponent("list").container.get(t);this._stats.set(t,i.find("#fstats_"+t)),this.table.set(t,r.find("#table_"+t));var a=" details; click to change level of details",n='<a class="showc fa fa-fw fa-list-ul" href="#" title="full'+a+'"></a><a class="morec fa fa-fw fa-align-left" href="#" title="condensed'+a+'"></a><a class="hidec fa fa-fw fa-minus" href="#" title="hidden'+a+'"></a>';i.addClass("facet"),i.find("span[fct]").each(function(){$(this).html(n+"&nbsp"),e._display($(this))}),i.find(".hidec").click(function(t){t.preventDefault(),e._display($(this),1)}),i.find(".morec").click(function(t){t.preventDefault(),e._display($(this),2)}),i.find(".showc").click(function(t){t.preventDefault(),e._display($(this),0)})},work:function(t){this.table.get(t).find("tr[rid],tr[iid]").hide();var e=this.component.page.getComponent("list"),i=e.data.get(t),r=this._enabled_facets.get(t);this.distilled.set(t,[]);var n=!0,s=!1,o=void 0;try{for(var l,c=r[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var h=a(l.value,2),f=(h[0],h[1]),d=f.implementation;d.distilled.set(t,[])}}catch(u){s=!0,o=u}finally{try{!n&&c["return"]&&c["return"]()}finally{if(s)throw o}}var _=!0,p=!1,v=void 0;try{for(var y,m=i[Symbol.iterator]();!(_=(y=m.next()).done);_=!0){var g=y.value,w=!0,b=null,S=!1,x=!0,k=!1,j=void 0;try{for(var M,C=r[Symbol.iterator]();!(x=(M=C.next()).done);x=!0){var $=a(M.value,2),f=($[0],$[1]);if(!S){var T=f.implementation,D=T.v(t,g[0]);D||(w=!1,null==b?b=T:S=!0)}}}catch(u){k=!0,j=u}finally{try{!x&&C["return"]&&C["return"]()}finally{if(k)throw j}}if(!S)if(w&&(this.distilled.get(t).push(g[0]),this.table.get(t).find('tr[rid="'+g[0]+'"],tr[iid="'+g[0]+'"]').show()),null!=b)b.distilled.get(t).push(g[0]);else{var A=!0,H=!1,O=void 0;try{for(var V,F=r[Symbol.iterator]();!(A=(V=F.next()).done);A=!0){var I=a(V.value,2),f=(I[0],I[1]),R=f.implementation;R.distilled.get(t).push(g[0])}}catch(u){H=!0,O=u}finally{try{!A&&F["return"]&&F["return"]()}finally{if(H)throw O}}}}}catch(u){p=!0,v=u}finally{try{!_&&m["return"]&&m["return"]()}finally{if(p)throw v}}var q=!0,E=!1,z=void 0;try{for(var B,L=r[Symbol.iterator]();!(q=(B=L.next()).done);q=!0){var W=a(B.value,2),f=(W[0],W[1]),G=f.implementation;G.stats(t)}}catch(u){E=!0,z=u}finally{try{!q&&L["return"]&&L["return"]()}finally{if(E)throw z}}this._stats.get(t).html(this.distilled.get(t).length+" of "+i.length)}},e.exports=r},{"./generic.js":7}],6:[function(t,e,i){"use strict";function r(t){this.component=t,this._tags=new Map,this._filter_control=new Map,this._filter_control2=new Map,this._box=new Map,this._completions_dst=new Map,this._stats_dst=new Map,this._clear_filter_control=new Map,this._wire_mode=new Map,this._distilled=new Map,this.distilled=new Map}r.prototype={_html:function(t){var e='\n<div>\n    <p class="dctrl"><span fct="'+this.component.name+"-"+t+'"></span> By full text search\n        <a href="#" title="modify full text filter" id="flt2_'+t+'" class="flt_not_expanded facet_single ison flt_pat"></a>\n        <a href="#" class="control_med fa fa-close filtc" id="clearf_'+t+'"></a>\n    </p>\n    <div id="fltw_'+t+'">\n        <p id="fbox_'+t+'" class="flt control_med fbox ui-widget">\n            <input id="flt_'+t+'" class="flt flt_pat"/>\n            <span fbox class="stats" id="stats_'+t+'"></span>\n        </p>\n        <div id="autoc_'+t+'" style="display: none;">here '+t+"</div>\n    </div>\n</div>";this.component.container.get(t).html(e)},_setFilter:function(t){var e=this.component.state.getState("flt_"+t),i=this._filter_control.get(t);this._filter_control2.get(t).html(e),i.val(e),i.autocomplete("search",e)},_response:function(t){return function(e,i){this._distilled.set(t,{});var r=this._distilled.get(t),a=!0,n=!1,s=void 0;try{for(var o,l=i.content[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;r[c.value]=1}}catch(h){n=!0,s=h}finally{try{!a&&l["return"]&&l["return"]()}finally{if(n)throw s}}if(!this._wire_mode.get(t)){var f=this._filter_control.get(t).val();this.component.state.setState("flt_"+t,f)}}.bind(this)},_setClear:function(t){var e=this;this._clear_filter_control.get(t).click(function(i){i.preventDefault();var r=e._filter_control.get(t);r.val(""),r.autocomplete("search","")})},stats:function(t){var e=void 0,i=this._stats_dst.get(t);""==this._filter_control.get(t).val()?(e="",i.removeClass("ison")):(e=this.facet.distilled.get(t).length+" of ",i.addClass("ison")),i.html(""+e+this.distilled.get(t).length)},v:function(t,e){return e in this._distilled.get(t)},show:function(t){return this.component.state.getState("list")==t},weld:function(t){this._html(t)},wire:function(t){this.facet||(this.facet=this.component.page.getComponent("facet").implementation);var e=this.component.page.getComponent("list").data.get(t);this._tags.set(t,[]);var i=this._tags.get(t),r=!0,a=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(r=(s=o.next()).done);r=!0){var l=s.value;i.push({label:l[1],value:""+l[0]})}}catch(c){a=!0,n=c}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}this._distilled.set(t,{}),this.distilled.set(t,[]);var h=this.component.container.get(t),f=h.find("#fltw_"+t),d=$("#flt_"+t);this._filter_control.set(t,d);var u=$("#flt2_"+t);this._filter_control2.set(t,u),this._box.set(t,f.find("#fbox_"+t)),this._completions_dst.set(t,f.find("#autoc_"+t)),this._stats_dst.set(t,f.find("#stats_"+t)),this._clear_filter_control.set(t,h.find("#clearf_"+t)),this._filter_control.get(t).autocomplete({appendTo:this._completions_dst.get(t),source:this._tags.get(t),response:this._response(t),minLength:0}),u.click(function(t){t.preventDefault(),$(this).closest("div").find(".morec").click(),d[0].focus()}),this._wire_mode.set(t,!0),this._setClear(t),this._setFilter(t),this._wire_mode.set(t,!1)},work:function(t){var e=this.component.state.getState("flt_"+t),i=this._clear_filter_control.get(t);""==e?(this._box.get(t).removeClass("ison"),i.hide()):(this._box.get(t).addClass("ison"),i.show()),this._filter_control2.get(t).html(e)}},e.exports=r},{}],7:[function(t,e,i){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function a(t){return t.replace(/[&<>]/g,function(t){return d.get(t)||t})}function n(){document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}function s(t){if(n(),document.selection){var e=document.body.createTextRange();e.moveToElementText(document.getElementById(t)),e.select()}else if(window.getSelection){var i=document.createRange();i.selectNode(document.getElementById(t)),window.getSelection().addRange(i)}}function o(t,e,i){var r=void 0==e?t.closest("div").find(".detail"):e;r.toggle(),void 0!=i&&i(t);var a=void 0,n=void 0;t.hasClass("fa-chevron-right")?(a="fa-chevron-right",n="fa-chevron-down"):(a="fa-chevron-down",n="fa-chevron-right"),t.removeClass(a),t.addClass(n)}function l(t,e,i){return i.length>t?i.replace(/[^ -]+/g,function(t){return t.substr(0,e)}):i}function c(t){return null!==t&&void 0!=t&&""!=t?new Set(t.split(",")):new Set}function h(t){return t.join(",")}function f(t){return Array.from(t).join(",")}var d=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"]]),u={parameter:function(t){return this.parameters().get(t)},parameters:function(){var t=new Map,e=window.location.search;if(-1===e.indexOf("?"))return t;var i=!0,a=!1,n=void 0;try{for(var s,o=e.slice(1).split("&")[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;t.set.apply(t,r(l.split("=")))}}catch(c){a=!0,n=c}finally{try{!i&&o["return"]&&o["return"]()}finally{if(a)throw n}}return t}},_=u.parameters(),p=$.initNamespaceStorage("req"),v=p.localStorage;e.exports.escapeHTML=a,e.exports.request_vars=_,e.exports.localstorage_vars=v,e.exports.selectText=s,e.exports.deselectText=n,e.exports.toggleDetail=o,e.exports.compact=l,e.exports.from_str=c,e.exports.to_str=f,e.exports.a_to_str=h},{}],8:[function(t,e,i){"use strict";function r(t){this.component=t}r.prototype={_html:function(t,e){var i=this.component.dst.get(t),r=i.find('tr[rid="'+e[0]+'"]'),a='<tr iid="'+e[0]+'">';if("contrib"==t){var n=[],s=!0,o=!1,l=void 0;try{for(var c,h=e[5][Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=c.value;n.push('<a href="#" tid="'+f[0]+'">'+f[1]+"</a>")}}catch(d){o=!0,l=d}finally{try{!s&&h["return"]&&h["return"]()}finally{if(o)throw l}}a+='\n<td colspan="2">\n<b>Contact person:</b> '+e[2]+"<br/>\n<b>Country:</b> "+e[3]+" = "+e[4]+"<br/>\n<b>Types:</b> "+n.join(", ")+"</br>\n</td>\n"}else if("country"==t){var u=!0,_=!1,p=void 0;try{for(var v,y=this.component.data.get(t)[Symbol.iterator]();!(u=(v=y.next()).done);u=!0){var m=v.value;in_dariah=1==m[3]?"dariah":"",a+='<td class="country_code">'+m[1]+'<td><td class="country_name">'+m[2]+'<td><td class="in_dariah">'+in_dariah+'</td><td class="latlng">'+m[4]+'</td><td class="latlng">'+m[5]+"</td>"}}catch(d){_=!0,p=d}finally{try{!u&&y["return"]&&y["return"]()}finally{if(_)throw p}}}else if("type"==t||"tadiraha"==t||"tadiraho"==t||"tadiraht"==t){var g=!0,w=!1,b=void 0;try{for(var S,x=this.component.data.get(t)[Symbol.iterator]();!(g=(S=x.next()).done);g=!0){var k=S.value;a+='<td class="value">'+k[1]+"<td>"}}catch(d){w=!0,b=d}finally{try{!g&&x["return"]&&x["return"]()}finally{if(w)throw b}}}a+="</tr>",r.after(a)},show:function(t){return this.component.state.getState("list")==t},weld:function(t){var e=!0,i=!1,r=void 0;try{for(var a,n=this.component.data.get(t)[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var s=a.value;this._html(t,s)}}catch(o){i=!0,r=o}finally{try{!e&&n["return"]&&n["return"]()}finally{if(i)throw r}}},wire:function(t){},work:function(t){}},e.exports=r},{}],9:[function(t,e,i){"use strict";function r(t){this.component=t}var a=t("./generic.js");r.prototype={_html:function(t){var e="";e+='<table id="table_'+t+'">';var i=!0,r=!1,a=void 0;try{for(var n,s=this.component.data.get(t)[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){var o=n.value,l='<tr rid="'+o[0]+'"><td><a class="showc fa fa-fw fa-list-ul" href="#" title="hide fields"></a><a class="hidec fa fa-fw fa-minus" href="#" title="show fields"></a></td>',c="</tr>";if("contrib"==t)e+=l+'<td><a href="#" class="fa fa-fw fa-minus"></a>'+o[1]+"</td>"+c;else if("country"==t){var h=1==o[3]?"dariah":"";e+=l+'<td class="country_code">'+o[1]+'<td><td class="country_name">'+o[2]+'<td><td class="in_dariah">'+h+'</td><td class="latlng">'+o[4]+'</td><td class="latlng">'+o[5]+"</td>"+c}else"type"!=t&&"tadiraha"!=t&&"tadiraho"!=t&&"tadiraht"!=t||(e+=l+'<td class="value">'+o[1]+"<td>"+c)}}catch(f){r=!0,a=f}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw a}}e+="</table>",this.component.container.get(t).html(e)},_display:function(t,e,i){var r=t.find(".hidec"),a=t.find(".showc"),n=t.attr("rid"),s=this.component.container.get(e).find('tr[iid="'+n+'"]');i.has(n)?(r.show(),a.hide(),s.length&&s.show()):(r.hide(),a.hide(),s.length&&s.hide())},_set_it:function(t,e,i){var r=a.from_str(this.state.getState(key)),n=t.closest("tr").attr("rid");i?r.add(n):r["delete"](n),this.state.setState(key,a.to_str(r))},show:function(t){return this.component.state.getState("list")==t},weld:function(t){this._html(t)},wire:function(t){var e=this,i=this.component.container.get(t);this.component.name+"_"+t;i.find(".hidec").click(function(i){i.preventDefault(),e._set_it($(this),t,!0)}),i.find(".showc").click(function(i){i.preventDefault(),e._set_it($(this),t,!1)})},work:function(t){var e=this,i=(this.component.name+"_"+t,this.component.container.get(t)),r=a.from_str(this.component.state.getState(this.component.name+"_"+t));i.find("tr[rid]").each(function(){e._display($(this),t,r)})}},e.exports=r},{"./generic.js":7}],10:[function(t,e,i){"use strict";var r=t("./page.js");$(function(){(new r).work()})},{"./page.js":12}],11:[function(t,e,i){"use strict";function r(t,e){var i=this;this._destination=$("#"+t),this._trash_control=$("#trash_"+t),this._trash_control_para=this._trash_control.closest("p"),this._trash_control.click(function(t){t.preventDefault(),i.clear()}),this._hide(),this._on_clear=e}r.prototype={_hide:function(){this._destination.hide(),this._trash_control_para.hide()},_show:function(){this._destination.show(),""!=this._destination.html()&&this._trash_control_para.show()},clear:function(){this._destination.html(""),void 0!=this._on_clear&&this._on_clear(),this._hide()},msg:function(t,e){void 0==e&&(e="info");var i=this._destination.html();this._destination.html(i+'<p class="'+e+'">'+t+"</p>"),this._show()}},e.exports=r},{}],12:[function(t,e,i){"use strict";function r(){this.name="page",this.state=new n(this);var t=this.state.getValues("list"),e=new Set(["contrib"]),i=new Set([""]);this._component_specs=new Map([["share",{dest:"body",variants:i,fetch_url:null,specific:s}],["control",{dest:"left",variants:t,fetch_url:null,specific:v}],["list",{dest:"middle",variants:t,fetch_url:"list",specific:_}],["item",{dest:"list",variants:t,fetch_url:"item",specific:p}],["facet",{dest:"control",variants:t,fetch_url:null,specific:u}],["filter",{dest:"facet",variants:t,fetch_url:null,specific:d}],["eumap",{dest:"facet",variants:e,fetch_url:"country",specific:f}],["ctype",{dest:"facet",variants:e,fetch_url:"type",specific:o}],["tadiraha",{dest:"facet",variants:e,fetch_url:"tadiraha",specific:c}],["tadiraho",{dest:"facet",variants:e,fetch_url:"tadiraho",specific:l}],["tadiraht",{dest:"facet",variants:e,fetch_url:"tadiraht",specific:h}]]),this._by_id=new Set(["item"]),this.stages=new Map([["weld",!0],["wire",!0],["work",!1]]),this.stages_prev=new Map([["wire","weld"],["work","wire"]]),this._before=new Map([["weld",new Map([["item",new Set(["list"])],["facet",new Set(["control","list"])],["filter",new Set(["facet"])],["eumap",new Set(["facet","filter"])],["ctype",new Set(["facet","eumap"])],["tadiraha",new Set(["facet","ctype"])],["tadiraho",new Set(["facet","tadiraha"])],["tadiraht",new Set(["facet","tadiraho"])],["share",new Set(["facet","list"])]])],["wire",new Map([["item",new Set(["list"])],["facet",new Set(["filter","eumap","ctype","tadiraha","tadiraho","tadiraht"])],["filter",new Set(["list"])],["eumap",new Set(["list"])],["ctype",new Set(["list"])],["tadiraha",new Set(["list"])],["tadiraho",new Set(["list"])],["tadiraht",new Set(["list"])]])],["work",new Map([["facet",new Set(["filter","eumap","ctype","tadiraha","tadiraho","tadiraht"])]])]]),this._ignore=new Set([]),this.components=new Map;var r=!0,m=!1,g=void 0;try{for(var w,b=this._component_specs[Symbol.iterator]();!(r=(w=b.next()).done);r=!0){var S=a(w.value,2),x=S[0],k=S[1];if(!this._ignore.has(x)){k.by_id=this._by_id.has(x);var j=new y(x,k,this);j.children=new Map,this.components.set(x,j)}}}catch(M){m=!0,g=M}finally{try{!r&&b["return"]&&b["return"]()}finally{if(m)throw g}}var C=!0,$=!1,T=void 0;try{for(var D,A=this.components[Symbol.iterator]();!(C=(D=A.next()).done);C=!0){var H=a(D.value,2),x=H[0],O=H[1],V=this._component_specs.get(x).dest;if(this.components.has(V)){var F=this.components.get(V);F.children.set(x,O)}}}catch(M){$=!0,T=M}finally{try{!C&&A["return"]&&A["return"]()}finally{if($)throw T}}this._resolveTiming(),this._setHeight(80),History.Adapter.bind(window,"statechange",this.state.work())}var a=function(){function t(t,e){var i=[],r=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(l){a=!0,n=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=(t("./generic.js"),t("./viewstate.js")),s=t("./share.js"),o=t("./ctype.js"),l=t("./tadiraho.js"),c=t("./tadiraha.js"),h=t("./tadiraht.js"),f=t("./eumap.js"),d=t("./filter.js"),u=t("./facet.js"),_=t("./list.js"),p=t("./item.js"),v=t("./control.js"),y=t("./components.js");r.prototype={_setHeight:function(t){var e=window.innerHeight-t+"px",i=!0,r=!1,a=void 0;try{for(var n,s=new Set(["middle","left","right"])[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){var o=n.value;$("#"+o).css("height",e)}}catch(l){r=!0,a=l}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw a}}},_resolveTiming:function(){function t(t,e){i.has(t)||i.set(t,new Set),r.has(e)||r.set(e,new Set),i.get(t).add(e),r.get(e).add(t)}var e=[],i=new Map,r=new Map,n=!0,s=!1,o=void 0;try{for(var l,c=this.components.keys()[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var h=l.value,f=!0,d=!1,u=void 0;try{for(var _,p=this.stages.keys()[Symbol.iterator]();!(f=(_=p.next()).done);f=!0){var v=_.value;e.push(h+"-"+v)}}catch(y){d=!0,u=y}finally{try{!f&&p["return"]&&p["return"]()}finally{if(d)throw u}}}}catch(y){s=!0,o=y}finally{try{!n&&c["return"]&&c["return"]()}finally{if(s)throw o}}var m=!0,g=!1,w=void 0;try{for(var b,S=this.stages_prev[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var x=a(b.value,2),k=x[0],j=x[1],M=!0,C=!1,$=void 0;try{for(var T,D=this.components.keys()[Symbol.iterator]();!(M=(T=D.next()).done);M=!0){var A=T.value;t(A+"-"+j,A+"-"+k)}}catch(y){C=!0,$=y}finally{try{!M&&D["return"]&&D["return"]()}finally{if(C)throw $}}}}catch(y){g=!0,w=y}finally{try{!m&&S["return"]&&S["return"]()}finally{if(g)throw w}}var H=!0,O=!1,V=void 0;try{for(var F,I=this._before[Symbol.iterator]();!(H=(F=I.next()).done);H=!0){var R=a(F.value,2),q=R[0],E=R[1],z=!0,B=!1,L=void 0;try{for(var W,G=E[Symbol.iterator]();!(z=(W=G.next()).done);z=!0){var N=a(W.value,2),P=N[0],U=N[1];if(!this._ignore.has(P)){var K=!0,Y=!1,J=void 0;try{for(var Q,X=U.keys()[Symbol.iterator]();!(K=(Q=X.next()).done);K=!0){var Z=Q.value;this._ignore.has(Z)||t(Z+"-"+q,P+"-"+q)}}catch(y){Y=!0,J=y}finally{try{!K&&X["return"]&&X["return"]()}finally{if(Y)throw J}}}}}catch(y){B=!0,L=y}finally{try{!z&&G["return"]&&G["return"]()}finally{if(B)throw L}}}}catch(y){O=!0,V=y}finally{try{!H&&I["return"]&&I["return"]()}finally{if(O)throw V}}for(var tt=0,et=[],it=new Set;tt<=e.length;){if(et.push(new Set),0==tt){var rt=!0,at=!1,nt=void 0;try{for(var st,ot=e[Symbol.iterator]();!(rt=(st=ot.next()).done);rt=!0){var lt=st.value;r.has(lt)||et[tt].add(lt)}}catch(y){at=!0,nt=y}finally{try{!rt&&ot["return"]&&ot["return"]()}finally{if(at)throw nt}}}else{var ct=!0,ht=!1,ft=void 0;try{for(var dt,ut=it[Symbol.iterator]();!(ct=(dt=ut.next()).done);ct=!0){var _t=dt.value;if(i.has(_t)){var pt=!0,vt=!1,yt=void 0;try{for(var mt,gt=i.get(_t)[Symbol.iterator]();!(pt=(mt=gt.next()).done);pt=!0){
var wt=mt.value;if(!it.has(wt)){var bt=!0,St=!0,xt=!1,kt=void 0;try{for(var jt,Mt=r.get(wt)[Symbol.iterator]();!(St=(jt=Mt.next()).done);St=!0){var Ct=jt.value;if(!it.has(Ct)){bt=!1;break}}}catch(y){xt=!0,kt=y}finally{try{!St&&Mt["return"]&&Mt["return"]()}finally{if(xt)throw kt}}bt&&et[tt].add(wt)}}}catch(y){vt=!0,yt=y}finally{try{!pt&&gt["return"]&&gt["return"]()}finally{if(vt)throw yt}}}}}catch(y){ht=!0,ft=y}finally{try{!ct&&ut["return"]&&ut["return"]()}finally{if(ht)throw ft}}}if(0==et[tt].size)break;var $t=!0,Tt=!1,Dt=void 0;try{for(var At,Ht=et[tt][Symbol.iterator]();!($t=(At=Ht.next()).done);$t=!0){var Ot=At.value;it.add(Ot)}}catch(y){Tt=!0,Dt=y}finally{try{!$t&&Ht["return"]&&Ht["return"]()}finally{if(Tt)throw Dt}}tt++}if(this._tasks=[],this._timing=new Map,it.size!=e.length){var Vt=[],Ft=!0,It=!1,Rt=void 0;try{for(var qt,Et=e[Symbol.iterator]();!(Ft=(qt=Et.next()).done);Ft=!0){var zt=qt.value;it.has(zt)||Vt.push(zt)}}catch(y){It=!0,Rt=y}finally{try{!Ft&&Et["return"]&&Et["return"]()}finally{if(It)throw Rt}}console.log("Circular timing constraints detected",Vt)}else{var Bt=!0,Lt=!1,Wt=void 0;try{for(var Gt,Nt=et[Symbol.iterator]();!(Bt=(Gt=Nt.next()).done);Bt=!0){var Pt=Gt.value,Ut=!0,Kt=!1,Yt=void 0;try{for(var Jt,Qt=Pt[Symbol.iterator]();!(Ut=(Jt=Qt.next()).done);Ut=!0){var Xt=Jt.value;this._tasks.push(Xt)}}catch(y){Kt=!0,Yt=y}finally{try{!Ut&&Qt["return"]&&Qt["return"]()}finally{if(Kt)throw Yt}}}}catch(y){Lt=!0,Wt=y}finally{try{!Bt&&Nt["return"]&&Nt["return"]()}finally{if(Lt)throw Wt}}this._timing=r,console.log("Timing resolved",this._tasks)}},getComponent:function(t){return this.components.get(t)},getContainer:function(t,e){if(this.components.has(t))return this.components.get(t).container;var i=new Map,r="body"==t?$("body"):$("#"+t),a=!0,n=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;i.set(c,r)}}catch(h){n=!0,s=h}finally{try{!a&&l["return"]&&l["return"]()}finally{if(n)throw s}}return i},getBefore:function(t,e){var i=[],r=t+"-"+e,a=!0,n=!1,s=void 0;try{for(var o,l=(this._timing.get(r)||new Set)[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;i.push(c.split("-"))}}catch(h){n=!0,s=h}finally{try{!a&&l["return"]&&l["return"]()}finally{if(n)throw s}}return i},work:function(){var t=!0,e=!1,i=void 0;try{for(var r,n=this._tasks[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var s=r.value,o=s.split("-"),l=a(o,2),c=l[0],h=l[1],f=this.getComponent(c),d=!0,u=!1,_=void 0;try{for(var p,v=f.variants[Symbol.iterator]();!(d=(p=v.next()).done);d=!0){var y=p.value;f[h](y)}}catch(m){u=!0,_=m}finally{try{!d&&v["return"]&&v["return"]()}finally{if(u)throw _}}}}catch(m){e=!0,i=m}finally{try{!t&&n["return"]&&n["return"]()}finally{if(e)throw i}}}},e.exports=r},{"./components.js":1,"./control.js":2,"./ctype.js":3,"./eumap.js":4,"./facet.js":5,"./filter.js":6,"./generic.js":7,"./item.js":8,"./list.js":9,"./share.js":14,"./tadiraha.js":15,"./tadiraho.js":16,"./tadiraht.js":17,"./viewstate.js":18}],13:[function(t,e,i){"use strict";function r(t,e,i,r,a){this.component=t,this.distilled=new Map,this._list=new Map,this._list2=new Map,this._related_state=new Map,this._all_values_control=new Map,this._statistics=new Map,this._related_values_list=new Map,this._related_values_index=new Map,this._related_values_all=new Map,this._no_values={value:"-",name:"-none"},this._type=e,this._cols=i||2,this._cutoff=r||14,this._shortsize=a||6}var a=function(){function t(t,e){var i=[],r=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(l){a=!0,n=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=t("./generic.js");r.prototype={_html:function(t){var e=this.component.state.showState("list",this._type,"sg"),i=this.component.state.showState("list",this._type,"pl"),r="";r+=this._preHtml(t),r+='\n<div>\n    <p class="dctrl"><span fct="'+this.component.name+"-"+t+'"></span> By '+e+'</p>\n    <p class="all"><span rv="_all" class="stats"></span> <a rv="_all" href="#" class="facet_single_all">all '+i+'</a></p>\n    <table class="value_list" id="list-'+this._type+"-vals_"+t+'">\n        <tr>\n';var s=this._related_values_list.get(t),o=!0,l=!1,c=void 0;try{for(var h,f=s.entries()[Symbol.iterator]();!(o=(h=f.next()).done);o=!0){var d=a(h.value,2),u=d[0],_=d[1];u%this._cols==0&&u>0&&u<s.length&&(r+="</tr><tr>");var p=this._related_values_index.get(t).get(_);r+='\n            <td><span rv="'+_+'" class="stats"></span></td>\n            <td><a rv="'+_+'" href="#" class="facet_single">'+n.escapeHTML(p)+"</a></td>\n            "}}catch(v){l=!0,c=v}finally{try{!o&&f["return"]&&f["return"]()}finally{if(l)throw c}}r+='\n        </tr>\n    </table>\n    <p class="value_list2" id="list2-'+this._type+"-vals_"+t+'">\n';var y=!0,m=!1,g=void 0;try{for(var w,b=s.entries()[Symbol.iterator]();!(y=(w=b.next()).done);y=!0){var S=a(w.value,2),u=S[0],_=S[1],x=this._related_values_index.get(t).get(_),k=n.escapeHTML(n.compact(this._cutoff,this._shortsize,x));r+='<a href="#" rv="'+_+'" class="passive_small" title="'+n.escapeHTML(x)+'">'+k+"</a> "}}catch(v){m=!0,g=v}finally{try{!y&&b["return"]&&b["return"]()}finally{if(m)throw g}}r+="\n    </p>\n</div>",this.component.container.get(t).html(r)},_dressup:function(t){var e=this.component.container.get(t);this._list.set(t,e.find("#list-"+this._type+"-vals_"+t)),this._list2.set(t,e.find("#list2-"+this._type+"-vals_"+t));var i=this;this._list.get(t).find(".facet_single").click(function(r){r.preventDefault();var a=$(this).attr("rv"),s=n.from_str(i.component.state.getState("rel_"+i._type+"_"+t));s.has(a)?s["delete"](a):s.add(a),i.component.state.setState("rel_"+i._type+"_"+t,n.to_str(s)),e.find(".last_handled").removeClass("last_handled"),$(this).addClass("last_handled")}),this._list2.get(t).find(".passive_small").click(function(r){r.preventDefault();var a=$(this).attr("rv"),s=n.from_str(i.component.state.getState("rel_"+i._type+"_"+t));s.has(a)?s["delete"](a):s.add(a),i.component.state.setState("rel_"+i._type+"_"+t,n.to_str(s)),$(this).closest("div").find(".morec").click();var o=i._list.get(t).find('a[rv="'+a+'"]');e.find(".last_handled").removeClass("last_handled"),o.addClass("last_handled"),$("#left")[0].scrollTop=50,o[0].scrollIntoView({behavior:"smooth",alignToTop:"true"})}),this._all_values_control.set(t,this.component.container.get(t).find('[rv="_all"]')),this._all_values_control.get(t).click(function(e){e.preventDefault();var r=$(this).hasClass("ison");r?i.component.state.setState("rel_"+i._type+"_"+t,""):i.component.state.setState("rel_"+i._type+"_"+t,n.to_str(i._related_values_all.get(t)))})},_setFacet:function(t){var e=!0,i=!0,r=!1,a=void 0;try{for(var n,s=this._related_values_index.get(t).keys()[Symbol.iterator]();!(i=(n=s.next()).done);i=!0){var o=n.value,l=this._list.get(t).find('[rv="'+o+'"]'),c=this._list2.get(t).find('[rv="'+o+'"]');this._related_state.get(t).has(o+"")?(l.addClass("ison"),c.addClass("ison")):(l.removeClass("ison"),c.removeClass("ison"),e=!1)}}catch(h){r=!0,a=h}finally{try{!i&&s["return"]&&s["return"]()}finally{if(r)throw a}}e?this._all_values_control.get(t).addClass("ison"):this._all_values_control.get(t).removeClass("ison")},stats:function(t){this._statistics.set(t,new Map);var e=this._statistics.get(t),i=!0,r=!1,n=void 0;try{for(var s,o=this._related_values_index.get(t).keys()[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=s.value;e.set(l,0)}}catch(c){r=!0,n=c}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw n}}var h=this.component.related_info.get(t),f=!0,d=!1,u=void 0;try{for(var _,p=this.distilled.get(t)[Symbol.iterator]();!(f=(_=p.next()).done);f=!0){var v=_.value,y=!1;if(h.has(v)){var m=!0,g=!1,w=void 0;try{for(var b,S=h.get(v)[Symbol.iterator]();!(m=(b=S.next()).done);m=!0){var x=b.value;e.set(x,e.get(x)+1),y=!0}}catch(c){g=!0,w=c}finally{try{!m&&S["return"]&&S["return"]()}finally{if(g)throw w}}}if(!y){var k=this._no_values.value;e.set(k,e.get(k)+1)}}}catch(c){d=!0,u=c}finally{try{!f&&p["return"]&&p["return"]()}finally{if(d)throw u}}var j=!0,M=!1,C=void 0;try{for(var $,T=e[Symbol.iterator]();!(j=($=T.next()).done);j=!0){var D=a($.value,2),A=D[0],H=D[1];this.component.container.get(t).find('span[rv="'+A+'"].stats').html(H)}}catch(c){M=!0,C=c}finally{try{!j&&T["return"]&&T["return"]()}finally{if(M)throw C}}this.component.container.get(t).find('span[rv="_all"].stats').html(this.distilled.get(t).length),this._myStats(t)},v:function(t,e){var i=this.component.related_info.get(t),r=this._related_state.get(t);if(i.has(e)){var a=!0,n=!1,s=void 0;try{for(var o,l=i.get(e)[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value;if(r.has(c+""))return!0}}catch(h){n=!0,s=h}finally{try{!a&&l["return"]&&l["return"]()}finally{if(n)throw s}}}else if(r.has(this._no_values.value))return!0;return!1},show:function(t){return this.component.state.getState("list")==t},weld:function(t){this._related_values_list.set(t,[]),this._related_values_index.set(t,new Map),this._related_values_all.set(t,new Set),this._plainWeld(t),this._myWeld(t),this._related_values_list.get(t).push(this._no_values.value),this._related_values_index.get(t).set(this._no_values.value,this._no_values.name),this._related_values_all.get(t).add(this._no_values.value),this._html(t)},wire:function(t){this._myDressup(t),this._dressup(t)},work:function(t){this._related_state.set(t,n.from_str(this.component.state.getState("rel_"+this._type+"_"+t))),this._mySetFacet(t),this._setFacet(t)},_plainWeld:function(t){var e=this.component.related_values.get(t),i=!0,r=!1,n=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done);i=!0){var l=a(s.value,2),c=l[0],h=l[1];this._related_values_list.get(t).push(c),this._related_values_index.get(t).set(c,h),this._related_values_all.get(t).add(c)}}catch(f){r=!0,n=f}finally{try{!i&&o["return"]&&o["return"]()}finally{if(r)throw n}}this._related_values_list.get(t).sort(function(t,i){return e.get(t)<e.get(i)?-1:e.get(t)>e.get(i)?1:0})},_myWeld:function(t){},_preHtml:function(t){return""},_myDressup:function(t){},_mySetFacet:function(t){},_myStats:function(t){}},e.exports=r},{"./generic.js":7}],14:[function(t,e,i){"use strict";function r(t){this.component=t}var a=t("./generic.js");r.prototype={show:function(t){return!0},weld:function(t){var e='\n<p id="citeh">Cite</p>\n<table align="center">\n    <tr>\n        <td class="clip_pv clr">\n            <a lnk="" href="#" id="clip_pv_md" title="link to page content and appearance (markdown)" class="ctrl fa fa-level-down fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_ht" title="link to page content and appearance (html)" class="ctrl fa fa-external-link-square fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_htc" title="link to page content (html)" class="ctrl fa fa-external-link fa-lg fa-fw"></a>\n            <a lnk="" href="#" id="clip_pv_cn" title="copy page content" class="ctrl fa fa-file-text-o fa-lg fa-fw"></a>\n        </td>\n    </tr>\n    <tr>\n        <th class="clip_pv" width="60px">page view</th>\n    </tr>\n    <tr class="citexpl">\n        <td class="clip_pv"><span id="xc_pv" class="ctrl fa fa-chevron-right fa-fw"></span><span id="x_pv" class="detail">share link to this page with or without view settings.</span></td>\n    </tr>\n</table>\n<p id="cdiagpub"></p>\n<p id="cdiagsts"></p>\n';this.component.container.get(t).html(e)},wire:function(t){var e=this,i=this.component.container.get(t),r=$("#self_link");r.hide(),i.addClass("socialdrawer"),i.find(".detail").hide(),i.find("#clip_pv_md,#clip_pv_ht,#clip_pv_htc,#clip_pv_nl").click(function(t){t.preventDefault(),window.prompt("Press <Cmd-C> and then <Enter> to copy link on clipboard",$(this).attr("lnk"))}),i.find("#clip_pv_cn").click(function(t){t.preventDefault();var i="middle",n=app_url_cite+e.component.state.getVars(!0);r.show(),r.attr("href",n),a.selectText(i)}),i.find("#xc_pv").click(function(t){t.preventDefault(),a.toggleDetail($(this),$("#x_pv"))}),i.click(function(t){t.preventDefault();var i=app_url_cite+e.component.state.getVars(!0),r=app_url_cite+e.component.state.getVars(!1);$("#citeh").hide(),$("#cdiagpub").html(""),$("#cdiagsts").html(""),$(".clip_pv.clr,#cdiagpub,#cdiagsts").removeClass("error warning good special");var n=a.escapeHTML($("title").text());$("#clip_pv_md").attr("lnk","[${pvtitle}](${app_url_raw})"),$("#clip_pv_ht").attr("lnk",i),$("#clip_pv_htc").attr("lnk",r),$("#clip_pv_cn").attr("lnk",i),$("#clip_pv_cn").attr("tit",n),$(this).animate({height:"100px",width:"200px",opacity:.95},300)}),i.mouseleave(function(){return r.hide(),$("#citeh").show(),i.animate({height:"20px",width:"40px",opacity:.7},300),!1})},work:function(t){}},e.exports=r},{"./generic.js":7}],15:[function(t,e,i){"use strict";function r(t){a.call(this,t,"tadiraha")}var a=t("./relative.js");r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r},{"./relative.js":13}],16:[function(t,e,i){"use strict";function r(t){a.call(this,t,"tadiraho")}var a=t("./relative.js");r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r},{"./relative.js":13}],17:[function(t,e,i){"use strict";function r(t){a.call(this,t,"tadiraht",1,30)}var a=t("./relative.js");r.prototype=Object.create(a.prototype),r.prototype.constructor=r,e.exports=r},{"./relative.js":13}],18:[function(t,e,i){"use strict";function r(t){this._data={},this._specs=new Map,this.page=t,this._msg=new s("msg_page"),this._compile_specs(),this._getInitstate(),this._addHistory()}var a=function(){function t(t,e){var i=[],r=!0,a=!1,n=void 0;try{for(var s,o=t[Symbol.iterator]();!(r=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);r=!0);}catch(l){a=!0,n=l}finally{try{!r&&o["return"]&&o["return"]()}finally{if(a)throw n}}return i}return function(e,i){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=t("./generic.js"),s=t("./message.js");r.prototype={_spec_info:{vars:new Set(["list","flt_contrib","flt_country","flt_type","flt_tadiraha","flt_tadiraho","flt_tadiraht","rel_country_contrib","rel_type_contrib","rel_tadiraha_contrib","rel_tadiraho_contrib","rel_tadiraht_contrib","item_contrib","item_country","sort"]),vals:new Map([["list",new Set(["contrib","country","type","tadiraha","tadiraho","tadiraht"])],["sort",new Map([["v",!0],["x",!1]])]]),default_value:new Map([["list","contrib"],["sort",!0]]),typ:new Map([["sort","boolean"]]),url:new Set(["list","item_contrib","item_country"]),showas:new Map([["list",new Map([["contrib",{sg:"contribution",pl:"contributions"}],["country",{sg:"country",pl:"countries"}],["type",{sg:"type",pl:"types"}],["tadiraha",{sg:"tadirah activity",pl:"tadirah activities"}],["tadiraho",{sg:"tadirah object",pl:"tadirah objects"}],["tadiraht",{sg:"tadirah technique",pl:"tadirah techniques"}]])]])},_compile_specs:function(){var t=this._spec_info,e=!0,i=!1,r=void 0;try{for(var a,n=t.vars[Symbol.iterator]();!(e=(a=n.next()).done);e=!0){var s=a.value,o={};o.vals=t.vals.get(s)||null,o.default_value=t.default_value.get(s)||"",o.typ=t.typ.get(s)||"string",o.url=t.url.has(s),o.showas=t.showas.get(s)||{},this._specs.set(s,o)}}catch(l){i=!0,r=l}finally{try{!e&&n["return"]&&n["return"]()}finally{if(i)throw r}}},_validate:function(t,e){var i=void 0;if(this._specs.has(t)){var r=this._specs.get(t);"string"==r.typ?r.vals?r.vals.has(e)?i=e:(i=r.default_value,this._msg.msg("illegal string value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")):i=e:"integer"==r.typ?(/^(\-|\+)?[0-9]+$/.test(e)?i=Number(e):(i=r.default_value,this._msg.msg("not a number value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")),i<r.limits.min&&this._msg.msg("number to small for "+t+': "'+i+'" is replaced by "'+r.limits.min+'"',"warning"),i>r.limits.max&&this._msg.msg("number to big for "+t+': "'+i+'" is replaced by "'+r.limits.max+'"',"warning")):"boolean"==r.typ&&(r.vals.has(e)?i=r.vals.get(e):(i=r.default_value,this._msg.msg("illegal boolean value for "+t+': "'+e+'" is replaced by "'+r.default_value+'"',"warning")))}else i=null,this._msg.msg("unknown parameter: "+t+"="+e,"warning");return i},getVars:function(t){var e=[];for(var i in this._data){var r=this._data[i],n=this._specs.get(i);if(t||n.url)if("string"==n.typ||"integer"==n.typ)e.push(i+"="+r);else if("boolean"==n.typ){var s=!0,o=!1,l=void 0;try{for(var c,h=n.vals[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var f=a(c.value,2),d=f[0],u=f[1];u==r&&e.push(i+"="+d)}}catch(_){o=!0,l=_}finally{try{!s&&h["return"]&&h["return"]()}finally{if(o)throw l}}}}return e.join("&")},_getInitstate:function(){var t=!0,e=!1,i=void 0;try{for(var r,s=n.request_vars[Symbol.iterator]();!(t=(r=s.next()).done);t=!0){var o=a(r.value,2),l=o[0],c=o[1];this._specs.has(l)||this._msg.msg("unknown parameter: "+l+"="+c,"warning")}}catch(h){e=!0,i=h}finally{try{!t&&s["return"]&&s["return"]()}finally{if(e)throw i}}var f=!0,d=!1,u=void 0;try{for(var _,p=this._specs[Symbol.iterator]();!(f=(_=p.next()).done);f=!0){var v=a(_.value,2),l=v[0],y=v[1],c=null;if(n.request_vars.has(l)){var m=n.request_vars.get(l);c=this._validate(l,m),n.localstorage_vars.set(l,c)}else n.localstorage_vars.isSet(l)?c=n.localstorage_vars.get(l):(c=y.default_value,n.localstorage_vars.set(l,c));this._data[l]=c}}catch(h){d=!0,u=h}finally{try{!f&&p["return"]&&p["return"]()}finally{if(d)throw u}}},_addHistory:function(t,e){var i="DARIAH contribution tool",r=app_url+"?"+this.getVars(!1);History.pushState(this._data,i,r)},setState:function(t,e){this._data[t]=e,n.localstorage_vars.set(t,e),this._addHistory()},getState:function(t){return this._data[t]},getValues:function(t){return this._specs.get(t).vals},showState:function(t,e,i){var r=e,a=this._specs.get(t).showas;return a.has(e)&&(r=a.get(e)[i]),r},work:function(){return function(){var t=History.getState();t&&t.data&&(this._data=t.data,this.page.work())}.bind(this)}},e.exports=r},{"./generic.js":7,"./message.js":11}]},{},[10]);
//# sourceMappingURL=../maps/main.js.map
