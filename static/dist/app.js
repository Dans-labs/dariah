webpackJsonp([0],{113:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(l(21)),n=l(2),r=l(1),i=l(65),u=l(175),o=l(34);t.default=(0,n.connect)(o.getSettings)(function(e){var t=e.settings,l=e.tables,n=e.table,o=e.field,s=e.relField,c=e.myValues,f=l[n].fieldSpecs[o],d=f.valType,m=f.multiple,p=("object"===(void 0===d?"undefined":(0,a.default)(d))?d:r.emptyO).inactive,_=void 0===p?null:p,b=_?(0,i.compileActive)(l,o):null;return(0,u.wrappedRepr)(l,n,o,d,m,s,b,_,c,t)})},162:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWinDim=t.changeWinDim=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(l(7)),n=l(1),r=(t.changeWinDim=function(){return function(e){e((0,a.default)({type:"windim"},i()))}},{windim:function(e,t){var l=t.height,n=t.width;return(0,a.default)({},e,{height:l,width:n})}}),i=function(){var e=window;return{height:e.innerHeight,width:e.innerWidth}};t.default=(0,n.makeReducer)(r,i());t.getWinDim=function(e){return{win:e.win}}},163:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMe=t.fetchMe=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(l(7)),n=l(93),r=l(1),i=(t.fetchMe=function(){return(0,n.accessData)({type:"fetchMe",contentType:"db",path:"/who/ami",desc:"me"})},{fetchMe:function(e,t){var l=t.data;return null==l?r.emptyO:(0,a.default)({},l)}});t.default=(0,r.makeReducer)(i);t.getMe=function(e){return{me:e.me}}},174:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(32)),r=a(l(25)),i="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ListGrid.jsx",u=a(l(0)),o=l(2),s=l(1),c=l(46),f=l(34),d=l(20),m=l(277),p=l(8),_=l(65),b=l(11),N=l(81),v=a(l(695)),h=a(l(179)),y=a(l(180)),g=a(l(9)),E=(0,s.combineSelectors)(f.getSettings,m.getGrid,d.getAltSection);t.default=(0,o.connect)(E)(function(e){var t=e.alter,l=e.alterSection,a=e.filtered,o=e.settings,f=e.filters,E=e.tables,k=e.table,w=e.listIds,S=e.select,I=e.perm,A=e.masterId,T=e.linkField,O=e.fixed,x=e.grid,M=e.gridTag,D=e.dispatch,C=x[M],j=void 0===C?s.emptyA:C,F=E[k],P=F.fields,U=F.fieldOrder,L=F.fieldSpecs,R=F.item,V=F.detailOrder,W=F.entities,$=(0,b.dealWithProvenance)(o,P),z=U.filter(function(e){return $[e]}),H=z.length,B=null!=V?V.length:0,K=90/H+"%",Y=z.map(function(e){var t=L[e].grid;if(null==t)return{width:K,shrink:0,grow:1};var l=t.width,a=t.grow,n=t.shrink;return{width:null==l?K:l,shrink:null==n?0:n,grow:null==a?0:a}}).concat(new Array(B).fill({width:K,shrink:0,grow:.3})).map(function(e){var t=e.width;return{flex:e.grow+" "+e.shrink+" "+t,overflow:"auto"}}),G=(0,m.compileSortedData)(E,k,w,j,o),q=(0,d.compileAlternatives)(l,2,0,D),X=(0,_.compileActive)(E,k),J=(0,N.getMasterTable)(E,k,T),Z=[],Q=!0,ee=!1,te=void 0;try{for(var le,ae=(0,n.default)(G);!(Q=(le=ae.next()).done);Q=!0){var ne=le.value,re=W[ne],ie=re.values,ue=re.perm,oe=re.workflow,se=q(ne),ce=se.getAlt,fe=se.nextAlt,de=ce(t),me=null!=X&&X.has(ne);Z.push(u.default.createElement(v.default,{key:k+"-"+ne,alt:de,nextAlt:fe,filters:f,tables:E,table:k,eId:ne,masterId:A,linkField:T,isactive:me,initialValues:ie,perm:ue,workflow:oe,fields:$,widthStyles:Y,fixed:O,__source:{fileName:i,lineNumber:74}}))}}catch(e){ee=!0,te=e}finally{try{!Q&&ae.return&&ae.return()}finally{if(ee)throw te}}return u.default.createElement("div",{__source:{fileName:i,lineNumber:95}},a&&S===p.DETAILS?null:u.default.createElement("div",{__source:{fileName:i,lineNumber:98}},u.default.createElement(h.default,{table:k,perm:I,select:S,masterTable:J,nItems:w.length,fixed:O,item:R,button:"button medium",onInsert:(0,c.handle)(D,p.insertItem,k,S,A,T),__source:{fileName:i,lineNumber:99}}),u.default.createElement(y.default,{table:k,listIds:w,item:R,button:"button medium",alterSection:l,nAlts:2,initial:0,openAll:S==p.DETAILS,__source:{fileName:i,lineNumber:110}})),0!==j.length?u.default.createElement("p",{className:"sortspecs",__source:{fileName:i,lineNumber:125}},"Sorted: ",j.map(function(e){var t=(0,r.default)(e,2),l=t[0],a=t[1];return u.default.createElement("span",{className:"sortcol",key:l,__source:{fileName:i,lineNumber:129}},u.default.createElement("span",{__source:{fileName:i,lineNumber:130}},l),u.default.createElement("span",{className:"fa fa-arrow"+(-1===a?"down":"up"),__source:{fileName:i,lineNumber:131}}))}),u.default.createElement(g.default,{tip:"remove all sort options",at:"right",__source:{fileName:i,lineNumber:135}},u.default.createElement("span",{className:"fa fa-close button small",onClick:(0,c.handle)(D,m.resetSort,M),__source:{fileName:i,lineNumber:139}})," ")):null,u.default.createElement("div",{className:"grid",__source:{fileName:i,lineNumber:147}},u.default.createElement("div",{className:"grid-head",__source:{fileName:i,lineNumber:148}},u.default.createElement("div",{className:"grid-status-cell",__source:{fileName:i,lineNumber:149}}),z.filter(function(e){return e!==T}).map(function(e,t){var l=Y[t],a=j.find(function(t){return t[0]===e}),n=a?a[1]:0;return u.default.createElement("div",{className:"grid-head-cell label-col-grid",key:e,style:l,__source:{fileName:i,lineNumber:156}},n?u.default.createElement(g.default,{tip:"remove column from sort options",at:"top",__source:{fileName:i,lineNumber:163}},u.default.createElement("span",{className:"sorted button small",onClick:(0,c.handle)(D,m.delColumn,M,e),__source:{fileName:i,lineNumber:167}},e)):u.default.createElement(g.default,{tip:"sort on this column",at:"top",__source:{fileName:i,lineNumber:172}},u.default.createElement("span",{className:"unsorted button small",onClick:(0,c.handle)(D,m.addColumn,M,e,1),__source:{fileName:i,lineNumber:176}},e)),n?u.default.createElement(g.default,{tip:"change sort direction",at:"top",__source:{fileName:i,lineNumber:184}},u.default.createElement("span",{className:"sorted button small fa fa-arrow-"+(1===n?"up":"down"),onClick:(0,c.handle)(D,m.turnColumn,M,e),__source:{fileName:i,lineNumber:188}})):null)}),(V||s.emptyA).map(function(e,t){var l=Y[t];return u.default.createElement("div",{className:"grid-head-cell label-col-grid",key:e,style:l,__source:{fileName:i,lineNumber:203}},e)})),Z))})},178:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(7)),r=a(l(13)),i=a(l(14)),u=a(l(15)),o=a(l(16)),s=a(l(17)),c="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ListPlain.jsx",f=l(0),d=a(f),m=l(2),p=l(55),_=l(10),b=l(1),N=l(11),v=l(81),h=l(67),y=l(8),g=l(20),E=l(65),k=l(34),w=a(l(36)),S=a(l(729)),I=a(l(282)),A=a(l(179)),T=a(l(180)),O=0,x=2,M=function(e){function t(){var e,l,a,n;(0,i.default)(this,t);for(var u=arguments.length,s=Array(u),c=0;c<u;c++)s[c]=arguments[c];return l=a=(0,o.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(s))),a.handleInsert=function(){var e=a.props,t=e.table,l=e.select,n=e.masterId,r=e.linkField;(0,e.dispatch)((0,y.insertItem)(t,l,n,r)),a.gotoNew=!0},a.gotoItem=function(e){var t=a.props,l=t.table,n=t.alterSection,r=t.dispatch;(0,(0,g.compileAlternatives)(n,x,O,r)(e).putAlt)((O+1)%x);(0,(0,g.compileAlternatives)("edit-"+l+"-"+e,x,O,r)("edit").putAlt)((O+1)%x)},a.scroll=function(e){null!=e&&e.scrollIntoView()},a.showHide=(0,_.memoize)(function(e,t,l,a,n){return function(){if(t!==y.DETAILS){var r=(0,b.getUrlParts)(p.browserHistory),i=r.base,u=r.controller,o=r.eId,s=i+"/"+e+"/"+u;a?o!==l&&p.browserHistory.push(s+"/item/"+l+"/"):(o!==b.emptyS&&p.browserHistory.push(s+"/"),n())}else n()}}),n=l,(0,o.default)(a,n)}return(0,s.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.props,l=t.settings,a=t.alter,r=t.alterSection,i=t.filtered,u=t.filters,o=t.tables,s=t.table,f=t.select,m=t.masterId,p=t.linkField,_=t.fixed,k=t.listIds,M=t.expand,D=t.border,C=t.perm,j=t.dispatch,F=o[s],P=F.item,U=F.entities,L=(0,g.compileAlternatives)(r,x,O,j),R=(0,E.compileActive)(o,s),V=(0,v.getMasterTable)(o,s,p),W=null==V?0:(0,h.editMode)(o,s,"detail",V);return d.default.createElement("div",{className:"list-plain",__source:{fileName:c,lineNumber:68}},i&&f===y.DETAILS?null:d.default.createElement("div",{__source:{fileName:c,lineNumber:71}},d.default.createElement(A.default,{table:s,perm:C,select:f,masterTable:V,nItems:k.length,fixed:_,item:P,button:"button medium",onInsert:this.handleInsert,__source:{fileName:c,lineNumber:72}}),d.default.createElement(T.default,{table:s,listIds:k,item:P,button:"button medium",alterSection:r,nAlts:x,initial:O,openAll:f==y.DETAILS,expand:M,__source:{fileName:c,lineNumber:83}})),k.map(function(t){var r=U[t],i=r.fields,v=r.perm,h=r.workflow,g=r.values,E=(0,y.headEntity)(o,s,t,l),k=s+"-"+t,A=!(0,y.needValues)(U,t),T=L(t),x=T.getAlt,C=T.nextAlt,j=x(a)!==O,F=j?{ref:e.scroll}:b.emptyO,P=A&&(0,N.someEditable)(i,v,h),V=null!=R&&R.has(t),$=0===W?W:W(g);return d.default.createElement("div",{key:t,className:V?"isactive":b.emptyS,__source:{fileName:c,lineNumber:112}},j?d.default.createElement("div",(0,n.default)({},F,{__source:{fileName:c,lineNumber:115}}),M?null:d.default.createElement("span",{className:"link head",onClick:e.showHide(s,f,t,!1,C),__source:{fileName:c,lineNumber:118}},d.default.createElement("span",{className:"button small fa fa-angle-up",__source:{fileName:c,lineNumber:119}})),d.default.createElement(w.default,{__source:{fileName:c,lineNumber:123}},d.default.createElement(S.default,{filters:u,tables:o,table:s,eId:t,masterId:m,linkField:p,isactive:V,startMode:$,fixed:_,inhibitFetch:M,border:D,__source:{fileName:c,lineNumber:124}}))):d.default.createElement("span",{className:"item-head",__source:{fileName:c,lineNumber:139}},P?d.default.createElement(I.default,{form:k,active:j,__source:{fileName:c,lineNumber:142}}):d.default.createElement("span",{__source:{fileName:c,lineNumber:143}},d.default.createElement("span",{className:"fa",__source:{fileName:c,lineNumber:144}})," "),d.default.createElement("span",{className:"link head",onClick:e.showHide(s,f,t,!0,C),__source:{fileName:c,lineNumber:148}},d.default.createElement("span",{className:"button small fa fa-angle-down",__source:{fileName:c,lineNumber:149}})," ",E)))}))}},{key:"gotoNewItem",value:function(){var e=this.props,t=e.tables,l=e.table,a=e.navItem;if(this.gotoNew){var n=t[l];if(null==n)return;var r=n.lastInserted;null!=r&&(this.gotoNew=!1,this.gotoItem(r))}else null!=a&&this.gotoItem(a)}},{key:"openAll",value:function(){var e=this.props,t=e.alter,l=e.alterSection,a=e.table,n=e.listIds,r=e.expand,i=e.dispatch;r&&(0,y.handleOpenAll)(t,l,x,O,a,n,i)()}},{key:"componentDidMount",value:function(){this.openAll(),this.gotoNewItem()}},{key:"componentDidUpdate",value:function(){this.openAll(),this.gotoNewItem()}}]),t}(f.Component),D=(0,b.combineSelectors)(k.getSettings,g.getAltSection);t.default=(0,m.connect)(D)((0,b.withParams)(M))},179:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/EditInsert.jsx",r=a(l(0)),i=l(67),u=l(8),o=a(l(9));t.default=function(e){var t=e.table,l=e.perm,a=e.select,s=e.masterTable,c=e.nItems,f=e.fixed,d=e.item,m=e.button,p=e.onInsert,_=d[0];return f||null==l||!l.insert||l.needMaster&&a!=u.DETAILS?null:(0,i.applyInsertTemplate)(t,s,c,p)||r.default.createElement(o.default,{tip:"make a new "+_,at:"bottom",__source:{fileName:n,lineNumber:15}},r.default.createElement("span",{className:"fa fa-plus "+m,onClick:p,__source:{fileName:n,lineNumber:19}}))}},180:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(25)),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/OpenCloseAll.jsx",i=a(l(0)),u=l(2),o=l(20),s=l(8),c=a(l(9));t.default=(0,u.connect)(o.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.table,u=e.listIds,o=e.item,f=e.button,d=e.nAlts,m=e.initial,p=e.openAll,_=e.expand,b=e.dispatch,N=u.length>0,v=(0,n.default)(o,2),h=v[0],y=v[1],g=1===u.length?h:y,E=u.length+" "+g+" ";return[i.default.createElement("span",{key:"I",__source:{fileName:r,lineNumber:21}},E),N&&p&&!_?i.default.createElement(c.default,{key:"O",tip:"open all "+g,at:"bottom",__source:{fileName:r,lineNumber:23}},i.default.createElement("div",{className:"fa fa-angle-double-down "+f,onClick:(0,s.handleOpenAll)(t,l,d,m,a,u,b),__source:{fileName:r,lineNumber:28}})):null,N&&!_?i.default.createElement(c.default,{key:"C",tip:"close all opened "+g,at:"bottom",__source:{fileName:r,lineNumber:35}},i.default.createElement("div",{className:"fa fa-angle-double-up "+f,onClick:(0,s.handleCloseAll)(t,l,d,m,u,b),__source:{fileName:r,lineNumber:40}})):null]})},20:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileAlternatives=t.getAltSection=t.setItems=t.setAlt=t.nextAlt=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(l(32)),n=l(10),r=l(1),i=l(46),u=t.nextAlt=function(e,t,l,a){return{type:"nextAlt",alterSection:e,alterTag:t,nAlts:l,initial:a}},o=function(e,t,l){return{type:"setAlt",alterSection:e,alterTag:t,alt:l}};t.setAlt=o;t.setItems=function(e,t,l){return{type:"setItems",eIds:e,alterSection:t,alt:l}};var s={nextAlt:function(e,t){var l=t.alterSection,a=t.alterTag,n=t.initial,i=t.nAlts,u=e[l],o=(u=void 0===u?r.emptyO:u)[a],s=((void 0===o?n||0:o)+1)%i;return(0,r.updateAuto)(e,[l,a],{$set:s})},setAlt:function(e,t){var l=t.alterSection,a=t.alterTag,n=t.alt;return(0,r.updateAuto)(e,[l,a],{$set:n})},fetchItems:function(e,t){var l=t.data,n=t.eIds,i=t.alterSection,u=t.alt,o=e;if(l&&null!=n){var s=!0,c=!1,f=void 0;try{for(var d,m=(0,a.default)(n);!(s=(d=m.next()).done);s=!0){var p=d.value;o=(0,r.updateAuto)(o,[i,p],{$set:u})}}catch(e){c=!0,f=e}finally{try{!s&&m.return&&m.return()}finally{if(c)throw f}}}return o},setItems:function(e,t){var l=t.eIds,n=t.alterSection,i=t.alt,u=e;if(null!=l){var o=!0,s=!1,c=void 0;try{for(var f,d=(0,a.default)(l);!(o=(f=d.next()).done);o=!0){var m=f.value;u=(0,r.updateAuto)(u,[n,m],{$set:i})}}catch(e){s=!0,c=e}finally{try{!o&&d.return&&d.return()}finally{if(s)throw c}}}return u}};t.default=(0,r.makeReducer)(s);t.getAltSection=function(e,t){return{alter:e.alter[t.alterSection]||r.emptyO}},t.compileAlternatives=(0,n.memoize)(function(e,t,l,a){return function(n){return{getAlt:function(e){var t=e[n];return void 0===t?l||0:t},nextAlt:(0,i.handle)(a,u,e,n,t,l),initAlt:(0,i.handle)(a,o,e,n,l),setAlt:function(t){return(0,i.handle)(a,o,e,n,t)},putAlt:function(t){return a(o(e,n,t))}}}},null,{debug:"compileAlternatives"})},251:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNotes=t.display=t.clear=t.notify=void 0;var n=a(l(252)),r=a(l(51)),i=l(1),u=(t.notify=function(e){return{type:"msgs",msgs:e}},t.clear=function(){return{type:"clear"}},t.display=function(e){return{type:"display",onOff:e}},{progress:function(e,t){var l=t.desc;return(0,r.default)(e,{messages:{$push:[{kind:"special",text:"still waiting for "+l}]}})},pending:function(e,t){var l=t.desc,a=t.busy,i=t.extraMsgs;return(0,r.default)(e,{messages:{$push:[].concat((0,n.default)(i),[{kind:"special",text:"waiting for "+l}])},busy:{$set:a+1}})},success:function(e,t){var l=t.desc,a=t.busy,i=t.extraMsgs;return(0,r.default)(e,{messages:{$push:[].concat((0,n.default)(i),[{kind:"info",text:l+" ok"}])},busy:{$set:a-1},show:{$set:i.some(function(e){return"warning"===e.kind||"error"===e.kind})}})},error:function(e,t){var l=t.desc,a=t.busy,i=t.extraMsgs;return(0,r.default)(e,{messages:{$push:[].concat((0,n.default)(i),[{kind:"error",text:l+" failed"}])},busy:{$set:a-1},show:{$set:!0}})}}),o={async:function(e,t){var l=t.msgs,a=t.status,n=t.desc,r=e.busy,o=l||i.emptyA,s=u[a];return s?s(e,{extraMsgs:o,desc:n,busy:r}):e},msgs:function(e,t){var l=t.msgs;return(0,r.default)(e,{messages:{$push:l},show:{$set:!0}})},clear:function(e){return(0,r.default)(e,{messages:{$set:i.emptyA},show:{$set:!1}})},display:function(e,t){var l=t.onOff;return(0,r.default)(e,{show:{$set:l}})}};t.default=(0,i.makeReducer)(o,{messages:i.emptyA,busy:0,show:!1});t.getNotes=function(e){var t=e.notes,l=t.messages,a=t.busy,n=t.show,r=-1,u=i.emptyS;return l.forEach(function(e,t){var l=e.kind;"error"===l?(r=t,u="error"):"warning"===l&&"error"!==u&&(r=t,u="warning")}),{messages:l,busy:a,show:n||u,lastMsg:l.length-1,lastNote:r,lastKind:u}}},253:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changedDoc=t.needDoc=t.getDoc=t.fetchDoc=void 0;var n=a(l(33)),r=a(l(51)),i=l(93),u=l(1),o=(t.fetchDoc=function(e){var t=e.docDir,l=e.docName,a=t+"/"+l+"."+e.docExt;return(0,i.accessData)({type:"fetchDoc",contentType:"json",path:a,desc:"document "+l})},{fetchDoc:function(e,t){var l=t.path,a=t.data;return null==a?e:(0,r.default)(e,(0,n.default)({},l,{$set:a}))}});t.default=(0,u.makeReducer)(o);t.getDoc=function(e,t){return{text:e.docs[t.docDir+"/"+t.docName+"."+t.docExt]}};var s=t.needDoc=function(e){return null==e.text};t.changedDoc=function(e,t){return(0,u.propsChanged)(e,s,t,["docDir","docName","docExt"])}},276:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compileOptions=t.getSelect=t.togglePopUp=t.setPopUp=t.setSearch=void 0;var n=a(l(33)),r=a(l(51)),i=l(1),u=l(10),o=l(8),s={search:i.emptyS,popUp:!1},c=(t.setSearch=function(e,t){return{type:"setSearch",selectTag:e,search:t}},t.setPopUp=function(e,t){return{type:"setPopUp",selectTag:e,onOff:t}},t.togglePopUp=function(e){return{type:"togglePopUp",selectTag:e}},{setSearch:function(e,t){var l=t.selectTag,a=t.search;return(0,r.default)(e,(0,n.default)({},l,{$apply:function(e){return(0,r.default)(e||s,{search:{$set:a}})}}))},setPopUp:function(e,t){var l=t.selectTag,a=t.onOff;return(0,r.default)(e,(0,n.default)({},l,{$apply:function(e){return(0,r.default)(e||s,{popUp:{$set:a}})}}))},togglePopUp:function(e,t){var l=t.selectTag,a=e[l],i=null==a||!a.popUp;return(0,r.default)(e,(0,n.default)({},l,{$apply:function(e){return(0,r.default)(e||s,{popUp:{$set:i}})}}))}});t.default=(0,i.makeReducer)(c,i.emptyO);t.getSelect=function(e){return{select:e.select}},t.compileOptions=(0,u.memoize)(function(e,t,l,a,n){var r=e[t],u=r.valueLists,s=r.fieldSpecs,c=(u||i.emptyO)[a];if(null==c)return{options:i.emptyA,optionLookup:i.emptyO};var f=s[a].valType,d=(null==l?c:c.filter(function(e){return l.includes(e)})).map(function(l){return{value:l,label:(0,o.repr)(e,t,a,f,!1,null,l,n,", ")}}),m={};return d.forEach(function(e){var t=e.value,l=e.label;m[t]=l}),{options:d,optionLookup:m}},i.emptyO,{debug:"compileOptions"})},277:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compileSortedData=t.getGrid=t.turnColumn=t.delColumn=t.addColumn=t.resetSort=void 0;var n=a(l(33)),r=a(l(7)),i=a(l(662)),u=a(l(672)),o=l(10),s=l(1),c=l(8),f=(t.resetSort=function(e){return{type:"resetSort",gridTag:e}},t.addColumn=function(e,t,l){return{type:"addColumn",gridTag:e,column:t,direction:l}},t.delColumn=function(e,t){return{type:"delColumn",gridTag:e,column:t}},t.turnColumn=function(e,t){return{type:"turnColumn",gridTag:e,column:t}},{resetSort:function(e,t){var l=t.gridTag;return(0,r.default)({},e,(0,n.default)({},l,s.emptyA))},addColumn:function(e,t){var l=t.gridTag,a=t.column,i=t.direction,u=e[l];return(0,r.default)({},e,(0,n.default)({},l,(u||s.emptyA).filter(function(e){return e[0]!==a}).concat([[a,i]])))},delColumn:function(e,t){var l=t.gridTag,a=t.column,i=e[l];return(0,r.default)({},e,(0,n.default)({},l,(i||s.emptyA).filter(function(e){return e[0]!==a})))},turnColumn:function(e,t){var l=t.gridTag,a=t.column,i=e[l];return(0,r.default)({},e,(0,n.default)({},l,(i||s.emptyA).map(function(e){return[e[0],e[0]===a?-e[1]:e[1]]})))}});t.default=(0,s.makeReducer)(f,s.emptyO);t.getGrid=function(e){return{grid:e.grid}},t.compileSortedData=(0,o.memoize)(function(e,t,l,a,n){var r=a.map(function(e){return e[0]}),o=a.map(function(e){return 1===e[1]?"asc":"desc"}),s=e[t].entities,c=d(e,t,n),f=l.map(function(e){return(0,u.default)(s[e].values,c)});return(0,i.default)(f,r,o).map(function(e){return e._id})},s.emptyO);var d=function(e,t,l){var a=e[t].fieldSpecs;return function(n,r){if("_id"===r)return n;var i=a[r],u=i.valType,o=i.multiple;return(0,c.repr)(e,t,r,u,o,null,n,l,"|")}}},279:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(7)),r=a(l(0)),i=l(55);t.default=function(e){return r.default.createElement(i.Link,(0,n.default)({},e,{activeClassName:"active",__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/NavLink.jsx",lineNumber:4}}))}},282:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(44),n=l(82);t.default=(0,a.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!0})((0,n.editControl)(!1))},286:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(7)),r=a(l(43)),i="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/FieldEdit.jsx",u=a(l(0)),o=l(2),s=l(44),c=l(65),f=l(280),d=l(175),m=a(l(717)),p=a(l(718));t.default=(0,o.connect)()(function(e){e.alter;var t=e.field,l=e.tables,a=e.table,o=e.eId,_=(e.dispatch,e.allowed),b=e.reset,N=e.submitValues,v=(0,r.default)(e,["alter","field","tables","table","eId","dispatch","allowed","reset","submitValues"]),h=l[a].fieldSpecs[t],y=h.valType,g=h.valid,E=h.multiple;if("string"==typeof y){var k=(0,d.getValType)(y),w=k.component,S=k.type,I=k.props,A=f.validation[g||y],T=f.normalization[g||y];return E?u.default.createElement(s.FieldArray,(0,n.default)({name:t,component:m.default,componentSingle:w},I,{validateSingle:A,normalizeSingle:T,tables:l,table:a,eId:o,type:S,valType:y,rerenderOnEveryChange:!0,reset:b,submitValues:N},v,{__source:{fileName:i,lineNumber:29}})):u.default.createElement(s.Field,(0,n.default)({name:t,component:w},I,{validate:A,normalize:T,tables:l,table:a,eId:o,type:S,reset:b,submitValues:N},v,{__source:{fileName:i,lineNumber:50}}))}var O=y.allowNew,x=y.popUpIfEmpty,M=y.inactive,D=M?(0,c.compileActive)(l,t):null,C=a+"-"+o+"-"+t;return u.default.createElement(s.Field,(0,n.default)({name:t,component:p.default,selectTag:C,field:t,multiple:E,allowNew:O,popUpIfEmpty:x,tables:l,table:a,eId:o,allowed:_,activeItems:D,inactive:M,submitValues:N},v,{__source:{fileName:i,lineNumber:72}}))})},287:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/EditHelp.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l(0));t.default=function(e){var t=e.type,l=e.dirty;return n.default.createElement("div",{className:"edit-help",__source:{fileName:a,lineNumber:4}},n.default.createElement("div",{className:"help-line",__source:{fileName:a,lineNumber:5}},l?n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:8}},"Press ",n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:10}},"ESC")," to cancel"):null,n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:15}},"Press ",n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:17}},"TAB")," or click outside this field to save")),"markdown"==t?n.default.createElement("div",{className:"help-line",__source:{fileName:a,lineNumber:23}},n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:24}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:25}},"["),"link text",n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:25}},"]("),"url",n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:25}},")")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:27}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:28}},"*"),n.default.createElement("i",{__source:{fileName:a,lineNumber:28}},"italic"),n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:28}},"*")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:30}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:31}},"**"),n.default.createElement("b",{__source:{fileName:a,lineNumber:31}},"bold"),n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:31}},"**")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:33}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:34}},"`"),n.default.createElement("code",{__source:{fileName:a,lineNumber:34}},"code"),n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:34}},"`")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:36}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:37}},"# "),n.default.createElement("span",{className:"mdh1",__source:{fileName:a,lineNumber:37}},"Heading1")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:39}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:40}},"## "),n.default.createElement("span",{className:"mdh2",__source:{fileName:a,lineNumber:40}},"Heading2")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:42}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:43}},"* "),n.default.createElement("span",{className:"mduli",__source:{fileName:a,lineNumber:43}},"bullet item")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:45}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:46}},"1. "),n.default.createElement("span",{className:"mdoli",__source:{fileName:a,lineNumber:46}},"numbered item")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:48}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:49}},"> "),n.default.createElement("span",{className:"mdbq",__source:{fileName:a,lineNumber:49}},"block quote"))):null)}},288:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemForm.jsx",r=a(l(0)),i=l(2),u=l(1),o=l(46),s=l(11),c=l(81),f=l(8),d=l(20),m=l(34),p=a(l(724)),_=a(l(725)),b=a(l(727)),N=a(l(728)),v=a(l(736)),h=a(l(9)),y=(0,u.combineSelectors)(m.getSettings,d.getAltSection);t.default=(0,i.connect)(y)(function(e){var t=e.settings,l=e.alter,a=e.alterSection,i=e.filters,m=e.tables,y=e.table,g=e.eId,E=e.masterId,k=e.linkField,w=e.isactive,S=e.startMode,I=e.fixed,A=e.border,T=e.initialValues,O=e.fields,x=e.perm,M=e.workflow,D=e.dispatch,C=e.fieldFragments,j=e.detailFragments;null==C&&(C=(0,s.makeFields)(e)),null==j&&(j=(0,c.makeDetails)(e));var F=(0,c.makeKeepInfo)(j),P=(0,s.someEditable)(O,x,M),U=(0,d.compileAlternatives)(a,2,S,D)("edit"),L=U.getAlt,R=U.nextAlt,V=L(l),W=null==A?u.emptyS:P&&1===V?null==A.edit||A.edit?u.emptyS:"noBorder":null==A.read||A.read?u.emptyS:"noBorder",$=P&&1===V?"edit":u.emptyS,z=(0,f.headEntity)(m,y,g,t);return r.default.createElement("div",{className:"itemRecord "+W+" "+$+" "+(w?"isactive":u.emptyS),__source:{fileName:n,lineNumber:60}},P&&1===V?r.default.createElement("div",{__source:{fileName:n,lineNumber:63}},r.default.createElement(v.default,{perm:x,workflow:M,keep:F,fixed:I,button:"button medium",onClick:(0,o.handle)(D,f.delItem,y,g,z),__source:{fileName:n,lineNumber:64}}),r.default.createElement(_.default,{settings:t,tables:m,table:y,eId:g,nextAlt:R,form:y+"-"+g,initialValues:T,perm:x,masterId:E,linkField:k,fieldFragments:C,__source:{fileName:n,lineNumber:72}})):r.default.createElement("div",{__source:{fileName:n,lineNumber:86}},P?r.default.createElement(h.default,{tip:"open an edit form for this record",at:"right",__source:{fileName:n,lineNumber:89}},r.default.createElement("span",{className:"button medium fa fa-pencil",onClick:R,__source:{fileName:n,lineNumber:93}})):null,r.default.createElement(v.default,{perm:x,workflow:M,keep:F,fixed:I,button:"button medium",onClick:(0,o.handle)(D,f.delItem,y,g,z),__source:{fileName:n,lineNumber:100}}),r.default.createElement(b.default,{settings:t,tables:m,table:y,eId:g,masterId:E,linkField:k,fieldFragments:C,__source:{fileName:n,lineNumber:108}})),r.default.createElement(p.default,{settings:t,tables:m,table:y,eId:g,form:y+"-"+g,initialValues:T,linkField:k,fieldFragments:C,__source:{fileName:n,lineNumber:119}}),r.default.createElement(N.default,{alterSection:"list-"+y+"-"+f.DETAILS,detailFragments:j,filters:i,tables:m,table:y,eId:g,__source:{fileName:n,lineNumber:129}}))})},289:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ListFilter.jsx",c=l(0),f=a(c),d=l(2),m=l(1),p=l(46),_=l(81),b=l(47),N=l(8),v=a(l(178)),h=a(l(174)),y=a(l(730)),g=a(l(180)),E=a(l(179)),k=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.tables,l=e.table,a=e.filterTag;(0,e.dispatch)((0,b.initFiltering)(t,l,a))}},{key:"componentWillReceiveProps",value:function(e){var t=e.tables,l=e.table,a=e.filterTag,n=e.filters[l],r=(n=void 0===n?m.emptyO:n)[a],i=e.dispatch,u=this.props,o=u.table,s=u.filterTag;o===l&&s===a||null!=r||i((0,b.initFiltering)(t,l,a))}},{key:"render",value:function(){var e=this.props,t=e.tables,l=e.filters,a=e.table,n=e.navItem,r=e.perm,i=e.select,u=e.masterId,o=e.linkField,c=e.expand,d=e.border,k=e.fixed,w=e.listIds,S=e.mode,I=e.compact,A=e.title,T=e.filterTag,O=e.gridTag,x=e.topLevel,M=e.dispatch,D=(0,b.computeFiltering)(t,l,a,T,w),C=D.filteredIds,j=D.filteredAmountOthers,F=D.amounts;if(null==C)return f.default.createElement("div",{__source:{fileName:s,lineNumber:58}});var P=I?"compact":x?"outer":m.emptyS,U=t[a].item,L=U[1],R="list-"+a+"-"+i,V=(0,_.getMasterTable)(t,a,o);return f.default.createElement("div",{className:"list-filter "+P,__source:{fileName:s,lineNumber:69}},i===N.DETAILS?f.default.createElement("div",{__source:{fileName:s,lineNumber:72}},f.default.createElement(E.default,{table:a,perm:r,select:i,masterTable:V,nItems:w.length,fixed:k,item:U,button:"button medium",onInsert:(0,p.handle)(M,N.insertItem,a,i,u,o),__source:{fileName:s,lineNumber:73}}),f.default.createElement(g.default,{table:a,listIds:w,item:U,button:"button medium",alterSection:R,nAlts:2,initial:0,openAll:!0,expand:c,__source:{fileName:s,lineNumber:84}})):null,f.default.createElement("div",{className:"filters "+P,__source:{fileName:s,lineNumber:98}},I?null:f.default.createElement("p",{__source:{fileName:s,lineNumber:102}},"Total ",f.default.createElement("span",{className:"good-o",__source:{fileName:s,lineNumber:102}},w.length)),f.default.createElement(y.default,{filters:l,tables:t,table:a,filterTag:T,listIds:w,filteredAmount:C.length,filteredAmountOthers:j,amounts:F,compact:I,__source:{fileName:s,lineNumber:104}})),f.default.createElement("div",{className:"list "+P,__source:{fileName:s,lineNumber:116}},"list"===S?f.default.createElement(v.default,{alterSection:R,filtered:!0,filters:l,tables:t,table:a,navItem:n,listIds:C,perm:r,select:i,title:A,masterId:u,linkField:o,expand:c,border:d,fixed:k,__source:{fileName:s,lineNumber:119}}):"grid"===S?f.default.createElement(h.default,{alterSection:R,filtered:!0,filters:l,tables:t,table:a,navItem:n,listIds:C,perm:r,select:i,gridTag:O,masterId:u,linkField:o,fixed:k,__source:{fileName:s,lineNumber:137}}):f.default.createElement("span",{__source:{fileName:s,lineNumber:152}},'unknown display mode "'+S+'" for '+L)))}}]),t}(c.Component);t.default=(0,d.connect)()(k)},290:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Stat.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l(0)),r=l(1);t.default=function(e){var t=e.subTotal,l=e.total,i=e.className;return n.default.createElement("span",{className:i,__source:{fileName:a,lineNumber:6}},null==t?r.emptyS:""+t,null==l||null==t?r.emptyS:" of ",n.default.createElement("strong",{__source:{fileName:a,lineNumber:9}},null==l?r.emptyS:""+l))}},291:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(7)),r=a(l(25)),i=a(l(73)),u=a(l(26)),o="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ByValue.jsx",s=a(l(0)),c=l(2),f=l(1),d=l(47),m=l(20),p=a(l(732)),_=a(l(733)),b=a(l(290));t.default=(0,c.connect)(m.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.tables,c=e.table,N=e.filterTag,v=e.filterSetting,h=e.filterId,y=e.filterField,g=e.filterRelField,E=e.filterLabel,k=e.listIds,w=e.filteredAmount,S=e.filteredAmountOthers,I=e.amounts,A=e.maxCols,T=e.expanded,O=e.compact,x=e.dispatch,M=(0,d.compileValues)(a,c,N,k,y,g);if(null==(0,u.default)(M).length)return s.default.createElement("div",{className:"facet",__source:{fileName:o,lineNumber:26}},s.default.createElement("p",{__source:{fileName:o,lineNumber:26}}," -no facets "));var D=T?0:1,C=(0,m.compileAlternatives)(l,2,D,x)("expand"),j=C.getAlt,F=C.nextAlt,P=j(t),U=O?f.emptyO:{style:{flexBasis:94/A+"%"}},L=O?"right":"down",R=O?"left":"up";return s.default.createElement("div",{className:"facetFilter "+(O?"compact":f.emptyS),__source:{fileName:o,lineNumber:35}},s.default.createElement("div",{className:"facetHead "+(O?"compact":f.emptyS),__source:{fileName:o,lineNumber:36}},s.default.createElement(_.default,{table:c,filterId:h,filterSetting:v,filterTag:N,__source:{fileName:o,lineNumber:37}})," ",E," ",O?null:s.default.createElement(b.default,{subTotal:w,total:S,className:"facet-stat-all",__source:{fileName:o,lineNumber:46}})," ",s.default.createElement("span",{className:"button small fa fa-angle-"+(0===P?R:L),onClick:F,__source:{fileName:o,lineNumber:53}})),0===P?s.default.createElement("div",{className:"facet-container "+(O?"compact":f.emptyS),__source:{fileName:o,lineNumber:60}},(0,i.default)(M).map(function(e){var t=(0,r.default)(e,2),l=t[0],a=t[1];return s.default.createElement("div",(0,n.default)({key:l,className:"facet-row "+(O?"compact":f.emptyS)},U,{__source:{fileName:o,lineNumber:63}}),s.default.createElement(p.default,{className:"facet-value "+(O?"compact":f.emptyS),table:c,filterSetting:v,filterTag:N,filterId:h,valueId:l,valueRep:a,__source:{fileName:o,lineNumber:68}}),O?null:s.default.createElement(b.default,{className:"facet-stat",subTotal:I[l],__source:{fileName:o,lineNumber:80}}))})):s.default.createElement("div",{__source:{fileName:o,lineNumber:89}}))})},292:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/NotFound.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l(0));t.default=function(e){var t=e.splat;return n.default.createElement("h1",{__source:{fileName:a,lineNumber:3}},"404: ",n.default.createElement("code",{__source:{fileName:a,lineNumber:3}},t)," not found on this site.")}},293:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/main.jsx",r=a(l(0)),i=l(297),u=l(55),o=l(8),s=a(l(577)),c=a(l(687)),f=a(l(692)),d=a(l(694)),m=a(l(737)),p=a(l(292)),_=a(l(36));(0,i.render)(r.default.createElement(s.default,{__source:{fileName:n,lineNumber:16}},r.default.createElement(_.default,{__source:{fileName:n,lineNumber:17}},r.default.createElement(u.Router,{history:u.browserHistory,__source:{fileName:n,lineNumber:18}},r.default.createElement(u.Redirect,{from:"/about",to:"/docs/about.md",__source:{fileName:n,lineNumber:19}}),r.default.createElement(u.Redirect,{from:"/docs/about",to:"/docs/about.md",__source:{fileName:n,lineNumber:20}}),r.default.createElement(u.Redirect,{from:"/about.md",to:"/docs/about.md",__source:{fileName:n,lineNumber:21}}),r.default.createElement(u.Redirect,{from:"/login",to:"/docs/about.md",__source:{fileName:n,lineNumber:22}}),r.default.createElement(u.Redirect,{from:"/logout",to:"/docs/about.md",__source:{fileName:n,lineNumber:23}}),r.default.createElement(u.Redirect,{from:"/slogout",to:"/docs/about.md",__source:{fileName:n,lineNumber:24}}),r.default.createElement(u.Route,{path:"/",component:c.default,__source:{fileName:n,lineNumber:25}},r.default.createElement(u.IndexRoute,{component:c.default,__source:{fileName:n,lineNumber:26}}),r.default.createElement(u.IndexRedirect,{to:"/docs/about.md",__source:{fileName:n,lineNumber:27}}),r.default.createElement(u.Route,{path:"docs/:docFile",component:m.default,__source:{fileName:n,lineNumber:28}}),r.default.createElement(u.Route,{path:"tech/docs/gen/:docFile",component:m.default,__source:{fileName:n,lineNumber:29}}),r.default.createElement(u.Route,{path:"tech/docs/:docFile",component:m.default,__source:{fileName:n,lineNumber:30}}),r.default.createElement(u.Route,{path:"data",component:f.default,__source:{fileName:n,lineNumber:31}},r.default.createElement(u.Route,{path:":table",__source:{fileName:n,lineNumber:32}},r.default.createElement(u.Route,{path:"mylist(/item/:eId)",component:d.default,select:o.MYIDS,mode:"list",__source:{fileName:n,lineNumber:33}}),r.default.createElement(u.Route,{path:"list(/item/:eId)",component:d.default,select:o.ALLIDS,mode:"list",__source:{fileName:n,lineNumber:34}}),r.default.createElement(u.Route,{path:"grid(/item/:eId)",component:d.default,select:o.ALLIDS,mode:"grid",__source:{fileName:n,lineNumber:35}}),r.default.createElement(u.Route,{path:"filter(/item/:eId)",component:d.default,select:o.ALLIDS,mode:"list",filtered:!0,__source:{fileName:n,lineNumber:36}})))),r.default.createElement(u.Route,{path:"*",component:p.default,__source:{fileName:n,lineNumber:40}})))),document.getElementById("body"))},34:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSettings=t.adjust=void 0;var n=a(l(63)),r=a(l(33)),i=a(l(51)),u=l(1),o=(t.adjust=function(e,t){return{type:"setSetting",key:e,value:t}},{setSetting:function(e,t){var l=t.key,a=t.value;return(0,i.default)(e,(0,r.default)({},l,{$set:a}))}});t.default=(0,u.makeReducer)(o,{provenanceFields:new n.default(["creator","dateCreated","modified"]),hideProvenance:!0,longDates:{assessment:{dateSubmitted:!0,dateWithdrawn:!0}},showTooltips:!0});t.getSettings=function(e){return{settings:e.settings}}},36:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s=l(0),c=a(s),f=function(e){function t(e){(0,r.default)(this,t);var l=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return l.state={hasError:!1,error:null},l}return(0,o.default)(t,e),(0,i.default)(t,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0,error:e.message})}},{key:"render",value:function(){return this.state.hasError?c.default.createElement("div",{className:"error-boundary",__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ErrorBoundary.jsx",lineNumber:16}},this.state.error):this.props.children}}]),t}(s.Component);t.default=f},47:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.testAllChecks=t.makeTag=t.computeFiltering=t.compileValues=t.getFilters=t.initFiltering=t.changeFacetAll=t.changeFacet=t.changeFulltext=void 0;var n=a(l(33)),r=a(l(580)),i=a(l(92)),u=a(l(63)),o=a(l(73)),s=a(l(32)),c=a(l(7)),f=a(l(25)),d=a(l(26)),m=a(l(254)),p=l(10),_=l(1),b=l(8),N=(t.changeFulltext=function(e,t,l,a){return{type:"fulltext",table:e,filterTag:t,filterId:l,data:a}},t.changeFacet=function(e,t,l,a,n){return{type:"facet",table:e,filterTag:t,filterId:l,data:[a,n]}},t.changeFacetAll=function(e,t,l,a){return{type:"facetAll",table:e,filterTag:t,filterId:l,data:a}},t.initFiltering=function(e,t,l){var a=e[t];return{type:"initFiltering",tables:e,table:t,filterTag:l,fieldIds:v(a)}},{initFiltering:function(e,t){var l=t.tables,a=t.table,n=t.filterTag,r=t.fieldIds,i=e[a],u=y(l,a,void 0===i?{}:i,n,r);return(0,_.updateAuto)(e,[a,n],{$set:u})},fulltext:function(e,t){var l=t.table,a=t.filterTag,n=t.filterId,r=t.data;return(0,_.updateAuto)(e,[l,a,n],{$set:r})},facetAll:function(e,t){var l=t.table,a=t.filterTag,n=t.filterId,r=t.data,i=e[l][a][n],u={};return(0,d.default)(i).forEach(function(e){u[e]=r}),(0,_.updateAuto)(e,[l,a,n],{$set:u})},facet:function(e,t){var l=t.table,a=t.filterTag,n=t.filterId,r=t.data,i=(0,f.default)(r,2),u=i[0],o=i[1];return(0,_.updateAuto)(e,[l,a,n,u],{$set:o})}});t.default=(0,_.makeReducer)(N);t.getFilters=function(e){return{filters:e.filters}};var v=(0,p.memoize)(function(e){if(null==e)return _.emptyO;var t=e.valueLists,l=e.fields,a=e.filterList,n=e.fieldSpecs;if(null==a)return _.emptyO;var r=a.filter(function(e){return l[e.field]}).filter(function(e){return"Fulltext"!==e.type}).map(function(e){return e.field}),i=r.filter(function(e){return null==t[e]});return(0,c.default)({},(0,m.default)(t,function(e,t){return r.includes(t)}),i.length?E(e,i,n):_.emptyO)},_.emptyO,{debug:"compileAllFieldIds"}),h=(0,p.memoize)(function(e,t,l){if(null==e)return _.emptyO;var a=e.valueLists,n=e.fields,r=e.filterList,i=e.fieldSpecs;if(null==r)return _.emptyO;var u=r.filter(function(e){return n[e.field]}).filter(function(e){return"Fulltext"!==e.type}).map(function(e){return e.field}),o=t.startsWith(b.DETAILS),s=u.filter(function(e){return null==a[e]});return o?g(e,l,u,i):(0,c.default)({},(0,m.default)(a,function(e,t){return u.includes(t)}),s.length?g(e,l,s,i):_.emptyO)},_.emptyO,{debug:"compileFieldIds"}),y=(t.compileValues=(0,p.memoize)(function(e,t,l,a,n,r){var i=e[t];if(null==i)return _.emptyA;var u=i.fieldSpecs,o=h(i,l,a)[n];return k(e,u,o,n,r)},_.emptyO,{debug:"compileValues"}),(0,p.memoize)(function(e,t,l,a,n){var r=e[t];if(null==r)return _.emptyO;var i=r.fields,u=r.filterList;if(null==u)return _.emptyO;var o=(l||_.emptyO)[a],c=void 0===o?_.emptyO:o,f={};return u.filter(function(e){return i[e.field]}).forEach(function(t,l){var a=c[l];if("Fulltext"===t.type)null==a&&(f[l]=_.emptyS);else{var i=a||_.emptyO,u={},o=t.field,m=t.relField,p=n[o];if(m){var b=r.fieldSpecs,N=k(e,b,p,o,m),v=!0,h=!1,y=void 0;try{for(var g,E=(0,s.default)((0,d.default)(N));!(v=(g=E.next()).done);v=!0){var w=g.value;u[w]=null==i[w]||i[w]}}catch(e){h=!0,y=e}finally{try{!v&&E.return&&E.return()}finally{if(h)throw y}}}else p.forEach(function(e){u[e]=null==i[e]||i[e]});u[_.emptyS]=null==i[_.emptyS]||i[_.emptyS],(0,d.default)(u).length&&(f[l]=u)}}),f},_.emptyO,{debug:"initFilterSettings"})),g=(t.computeFiltering=(0,p.memoize)(function(e,t,l,a,n){var r=e[l];if(null==r)return _.emptyO;var i=r.entities,u=r.fields,c=r.fieldSpecs,d=r.filterList;if(null==d)return{filteredIds:n};var m=t[l],p=(void 0===m?_.emptyO:m)[a];if(null==p)return _.emptyO;var b=h(r,a,n),N=d.filter(function(e){return u[e.field]}),v={},y={};N.forEach(function(t,l){!function(t,l){var a=p[l],n=t.field,r=t.relField,i=c[n],u="Fulltext"===t.type?I:A;v[l]=u(e,n,r,i,a)}(t,l),y[l]=[]});var g=[],E=!0,k=!1,w=void 0;try{for(var S,O=function(){var e=S.value,t=i[e],l=null,a=!0,n=!1;(0,o.default)(v).forEach(function(e){var r=(0,f.default)(e,2),i=r[0],u=r[1];if(!n){u(t)||(a=!1,null===l?l=i:n=!0)}}),n||(a?(g.push(e),N.forEach(function(t,l){y[l].push(e)})):y[l].push(e))},x=(0,s.default)(n);!(E=(S=x.next()).done);E=!0)O()}catch(e){k=!0,w=e}finally{try{!E&&x.return&&x.return()}finally{if(k)throw w}}var M={};N.forEach(function(t,l){var a=t.field,n=t.relField,r=t.type;M[l]="Fulltext"===r?null:T(e,a,n,c,b[a],y[l],i)});var D={};return(0,o.default)(y).forEach(function(e){var t=(0,f.default)(e,2),l=t[0],a=t[1];D[l]=a.length}),{filteredIds:g,filteredAmountOthers:D,amounts:M}},_.emptyO,{debug:"computeFiltering"}),(0,p.memoize)(function(e,t,l,a){var n={},r=e.entities,o=t.map(function(e){return r[e].values}),c=!0,f=!1,d=void 0;try{for(var m,p=(0,s.default)(l);!(c=(m=p.next()).done);c=!0){var _=m.value,b=a[_].multiple,N=new u.default,v=!0,h=!1,y=void 0;try{for(var g,E=(0,s.default)(o);!(v=(g=E.next()).done);v=!0){var k=g.value[_];if(null!=k)if(b){var w=!0,S=!1,I=void 0;try{for(var A,T=(0,s.default)(k);!(w=(A=T.next()).done);w=!0){var O=A.value;N.add(O)}}catch(e){S=!0,I=e}finally{try{!w&&T.return&&T.return()}finally{if(S)throw I}}}else N.add(k)}}catch(e){h=!0,y=e}finally{try{!v&&E.return&&E.return()}finally{if(h)throw y}}n[_]=(0,i.default)(new u.default(N))}}catch(e){f=!0,d=e}finally{try{!c&&p.return&&p.return()}finally{if(f)throw d}}return n},_.emptyO,{debug:"gatherIds"})),E=(0,p.memoize)(function(e,t,l){var a={},n=e.entities,o=!0,c=!1,f=void 0;try{for(var d,m=(0,s.default)(t);!(o=(d=m.next()).done);o=!0){var p=d.value,_=l[p].multiple,b=new u.default,N=!0,v=!1,h=void 0;try{for(var y,g=(0,s.default)((0,r.default)(n));!(N=(y=g.next()).done);N=!0){var E=y.value.values[p];if(null!=E)if(_){var k=!0,w=!1,S=void 0;try{for(var I,A=(0,s.default)(E);!(k=(I=A.next()).done);k=!0){var T=I.value;b.add(T)}}catch(e){w=!0,S=e}finally{try{!k&&A.return&&A.return()}finally{if(w)throw S}}}else b.add(E)}}catch(e){v=!0,h=e}finally{try{!N&&g.return&&g.return()}finally{if(v)throw h}}a[p]=(0,i.default)(new u.default(b))}}catch(e){c=!0,f=e}finally{try{!o&&m.return&&m.return()}finally{if(c)throw f}}return a},_.emptyO,{debug:"gatherAllIds"}),k=(0,p.memoize)(function(e,t,l,a,r){var o=t[a].valType;if(null==l)return _.emptyO;var s=(0,n.default)({},_.emptyS,"-none-");if("string"==typeof o)l.forEach(function(e){s[e]=e});else{var c=o.relTable;if(null==r)l.forEach(function(t){s[t]=(0,b.headEntity)(e,c,t)});else{var f=e[c].entities;(0,i.default)(new u.default(l.map(function(e){return f[e].values[r]}))).sort().forEach(function(e){s[e]=e})}}return s},_.emptyO,{debug:"gatherValues"}),w=(t.makeTag=function(e,t,l){return null==t?e:e+"-"+t+"-"+l},(0,p.memoize)(function(e){return function(t,l,a){return t[l].entities[a].values[e]}},_.emptyO)),S=function(e,t){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=t.valType,r=t.multiple,i=void 0;if("string"==typeof n)i=r?l?function(e){return null==e?_.emptyS:e.join(" ")}:function(e){return null==e?_.emptyA:e}:l?function(e){return null==e?_.emptyS:e}:function(e){return null==e?_.emptyA:[e]};else{var u=n.relTable,o=a?w(a):b.headEntity;i=r?l?function(t){return null==t?_.emptyS:t.map(function(t){return o(e,u,t).join(" ")})}:function(t){return null==t?_.emptyA:null==a?t:o(e,u,t)}:l?function(t){return null==t?_.emptyS:o(e,u,t)}:function(t){return null==t?_.emptyA:null==a?[t]:[o(e,u,t)]}}return i},I=(0,p.memoize)(function(e,t,l,a,n){var r=S(e,a,!0),i=(n||_.emptyS).toLowerCase();return null==i||i===_.emptyS?function(){return!0}:function(e){var l=e.values[t],a=r(l);return null!=a&&-1!==a.toLowerCase().indexOf(i)}},_.emptyO,{debug:I}),A=(0,p.memoize)(function(e,t,l,a,n){var r=S(e,a,!1,l);return 0===(n||_.emptyO).size?function(){return!1}:function(e){var l=e.values[t],a=r(l);if(0===a.length)return n[_.emptyS];var i=!0,u=!1,o=void 0;try{for(var c,f=(0,s.default)(a);!(i=(c=f.next()).done);i=!0){var d=c.value;if(n[d])return!0}}catch(e){u=!0,o=e}finally{try{!i&&f.return&&f.return()}finally{if(u)throw o}}return!1}},_.emptyO,{debug:A}),T=(0,p.memoize)(function(e,t,l,a,n,r,i){var u=a[t],o=S(e,u,!1,l),c={};if(c[_.emptyS]=0,l){var f=k(e,a,n,t,l),m=!0,p=!1,b=void 0;try{for(var N,v=(0,s.default)((0,d.default)(f));!(m=(N=v.next()).done);m=!0){var h=N.value;c[h]=0}}catch(e){p=!0,b=e}finally{try{!m&&v.return&&v.return()}finally{if(p)throw b}}}else n.forEach(function(e){c[e]=0});var y=!0,g=!1,E=void 0;try{for(var w,I=(0,s.default)(r);!(y=(w=I.next()).done);y=!0){var A=o(i[w.value].values[t]);if(0===A.length)c[_.emptyS]+=1;else{var T=!0,O=!1,x=void 0;try{for(var M,D=(0,s.default)(A);!(T=(M=D.next()).done);T=!0){var C=M.value;c[C]+=1}}catch(e){O=!0,x=e}finally{try{!T&&D.return&&D.return()}finally{if(O)throw x}}}}}catch(e){g=!0,E=e}finally{try{!y&&I.return&&I.return()}finally{if(g)throw E}}return c},_.emptyO,{debug:"countFacets"});t.testAllChecks=function(e){var t=!0,l=!0;if(null==e)return{allTrue:t,allFalse:l};var a=!0,n=!1,r=void 0;try{for(var i,u=(0,s.default)((0,o.default)(e));!(a=(i=u.next()).done);a=!0){i.value[1]?l=!1:t=!1}}catch(e){n=!0,r=e}finally{try{!a&&u.return&&u.return()}finally{if(n)throw r}}return{allTrue:t,allFalse:l}}},577:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Root.jsx",r=a(l(0)),i=l(2),u=a(l(578)),o=a(l(673));t.default=function(e){var t=e.children;return r.default.createElement(i.Provider,{store:u.default,__source:{fileName:n,lineNumber:8}},r.default.createElement(o.default,{__source:{fileName:n,lineNumber:9}},t))}},578:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=l(94),r=a(l(579)),i=l(44),u=a(l(34)),o=a(l(162)),s=a(l(93)),c=a(l(251)),f=a(l(253)),d=a(l(8)),m=a(l(163)),p=a(l(47)),_=a(l(20)),b=a(l(276)),N=a(l(277));t.default=function(e){return(0,n.createStore)(e,(0,n.applyMiddleware)(r.default))}((0,n.combineReducers)({settings:u.default,win:o.default,server:s.default,notes:c.default,docs:f.default,tables:d.default,me:m.default,filters:p.default,alter:_.default,form:i.reducer,select:b.default,grid:N.default}))},65:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.assessmentScore=t.compileActive=t.loadExtra=t.TYPE_FIELD=t.TYPE_TABLE=t.CRITERIA_TABLE=t.PACKAGE_TABLE=void 0;var n=a(l(26)),r=a(l(92)),i=a(l(25)),u=a(l(73)),o=a(l(63)),s=l(10),c=l(1),f=l(280),d=t.PACKAGE_TABLE="package",m=t.CRITERIA_TABLE="criteria",p=t.TYPE_TABLE="typeContribution",_=t.TYPE_FIELD="typeContribution",b=(t.loadExtra={contrib:[["package"],["criteria"],["typeContribution"]]},(0,s.memoize)(function(e,t,l){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if([e,t,l].some(function(e){return null==e}))return a?null:c.emptyO;var n=new o.default,s=new o.default,p=new o.default,b=Date.now();return(0,u.default)(e).forEach(function(e){var t=(0,i.default)(e,2),l=t[0],a=t[1].values,r=a.startDate,u=a.endDate,o=a.typeContribution,d=(0,f.getDateTime)(r),m=(0,f.getDateTime)(u),p=null==d,_=null==m;p&&_||(p||d<b)&&(_||b<m)&&(n.add(l),(o||c.emptyA).forEach(function(e){return s.add(e)}))}),(0,u.default)(l).forEach(function(e){var t=(0,i.default)(e,2),l=t[0],a=t[1].values[d];n.has(a)&&p.add(l)}),a?a===_?s:a===d?n:a===m?p:null:{activeIdsPkg:(0,r.default)(n).map(function(t){return e[t].values}).sort((0,f.sortTimeInterval)("startDate","endDate")).map(function(e){return e._id}),activeIdsTyp:(0,r.default)(s).map(function(e){return t[e].values}).sort((0,f.sortStringTemplate)(function(e){return(e.mainType||c.emptyS)+" / "+(e.subType||c.emptyS)})).map(function(e){return e._id}),activeIdsCri:(0,r.default)(p).map(function(e){return l[e].values}).sort((0,f.sortStringTemplate)(function(e){return e.criterion})).map(function(e){return e._id})}},c.emptyO,{debug:"compileActiveItems"}));t.compileActive=function(e,t){if([d,m,p].some(function(t){return null==e[t]}))return t?null:c.emptyO;var l=e[d].entities,a=e[m].entities,n=e[p].entities;return b(l,n,a,t)},t.assessmentScore=(0,s.memoize)(function(e,t){var l=e.criteriaEntry,a=(l=void 0===l?c.emptyO:l).entities,r=e.score,i=(r=void 0===r?c.emptyO:r).entities,u=(0,n.default)(a).filter(function(e){return a[e].values.assessment==t}).map(function(e){var t=a[e].values,l=t.criteria,r=t.score,u=i[r],o=(u=void 0===u?c.emptyO:u).values,s=(o=void 0===o?c.emptyO:o).score,f=void 0===s?0:s,d=(0,c.max)((0,n.default)(i).filter(function(e){return i[e].values.criteria==l}).map(function(e){return i[e].values.score}));return{criteria:l,score:f,maxScore:d}}),o=(0,c.sum)(u.map(function(e){return e.maxScore})),s=u.length,f=u.filter(function(e){return e.score>=0}),d=(0,c.sum)(f.map(function(e){return e.maxScore})),m=(0,c.sum)(f.map(function(e){return e.score})),p=f.length;return{overall:0==d?0:Math.round(100*m/d),relevantScore:m,relevantMax:d,allMax:o,relevantN:p,allN:s}},c.emptyO)},673:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s=l(0),c=l(2),f=a(l(683)),d=l(162),m=function(e){function t(){var e,l,a,i;(0,r.default)(this,t);for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];return l=a=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(s))),a.newWindowSize=(0,f.default)(function(){(0,a.props.dispatch)((0,d.changeWinDim)())},1e3),i=l,(0,u.default)(a,i)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props.children;return s.Children.only(e)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.newWindowSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.newWindowSize)}}]),t}(s.Component);t.default=(0,c.connect)()(m)},687:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/App.jsx",r=a(l(0)),i=l(2),u=l(162),o=a(l(36)),s=a(l(688)),c=a(l(689)),f=a(l(690)),d=a(l(9)),m=a(l(691));t.default=(0,i.connect)(u.getWinDim)(function(e){var t=e.children,l=e.win,a=l.height,i=l.width+" x "+a;return r.default.createElement(o.default,{__source:{fileName:n,lineNumber:17}},r.default.createElement(o.default,{__source:{fileName:n,lineNumber:18}},r.default.createElement(f.default,{__source:{fileName:n,lineNumber:19}})),r.default.createElement("div",{className:"topnavbar",__source:{fileName:n,lineNumber:21}},r.default.createElement(d.default,{tip:"information about this site",at:"right",__source:{fileName:n,lineNumber:22}},r.default.createElement("span",{className:"logo-container",__source:{fileName:n,lineNumber:26}},r.default.createElement("img",{src:"/static/images/inkind_logo_small.png",__source:{fileName:n,lineNumber:27}}))),r.default.createElement(o.default,{__source:{fileName:n,lineNumber:30}},r.default.createElement(c.default,{__source:{fileName:n,lineNumber:31}})),r.default.createElement(m.default,{__source:{fileName:n,lineNumber:33}}),r.default.createElement(d.default,{tip:"current window size: "+i+" pixels",at:"bottom",__source:{fileName:n,lineNumber:34}},r.default.createElement("span",{className:"resize",__source:{fileName:n,lineNumber:38}},i)),r.default.createElement(o.default,{__source:{fileName:n,lineNumber:42}},r.default.createElement(s.default,{__source:{fileName:n,lineNumber:43}}))),r.default.createElement(o.default,{__source:{fileName:n,lineNumber:46}},t))})},688:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Login.jsx",c=l(0),f=a(c),d=l(2),m=l(8),p=l(163),_=a(l(9)),b=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props.me;return f.default.createElement("span",{className:"login",__source:{fileName:s,lineNumber:13}},e.eppn?[f.default.createElement(_.default,{key:"desc",tip:"you are logged in",at:"bottom",__source:{fileName:s,lineNumber:17}},f.default.createElement("span",{className:"fa fa-user",__source:{fileName:s,lineNumber:22}}),f.default.createElement("strong",{__source:{fileName:s,lineNumber:22}},(0,m.presentUser)(e))," ",f.default.createElement("em",{__source:{fileName:s,lineNumber:23}},e.groupDesc||"not authenticated")),f.default.createElement(_.default,{key:"logout",tip:"log out of this tool",at:"bottom",__source:{fileName:s,lineNumber:25}},f.default.createElement("a",{href:"/logout",className:"control fa fa-user-times",__source:{fileName:s,lineNumber:30}})),f.default.createElement(_.default,{key:"signout",tip:"sign out from DARIAH",at:"top",__source:{fileName:s,lineNumber:35}},f.default.createElement("a",{href:"/slogout",className:"control fa fa-users",__source:{fileName:s,lineNumber:40}}))]:f.default.createElement(_.default,{tip:"click to log in",at:"bottom",__source:{fileName:s,lineNumber:46}},f.default.createElement("a",{href:"/login",className:"control",__source:{fileName:s,lineNumber:50}},f.default.createElement("strong",{className:"fa fa-user-plus",__source:{fileName:s,lineNumber:53}}),f.default.createElement("strong",{__source:{fileName:s,lineNumber:53}}," login"))))}},{key:"componentDidMount",value:function(){(0,this.props.dispatch)((0,p.fetchMe)({type:"fetchMe",contentType:"db",path:"/who/ami",desc:"me"}))}}]),t}(c.Component);t.default=(0,d.connect)(p.getMe)(b)},689:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Static.jsx",r=a(l(0)),i=a(l(279));t.default=function(){return r.default.createElement("span",{className:"toplinks",__source:{fileName:n,lineNumber:6}},r.default.createElement(i.default,{to:"/docs/about.md",__source:{fileName:n,lineNumber:7}},"Home"),r.default.createElement(i.default,{to:"/data",__source:{fileName:n,lineNumber:8}},"Registry"),r.default.createElement("a",{href:"https://github.com/Dans-labs/dariah/wiki",target:"_blank",rel:"noopener noreferrer",__source:{fileName:n,lineNumber:9}},"Help"),r.default.createElement("a",{href:"https://github.com/Dans-labs/dariah/wiki/Help",target:"_blank",rel:"noopener noreferrer",__source:{fileName:n,lineNumber:10}},"About"),r.default.createElement("a",{href:"https://dans-labs.github.io/dariah/",target:"_blank",rel:"noopener noreferrer",__source:{fileName:n,lineNumber:11}},"Tech doc"))}},690:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Notification.jsx",c=l(0),f=a(c),d=l(2),m=l(1),p=l(251),_=a(l(9)),b=function(e){function t(e){(0,r.default)(this,t);var l=(0,u.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return l.refDom=function(e){return function(t){t&&(l.dom[e]=t)}},l.handleBox=function(){var e=l.props,t=e.show;(0,e.dispatch)((0,p.display)(!t))},l.handleHide=function(){(0,l.props.dispatch)((0,p.display)(!1))},l.handleClear=function(){(0,l.props.dispatch)((0,p.clear)())},l.dom={},l}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this,t=this.props,l=t.messages,a=t.lastNote,n=t.lastKind,r=t.busy,i=t.show,u=a>-1,o=new Array(r<0?0:r).fill(1);return f.default.createElement("div",{__source:{fileName:s,lineNumber:40}},f.default.createElement(_.default,{tip:"click circle to show/hide notifications and progress messages",at:"left",fixed:!0,classTip:"msg-spinner-tip",classArrow:"msg-spinner-arrow",__source:{fileName:s,lineNumber:41}},f.default.createElement("p",{className:"msg-spinner",__source:{fileName:s,lineNumber:48}},f.default.createElement("span",{className:u?"spin-"+n:"spin-ok",__source:{fileName:s,lineNumber:49}},o.map(function(e,t){return f.default.createElement("span",{key:t,className:"msg-dot fa fa-caret-left",__source:{fileName:s,lineNumber:52}})}),f.default.createElement("span",{className:"fa fa-"+(0===r?"circle-o":"spinner fa-spin"),onClick:this.handleBox,__source:{fileName:s,lineNumber:53}})))),i?f.default.createElement("div",{ref:this.refDom("notbox"),className:"msg-box",onClick:this.handleHide,__source:{fileName:s,lineNumber:62}},l.map(function(t,l){return f.default.createElement("p",{key:l,ref:e.refDom("m"+l),className:"msg-line "+[t.kind]+"-o "+("info"!==t.kind?"msg-high":m.emptyS),__source:{fileName:s,lineNumber:68}},t.text)}),f.default.createElement("p",{className:"msg-dismiss",__source:{fileName:s,lineNumber:75}},"(click panel to hide)"),l.length>1?f.default.createElement("p",{className:"msg-trash",__source:{fileName:s,lineNumber:78}},f.default.createElement("a",{href:"#",className:"control",onClick:this.handleClear,__source:{fileName:s,lineNumber:79}},f.default.createElement("span",{className:"control fa fa-trash",__source:{fileName:s,lineNumber:83}})," clear messages")):null):null)}},{key:"componentDidMount",value:function(){this.setView()}},{key:"componentDidUpdate",value:function(){this.setView()}},{key:"setView",value:function(){this.props.show&&this.setScroll()}},{key:"setScroll",value:function(){if(this.props.show){var e=this.props,t=e.lastMsg,l=e.lastNote;l>-1?this.dom["m"+l].scrollIntoView():t>-1&&this.dom["m"+t].scrollIntoView()}}}]),t}(c.Component);t.default=(0,d.connect)(p.getNotes)(b)},691:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/TooltipSwitch.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l(0)),r=l(2),i=l(46),u=l(34);t.default=(0,r.connect)(u.getSettings)(function(e){var t=e.settings,l=e.dispatch,r=t.showTooltips,o=void 0!==r&&r;return n.default.createElement("span",{className:"tooltips-"+(o?"on":"off"),__source:{fileName:a,lineNumber:11}},n.default.createElement("input",{type:"checkbox",checked:o,onChange:(0,i.handlE)(l,u.adjust,"showTooltips",!o),__source:{fileName:a,lineNumber:12}}),"tooltips")})},692:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/SubApp.jsx",r=a(l(0)),i=l(2),u=l(1),o=l(163),s=a(l(36)),c=a(l(279)),f=a(l(693)),d=a(l(9)),m={public:1,auth:2,office:3,system:4,root:5},p=function(e,t){return m[e]>=m[t]},_=[{path:"/data/contrib",name:"Contributions",forWhom:"public",details:[{path:"filter",name:"All items",forWhom:"public",hint:"Overview of all contributions"},{path:"mylist",name:"My items",forWhom:"auth",hint:"My contribution"},{component:r.default.createElement(f.default,{key:"newcontrib",table:"contrib",thing:"contribution",__source:{fileName:n,lineNumber:56}}),forWhom:"auth",hint:"Start here to add a contribution"}]},{path:"/data/assessment",name:"Assessments",forWhom:"auth",details:[{path:"filter",name:"All items",forWhom:"auth",hint:"overview of all assessments"},{path:"mylist",name:"My items",forWhom:"auth",hint:"Look here to see the status of your assessments"}]},{path:"/data/package",name:"Packages",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"the setup of contribution types and criteria"},{path:"grid",name:"table",forWhom:"office",hint:"the setup of contribution types and criteria"}]},{path:"/data/typeContribution",name:"Contribution types",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all contribution types"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all contribution types"}]},{path:"/data/criteria",name:"Criteria",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all criteria"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all criteria"}]},{path:"/data/score",name:"Scores",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all scores"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all scores"}]},{path:"/data/user",name:"Users",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"User management"},{path:"grid",name:"table",forWhom:"office",hint:"User management"}]},{path:"/data/country",name:"Countries",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"Country membership management"},{path:"grid",name:"table",forWhom:"office",hint:"Country membership management"}]}];t.default=(0,i.connect)(o.getMe)((0,u.withParams)(function(e){var t=e.me,l=e.table,a=e.routes,i=e.children;return r.default.createElement("div",{className:"sub-app",__source:{fileName:n,lineNumber:133}},r.default.createElement("div",{className:"subnavbar",__source:{fileName:n,lineNumber:134}},r.default.createElement(s.default,{__source:{fileName:n,lineNumber:135}},_.map(function(e){return function(e,t){var l=t.path,a=t.name,i=t.forWhom,o=t.details;return p(e.groupRep,i)?r.default.createElement("div",{key:l,className:"section",__source:{fileName:n,lineNumber:23}},r.default.createElement(c.default,{to:l,className:"head",__source:{fileName:n,lineNumber:24}},a),r.default.createElement("div",{className:"subsection",__source:{fileName:n,lineNumber:25}},(o||u.emptyA).filter(function(t){var l=t.forWhom;return p(e.groupRep,l)}).map(function(e){var t=e.component,a=e.path,i=e.name,u=e.hint;return null==t?r.default.createElement(d.default,{key:a,tip:u,at:"right",__source:{fileName:n,lineNumber:30}},r.default.createElement(c.default,{to:l+"/"+a,__source:{fileName:n,lineNumber:35}},i)):t}))):null}(t,e)}))),r.default.createElement("div",{className:"submaterial",__source:{fileName:n,lineNumber:139}},r.default.createElement(s.default,{__source:{fileName:n,lineNumber:140}},"data"===a[1].path&&1===a.length?r.default.createElement("div",{__source:{fileName:n,lineNumber:143}},"All tables"):"data"===a[1].path&&2===a.length?r.default.createElement("div",{__source:{fileName:n,lineNumber:145}},r.default.createElement("h3",{__source:{fileName:n,lineNumber:146}},"Registry"),r.default.createElement("p",{__source:{fileName:n,lineNumber:147}},"Use the side bar to navigate to a section")):"data"===a[1].path&&3===a.length?r.default.createElement("div",{__source:{fileName:n,lineNumber:150}},r.default.createElement("h3",{__source:{fileName:n,lineNumber:151}},"Registry"),r.default.createElement("h4",{__source:{fileName:n,lineNumber:152}},"Table "+l),r.default.createElement("p",{__source:{fileName:n,lineNumber:153}},"Use the side bar to navigate to a particular view on this table")):null),r.default.createElement(s.default,{__source:{fileName:n,lineNumber:158}},i)))}))},693:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s=l(0),c=a(s),f=l(2),d=l(55),m=l(1),p=l(8),_=function(e){function t(){var e,l,a,i;(0,r.default)(this,t);for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];return l=a=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(s))),a.handleInsert=function(){var e=a.props,t=e.table,l=e.masterId,n=e.linkField,r=e.dispatch,i=null==l?p.MYIDS:p.DETAILS;r((0,p.insertItem)(t,i,l,n)),a.gotoNew=!0},i=l,(0,u.default)(a,i)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"gotoNewItem",value:function(){var e=this.props,t=e.tables,l=e.table;if(this.gotoNew){var a=t[l];if(null==a)return;var n=a.lastInserted;if(null!=n){this.gotoNew=!1;var r=(0,m.getUrlParts)(d.browserHistory).base;d.browserHistory.push(r+"/"+l+"/mylist/item/"+n+"/")}}}},{key:"render",value:function(){var e=this.props.thing;return c.default.createElement("span",{className:"button large workflow info",onClick:this.handleInsert,__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Insert.jsx",lineNumber:32}},"New "+e)}},{key:"componentDidMount",value:function(){this.gotoNewItem()}},{key:"componentDidUpdate",value:function(){this.gotoNewItem()}}]),t}(s.Component);t.default=(0,f.connect)(p.getTables)(_)},694:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ListContainer.jsx",c=l(0),f=a(c),d=l(2),m=l(1),p=l(65),_=l(8),b=l(47),N=a(l(36)),v=a(l(174)),h=a(l(178)),y=a(l(289)),g=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.filters,l=e.tables,a=e.table,n=e.eId,r=e.select,i=e.mode,u=e.filtered,o="grid"===i;if((0,_.needTables)(l,[[a,r,o]].concat(p.loadExtra[a]||m.emptyA)))return f.default.createElement("div",{__source:{fileName:s,lineNumber:19}});var c=l[a],d=c.title,g=c.item,E=c.perm,k=c.myIds,w=c.allIds,S=g[1],I=r===_.MYIDS?k:w,A=(0,b.makeTag)(r,null,null);return f.default.createElement(N.default,{__source:{fileName:s,lineNumber:26}},u?f.default.createElement(y.default,{filters:t,tables:l,table:a,navItem:n,listIds:I,perm:E,select:r,mode:i,title:d,filterTag:A,gridTag:a,topLevel:!0,__source:{fileName:s,lineNumber:29}}):"list"===i?f.default.createElement(h.default,{alterSection:"list-"+a+"-"+r,filters:t,tables:l,table:a,navItem:n,listIds:I,select:r,perm:E,title:d,__source:{fileName:s,lineNumber:44}}):"grid"===i?f.default.createElement(v.default,{alterSection:"list-"+a+"-"+r,filters:t,tables:l,table:a,navItem:n,listIds:I,select:r,perm:E,gridTag:a,__source:{fileName:s,lineNumber:56}}):f.default.createElement("span",{__source:{fileName:s,lineNumber:67}},'unknown display mode "'+i+'" for '+S))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.tables,l=e.table,a=e.select,n=e.mode,r=e.dispatch,i="grid"===n;(0,_.fetchTables)(t,[[l,a,i]].concat(p.loadExtra[l]||m.emptyA),r)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.tables,l=e.table,a=e.select,n=e.mode,r=e.dispatch,i="grid"===n;(0,_.fetchTables)(t,[[l,a,i]].concat(p.loadExtra[l]||m.emptyA),r)}}]),t}(c.Component),E=(0,m.combineSelectors)(_.getTables,b.getFilters);t.default=(0,d.connect)(E)((0,m.withParams)(g))},695:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemRow.jsx",r=a(l(0)),i=l(2),u=l(10),o=l(1),s=l(11),c=l(81),f=l(696),d=a(l(282)),m=a(l(113)),p=a(l(288)),_=a(l(9)),b=(0,u.memoize)(function(e,t,l,a,i){return a?r.default.createElement(_.default,{tip:(i?"show":"close")+" details of this record",at:"left",__source:{fileName:n,lineNumber:55}},r.default.createElement("span",{className:"button small fa fa-angle-"+(i?"down":"up"),onClick:e,__source:{fileName:n,lineNumber:59}})):null});t.default=(0,i.connect)(f.getForms)(function(e){var t=e.alt,l=e.nextAlt,a=e.filters,i=e.tables,u=e.form,f=e.table,_=e.eId,N=e.initialValues,v=e.perm,h=e.workflow,y=e.masterId,g=e.linkField,E=e.isactive,k=e.fixed,w=e.fields,S=e.widthStyles,I=(0,s.makeFields)({tables:i,table:f,eId:_,initialValues:N,perm:v,fields:w}),A=(0,c.makeDetails)({tables:i,table:f,eId:_}),T=v.update,O=I.length,x=f+"-"+_,M=u.has(x),D="edit-"+f+"-"+_;return r.default.createElement("div",{className:E?"isactive":o.emptyS,__source:{fileName:n,lineNumber:86}},0===t?r.default.createElement("div",{__source:{fileName:n,lineNumber:89}},r.default.createElement("div",{className:"grid-row",__source:{fileName:n,lineNumber:90}},r.default.createElement("div",{className:"grid-status-cell",__source:{fileName:n,lineNumber:91}},b(l,f,_,T,!0),M?r.default.createElement(d.default,{form:f+"-"+_,active:!1,__source:{fileName:n,lineNumber:93}}):null),function(e,t,l){return I.map(function(t,a){var i=t.field,u=t.fragment,s=u.editable,c=u.table,f=u.myValues,d=l[a];return r.default.createElement("div",{className:"grid-cell valueColGrid "+(s?"edit":o.emptyS),style:d,key:i,__source:{fileName:n,lineNumber:22}},r.default.createElement(m.default,{field:i,tables:e,table:c,myValues:f,__source:{fileName:n,lineNumber:27}}))})}(i,0,S),function(e,t,l,a,i){return A.map(function(e,t){var l=e.name,u=e.detailListIds,o=a[i+t],s=u.length;return r.default.createElement("div",{key:l,className:"grid-cell value-col-grid",style:o,__source:{fileName:n,lineNumber:43}},s)})}(0,0,0,S,O))):r.default.createElement("div",{__source:{fileName:n,lineNumber:99}},r.default.createElement("div",{className:"grid-status-cell",__source:{fileName:n,lineNumber:100}},b(l,f,_,T,!1)),r.default.createElement(p.default,{filters:a,tables:i,table:f,eId:_,masterId:y,linkField:g,alterSection:D,isactive:E,startMode:0,initialValues:N,perm:v,workflow:h,fields:w,fieldFragments:I,detailFragments:A,fixed:k,__source:{fileName:n,lineNumber:103}})))})},696:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getForms=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(l(26)),n=l(10),r=(t.getForms=function(e){var t=e.form;return{form:r(t)}},function(e){return(0,n.makeSet)((0,a.default)(e))})},717:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(7)),r=a(l(43)),i="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/InputMulti.jsx",u=a(l(0)),o=l(44),s=l(82),c=l(11),f=a(l(9));t.default=function(e){var t=e.componentSingle,l=e.validateSingle,a=e.normalizeSingle,d=e.meta,m=d.dirty,p=d.invalid,_=d.submitting,b=d.error,N=e.fields,v=e.table,h=e.eId,y=e.valType,g=(e.nameC,e.reset),E=e.submitValues,k=(0,r.default)(e,["componentSingle","validateSingle","normalizeSingle","meta","fields","table","eId","valType","nameC","reset","submitValues"]),w=(0,c.makeSubmit)(m,p,_,E),S=(0,c.makeSubmitTime)(E);return u.default.createElement("div",{className:(0,s.editClass)(m,p)+" multi-field "+y,__source:{fileName:i,lineNumber:28}},N.map(function(e,r){return u.default.createElement("div",{key:e,className:"multi-content",__source:{fileName:i,lineNumber:32}},u.default.createElement(f.default,{tip:"remove entry",at:"left",__source:{fileName:i,lineNumber:36}},u.default.createElement("div",{className:"button medium",onClick:function(e,t,l){return function(){e.remove(t),l()}}(N,r,S),__source:{fileName:i,lineNumber:40}},"×")),u.default.createElement(o.Field,(0,n.default)({name:e,component:t,validate:l,normalize:a,label:r,table:v,eId:h,reset:g,submitValues:w},k,{__source:{fileName:i,lineNumber:45}})))}),u.default.createElement("div",{className:"multi-content",__source:{fileName:i,lineNumber:59}},u.default.createElement(f.default,{tip:"more entries",at:"left",__source:{fileName:i,lineNumber:62}},u.default.createElement("div",{className:"button medium",onClick:function(e,t){return function(){e.push(),t()}}(N,S),__source:{fileName:i,lineNumber:66}},"+"))),b&&u.default.createElement("p",{className:"invalid diag",__source:{fileName:i,lineNumber:72}},b))}},718:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(252)),r=a(l(7)),i="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/RelSelect.jsx",u=a(l(0)),o=l(2),s=l(10),c=l(1),f=l(46),d=l(11),m=l(175),p=l(34),_=l(276),b=a(l(9)),N=function(e){var t=e.label,l=e.attributes,a=e.selected,n=e.multiple,o=e.onHit;return u.default.createElement(b.default,{tip:a?t+" is currently selected":n?"add "+t:"select "+t,at:"bottom",__source:{fileName:i,lineNumber:16}},u.default.createElement("p",(0,r.default)({},l,{onClick:a?null:o,__source:{fileName:i,lineNumber:26}}),t))},v=(0,s.memoize)(function(e,t,l,a,r,i){return function(){if(t){if(!l.includes(a)){var u=[].concat((0,n.default)(l),[a]);r(u)}}else r(a),i((0,_.setPopUp)(e,!1))}}),h=function(e){var t=e.optionLookup,l=e.value,a=e.popUp,n=e.popUpIfEmpty,o=e.activeItems,s=e.inactive,d=e.selectTag,p=e.dispatch,N=(0,m.composeAttributes)(o,s),v=c.emptyS,h=t[l];v=void 0===h?l:h;var y=["option-head","tag"];if(l===c.emptyS){if(n)return null;v="click to enter a value",y.push("new")}var g=N(l,y.join(" ")),E=a?"up":"down";return u.default.createElement(b.default,{tip:"click here to "+(a?"hide":"show")+" the other options",at:"right",__source:{fileName:i,lineNumber:84}},u.default.createElement("span",(0,r.default)({},g,{onClick:(0,f.handle)(p,_.togglePopUp,d),__source:{fileName:i,lineNumber:88}}),v," ",u.default.createElement("span",{className:"fa fa-arrow-"+E+" "+E,__source:{fileName:i,lineNumber:94}})))},y=function(e){var t=e.selectTag,l=e.optionLookup,a=e.popUp,n=e.popUpIfEmpty,o=e.activeItems,s=e.inactive,c=e.value,d=e.onChange,p=e.dispatch,N=(0,m.composeAttributes)(o,s),v=a?"up":"down";return u.default.createElement(b.default,{tip:"click on this line to "+(a?"hide":"show")+" the remaining options",at:"top",__source:{fileName:i,lineNumber:111}},u.default.createElement("div",{className:"tags",onClick:(0,f.handle)(p,_.togglePopUp,t),__source:{fileName:i,lineNumber:115}},null!=c&&c.length?c.map(function(e){var t=l[e],a=void 0===t?e:t,n=N(e,"tag");return u.default.createElement("span",(0,r.default)({key:e},n,{__source:{fileName:i,lineNumber:126}}),u.default.createElement(b.default,{tip:"remove "+a,at:"bottom",__source:{fileName:i,lineNumber:130}},u.default.createElement("span",{className:"button-tag",onClick:function(e,t,l){return function(a){if(a.stopPropagation(),e.includes(l)){var n=e.filter(function(e){return e!==l});t(n)}}}(c,d,e),__source:{fileName:i,lineNumber:134}},"×")," "),u.default.createElement("span",{__source:{fileName:i,lineNumber:139}},a))}):n?null:u.default.createElement("span",{className:"tag empty",__source:{fileName:i,lineNumber:146}},"click to enter values"),u.default.createElement("span",{className:"fa fa-arrow-"+v+" "+v,__source:{fileName:i,lineNumber:148}})))},g=function(e){var t=e.selectTag,l=e.search,a=e.dispatch,n=e.placeHolder;return u.default.createElement("span",{className:"option-type",__source:{fileName:i,lineNumber:155}},l?u.default.createElement(b.default,{tip:"clear typing",at:"bottom",__source:{fileName:i,lineNumber:158}},u.default.createElement("span",{className:"button-tag",onClick:(0,f.handle)(a,_.setSearch,t,c.emptyS),__source:{fileName:i,lineNumber:162}},"×")):u.default.createElement("span",{__source:{fileName:i,lineNumber:167}}," ")," ",u.default.createElement(b.default,{tip:n,at:"left",__source:{fileName:i,lineNumber:170}},u.default.createElement("input",{className:"typing",type:"text",placeholder:"type here ...",value:l||c.emptyS,onFocus:(0,f.handle)(a,_.setPopUp,t,!0),onChange:(0,f.handlEV)(a,_.setSearch,t),__source:{fileName:i,lineNumber:174}})))},E=function(e){var t=e.selectTag,l=e.optionLookup,a=e.options,r=e.activeItems,o=e.inactive,s=e.multiple,f=e.allowNew,p=e.value,_=e.onChange,h=e.search,y=e.dispatch,g=(h||c.emptyS).toLowerCase(),E=(0,m.composeAttributes)(r,o),k=(0,d.checkDisabled)(r,o),w=a.length>=20?"o-large":"o-small";return u.default.createElement("div",{className:"options "+w,__source:{fileName:i,lineNumber:201}},s||null==p||p==c.emptyS?null:u.default.createElement(b.default,{tip:"clear selection",at:"bottom",__source:{fileName:i,lineNumber:205}},u.default.createElement("span",{className:"button-tag tag option",onClick:v(t,s,null,null,_,y),__source:{fileName:i,lineNumber:209}},"( × )")),f&&h&&!a.some(function(e){return e.label===h})&&!p.includes(h)?u.default.createElement(b.default,{tip:"add "+h+" as a NEW option",at:"bottom",__source:{fileName:i,lineNumber:222}},u.default.createElement("span",{className:"new tag",onClick:function(e,t,l,a,r){return function(){if(null==e[r]&&!l.includes(r)){var i=t?[r].concat((0,n.default)(l)):r;a(i)}}}(l,s,p,_,h),__source:{fileName:i,lineNumber:226}},h)):null,a.map(function(e){var l=e.value,a=e.label;if(s&&p.includes(l)||null!=g&&g!==c.emptyS&&null!=a&&-1===a.toString().toLowerCase().indexOf(g)||k(l))return null;var n=s&&p.includes(l)||!s&&p===l,r=E(l,"tag option "+(n?"selected":c.emptyS));return u.default.createElement(N,{key:l,label:a,attributes:r,selected:n,multiple:s,onHit:v(t,s,p,l,_,y),__source:{fileName:i,lineNumber:243}})}))},k=(0,c.combineSelectors)(p.getSettings,_.getSelect);t.default=(0,o.connect)(k)(function(e){var t=e.settings,l=e.tables,a=e.table,n=e.eId,r=e.field,o=e.selectTag,s=e.activeItems,f=e.inactive,m=e.allowed,p=e.input,b=p.name,N=p.value,v=p.onChange,k=e.multiple,w=e.allowNew,S=e.popUpIfEmpty,I=e.select,A=e.dispatch,T=e.suppressTyping,O=e.submitValues,x=(0,d.makeSubmitTime)(O),M=function(e){v(e),x()},D=I[o],C=(D=void 0===D?c.emptyO:D).search,j=D.popUp,F=(0,_.compileOptions)(l,a,m,r,t),P=F.options,U=F.optionLookup,L=j||S&&(null==N||k&&0==N.length||!k&&!N),R=!0===w?"value":w||c.emptyS,V="filter remaining options"+(R?" or add a new "+R:c.emptyS);return u.default.createElement("div",{className:"select "+(k?"multiselect":c.emptyS),__source:{fileName:i,lineNumber:287}},k?u.default.createElement(y,{optionLookup:U,activeItems:s,inactive:f,table:a,eId:n,name:b,value:N,selectTag:o,popUp:L,popUpIfEmpty:S,dispatch:A,onChange:M,__source:{fileName:i,lineNumber:292}}):u.default.createElement(h,{optionLookup:U,activeItems:s,inactive:f,table:a,eId:n,name:b,value:N,popUp:L,popUpIfEmpty:S,selectTag:o,dispatch:A,__source:{fileName:i,lineNumber:306}}),L&&!T?u.default.createElement(g,{selectTag:o,search:C,dispatch:A,placeHolder:V,__source:{fileName:i,lineNumber:322}}):null,L?u.default.createElement(E,{selectTag:o,optionLookup:U,options:P,activeItems:s,inactive:f,multiple:k,allowNew:w,value:N,search:C,dispatch:A,onChange:M,__source:{fileName:i,lineNumber:332}}):null)})},719:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(11);t.default=function(e){var t=e.widget,l=e.setValue,n=e.input.onChange,r=e.submitValues,i=(0,a.makeSubmitTime)(r);return t(function(){n(l),i()})}},720:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.consolidatedTemplates=t.insertTemplates=t.relatedTemplates=t.detailActionTemplates=t.detailEditTemplates=t.detailTemplates=t.mainActionTemplates=t.mainEditTemplates=t.mainTemplates=void 0;var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Templates.jsx",r=a(l(0)),i=l(1),u=l(11),o=l(65),s=l(721),c=a(s),f=a(l(9)),d=function(e,t,l,a){return(0,u.itemReadField)(e,t(e),l(e),a)},m=function(e,t,l,a,n){return(0,u.itemEditField)(e,t(e),l(e),a(e),n)},p=t.mainTemplates={assessment:function(e){var t=e.l,l=e.f;return r.default.createElement("div",{__source:{fileName:n,lineNumber:16}},r.default.createElement("div",{className:"grid fragments",__source:{fileName:n,lineNumber:17}},d("title",t,l),d("assessmentType",t,l),d("contrib",t,l)))}},_=t.mainEditTemplates={assessment:function(e){var t=e.l,l=e.fe,a=e.m,i=e.editButton;return r.default.createElement("div",{__source:{fileName:n,lineNumber:30}},i,r.default.createElement("div",{className:"grid fragments",__source:{fileName:n,lineNumber:32}},m("title",t,l,a),m("assessmentType",t,l,a),m("contrib",t,l,a)))}},b=t.mainActionTemplates={contrib:function(e){var t=e.w;return r.default.createElement("div",{__source:{fileName:n,lineNumber:45}},t("locked").on?r.default.createElement("div",{className:"label large workflow info",__source:{fileName:n,lineNumber:48}},"This contribution is locked because it is "+t("locked").desc+"."):null)},assessment:function(e){var t=e.tables,l=e.l,a=e.e,s=e.v,d=e.w,p=e.fe,_=e.fs,b=e.m,N=(0,o.assessmentScore)(t,s("_id")),v=N.overall,h=N.relevantScore,y=N.relevantMax,g=N.allMax,E=N.relevantN,k=N.allN,w=k-E,S=!a("dateWithdrawn"),I=!a("submitted");return r.default.createElement("div",{__source:{fileName:n,lineNumber:62}},r.default.createElement("div",{className:"ass-score-box",__source:{fileName:n,lineNumber:63}},r.default.createElement(f.default,{tip:"overall-score of this assessment",at:"right",__source:{fileName:n,lineNumber:64}},r.default.createElement("span",{className:"ass-score",__source:{fileName:n,lineNumber:68}},v+" %")),r.default.createElement(c.default,{alterSection:"assessment{v('_id')}",alterTag:"score",iconOpen:"calculator",iconClose:"minus-circle",titleOpen:"Show derivation",titleClose:"Hide derivation",headActive:i.emptyS,headLine:i.emptyS,full:r.default.createElement("div",{className:"ass-score-deriv",__source:{fileName:n,lineNumber:82}},r.default.createElement("p",{__source:{fileName:n,lineNumber:83}},"This contribution scores "+h+" points."),r.default.createElement("p",{__source:{fileName:n,lineNumber:84}},"For this type of contribution there is a total of "+g+" points,\n                    divided over "+k+" criteria."),w?r.default.createElement("p",{__source:{fileName:n,lineNumber:88}},"However,\n                        "+w+" rule"+(1==w?" is":"s are")+"\n                        not applicable to this contribution,\n                        which leaves the total amount to\n                        "+y+" points,\n                        divided over "+E+" criteria."):i.emptyS,r.default.createElement("p",{__source:{fileName:n,lineNumber:97}},"The total score is expressed as a percentage:\n                    the fraction of "+h+" scored points with respect to \n                    "+y+" scorable points.")),__source:{fileName:n,lineNumber:72}})),r.default.createElement("div",{className:"grid fragments",__source:{fileName:n,lineNumber:105}},b("submitted")?null:m("submitted",l,p,b),(0,u.itemEditField)("submitted","Submission",r.default.createElement("span",{__source:{fileName:n,lineNumber:111}},!I&&S?l("dateWithdrawn")+": "+s("dateWithdrawn"):null,I?l("dateSubmitted")+": "+s("dateSubmitted"):null,d("incomplete").on||d("stalled").on?null:_("submitted",a("submitted"),function(e){return r.default.createElement("span",{className:"button large workflow "+(a("submitted")?"info":"error"),onClick:e,__source:{fileName:n,lineNumber:118}},(a("submitted")?"Submit for":"Withdraw from")+" review")})),b("submitted")),a("submitted")?null:m("reviewerE",l,p,b),a("submitted")?null:m("reviewerF",l,p,b)),d("stalled").on?r.default.createElement("div",{className:"label large workflow error",__source:{fileName:n,lineNumber:133}},"This contribution is cannot be submitted because: "+d("stalled").desc+".\n              Either change the type of the contribution to the type of this assessment,\n              or start a new assessment, copy over the relevant material form this\n              assessment (by hand), and remove this assessment.\n            "):null,d("incomplete").on?r.default.createElement("div",{className:"label large workflow warning",__source:{fileName:n,lineNumber:144}},"This contribution cannot yet be submitted because: "+d("incomplete").desc+".\n            "):a("submitted")?r.default.createElement("div",{className:"label large workflow good",__source:{fileName:n,lineNumber:149}},"All criteria filled: this contribution can be submitted.\n              "):null,d("locked").on?r.default.createElement("div",{className:"label large workflow info",__source:{fileName:n,lineNumber:157}},"This assessment is locked because it is "+d("locked").desc+"."):null)}};t.detailTemplates={assessment:{contrib:p.assessment},criteriaEntry:{assessment:function(e){var t=e.l,l=e.v,a=e.e,u=e.f,o=a("evidence")||a("score")?"incomplete":"complete";return r.default.createElement("div",{className:"criteriaEntryRead "+o,__source:{fileName:n,lineNumber:175}},r.default.createElement("div",{className:"criteriaEntry",__source:{fileName:n,lineNumber:176}},r.default.createElement("div",{__source:{fileName:n,lineNumber:177}},l("seq")),r.default.createElement(c.default,{alterSection:"criteriaEntry"+l("_id"),alterTag:t("remarks"),iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show criteria details",titleClose:"Hide criteria details",headActive:i.emptyS,headLine:u("criteria"),full:r.default.createElement("div",{className:"criteriaRemarks",__source:{fileName:n,lineNumber:187}},u("criteria","remarks")),className:"fat",__source:{fileName:n,lineNumber:178}}),r.default.createElement("div",{className:"slim",__source:{fileName:n,lineNumber:190}},u("score")),a("evidence")?r.default.createElement("div",{className:"xSlim",__source:{fileName:n,lineNumber:193}},r.default.createElement(f.default,{tip:"No evidence yet",at:"top",__source:{fileName:n,lineNumber:194}},r.default.createElement("span",{className:"slim fa fa-file-o tError",__source:{fileName:n,lineNumber:198}}))):r.default.createElement(s.ExpandHead,{alterSection:"criteriaEntry"+l("_id"),alterTag:t("evidence"),initAlt:1,iconOpen:"file-text",iconClose:"minus-square",titleOpen:"Show evidence",titleClose:"Hide evidence",headActive:i.emptyS,headLine:i.emptyS,className:"xSlim tGood",__source:{fileName:n,lineNumber:203}})),r.default.createElement(s.ExpandBody,{alterSection:"criteriaEntry"+l("_id"),alterTag:t("evidence"),initAlt:1,full:r.default.createElement("div",{__source:{fileName:n,lineNumber:222}},r.default.createElement("b",{__source:{fileName:n,lineNumber:223}},t("evidence")),u("evidence")),className:"evidence",__source:{fileName:n,lineNumber:217}}))}}},t.detailEditTemplates={assessment:{contrib:_.assessment},criteriaEntry:{assessment:function(e){var t=e.l,l=e.v,a=e.e,i=e.f,u=e.fe,o=e.editButton,s=a("evidence")||a("score")?"incomplete":"complete";return r.default.createElement("div",{className:"criteriaEntryEdit "+s,__source:{fileName:n,lineNumber:243}},r.default.createElement("div",{key:"H",className:"criteriaEntry",__source:{fileName:n,lineNumber:244}},o,l("seq"),r.default.createElement("div",{className:"fat",__source:{fileName:n,lineNumber:247}},r.default.createElement("div",{className:"fat",__source:{fileName:n,lineNumber:248}},i("criteria")),r.default.createElement("div",{className:"criteriaRemarks",__source:{fileName:n,lineNumber:249}},i("criteria","remarks"))),r.default.createElement("div",{className:"slim",__source:{fileName:n,lineNumber:251}},u("score",{suppressTyping:!0}))),r.default.createElement("p",{key:"E",__source:{fileName:n,lineNumber:253}},r.default.createElement("b",{__source:{fileName:n,lineNumber:255}},t("evidence"))),r.default.createElement(f.default,{tip:"Give evidence",at:"top",__source:{fileName:n,lineNumber:256}},u("evidence")))}}},t.detailActionTemplates={assessment:{contrib:b.assessment}},t.relatedTemplates={contrib:{assessment:function(e){var t=e.v,l=e.e,a=e.f,u=e.linkMe,o=t("title");return r.default.createElement("div",{__source:{fileName:n,lineNumber:279}},r.default.createElement("div",{__source:{fileName:n,lineNumber:280}},l("urlContribution")?o:r.default.createElement("a",{href:t("urlContribution"),__source:{fileName:n,lineNumber:284}},o)),r.default.createElement("div",{__source:{fileName:n,lineNumber:287}},t("vcc",null,", ")," ",t("country")," ",t("year")," ",r.default.createElement("a",{href:"mailto:"+t("contactPersonEmail"),__source:{fileName:n,lineNumber:294}},t("contactPersonName"))),r.default.createElement(c.default,{alterSection:"contribution_in_assessment{v('_id')}",alterTag:"cost",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution cost description",titleClose:"Hide contribution cost description",headActive:"Cost: "+(l("costTotal")?"Not given":t("costTotal")),headLine:i.emptyS,full:r.default.createElement("div",{__source:{fileName:n,lineNumber:307}},a("costDescription")),__source:{fileName:n,lineNumber:298}}),r.default.createElement(c.default,{alterSection:"contribution_in_assessment{v('_id')}",alterTag:"description",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution descriptions",titleClose:"Hide contribution descriptions",headActive:"Description fields",headLine:l("urlAcademic")?r.default.createElement("a",{href:t("urlAcademic"),__source:{fileName:n,lineNumber:319}},t("urlAcademic")):i.emptyS,full:r.default.createElement("div",{__source:{fileName:n,lineNumber:323}},r.default.createElement("div",{__source:{fileName:n,lineNumber:324}},a("description")),r.default.createElement("div",{__source:{fileName:n,lineNumber:325}},r.default.createElement("div",{__source:{fileName:n,lineNumber:326}},r.default.createElement("b",{__source:{fileName:n,lineNumber:326}},"Tadirah:")),r.default.createElement("div",{__source:{fileName:n,lineNumber:327}},r.default.createElement("i",{__source:{fileName:n,lineNumber:327}},"Objects")," ",a("tadirahObject")),r.default.createElement("div",{__source:{fileName:n,lineNumber:328}},r.default.createElement("i",{__source:{fileName:n,lineNumber:328}},"Activities")," ",a("tadirahActivity")),r.default.createElement("div",{__source:{fileName:n,lineNumber:329}},r.default.createElement("i",{__source:{fileName:n,lineNumber:329}},"Techniques")," ",a("tadirahTechnique")),r.default.createElement("div",{__source:{fileName:n,lineNumber:330}},r.default.createElement("b",{__source:{fileName:n,lineNumber:330}},"Disciplines:")," ",a("discipline")),r.default.createElement("div",{__source:{fileName:n,lineNumber:331}},r.default.createElement("b",{__source:{fileName:n,lineNumber:331}},"Keywords:")," ",a("keyword")))),__source:{fileName:n,lineNumber:309}}),r.default.createElement(c.default,{alterSection:"contribution_in_assessment{v('_id')}",alterTag:"provenance",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution provenance",titleClose:"Hide contribution provenance",headActive:"Provenance",headLine:i.emptyS,full:r.default.createElement("div",{__source:{fileName:n,lineNumber:346}},r.default.createElement("div",{__source:{fileName:n,lineNumber:347}},"Created ",a("dateCreated")," by ",t("creator")),r.default.createElement("div",{__source:{fileName:n,lineNumber:353}},r.default.createElement("div",{__source:{fileName:n,lineNumber:354}},r.default.createElement("b",{__source:{fileName:n,lineNumber:354}},"Modification history")),t("modified").map(function(e,t){return r.default.createElement("div",{key:t,__source:{fileName:n,lineNumber:357}},e)}))),__source:{fileName:n,lineNumber:336}}),r.default.createElement("div",{__source:{fileName:n,lineNumber:364}},r.default.createElement("a",{href:u,__source:{fileName:n,lineNumber:364}},"To the contribution record")),r.default.createElement("div",{__source:{fileName:n,lineNumber:365}},a("typeContribution")))}}},t.insertTemplates={assessment:{contrib:function(e){var t=e.n,l=e.onInsert;return 0==t?r.default.createElement("span",{className:"button large workflow info",onClick:l,__source:{fileName:n,lineNumber:376}},"Write a self-assessment"):r.default.createElement(f.default,{tip:r.default.createElement("div",{__source:{fileName:n,lineNumber:382}},r.default.createElement("p",{__source:{fileName:n,lineNumber:383}},"Normally a contribution needs just one self-assessment."),r.default.createElement("p",{__source:{fileName:n,lineNumber:384}},"Only add an other one in the following cases"),r.default.createElement("ul",{__source:{fileName:n,lineNumber:385}},r.default.createElement("li",{__source:{fileName:n,lineNumber:386}},"The previous self-assessment has become obsolete"),r.default.createElement("li",{__source:{fileName:n,lineNumber:387}},"The previous self-assessment is based on a contribution type,\n                      but the contribution in question has been assigned another type.")),r.default.createElement("p",{__source:{fileName:n,lineNumber:393}},r.default.createElement("b",{__source:{fileName:n,lineNumber:394}},"In the last case, it is recommended to copy and paste the relevant parts\n                    of the old assessment into the new one and delete the old one."))),at:"top",__source:{fileName:n,lineNumber:380}},r.default.createElement("span",{className:"button large workflow warning",onClick:l,__source:{fileName:n,lineNumber:404}},"Add another self-assessment",r.default.createElement("span",{className:"fa fa-exclamation",__source:{fileName:n,lineNumber:409}})))}}},t.consolidatedTemplates={assessment:{trail:function(e){var t=e.v;return r.default.createElement("div",{__source:{fileName:n,lineNumber:420}},r.default.createElement("div",{__source:{fileName:n,lineNumber:421}},t("title")),r.default.createElement("div",{__source:{fileName:n,lineNumber:422}},t("vcc",", ")," ",t.year))}}}},721:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandBody=t.ExpandHead=void 0;var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Expand.jsx",r=a(l(0)),i=l(2),u=l(1),o=l(20),s=a(l(9)),c=function(e){return e||null},f=function(e,t,l){return e?r.default.createElement("span",{className:l,__source:{fileName:n,lineNumber:16}}," "+e+(t?" ":u.emptyS)):null};t.ExpandHead=(0,i.connect)(o.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.alterTag,i=e.initAlt,u=e.headActive,d=e.headLine,m=e.className,p=e.iconOpen,_=e.iconClose,b=e.titleOpen,N=e.titleClose,v=e.dispatch,h=i||0,y=(0,o.compileAlternatives)(l,2,h,v)(a),g=y.getAlt,E=y.nextAlt,k=g(t),w=p||"angle-down",S=_||"angle-up",I=b||"expand",A=N||"collapse";return r.default.createElement("div",{className:"vtop "+m,__source:{fileName:n,lineNumber:76}},r.default.createElement(s.default,{tip:0===k?I:A,at:"top",__source:{fileName:n,lineNumber:77}},r.default.createElement("span",{className:"link vtop fa fa-"+(0===k?w:S),onClick:E,__source:{fileName:n,lineNumber:81}},f(u,d,"body"))),c(d))}),t.ExpandBody=(0,i.connect)(o.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.alterTag,i=e.initAlt,u=e.full,s=e.className,c=e.dispatch,f=i||0;return 0==(0,(0,o.compileAlternatives)(l,2,f,c)(a).getAlt)(t)?null:r.default.createElement("div",{className:s,__source:{fileName:n,lineNumber:104}},r.default.createElement("div",{__source:{fileName:n,lineNumber:106}},u))});t.default=(0,i.connect)(o.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.alterTag,i=e.initAlt,u=e.headActive,d=e.headLine,m=e.full,p=e.className,_=e.iconOpen,b=e.iconClose,N=e.titleOpen,v=e.titleClose,h=e.dispatch,y=i||0,g=(0,o.compileAlternatives)(l,2,y,h)(a),E=g.getAlt,k=g.nextAlt,w=E(t),S=_||"angle-down",I=b||"angle-up",A=N||"expand",T=v||"collapse";return r.default.createElement("div",{className:p,__source:{fileName:n,lineNumber:36}},r.default.createElement("span",{className:"vtop",__source:{fileName:n,lineNumber:37}}," ",r.default.createElement(s.default,{tip:0===w?A:T,at:"top",__source:{fileName:n,lineNumber:39}},r.default.createElement("span",{className:"link vtop fa fa-"+(0===w?S:I),onClick:k,__source:{fileName:n,lineNumber:43}},f(u,d,"body"))),c(d)),0==w?null:r.default.createElement("div",{__source:{fileName:n,lineNumber:53}},m))})},722:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(7)),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Input.jsx",i=a(l(0)),u=l(1),o=l(82),s=l(11),c=a(l(287)),f=a(l(9));t.default=function(e){var t=e.meta,l=t.dirty,a=t.invalid,d=t.submitting,m=t.error,p=e.input,_=e.type,b=e.reset,N=e.submitValues,v="checkbox"===_?(0,s.makeSubmitTime)(N):(0,s.makeSubmit)(l,a,d,N),h=(0,s.makeReset)(_,b),y="checkbox"===_?{onClick:v}:{onBlur:v},g="checkbox"==_?u.emptyO:{className:"wideInput"};return i.default.createElement("div",(0,n.default)({},g,{__source:{fileName:r,lineNumber:27}}),i.default.createElement(f.default,{tip:i.default.createElement(c.default,{type:"text",dirty:l,__source:{fileName:r,lineNumber:31}}),at:"top",focusOnly:!0,__source:{fileName:r,lineNumber:30}},i.default.createElement("input",(0,n.default)({type:_,className:(0,o.editClass)(l,a)},p,y,h,{__source:{fileName:r,lineNumber:35}}))),m&&i.default.createElement("span",{className:"invalid diag",__source:{fileName:r,lineNumber:43}},m))}},723:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(7)),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/MarkdownArea.jsx",i=a(l(0)),u=l(2),o=a(l(176)),s=l(1),c=l(82),f=l(11),d=l(20),m=a(l(287)),p=a(l(9));t.default=(0,u.connect)(d.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.table,u=e.eId,_=e.meta,b=_.dirty,N=_.invalid,v=_.submitting,h=_.error,y=e.input,g=y.name,E=y.value,k=e.input,w=e.rh,S=e.reset,I=e.submitValues,A=e.dispatch,T=a+"-"+u+"-"+g,O=(0,d.compileAlternatives)(l,2,1,A)(T),x=O.getAlt,M=O.nextAlt,D=x(t);return i.default.createElement("div",(0,n.default)({className:"md-field"},0==D?s.emptyO:w,{__source:{fileName:r,lineNumber:25}}),i.default.createElement(p.default,{tip:0===D?"edit text":"preview formatted text",at:"right",__source:{fileName:r,lineNumber:29}},i.default.createElement("div",{className:"button medium field-control fa fa-"+(0===D?"pencil":"hand-o-down"),onClick:M,__source:{fileName:r,lineNumber:33}})),0===D?i.default.createElement(o.default,{className:(0,c.editClass)(b,N)+" field-content",key:"fmt",source:E,__source:{fileName:r,lineNumber:40}}):i.default.createElement("div",{key:"src",className:"field-content",__source:{fileName:r,lineNumber:45}},i.default.createElement(p.default,{tip:i.default.createElement(m.default,{dirty:b,type:"markdown",__source:{fileName:r,lineNumber:48}}),at:"top",focusOnly:!0,__source:{fileName:r,lineNumber:46}},i.default.createElement("div",{__source:{fileName:r,lineNumber:56}},i.default.createElement("textarea",(0,n.default)({className:"input "+(0,c.editClass)(b,N)},k,{wrap:"soft",onBlur:(0,f.makeSubmit)(b,N,v,I)},(0,f.makeReset)("text",S),{__source:{fileName:r,lineNumber:57}})))),h&&i.default.createElement("span",{className:"invalid diag",__source:{fileName:r,lineNumber:66}},h)))})},724:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(l(0)),n=l(2),r=l(44),i=l(1),u=l(67),o=l(11),s=l(8);t.default=(0,n.connect)()((0,r.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!1,touchOnBlur:!0,touchOnChange:!1,onSubmitSuccess:o.onSubmitSuccess})(function(e){var t=e.settings,l=e.tables,n=e.table,r=e.eId,o=e.linkField,c=e.fieldFragments,f=e.handleSubmit,d=e.dispatch,m=(0,s.headEntity)(l,n,r,t),p=f((0,s.toDb)(n,r,m,d)),_=l[n].fieldSpecs[o],b=(_=void 0===_?i.emptyO:_).valType,N=(b=void 0===b?i.emptyO:b).relTable,v=N?"detail":"main";return a.default.createElement("div",{className:"item-workflow",__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemAction.jsx",lineNumber:32}},(0,u.applyEditTemplate)(t,l,n,v+"Action",N,r,c,null,p))}))},725:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(21)),r=a(l(43)),i=a(l(7)),u="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemEdit.jsx",o=a(l(0)),s=l(2),c=l(44),f=l(1),d=l(67),m=l(11),p=l(8),_=a(l(36)),b=a(l(113)),N=a(l(286)),v=a(l(726));t.default=(0,s.connect)()((0,c.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!1,touchOnBlur:!0,touchOnChange:!1,onSubmitSuccess:m.onSubmitSuccess})(function(e){var t=e.settings,l=e.tables,a=e.table,s=e.eId,c=e.linkField,h=e.dirty,y=e.invalid,g=e.submitting,E=e.reset,k=e.error,w=e.fieldFragments,S=e.handleSubmit,I=e.nextAlt,A=e.dispatch,T=(0,p.headEntity)(l,a,s,t),O=S((0,p.toDb)(a,s,T,A)),x={form:a+"-"+s,dirty:h,invalid:y,submitting:g,reset:E,error:k,nextAlt:I,handleSubmit:O},M=o.default.createElement(v.default,(0,i.default)({},x,{__source:{fileName:u,lineNumber:33}})),D=l[a].fieldSpecs[c],C=(D=void 0===D?f.emptyO:D).valType,j=(C=void 0===C?f.emptyO:C).relTable,F=j?"detail":"main";return(0,d.applyEditTemplate)(t,l,a,F+"Edit",j,s,w,M,O)||o.default.createElement("div",{__source:{fileName:u,lineNumber:45}},o.default.createElement("form",{__source:{fileName:u,lineNumber:46}},M,o.default.createElement("div",{className:"grid fragments",__source:{fileName:u,lineNumber:48}},w.map(function(e){var t=e.field,a=e.label,c=e.valType,f=e.fragment,d=f.editable,p=f.table,v=f.myValues,h=(0,r.default)(f,["editable","table","myValues"]),y=d&&("object"!=(void 0===c?"undefined":(0,n.default)(c))||!c.fixed);return o.default.createElement(_.default,{key:t,__source:{fileName:u,lineNumber:55}},(0,m.itemEditField)(t,a,y?o.default.createElement(N.default,(0,i.default)({field:t,tables:l,table:p,eId:s,submitValues:O,reset:E},h,{__source:{fileName:u,lineNumber:61}})):o.default.createElement(b.default,{field:t,tables:l,table:p,eId:s,myValues:v,__source:{fileName:u,lineNumber:70}}),y))}))))}))},726:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(82);t.default=(0,a.editControl)(!0)},727:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemRead.jsx",r=a(l(0)),i=l(1),u=l(67),o=l(11),s=a(l(113));t.default=function(e){var t=e.settings,l=e.tables,a=e.table,c=e.eId,f=e.fieldFragments,d=e.linkField,m=l[a],p=m.fieldSpecs[d],_=(p=void 0===p?i.emptyO:p).valType,b=(_=void 0===_?i.emptyO:_).relTable,N=m.entities[c].workflow,v=b?"detail":"main";return(0,u.applyTemplate)(t,l,a,v,b,(0,o.toFieldInfo)(c,f),N)||r.default.createElement("div",{__source:{fileName:n,lineNumber:31}},r.default.createElement("div",{className:"grid fragments",__source:{fileName:n,lineNumber:32}},f.map(function(e){var t=e.field,a=e.label,i=e.fragment,u=i.table,f=i.myValues;return(0,o.itemReadField)(t,a,r.default.createElement(s.default,{field:t,tables:l,table:u,eId:c,myValues:f,__source:{fileName:n,lineNumber:40}}),t)})))}},728:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(25)),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemDetails.jsx",i=a(l(0)),u=l(2),o=l(1),s=l(8),c=l(47),f=l(20),d=a(l(174)),m=a(l(178)),p=a(l(289)),_=a(l(9));t.default=(0,u.connect)(f.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.filters,u=e.tables,b=e.table,N=e.eId,v=e.detailFragments,h=e.dispatch;if(0==v.length)return null;var y=(0,f.compileAlternatives)(l,2,1,h);return i.default.createElement("div",{className:"grid fragments",__source:{fileName:r,lineNumber:19}},v.map(function(e){var l=e.name,f=e.detailTitle,v=e.detailTable,h=e.linkField,g=e.detailItem,E=e.detailListIds,k=e.detailPerm,w=e.detailSpecs,S=E.length,I=y(l),A=I.getAlt,T=I.nextAlt,O=A(t),x=w.mode,M=w.expand,D=w.border,C=w.filtered,j=w.fixed,F=(0,n.default)(g,2),P=F[0],U=F[1],L=(0,c.makeTag)(s.DETAILS,N,h),R=b+"-"+l+"-"+N;return i.default.createElement("div",{key:l,className:"grid-row",__source:{fileName:r,lineNumber:32}},M?null:i.default.createElement(_.default,{tip:(0==O?"show":"hide")+" detail records",at:"left",className:"detail-control",__source:{fileName:r,lineNumber:35}},i.default.createElement("span",{className:"link",onClick:T,__source:{fileName:r,lineNumber:40}},i.default.createElement("span",{className:"button small fa fa-angle-"+(0===O?"down":"up"),__source:{fileName:r,lineNumber:44}}),0===O?S+" "+(1===S?P:U):o.emptyS)),i.default.createElement("div",{className:"detail-body",__source:{fileName:r,lineNumber:54}},1===O?C?i.default.createElement(p.default,{filters:a,tables:u,table:v,listIds:E,perm:k,select:s.DETAILS,mode:x,compact:!0,title:f,gridTag:R,filterTag:L,masterId:N,linkField:h,expand:M,border:D,fixed:j,__source:{fileName:r,lineNumber:58}}):"list"===x?i.default.createElement(m.default,{alterSection:"list-"+v+"-"+s.DETAILS,filters:a,tables:u,table:v,listIds:E,perm:k,select:s.DETAILS,title:f,masterId:N,linkField:h,expand:M,border:D,fixed:j,__source:{fileName:r,lineNumber:77}}):"grid"===x?i.default.createElement(d.default,{alterSection:"list-"+v+"-"+s.DETAILS,filters:a,tables:u,table:v,listIds:E,perm:k,select:s.DETAILS,gridTag:R,masterId:N,linkField:h,fixed:j,__source:{fileName:r,lineNumber:93}}):i.default.createElement("span",{__source:{fileName:r,lineNumber:106}},'unknown display mode "'+x+'" for '+U):null))}))})},729:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemContainer.jsx",c=l(0),f=a(c),d=l(2),m=l(1),p=l(11),_=l(34),b=l(8),N=a(l(36)),v=a(l(288)),h=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.settings,l=e.filters,a=e.tables,n=e.table,r=e.eId,i=e.masterId,u=e.linkField,o=e.isactive,c=e.startMode,d=e.fixed,_=e.border,h=a[n],y=(h=void 0===h?m.emptyO:h).entities,g=void 0===y?m.emptyO:y,E=h.entities[r],k=(E=void 0===E?m.emptyO:E).fields,w=E.values,S=E.perm,I=E.workflow;if((0,b.needValues)(g,r))return f.default.createElement("div",{__source:{fileName:s,lineNumber:35}});var A="edit-"+n+"-"+r;return f.default.createElement(N.default,{__source:{fileName:s,lineNumber:39}},f.default.createElement(v.default,{filters:l,tables:a,table:n,eId:r,masterId:i,linkField:u,alterSection:A,isactive:o,startMode:c,key:n+"-"+r,initialValues:w,perm:S,workflow:I,fields:(0,p.dealWithProvenance)(t,k),fixed:d,border:_,__source:{fileName:s,lineNumber:40}}))}},{key:"openItem",value:function(){var e=this.props,t=e.settings,l=e.tables,a=e.table,n=e.eId,r=e.inhibitFetch,i=e.dispatch,u=l[a].entities,o=void 0===u?m.emptyO:u,s=(0,b.headEntity)(l,a,n,t);!r&&(0,b.needValues)(o,n)&&i((0,b.fetchItem)(a,n,s))}},{key:"componentDidMount",value:function(){this.openItem()}},{key:"componentDidUpdate",value:function(){this.openItem()}}]),t}(c.Component);t.default=(0,d.connect)(_.getSettings)(h)},730:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Filter.jsx",r=a(l(0)),i=l(2),u=l(1),o=a(l(36)),s=a(l(731)),c=a(l(291)),f=a(l(734)),d={Fulltext:s.default,EUMap:f.default,ByValue:c.default};t.default=(0,i.connect)()(function(e){var t=e.filters,l=e.tables,a=e.table,i=e.filterTag,s=e.listIds,c=e.filteredAmount,f=e.filteredAmountOthers,m=e.amounts,p=e.compact,_=t[a],b=void 0===_?u.emptyO:_,N=l[a],v=N.fields,h=N.filterList,y=b[i],g=void 0===y?u.emptyO:y;return null==h?r.default.createElement("div",{__source:{fileName:n,lineNumber:27}},"No filters for this list"):r.default.createElement(o.default,{__source:{fileName:n,lineNumber:30}},r.default.createElement("div",{className:"filterSequence "+(p?"compact":u.emptyS),__source:{fileName:n,lineNumber:31}},h.filter(function(e){return v[e.field]}).map(function(e,t){var u=e.type,o=d[u],_=g[t];return r.default.createElement(o,{key:t,alterSection:"filter-"+a+"-"+t,tables:l,table:a,filterTag:i,filterSetting:_,listIds:s,filterId:t,filterField:e.field,filterRelField:e.relField,filterLabel:e.label,maxCols:e.maxCols,filteredAmount:c,filteredAmountOthers:f[t],amounts:m[t],expanded:e.expanded,compact:p,__source:{fileName:n,lineNumber:37}})})))})},731:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Fulltext.jsx",r=a(l(0)),i=l(2),u=l(1),o=l(46),s=l(47),c=a(l(290)),f=a(l(9));t.default=(0,i.connect)()(function(e){var t=e.table,l=e.filterTag,a=e.filterId,i=e.filterLabel,d=e.filterSetting,m=void 0===d?u.emptyS:d,p=e.filteredAmount,_=e.filteredAmountOthers,b=e.compact,N=e.dispatch;return r.default.createElement("div",{className:"fulltext",__source:{fileName:n,lineNumber:21}},r.default.createElement(f.default,{tip:"Search in "+i,at:"top",__source:{fileName:n,lineNumber:22}},r.default.createElement("input",{type:"text",className:"search "+(b?"compact":u.emptyS),placeholder:"search"+(b?u.emptyS:" in "+i),value:m,onChange:(0,o.handlEV)(N,s.changeFulltext,t,l,a),__source:{fileName:n,lineNumber:26}}))," ",b?null:r.default.createElement(c.default,{subTotal:p,total:_,className:"fulltext-stat",__source:{fileName:n,lineNumber:38}}))})},732:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Facet.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l(0)),r=l(2),i=l(1),u=l(46),o=l(47);t.default=(0,r.connect)()(function(e){var t=e.table,l=e.filterTag,r=e.filterId,s=e.valueId,c=e.valueRep,f=e.filterSetting,d=e.className,m=e.dispatch,p=(f||i.emptyO)[s],_=void 0!==p&&p;return n.default.createElement("span",{className:d,__source:{fileName:a,lineNumber:12}},n.default.createElement("input",{type:"checkbox",checked:_,className:"facet",onChange:(0,u.handlE)(m,o.changeFacet,t,l,r,s,!_),__source:{fileName:a,lineNumber:13}})," "+c)})},733:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s=l(0),c=a(s),f=l(2),d=l(47),m=function(e){return!e.allTrue&&!e.allFalse},p=function(e){function t(){var e,l,a,i;(0,r.default)(this,t);for(var o=arguments.length,s=Array(o),c=0;c<o;c++)s[c]=arguments[c];return l=a=(0,u.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(s))),a.handleCheck=function(){var e=a.props,t=e.filterSetting,l=e.table,n=e.filterTag,r=e.filterId,i=e.dispatch,u=(0,d.testAllChecks)(t);return i((0,d.changeFacetAll)(l,n,r,a.dom.indeterminate||!u.allTrue))},a.setIndeterminate=function(e){var t=a.props.filterSetting,l=(0,d.testAllChecks)(t);e&&(a.dom=e,e.indeterminate=m(l))},i=l,(0,u.default)(a,i)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"componentDidUpdate",value:function(){var e=this.props.filterSetting,t=(0,d.testAllChecks)(e);this.dom.indeterminate=m(t)}},{key:"render",value:function(){var e=this.props.filterSetting,t=(0,d.testAllChecks)(e);return c.default.createElement("input",{ref:this.setIndeterminate,type:"checkbox",checked:t.allTrue,onChange:this.handleCheck,__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/CheckboxI.jsx",lineNumber:31}})}}]),t}(s.Component);t.default=(0,f.connect)()(p)},734:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,r,i=a(l(25)),u=a(l(73)),o=a(l(7)),s=a(l(13)),c=a(l(14)),f=a(l(15)),d=a(l(16)),m=a(l(17)),p=a(l(33)),_="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/EUMap.jsx",b=l(0),N=a(b),v=a(l(735)),h=l(281),y=l(1),g=a(l(291)),E={HEIGHT:250,MAX_RADIUS:25,LEVEL_OFF:10,ZOOM_INIT:3,MAP_CENTER:[52,12],MAP_BOUNDS:[[30,-20],[70,40]],MARKER_COLOR:(n={},(0,p.default)(n,!0,{color:"#008800",fillColor:"#00cc00"}),(0,p.default)(n,!1,{color:"#888844",fillColor:"#bbbb66"}),n),MARKER_SHAPE:{weight:1,fill:!0,fillOpacity:.8},COUNTRY_STYLE:(r={},(0,p.default)(r,!0,{color:"#884422",weight:2,fill:!0,fillColor:"#aa7766",fillOpacity:1}),(0,p.default)(r,!1,{color:"#777777",weight:1,fill:!0,fillColor:"#bbbbbb",fillOpacity:1}),r)},k=function(e,t,l){var a=l?l[e]||0:0;if(0===a)return 0;var n=E.LEVEL_OFF,r=E.MAX_RADIUS*a/t;return t<n?r:n*Math.sqrt(r)},w=function(e){function t(e){(0,c.default)(this,t);var l=(0,d.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return l.setMap=function(e){e&&(l.dom=e)},l.features={},l}return(0,m.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this.props,t=this.setMap;return N.default.createElement("div",{__source:{fileName:_,lineNumber:68}},N.default.createElement("div",{ref:t,__source:{fileName:_,lineNumber:69}}),N.default.createElement(g.default,(0,o.default)({},e,{__source:{fileName:_,lineNumber:72}})))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,l=t.filterSetting,a=t.filteredAmountOthers,n=t.amounts,r=t.tables.country,i=this.dom,u=E.HEIGHT,s=E.MAP_CENTER,c=E.ZOOM_INIT,f=E.MAP_BOUNDS,d=E.MARKER_COLOR,m=E.MARKER_SHAPE,p=E.COUNTRY_STYLE;i.style.height=u,this.map=v.default.map(i,{attributionControl:!1,center:s,zoom:c,maxBounds:f});var _=r.allIds,b=r.entities;this.idFromIso={},this.inDariah={},_.forEach(function(t){var l=b[t].values,a=l.iso,n=l.isMember;e.idFromIso[a]=t,e.inDariah[a]=n}),v.default.geoJSON(h.countryBorders,{style:function(t){return p[e.inDariah[t.properties.iso2]]},onEachFeature:function(t){var r=t.properties,i=r.iso2,u=r.lat,s=r.lng;if(e.inDariah[i]){var c=e.idFromIso[i],f=(l||y.emptyO)[c],p=void 0!==f&&f,_=v.default.circleMarker([u,s],(0,o.default)({},d[p],{radius:k(c,a,n)},m,{pane:"markerPane"})).addTo(e.map);e.features[i]=_}}}).addTo(this.map)}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props,l=t.filterSetting,a=t.filteredAmountOthers,n=t.amounts,r=E.MARKER_COLOR;(0,u.default)(this.features).forEach(function(t){var u=(0,i.default)(t,2),o=u[0],s=u[1],c=e.idFromIso[o],f=(l||y.emptyO)[c],d=void 0!==f&&f;s.setRadius(k(c,a,n)),s.setStyle(r[d])})}}]),t}(b.Component);w.displayName="EUMap",t.default=w},736:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(7)),r=a(l(26)),i="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/EditDelete.jsx",u=a(l(0)),o=l(1),s=a(l(9));t.default=function(e){var t=e.perm,l=e.workflow,a=e.keep,c=e.fixed,f=e.button,d=e.onClick,m=(0,r.default)(a).length>0,p=(0,r.default)(a).sort().map(function(e){return a[e]}).join(", "),_=l&&l.locked&&l.locked.on,b=l&&l.locked&&l.locked.desc||o.emptyS,N=m||_?(m?"This item cannot deleted because related items exist: "+p:o.emptyS)+(_?"This item is locked because: "+b:o.emptyS):"delete this record",v=m?"puzzle-piece":"trash",h=m?"disabled":"error-o",y=m?o.emptyO:{onClick:d};return c||!t.delete||_?null:u.default.createElement(s.default,{tip:N,at:"left",className:"inlineR",__source:{fileName:i,lineNumber:21}},u.default.createElement("div",(0,n.default)({className:"grid-cell "+f+" "+h+" fa fa-"+v+" delete"},y,{__source:{fileName:i,lineNumber:26}})))}},737:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(25)),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Doc.jsx",i=a(l(0)),u=a(l(738)),o=a(l(739)),s=a(l(740)),c=a(l(292)),f={md:u.default,pdf:o.default,html:s.default};t.default=function(e){var t=e.location.pathname,l=/^(.*)\/([^/]+)$/g.exec(t).slice(1),a=(0,n.default)(l,2),u=a[0],o=a[1],s=/^(.*)\.([^.]+)$/g.exec(o).slice(1),d=(0,n.default)(s,2),m=d[0],p=d[1],_=f[p],b=u+"/"+m+"."+p;return null==_?i.default.createElement(c.default,{splat:"document "+t,__source:{fileName:r,lineNumber:20}}):i.default.createElement(_,{alterSection:b,docDir:u,docName:m,docExt:p,__source:{fileName:r,lineNumber:21}})}},738:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(13)),r=a(l(14)),i=a(l(15)),u=a(l(16)),o=a(l(17)),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/DocMd.jsx",c=l(0),f=a(c),d=l(2),m=a(l(176)),p=l(55),_=l(1),b=l(253),N=l(20),v=a(l(9)),h=a(l(36)),y={Link:function(e){var t=e.children,l=e.href;return l.match(/^(https?:)?\/\//)?f.default.createElement("a",{href:l,__source:{fileName:s,lineNumber:16}},t):f.default.createElement(p.Link,{to:l,__source:{fileName:s,lineNumber:17}},t)}},g=function(e){function t(){return(0,r.default)(this,t),(0,u.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.alter,l=e.alterSection,a=e.text,n=e.docName,r=e.dispatch;if((0,b.needDoc)({text:a}))return f.default.createElement("div",{__source:{fileName:s,lineNumber:25}},"No document "+n);var i=(0,N.compileAlternatives)(l,2,0,r)("format"),u=i.getAlt,o=i.nextAlt,c=u(t);return f.default.createElement(h.default,{__source:{fileName:s,lineNumber:31}},f.default.createElement("div",{style:{paddingLeft:"0.5em"},__source:{fileName:s,lineNumber:32}},f.default.createElement("p",{style:{float:"right"},__source:{fileName:s,lineNumber:33}},f.default.createElement(v.default,{tip:0===c?"markdown source":"formatted",at:"right",__source:{fileName:s,lineNumber:34}},f.default.createElement("a",{href:"#",className:"control fa fa-"+(0===c?"hand-o-down":"file-code-o"),onClick:o,__source:{fileName:s,lineNumber:38}}))),0===c?f.default.createElement("div",{__source:{fileName:s,lineNumber:47}},f.default.createElement(m.default,{source:a,renderers:y,__source:{fileName:s,lineNumber:48}})):f.default.createElement("div",{__source:{fileName:s,lineNumber:53}},f.default.createElement("pre",{className:"md-source",__source:{fileName:s,lineNumber:54}},a))))}},{key:"componentDidMount",value:function(){var e=this.props;(0,this.props.dispatch)((0,b.fetchDoc)(e))}},{key:"componentDidUpdate",value:function(e){var t=this.props,l=this.props.dispatch;(0,b.changedDoc)(t,e)&&l((0,b.fetchDoc)(t))}}]),t}(c.Component),E=(0,_.combineSelectors)(b.getDoc,N.getAltSection);t.default=(0,d.connect)(E)(g)},739:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/DocPdf.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l(0));t.default=function(e){var t=e.docDir,l=e.docName,r="/api/file"+t+"/"+l+"."+e.docExt;return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?n.default.createElement("p",{__source:{fileName:a,lineNumber:7}},n.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:r,__source:{fileName:a,lineNumber:8}},l)," (open pdf in a new tab)"):n.default.createElement("object",{height:"100%",width:"100%",data:r,type:"application/pdf",__source:{fileName:a,lineNumber:10}},n.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:r,__source:{fileName:a,lineNumber:16}},l)," (open pdf in a new tab)")}},740:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(l(0));t.default=function(e){var t="/api/file"+e.docDir+"/"+e.docName+"."+e.docExt;return a.default.createElement("iframe",{height:"100%",width:"100%",src:t,__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/DocHtml.jsx",lineNumber:6}})}},8:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCloseAll=t.handleOpenAll=t.repr=t.headEntity=t.presentUser=t.listValues=t.needValues=t.needTables=t.needTable=t.toDb=t.getTables=t.delItem=t.insertItem=t.modItem=t.fetchItems=t.fetchItem=t.fetchTables=t.fetchTable=t.MYIDS=t.ALLIDS=t.DETAILS=void 0;var n=a(l(21)),r=a(l(63)),i=a(l(92)),u=a(l(43)),o=a(l(32)),s=a(l(33)),c=a(l(73)),f=a(l(25)),d=a(l(51)),m=l(55),p=l(93),_=l(10),b=l(1),N=l(20),v=(t.DETAILS="details",t.ALLIDS="allIds"),h=t.MYIDS="myIds",y=t.fetchTable=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,l=arguments[2];return(0,p.accessData)({type:"fetchTable",contentType:"db",path:"/"+(t===h?"my":b.emptyS)+"list?table="+e+"&complete="+l,desc:e+" table",table:e})},g=(t.fetchTables=function(e,t,l){t.forEach(function(t){var a=(0,f.default)(t,3),n=a[0],r=a[1],i=void 0===r?v:r,u=a[2],o=void 0===u||u;A(e,n,i,o)&&l(y(n,i,o))})},t.fetchItem=function(e,t,l){return(0,p.accessData)({type:"fetchItem",contentType:"db",path:"/view?table="+e+"&id="+t,desc:e+" record "+l,table:e})},t.fetchItems=function(e,t,l,a){return(0,p.accessData)({type:"fetchItems",contentType:"db",path:"/view?table="+e,desc:e+" records "+t.length,sendData:t,table:e,eIds:t,alterSection:l,alt:a})}),E=t.modItem=function(e,t,l,a){return(0,p.accessData)({type:"modItem",contentType:"db",path:"/mod?table="+e+"&action=update",desc:e+" update record "+l,sendData:{_id:t,values:a},table:e})},k=(t.insertItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,p.accessData)({type:"insertItem",contentType:"db",path:"/mod?table="+e+"&action=insert",desc:e+" insert new record",sendData:{masterId:l,linkField:a},table:e,select:t})},t.delItem=function(e,t,l){return(0,p.accessData)({type:"delItem",contentType:"db",path:"/mod?table="+e+"&action=delete",desc:e+" delete record "+l,sendData:{_id:t},table:e})},function(e,t,l,a,n){var r={};return a.forEach(function(e){r[e]=n[e]}),(0,b.updateAuto)(e,[t,"entities",l,"values"],{$merge:r})}),w=function(e,t){var l=e,a=!0,n=!1,r=void 0;try{for(var i,u=(0,o.default)(t);!(a=(i=u.next()).done);a=!0){var s=(0,f.default)(i.value,3),c=s[0],d=s[1],m=s[2];l=(0,b.updateAuto)(l,[c,"entities",d,"workflow"],{$set:m})}}catch(e){n=!0,r=e}finally{try{!a&&u.return&&u.return()}finally{if(n)throw r}}return l},S={fetchTable:function(e,t){var l=t.data;if(null==l)return e;var a=e;return(0,c.default)(l).forEach(function(t){var l=(0,f.default)(t,2),n=l[0],r=l[1],i=e[n],u=(void 0===i?b.emptyO:i).entities,o=function(e,t){var l=t;return(0,c.default)(e).forEach(function(e){var t=(0,f.default)(e,2),a=t[0],n=t[1],r=l[a];if(null!=r&&null!=n.fields&&null==r.fields){var i=(0,d.default)(n.values,{$merge:r.values});l=(0,d.default)(l,(0,s.default)({},a,{fields:{$set:n.fields},values:{$merge:i}}))}}),(0,d.default)(e,{$merge:l})}(void 0===u?b.emptyO:u,r.entities),m=(0,d.default)(r,{entities:{$set:o}});a=(0,b.updateAuto)(a,[n],{$merge:m})}),a},fetchItem:function(e,t){var l=t.data,a=t.table;if(null==l)return e;var n=l.values._id;return(0,b.updateAuto)(e,[a,"entities",n],{$set:l})},fetchItems:function(e,t){var l=t.data,a=t.table;if(null==l||0==l.length)return e;var n=e,r=!0,i=!1,u=void 0;try{for(var s,c=(0,o.default)(l);!(r=(s=c.next()).done);r=!0){var f=s.value,d=f.values._id;n=(0,b.updateAuto)(n,[a,"entities",d],{$set:f})}}catch(e){i=!0,u=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw u}}return n},modItem:function(e,t){var l=t.data,a=t.table;if(null==l)return e;var n=l.records,r=l.workflow,i=e,u=!0,m=!1,p=void 0;try{for(var _,N=function(){var e=_.value,t=e.values,l=e.values._id,n=e.newValues,r=e.workflow,u={};if((0,c.default)(t).forEach(function(e){var t=(0,f.default)(e,2),l=t[0],a=t[1];u[l]={$set:a}}),i=(0,b.updateAuto)(i,[a,"entities",l,"values"],u),i=(0,b.updateAuto)(i,[a,"entities",l,"workflow"],{$set:r}),null!=n){var m=!0,p=!1,N=void 0;try{for(var v,h=(0,o.default)(n);!(m=(v=h.next()).done);m=!0){var y=v.value,g=y._id,E=y.rep,w=y.repName,S=y.relTable,I=y.field;i=(0,d.default)(i,(0,s.default)({},a,{valueLists:(0,s.default)({},I,{$push:[g]})})),i=k(i,S,g,["_id",w],(0,s.default)({_id:g},w,E))}}catch(e){p=!0,N=e}finally{try{!m&&h.return&&h.return()}finally{if(p)throw N}}}},v=(0,o.default)(n);!(u=(_=v.next()).done);u=!0)N()}catch(e){m=!0,p=e}finally{try{!u&&v.return&&v.return()}finally{if(m)throw p}}return i=w(i,r)},insertItem:function(e,t){var l=t.data,a=t.table,n=t.select;if(null==l)return e;var r=l.records,i=l.workflow,c=e,f=!0,m=!1,p=void 0;try{for(var _,N=(0,o.default)(r);!(f=(_=N.next()).done);f=!0){var y=_.value,g=y.table,E=(0,u.default)(y,["table"]),k=E.values._id;null!=(c=(0,b.updateAuto)(c,[g,"entities",k],{$set:E}))[g][v]&&(c=(0,b.updateAuto)(c,[g,v],{$push:[k]},!0)),n===h&&a===g&&(c=(0,b.updateAuto)(c,[a,h],{$push:[k]},!0)),c=(0,d.default)(c,(0,s.default)({},g,{lastInserted:{$set:k}}))}}catch(e){m=!0,p=e}finally{try{!f&&N.return&&N.return()}finally{if(m)throw p}}return c=w(c,i)},delItem:function(e,t){var l=t.data;if(null==l)return e;var a=l.records,n=l.workflow,r=e,i=!0,u=!1,m=void 0;try{for(var p,_=function(){var e=p.value,t=(0,f.default)(e,2),l=t[0],a=t[1],n=(r=(0,d.default)(r,(0,s.default)({},l,{entities:{$unset:[a]}})))[l],i=n.myIds,u=n.allIds,m=!0,_=!1,b=void 0;try{for(var N,v=(0,o.default)((0,c.default)({myIds:i,allIds:u}));!(m=(N=v.next()).done);m=!0){var h=(0,f.default)(N.value,2),y=h[0],g=h[1];if(null!=g){var E=g.filter(function(e){return e!==a});r=(0,d.default)(r,(0,s.default)({},l,(0,s.default)({},y,{$set:E})))}}}catch(e){_=!0,b=e}finally{try{!m&&v.return&&v.return()}finally{if(_)throw b}}},b=(0,o.default)(a);!(i=(p=b.next()).done);i=!0)_()}catch(e){u=!0,m=e}finally{try{!i&&b.return&&b.return()}finally{if(u)throw m}}return r=w(r,n)}};t.default=(0,b.makeReducer)(S);t.getTables=function(e){return{tables:e.tables}},t.toDb=(0,_.memoize)(function(e,t,l,a){return function(n){return a(E(e,t,l,n))}});var I=function(e,t,l){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e)return!1;var n=e[t];return null!=n&&(null!=n[l]&&(null==a||n[l]===a))},A=t.needTable=function(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v,a=arguments[3];if(!I(e,t,l))return!0;if(a&&!I(e,t,"complete",!0))return!0;var u=e[t].fieldSpecs;return!!(0,i.default)(new r.default((0,c.default)(u).filter(function(e){return"object"===(0,n.default)(e[1].valType)&&null!=e[1].valType.relTable}).map(function(e){return e[1].valType.relTable}))).some(function(t){return!I(e,t,v)})},T=(t.needTables=function(e,t){return t.some(function(t){var l=(0,f.default)(t,3),a=l[0],n=l[1],r=void 0===n?v:n,i=l[2];return A(e,a,r,void 0===i||i)})},t.needValues=function(e,t){return null==e||null==e[t]||null==e[t].fields||null==e[t].perm},t.listValues=(0,_.memoize)(function(e){var t=e.tables,l=e.table,a=e.eId,n=e.field;return null==t?b.emptyA:null==t[l]?b.emptyA:null==t[l].entities[a]?b.emptyA:new r.default(t[l].entities[a][n])},b.emptyO),(0,_.memoize)(function(e,t){var l=e.user.entities[t];if(l){var a=l.values;return O(a)}return"UNKNOWN"},b.emptyO)),O=t.presentUser=function(e){var t=e.name,l=e.firstName,a=e.lastName,n=e.email,r=e.eppn,i=e.authority,u=e.org,o=u?" ("+u+")":b.emptyS;if(t)return""+t+o;if(l||a)return""+(l||b.emptyS)+(l&&a?" ":b.emptyS)+(a||b.emptyS);if(n)return""+n+o;var s=i?" - "+i:b.emptyS;return r?""+r+s+o:"!unidentified user!"},x={user:T,country:(0,_.memoize)(function(e,t){var l=e.country.entities[t];if(l){var a=l.values,n=a.name;return a.iso+": "+n}return"UNKNOWN"},b.emptyO),typeContribution:(0,_.memoize)(function(e,t){var l=e.typeContribution.entities[t];if(l){var a=l.values,n=a.mainType,r=a.subType;return""+n+(n&&r?" / ":b.emptyS)+r}return"UNKNOWN"},b.emptyO),score:(0,_.memoize)(function(e,t){var l=void 0,a=e.score.entities[t];if(a){var n=a.values,r=n.score,i=void 0===r?"N/A":r,u=n.level,o=void 0===u?"N/A":u,s=n.description,c=void 0===s?b.emptyS:s;l=i||o?i+" - "+o:c}else l="UNKNOWN";return l},b.emptyO),default:function(e){return(0,_.memoize)(function(t,l,a){var n=t[e],r=n.title,i=void 0===r?"rep":r,u=n.entities[l],o=n.fieldSpecs;if(u){var s=u.values[i],c=o[i].valType;return D(t,e,i,c,s,a)}return"UNKNOWN"},b.emptyO)}},M=t.headEntity=function(e,t,l,a){return(x[t]||x.default(t))(e,l,a)},D=function(e,t,l,a,n,r){if(null==n)return b.emptyS;if(null!=a&&"string"!=typeof a){var i=a.relTable;return null==i?b.emptyS:M(e,i,n)}switch(a){case"datetime":return function(e,t,l,a){return null==e?b.emptyS:a.longDates[t]&&a.longDates[t][l]?e.replace(/\.[0-9]+/,b.emptyS):e.replace(/T.*$/,b.emptyS)}(n,t,l,r);case"bool":return n?"Yes":"No";default:return n}},C=function(e,t,l,a,n,r,i,u){var o=n?(r||b.emptyA).map(function(n){return D(e,t,l,a,n,i)}):D(e,t,l,a,r,i);return n&&null!=u?o.join(u):o};t.repr=(0,_.memoize)(function(e,t,l,a,n,r,i,u,o,s){if(null==r)return C(e,t,l,a,n,i,u,o);var c=a.relTable;if(null==c)return b.emptyS;var f=e[c].fieldSpecs[r],d=f.multiple,m=f.valType,p=n?i.map(function(t){return e[c].entities[t].values[r]}):e[c].entities[i].values[r],_=n&&d&&null!=o&&null==s?" ":s,N=n?p.map(function(t){return C(e,c,r,m,d,t,u,_)}):C(e,c,r,m,d,p,u,s);return n&&null!=o?N.join(o):N},b.emptyO),t.handleOpenAll=(0,_.memoize)(function(e,t,l,a,n,r,i){var u=(0,N.compileAlternatives)(t,l,a,i),o=(a+1)%l;return function(){var l=[];r.forEach(function(t){(0,u(t).getAlt)(e)!==o&&l.push(t)}),l.length&&i(g(n,l,t,o))}},b.emptyO),t.handleCloseAll=(0,_.memoize)(function(e,t,l,a,n,r){var i=(0,N.compileAlternatives)(t,l,a,r),u=(0,b.getUrlParts)(m.browserHistory),o=u.base+"/"+u.table+"/"+u.controller;return function(){m.browserHistory.push(o+"/");var l=[];n.forEach(function(t){(0,i(t).getAlt)(e)!==a&&l.push(t)}),l.length&&r((0,N.setItems)(l,t,a))}},b.emptyO)},9:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l(26)),r=a(l(13)),i=a(l(14)),u=a(l(15)),o=a(l(16)),s=a(l(17)),c=a(l(32)),f=a(l(7)),d="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Tooltip.jsx",m=l(0),p=a(m),_=l(2),b=l(1),N=l(34),v={top:"bottom",bottom:"top",left:"right",right:"left"},h={top:["left","right"],bottom:["left","right"],left:["top","bottom"],right:["top","bottom"]},y={top:function(e,t){return{left:e.left+(e.width-t.width>>1),top:e.top-t.height}},bottom:function(e,t){return{left:e.left+(e.width-t.width>>1),top:e.top+e.height}},left:function(e,t){return{left:e.left-t.width,top:e.top+(e.height-t.height>>1)}},right:function(e,t){return{left:e.left+e.width,top:e.top+(e.height-t.height>>1)}}},g={top:function(e,t,l){return l.top<0},bottom:function(e,t,l){return l.top+t.height>e.height},left:function(e,t,l){return l.left<0},right:function(e,t,l){return l.left+t.width>e.width}},E={top:function(e,t,l){l.top=0},bottom:function(e,t,l){l.top=e.height-t.height},left:function(e,t,l){l.left=0},right:function(e,t,l){l.left=e.width-t.width}},k=function(e){return function(t,l,a,n){var r=y[e](l,a),i=e,u=r;n&&g[e](t,a,r)&&(i=v[e],u=y[i](l,a));var o=!0,s=!1,d=void 0;try{for(var m,p=(0,c.default)(h[i]);!(o=(m=p.next()).done);o=!0){var _=m.value;g[_](t,a,u)&&E[_](t,a,u)}}catch(e){s=!0,d=e}finally{try{!o&&p.return&&p.return()}finally{if(s)throw d}}return(0,f.default)({at:i},u)}},w=function(e){function t(){var e,l,a,u;(0,i.default)(this,t);for(var s=arguments.length,f=Array(s),d=0;d<s;d++)f[d]=arguments[d];return l=a=(0,o.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(f))),a.storeTarget=function(e){a.target=e},a.storeTip=function(e){a.tip=e},a.storeArrow=function(e){a.arrow=e},a.handlePositioning=function(){var e=a,t=e.props,l=t.at,r=void 0===l?"top":l,i=t.fixed,u=void 0!==i&&i,o=t.settings.showTooltips,s=e.target,f=e.tip,d=e.arrow;if(o&&!u){var m=document.documentElement,p=s.getBoundingClientRect(),_=f.getBoundingClientRect(),b=d.getBoundingClientRect(),N={width:m.clientWidth,height:m.clientHeight},h=k(r)(N,p,_,!0),y=h.at,g=k(y)(N,p,b,!1),E=!0,w=!1,S=void 0;try{for(var I,A=(0,c.default)((0,n.default)(v));!(E=(I=A.next()).done);E=!0){var T=I.value;d.classList.remove("toolarrow-"+T)}}catch(e){w=!0,S=e}finally{try{!E&&A.return&&A.return()}finally{if(w)throw S}}d.classList.add("toolarrow-"+y),f.style.top=h.top+window.scrollY,f.style.left=h.left+window.scrollX,d.style.top=g.top+window.scrollY,d.style.left=g.left+window.scrollX}},u=l,(0,o.default)(a,u)}return(0,s.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.settings.showTooltips,l=e.children,a=e.tip,n=e.at,r=e.focusOnly,i=e.className,u=void 0===i?b.emptyS:i,o=e.classTip,s=void 0===o?b.emptyS:o,c=e.classArrow,f=void 0===c?b.emptyS:c;return t?[p.default.createElement("span",{key:"target",ref:this.storeTarget,className:u+" tooltipped focus "+(r?b.emptyS:"hover"),onMouseOver:this.handlePositioning,onFocus:this.handlePositioning,__source:{fileName:d,lineNumber:88}},l),p.default.createElement("span",{key:"tip",__source:{fileName:d,lineNumber:95}},p.default.createElement("span",{ref:this.storeTip,className:"tooltip "+s,__source:{fileName:d,lineNumber:98}},a),p.default.createElement("span",{ref:this.storeArrow,className:"toolarrow toolarrow-"+n+" "+f,__source:{fileName:d,lineNumber:102}}))]:l}}]),t}(m.Component);t.default=(0,_.connect)(N.getSettings)(w)},93:function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.accessData=void 0;var n=a(l(33)),r=a(l(26)),i=a(l(207)),u=a(l(7));l(384);var o=l(44),s=a(l(51)),c=l(1),f=function(e,t,l){return{type:"async",status:"error",path:e,desc:t,msgs:l}},d=(t.accessData=function(e){return function(t,l){var a=e.path,n=e.contentType,s=e.desc,c=e.sendData;if(!(l().server[a]>0)){t(function(e,t){return{type:"async",status:"pending",path:e,desc:t}}(a,s));var d={credentials:"same-origin"};null!=c&&(d=(0,u.default)({},d,{method:"POST",body:(0,i.default)(c),headers:{"Content-Type":"application/json"}}));var m="/api/"+n+a;return fetch(m,d).then(function(e){return e.ok?e.json():{good:!1,msgs:[{kind:"error",text:"No valid response from the server to "+m}]}}).then(function(l){var n=l.msgs,i=l.good,c=l.data;if(i?(t(function(e,t,l){return{type:"async",status:"success",path:e,desc:t,msgs:l}}(a,s,n)),t((0,u.default)({},e,{data:c}))):t(f(a,s,n)),c&&c.diags&&(0,r.default)(c.diags).length>0)throw new o.SubmissionError(c.diags)}).catch(function(e){if(e instanceof o.SubmissionError)throw e;t(f(a,s,[{kind:"error",text:e.toString()}]))})}t(function(e,t){return{type:"async",status:"progress",path:e,desc:t}}(a,s))}},{progress:function(e,t){var l=t.path;return(0,s.default)(e,(0,n.default)({},l,{$apply:function(e){return e+1}}))},pending:function(e,t){var l=t.path;return(0,s.default)(e,(0,n.default)({},l,{$set:1}))},success:function(e,t){var l=t.path;return(0,s.default)(e,(0,n.default)({},l,{$set:0}))},error:function(e,t){var l=t.path;return(0,s.default)(e,(0,n.default)({},l,{$set:-1}))}}),m={async:function(e,t){var l=t.status,a=t.path,n=d[l];return n?n(e,{path:a}):e}};t.default=(0,c.makeReducer)(m)}},[293]);