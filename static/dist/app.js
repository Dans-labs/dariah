webpackJsonp([0],{"./js/app/components/App.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/App.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-redux/es/index.js"),i=l("./js/app/dux/win.js"),u=a(l("./js/app/components/ErrorBoundary.jsx")),o=a(l("./js/app/components/Login.jsx")),d=a(l("./js/app/components/Static.jsx")),c=a(l("./js/app/components/Notification.jsx")),m=a(l("./js/app/components/Tooltip.jsx")),f=a(l("./js/app/components/TooltipSwitch.jsx"));t.default=(0,s.connect)(i.getWinDim)(function(e){var t=e.children,l=e.win,a=l.height,s=l.width+" x "+a;return r.default.createElement(u.default,{__source:{fileName:n,lineNumber:17}},r.default.createElement(u.default,{__source:{fileName:n,lineNumber:18}},r.default.createElement(c.default,{__source:{fileName:n,lineNumber:19}})),r.default.createElement("div",{className:"topnavbar",__source:{fileName:n,lineNumber:21}},r.default.createElement(m.default,{tip:"information about this site",at:"right",__source:{fileName:n,lineNumber:22}},r.default.createElement("span",{className:"logo-container",__source:{fileName:n,lineNumber:26}},r.default.createElement("img",{src:"/static/images/inkind_logo_small.png",__source:{fileName:n,lineNumber:27}}))),r.default.createElement(u.default,{__source:{fileName:n,lineNumber:30}},r.default.createElement(d.default,{__source:{fileName:n,lineNumber:31}})),r.default.createElement(f.default,{__source:{fileName:n,lineNumber:33}}),r.default.createElement(m.default,{tip:"current window size: "+s+" pixels",at:"bottom",__source:{fileName:n,lineNumber:34}},r.default.createElement("span",{className:"resize",__source:{fileName:n,lineNumber:38}},s)),r.default.createElement(u.default,{__source:{fileName:n,lineNumber:42}},r.default.createElement(o.default,{__source:{fileName:n,lineNumber:43}}))),r.default.createElement(u.default,{__source:{fileName:n,lineNumber:46}},t))})},"./js/app/components/ByValue.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/extends.js")),r=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),s=a(l("../node_modules/babel-runtime/core-js/object/entries.js")),i=a(l("../node_modules/babel-runtime/core-js/object/keys.js")),u="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ByValue.jsx",o=a(l("../node_modules/react/index.js")),d=l("../node_modules/react-redux/es/index.js"),c=l("./js/lib/utils.js"),m=l("./js/app/dux/filters.js"),f=l("./js/app/dux/alter.js"),p=a(l("./js/app/components/Facet.jsx")),b=a(l("./js/app/components/CheckboxI.jsx")),_=a(l("./js/app/components/Stat.jsx"));t.default=(0,d.connect)(f.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.tables,d=e.table,N=e.filterTag,h=e.filterSetting,j=e.filterId,v=e.filterField,y=e.filterRelField,g=e.filterLabel,E=e.listIds,x=e.filteredAmount,k=e.filteredAmountOthers,w=e.amounts,S=e.maxCols,I=e.expanded,A=e.compact,T=e.dispatch,C=(0,m.compileValues)(a,d,N,E,v,y);if(null==(0,i.default)(C).length)return o.default.createElement("div",{className:"facet",__source:{fileName:u,lineNumber:26}},o.default.createElement("p",{__source:{fileName:u,lineNumber:26}}," -no facets "));var O=I?0:1,M=(0,f.compileAlternatives)(l,2,O,T)("expand"),D=M.getAlt,F=M.nextAlt,P=D(t),R=A?c.emptyO:{style:{flexBasis:94/S+"%"}},L=A?"right":"down",U=A?"left":"up";return o.default.createElement("div",{className:"facetFilter "+(A?"compact":c.emptyS),__source:{fileName:u,lineNumber:35}},o.default.createElement("div",{className:"facetHead "+(A?"compact":c.emptyS),__source:{fileName:u,lineNumber:36}},o.default.createElement(b.default,{table:d,filterId:j,filterSetting:h,filterTag:N,__source:{fileName:u,lineNumber:37}})," ",g," ",A?null:o.default.createElement(_.default,{subTotal:x,total:k,className:"facet-stat-all",__source:{fileName:u,lineNumber:46}})," ",o.default.createElement("span",{className:"button-small fa fa-angle-"+(0===P?U:L),onClick:F,__source:{fileName:u,lineNumber:53}})),0===P?o.default.createElement("div",{className:"facet-container "+(A?"compact":c.emptyS),__source:{fileName:u,lineNumber:60}},(0,s.default)(C).map(function(e){var t=(0,r.default)(e,2),l=t[0],a=t[1];return o.default.createElement("div",(0,n.default)({key:l,className:"facet-row "+(A?"compact":c.emptyS)},R,{__source:{fileName:u,lineNumber:63}}),o.default.createElement(p.default,{className:"facet-value "+(A?"compact":c.emptyS),table:d,filterSetting:h,filterTag:N,filterId:j,valueId:l,valueRep:a,__source:{fileName:u,lineNumber:68}}),A?null:o.default.createElement(_.default,{className:"facet-stat",subTotal:w[l],__source:{fileName:u,lineNumber:80}}))})):o.default.createElement("div",{__source:{fileName:u,lineNumber:89}}))})},"./js/app/components/CheckboxI.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o=l("../node_modules/react/index.js"),d=a(o),c=l("../node_modules/react-redux/es/index.js"),m=l("./js/app/dux/filters.js"),f=function(e){return!e.allTrue&&!e.allFalse},p=function(e){function t(){var e,l,a,s;(0,r.default)(this,t);for(var u=arguments.length,o=Array(u),d=0;d<u;d++)o[d]=arguments[d];return l=a=(0,i.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(o))),a.handleCheck=function(){var e=a.props,t=e.filterSetting,l=e.table,n=e.filterTag,r=e.filterId,s=e.dispatch,i=(0,m.testAllChecks)(t);return s((0,m.changeFacetAll)(l,n,r,a.dom.indeterminate||!i.allTrue))},a.setIndeterminate=function(e){var t=a.props.filterSetting,l=(0,m.testAllChecks)(t);e&&(a.dom=e,e.indeterminate=f(l))},s=l,(0,i.default)(a,s)}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidUpdate",value:function(){var e=this.props.filterSetting,t=(0,m.testAllChecks)(e);this.dom.indeterminate=f(t)}},{key:"render",value:function(){var e=this.props.filterSetting,t=(0,m.testAllChecks)(e);return d.default.createElement("input",{ref:this.setIndeterminate,type:"checkbox",checked:t.allTrue,onChange:this.handleCheck,__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/CheckboxI.jsx",lineNumber:31}})}}]),t}(o.Component);t.default=(0,c.connect)()(p)},"./js/app/components/Doc.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Doc.jsx",s=a(l("../node_modules/react/index.js")),i=a(l("./js/app/components/DocMd.jsx")),u=a(l("./js/app/components/DocPdf.jsx")),o=a(l("./js/app/components/DocHtml.jsx")),d=a(l("./js/app/components/NotFound.jsx")),c={md:i.default,pdf:u.default,html:o.default};t.default=function(e){var t=e.location.pathname,l=/^(.*)\/([^/]+)$/g.exec(t).slice(1),a=(0,n.default)(l,2),i=a[0],u=a[1],o=/^(.*)\.([^.]+)$/g.exec(u).slice(1),m=(0,n.default)(o,2),f=m[0],p=m[1],b=c[p],_=i+"/"+f+"."+p;return null==b?s.default.createElement(d.default,{splat:"document "+t,__source:{fileName:r,lineNumber:20}}):s.default.createElement(b,{alterSection:_,docDir:i,docName:f,docExt:p,__source:{fileName:r,lineNumber:21}})}},"./js/app/components/DocHtml.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/react/index.js"));t.default=function(e){var t="/api/file"+e.docDir+"/"+e.docName+"."+e.docExt;return a.default.createElement("iframe",{height:"100%",width:"100%",src:t,__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/DocHtml.jsx",lineNumber:6}})}},"./js/app/components/DocMd.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/DocMd.jsx",d=l("../node_modules/react/index.js"),c=a(d),m=l("../node_modules/react-redux/es/index.js"),f=a(l("../node_modules/react-markdown/src/react-markdown.js")),p=l("../node_modules/react-router/es/index.js"),b=l("./js/lib/utils.js"),_=l("./js/app/dux/docs.js"),N=l("./js/app/dux/alter.js"),h=a(l("./js/app/components/Tooltip.jsx")),j=a(l("./js/app/components/ErrorBoundary.jsx")),v={Link:function(e){var t=e.children,l=e.href;return l.match(/^(https?:)?\/\//)?c.default.createElement("a",{href:l,__source:{fileName:o,lineNumber:16}},t):c.default.createElement(p.Link,{to:l,__source:{fileName:o,lineNumber:17}},t)}},y=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.alter,l=e.alterSection,a=e.text,n=e.docName,r=e.dispatch;if((0,_.needDoc)({text:a}))return c.default.createElement("div",{__source:{fileName:o,lineNumber:25}},"No document "+n);var s=(0,N.compileAlternatives)(l,2,0,r)("format"),i=s.getAlt,u=s.nextAlt,d=i(t);return c.default.createElement(j.default,{__source:{fileName:o,lineNumber:31}},c.default.createElement("div",{style:{paddingLeft:"0.5em"},__source:{fileName:o,lineNumber:32}},c.default.createElement("p",{style:{float:"right"},__source:{fileName:o,lineNumber:33}},c.default.createElement(h.default,{tip:0===d?"markdown source":"formatted",at:"right",__source:{fileName:o,lineNumber:34}},c.default.createElement("a",{href:"#",className:"control fa fa-"+(0===d?"hand-o-down":"file-code-o"),onClick:u,__source:{fileName:o,lineNumber:38}}))),0===d?c.default.createElement("div",{__source:{fileName:o,lineNumber:47}},c.default.createElement(f.default,{source:a,renderers:v,__source:{fileName:o,lineNumber:48}})):c.default.createElement("div",{__source:{fileName:o,lineNumber:53}},c.default.createElement("pre",{className:"md-source",__source:{fileName:o,lineNumber:54}},a))))}},{key:"componentDidMount",value:function(){var e=this.props;(0,this.props.dispatch)((0,_.fetchDoc)(e))}},{key:"componentDidUpdate",value:function(e){var t=this.props,l=this.props.dispatch;(0,_.changedDoc)(t,e)&&l((0,_.fetchDoc)(t))}}]),t}(d.Component),g=(0,b.combineSelectors)(_.getDoc,N.getAltSection);t.default=(0,m.connect)(g)(y)},"./js/app/components/DocPdf.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/DocPdf.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/react/index.js"));t.default=function(e){var t=e.docDir,l=e.docName,r="/api/file"+t+"/"+l+"."+e.docExt;return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?n.default.createElement("p",{__source:{fileName:a,lineNumber:7}},n.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:r,__source:{fileName:a,lineNumber:8}},l)," (open pdf in a new tab)"):n.default.createElement("object",{height:"100%",width:"100%",data:r,type:"application/pdf",__source:{fileName:a,lineNumber:10}},n.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:r,__source:{fileName:a,lineNumber:16}},l)," (open pdf in a new tab)")}},"./js/app/components/EUMap.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n,r,s=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),i=a(l("../node_modules/babel-runtime/core-js/object/entries.js")),u=a(l("../node_modules/babel-runtime/helpers/extends.js")),o=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),d=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),c=a(l("../node_modules/babel-runtime/helpers/createClass.js")),m=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),f=a(l("../node_modules/babel-runtime/helpers/inherits.js")),p=a(l("../node_modules/babel-runtime/helpers/defineProperty.js")),b="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/EUMap.jsx",_=l("../node_modules/react/index.js"),N=a(_),h=a(l("../node_modules/leaflet/dist/leaflet-src.js")),j=l("./js/lib/europe.geo.js"),v=l("./js/lib/utils.js"),y=a(l("./js/app/components/ByValue.jsx")),g={HEIGHT:250,MAX_RADIUS:25,LEVEL_OFF:10,ZOOM_INIT:3,MAP_CENTER:[52,12],MAP_BOUNDS:[[30,-20],[70,40]],MARKER_COLOR:(n={},(0,p.default)(n,!0,{color:"#008800",fillColor:"#00cc00"}),(0,p.default)(n,!1,{color:"#888844",fillColor:"#bbbb66"}),n),MARKER_SHAPE:{weight:1,fill:!0,fillOpacity:.8},COUNTRY_STYLE:(r={},(0,p.default)(r,!0,{color:"#884422",weight:2,fill:!0,fillColor:"#aa7766",fillOpacity:1}),(0,p.default)(r,!1,{color:"#777777",weight:1,fill:!0,fillColor:"#bbbbbb",fillOpacity:1}),r)},E=function(e,t,l){var a=l?l[e]||0:0;if(0===a)return 0;var n=g.LEVEL_OFF,r=g.MAX_RADIUS*a/t;return t<n?r:n*Math.sqrt(r)},x=function(e){function t(e){(0,d.default)(this,t);var l=(0,m.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return l.setMap=function(e){e&&(l.dom=e)},l.features={},l}return(0,f.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=this.setMap;return N.default.createElement("div",{__source:{fileName:b,lineNumber:68}},N.default.createElement("div",{ref:t,__source:{fileName:b,lineNumber:69}}),N.default.createElement(y.default,(0,u.default)({},e,{__source:{fileName:b,lineNumber:72}})))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,l=t.filterSetting,a=t.filteredAmountOthers,n=t.amounts,r=t.tables.country,s=this.dom,i=g.HEIGHT,o=g.MAP_CENTER,d=g.ZOOM_INIT,c=g.MAP_BOUNDS,m=g.MARKER_COLOR,f=g.MARKER_SHAPE,p=g.COUNTRY_STYLE;s.style.height=i,this.map=h.default.map(s,{attributionControl:!1,center:o,zoom:d,maxBounds:c});var b=r.allIds,_=r.entities;this.idFromIso={},this.inDariah={},b.forEach(function(t){var l=_[t].values,a=l.iso,n=l.isMember;e.idFromIso[a]=t,e.inDariah[a]=n}),h.default.geoJSON(j.countryBorders,{style:function(t){return p[e.inDariah[t.properties.iso2]]},onEachFeature:function(t){var r=t.properties,s=r.iso2,i=r.lat,o=r.lng;if(e.inDariah[s]){var d=e.idFromIso[s],c=(l||v.emptyO)[d],p=void 0!==c&&c,b=h.default.circleMarker([i,o],(0,u.default)({},m[p],{radius:E(d,a,n)},f,{pane:"markerPane"})).addTo(e.map);e.features[s]=b}}}).addTo(this.map)}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props,l=t.filterSetting,a=t.filteredAmountOthers,n=t.amounts,r=g.MARKER_COLOR;(0,i.default)(this.features).forEach(function(t){var i=(0,s.default)(t,2),u=i[0],o=i[1],d=e.idFromIso[u],c=(l||v.emptyO)[d],m=void 0!==c&&c;o.setRadius(E(d,a,n)),o.setStyle(r[m])})}}]),t}(_.Component);x.displayName="EUMap",t.default=x},"./js/app/components/EditControl.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("./js/lib/edit.js");t.default=(0,a.editControl)(!0)},"./js/app/components/EditDelete.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/EditDelete.jsx",r=a(l("../node_modules/react/index.js")),s=a(l("./js/app/components/Tooltip.jsx"));t.default=function(e){var t=e.perm,l=e.fixed,a=e.button,i=e.onClick;return!l&&t.delete?r.default.createElement(s.default,{tip:"delete this record",at:"left",className:"inlineR",__source:{fileName:n,lineNumber:7}},r.default.createElement("div",{className:"grid-cell "+a+" error-o fa fa-trash delete",onClick:i,__source:{fileName:n,lineNumber:12}})):null}},"./js/app/components/EditHelp.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/EditHelp.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/react/index.js"));t.default=function(e){var t=e.type,l=e.dirty;return n.default.createElement("div",{className:"edit-help",__source:{fileName:a,lineNumber:4}},n.default.createElement("div",{className:"help-line",__source:{fileName:a,lineNumber:5}},l?n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:8}},"Press ",n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:10}},"ESC")," to cancel"):null,n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:15}},"Press ",n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:17}},"TAB")," or click outside this field to save")),"markdown"==t?n.default.createElement("div",{className:"help-line",__source:{fileName:a,lineNumber:23}},n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:24}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:25}},"["),"link text",n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:25}},"]("),"url",n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:25}},")")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:27}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:28}},"*"),n.default.createElement("i",{__source:{fileName:a,lineNumber:28}},"italic"),n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:28}},"*")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:30}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:31}},"**"),n.default.createElement("b",{__source:{fileName:a,lineNumber:31}},"bold"),n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:31}},"**")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:33}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:34}},"`"),n.default.createElement("code",{__source:{fileName:a,lineNumber:34}},"code"),n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:34}},"`")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:36}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:37}},"# "),n.default.createElement("span",{className:"mdh1",__source:{fileName:a,lineNumber:37}},"Heading1")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:39}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:40}},"## "),n.default.createElement("span",{className:"mdh2",__source:{fileName:a,lineNumber:40}},"Heading2")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:42}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:43}},"* "),n.default.createElement("span",{className:"mduli",__source:{fileName:a,lineNumber:43}},"bullet item")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:45}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:46}},"1. "),n.default.createElement("span",{className:"mdoli",__source:{fileName:a,lineNumber:46}},"numbered item")),n.default.createElement("div",{className:"help-item",__source:{fileName:a,lineNumber:48}},n.default.createElement("span",{className:"help-code",__source:{fileName:a,lineNumber:49}},"> "),n.default.createElement("span",{className:"mdbq",__source:{fileName:a,lineNumber:49}},"block quote"))):null)}},"./js/app/components/EditInsert.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/EditInsert.jsx",r=a(l("../node_modules/react/index.js")),s=l("./js/app/dux/tables.js"),i=a(l("./js/app/components/Tooltip.jsx"));t.default=function(e){var t=e.perm,l=e.select,a=e.fixed,u=e.item,o=e.button,d=e.onInsert,c=u[0];return a||null==t||!t.insert||t.needMaster&&l!=s.DETAILS?null:r.default.createElement(i.default,{tip:"make a new "+c,at:"bottom",__source:{fileName:n,lineNumber:12}},r.default.createElement("span",{className:"fa fa-plus "+o,onClick:d,__source:{fileName:n,lineNumber:16}}))}},"./js/app/components/EditStatus.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("../node_modules/redux-form/es/index.js"),n=l("./js/lib/edit.js");t.default=(0,a.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!0})((0,n.editControl)(!1))},"./js/app/components/ErrorBoundary.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o=l("../node_modules/react/index.js"),d=a(o),c=function(e){function t(e){(0,r.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return l.state={hasError:!1,error:null},l}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0,error:e.message})}},{key:"render",value:function(){return this.state.hasError?d.default.createElement("div",{className:"error-boundary",__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ErrorBoundary.jsx",lineNumber:16}},this.state.error):this.props.children}}]),t}(o.Component);t.default=c},"./js/app/components/Expand.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ExpandBody=t.ExpandHead=void 0;var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Expand.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-redux/es/index.js"),i=l("./js/lib/utils.js"),u=l("./js/app/dux/alter.js"),o=a(l("./js/app/components/Tooltip.jsx")),d=function(e){return e||null},c=function(e,t,l){return e?r.default.createElement("span",{className:l,__source:{fileName:n,lineNumber:16}}," "+e+(t?" ":i.emptyS)):null};t.ExpandHead=(0,s.connect)(u.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.alterTag,s=e.initAlt,i=e.headActive,m=e.headLine,f=e.className,p=e.iconOpen,b=e.iconClose,_=e.titleOpen,N=e.titleClose,h=e.dispatch,j=s||0,v=(0,u.compileAlternatives)(l,2,j,h)(a),y=v.getAlt,g=v.nextAlt,E=y(t),x=p||"angle-down",k=b||"angle-up",w=_||"expand",S=N||"collapse";return r.default.createElement("div",{className:"vtop "+f,__source:{fileName:n,lineNumber:76}},r.default.createElement(o.default,{tip:0===E?w:S,at:"top",__source:{fileName:n,lineNumber:77}},r.default.createElement("span",{className:"link vtop fa fa-"+(0===E?x:k),onClick:g,__source:{fileName:n,lineNumber:81}},c(i,m,"body"))),d(m))}),t.ExpandBody=(0,s.connect)(u.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.alterTag,s=e.initAlt,i=e.full,o=e.className,d=e.dispatch,c=s||0;return 0==(0,(0,u.compileAlternatives)(l,2,c,d)(a).getAlt)(t)?null:r.default.createElement("div",{className:o,__source:{fileName:n,lineNumber:104}},r.default.createElement("div",{__source:{fileName:n,lineNumber:106}},i))});t.default=(0,s.connect)(u.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.alterTag,s=e.initAlt,i=e.headActive,m=e.headLine,f=e.full,p=e.className,b=e.iconOpen,_=e.iconClose,N=e.titleOpen,h=e.titleClose,j=e.dispatch,v=s||0,y=(0,u.compileAlternatives)(l,2,v,j)(a),g=y.getAlt,E=y.nextAlt,x=g(t),k=b||"angle-down",w=_||"angle-up",S=N||"expand",I=h||"collapse";return r.default.createElement("div",{className:p,__source:{fileName:n,lineNumber:36}},r.default.createElement("span",{className:"vtop",__source:{fileName:n,lineNumber:37}}," ",r.default.createElement(o.default,{tip:0===x?S:I,at:"top",__source:{fileName:n,lineNumber:39}},r.default.createElement("span",{className:"link vtop fa fa-"+(0===x?k:w),onClick:E,__source:{fileName:n,lineNumber:43}},c(i,m,"body"))),d(m)),0==x?null:r.default.createElement("div",{__source:{fileName:n,lineNumber:53}},f))})},"./js/app/components/Facet.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Facet.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/react/index.js")),r=l("../node_modules/react-redux/es/index.js"),s=l("./js/lib/utils.js"),i=l("./js/lib/handle.js"),u=l("./js/app/dux/filters.js");t.default=(0,r.connect)()(function(e){var t=e.table,l=e.filterTag,r=e.filterId,o=e.valueId,d=e.valueRep,c=e.filterSetting,m=e.className,f=e.dispatch,p=(c||s.emptyO)[o],b=void 0!==p&&p;return n.default.createElement("span",{className:m,__source:{fileName:a,lineNumber:12}},n.default.createElement("input",{type:"checkbox",checked:b,className:"facet",onChange:(0,i.handlE)(f,u.changeFacet,t,l,r,o,!b),__source:{fileName:a,lineNumber:13}})," "+d)})},"./js/app/components/FieldEdit.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/extends.js")),r=a(l("../node_modules/babel-runtime/helpers/objectWithoutProperties.js")),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/FieldEdit.jsx",i=a(l("../node_modules/react/index.js")),u=l("../node_modules/react-redux/es/index.js"),o=l("../node_modules/redux-form/es/index.js"),d=l("./js/app/dux/workflow.js"),c=l("./js/lib/fields.js"),m=a(l("./js/app/components/InputMulti.jsx")),f=a(l("./js/app/components/RelSelect.jsx"));t.default=(0,u.connect)()(function(e){e.alter;var t=e.field,l=e.tables,a=e.table,u=e.eId,p=(e.dispatch,e.allowed),b=e.reset,_=e.submitValues,N=(0,r.default)(e,["alter","field","tables","table","eId","dispatch","allowed","reset","submitValues"]),h=l[a].fieldSpecs[t],j=h.valType,v=h.valid,y=h.multiple;if("string"==typeof j){var g=(0,c.getValType)(j),E=g.component,x=g.type,k=g.props,w=c.validation[v||j],S=c.normalization[v||j];return y?i.default.createElement(o.FieldArray,(0,n.default)({name:t,component:m.default,componentSingle:E},k,{validateSingle:w,normalizeSingle:S,tables:l,table:a,eId:u,type:x,valType:j,rerenderOnEveryChange:!0,reset:b,submitValues:_},N,{__source:{fileName:s,lineNumber:28}})):i.default.createElement(o.Field,(0,n.default)({name:t,component:E},k,{validate:w,normalize:S,tables:l,table:a,eId:u,type:x,reset:b,submitValues:_},N,{__source:{fileName:s,lineNumber:49}}))}var I=j.allowNew,A=j.popUpIfEmpty,T=j.inactive,C=T?(0,d.compileActive)(l,t):null,O=a+"-"+u+"-"+t;return i.default.createElement(o.Field,(0,n.default)({name:t,component:f.default,selectTag:O,field:t,multiple:y,allowNew:I,popUpIfEmpty:A,tables:l,table:a,eId:u,allowed:p,activeItems:C,inactive:T,submitValues:_},N,{__source:{fileName:s,lineNumber:71}}))})},"./js/app/components/FieldRead.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/babel-runtime/helpers/typeof.js")),n=l("../node_modules/react-redux/es/index.js"),r=l("./js/lib/utils.js"),s=l("./js/app/dux/workflow.js"),i=l("./js/lib/fields.js"),u=l("./js/app/dux/settings.js");t.default=(0,n.connect)(u.getSettings)(function(e){var t=e.settings,l=e.tables,n=e.table,u=e.field,o=e.relField,d=e.myValues,c=l[n].fieldSpecs[u],m=c.valType,f=c.multiple,p=("object"===(void 0===m?"undefined":(0,a.default)(m))?m:r.emptyO).inactive,b=void 0===p?null:p,_=b?(0,s.compileActive)(l,u):null;return(0,i.wrappedRepr)(l,n,u,m,f,o,_,b,d,t)})},"./js/app/components/FieldSet.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l("./js/lib/fields.js");t.default=function(e){var t=e.widget,l=e.setValue,n=e.input.onChange,r=e.submitValues,s=(0,a.makeSubmitTime)(r);return t(function(){n(l),s()})}},"./js/app/components/Filter.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Filter.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-redux/es/index.js"),i=l("./js/lib/utils.js"),u=a(l("./js/app/components/ErrorBoundary.jsx")),o=a(l("./js/app/components/Fulltext.jsx")),d=a(l("./js/app/components/ByValue.jsx")),c=a(l("./js/app/components/EUMap.jsx")),m={Fulltext:o.default,EUMap:c.default,ByValue:d.default};t.default=(0,s.connect)()(function(e){var t=e.filters,l=e.tables,a=e.table,s=e.filterTag,o=e.listIds,d=e.filteredAmount,c=e.filteredAmountOthers,f=e.amounts,p=e.compact,b=t[a],_=void 0===b?i.emptyO:b,N=l[a],h=N.fields,j=N.filterList,v=_[s],y=void 0===v?i.emptyO:v;return null==j?r.default.createElement("div",{__source:{fileName:n,lineNumber:27}},"No filters for this list"):r.default.createElement(u.default,{__source:{fileName:n,lineNumber:30}},r.default.createElement("div",{className:"filterSequence "+(p?"compact":i.emptyS),__source:{fileName:n,lineNumber:31}},j.filter(function(e){return h[e.field]}).map(function(e,t){var i=e.type,u=m[i],b=y[t];return r.default.createElement(u,{key:t,alterSection:"filter-"+a+"-"+t,tables:l,table:a,filterTag:s,filterSetting:b,listIds:o,filterId:t,filterField:e.field,filterRelField:e.relField,filterLabel:e.label,maxCols:e.maxCols,filteredAmount:d,filteredAmountOthers:c[t],amounts:f[t],expanded:e.expanded,compact:p,__source:{fileName:n,lineNumber:37}})})))})},"./js/app/components/Fulltext.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Fulltext.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-redux/es/index.js"),i=l("./js/lib/utils.js"),u=l("./js/lib/handle.js"),o=l("./js/app/dux/filters.js"),d=a(l("./js/app/components/Stat.jsx")),c=a(l("./js/app/components/Tooltip.jsx"));t.default=(0,s.connect)()(function(e){var t=e.table,l=e.filterTag,a=e.filterId,s=e.filterLabel,m=e.filterSetting,f=void 0===m?i.emptyS:m,p=e.filteredAmount,b=e.filteredAmountOthers,_=e.compact,N=e.dispatch;return r.default.createElement("div",{className:"fulltext",__source:{fileName:n,lineNumber:21}},r.default.createElement(c.default,{tip:"Search in "+s,at:"top",__source:{fileName:n,lineNumber:22}},r.default.createElement("input",{type:"text",className:"search "+(_?"compact":i.emptyS),placeholder:"search"+(_?i.emptyS:" in "+s),value:f,onChange:(0,u.handlEV)(N,o.changeFulltext,t,l,a),__source:{fileName:n,lineNumber:26}}))," ",_?null:r.default.createElement(d.default,{subTotal:p,total:b,className:"fulltext-stat",__source:{fileName:n,lineNumber:38}}))})},"./js/app/components/Input.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/extends.js")),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Input.jsx",s=a(l("../node_modules/react/index.js")),i=l("./js/lib/utils.js"),u=l("./js/lib/edit.js"),o=l("./js/lib/fields.js"),d=a(l("./js/app/components/EditHelp.jsx")),c=a(l("./js/app/components/Tooltip.jsx"));t.default=function(e){var t=e.meta,l=t.dirty,a=t.invalid,m=t.submitting,f=t.error,p=e.input,b=e.type,_=e.reset,N=e.submitValues,h="checkbox"===b?(0,o.makeSubmitTime)(N):(0,o.makeSubmit)(l,a,m,N),j=(0,o.makeReset)(b,_),v="checkbox"===b?{onClick:h}:{onBlur:h},y="checkbox"==b?i.emptyO:{className:"wideInput"};return s.default.createElement("div",(0,n.default)({},y,{__source:{fileName:r,lineNumber:27}}),s.default.createElement(c.default,{tip:s.default.createElement(d.default,{type:"text",dirty:l,__source:{fileName:r,lineNumber:31}}),at:"top",focusOnly:!0,__source:{fileName:r,lineNumber:30}},s.default.createElement("input",(0,n.default)({type:b,className:(0,u.editClass)(l,a)},p,v,j,{__source:{fileName:r,lineNumber:35}}))),f&&s.default.createElement("span",{className:"invalid diag",__source:{fileName:r,lineNumber:43}},f))}},"./js/app/components/InputMulti.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/extends.js")),r=a(l("../node_modules/babel-runtime/helpers/objectWithoutProperties.js")),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/InputMulti.jsx",i=a(l("../node_modules/react/index.js")),u=l("../node_modules/redux-form/es/index.js"),o=l("./js/lib/edit.js"),d=l("./js/lib/fields.js"),c=a(l("./js/app/components/Tooltip.jsx")),m=function(e,t,l){return function(){e.remove(t),l()}},f=function(e,t){return function(){e.push(),t()}};t.default=function(e){var t=e.componentSingle,l=e.validateSingle,a=e.normalizeSingle,p=e.meta,b=p.dirty,_=p.invalid,N=p.submitting,h=p.error,j=e.fields,v=e.table,y=e.eId,g=e.valType,E=(e.nameC,e.reset),x=e.submitValues,k=(0,r.default)(e,["componentSingle","validateSingle","normalizeSingle","meta","fields","table","eId","valType","nameC","reset","submitValues"]),w=(0,d.makeSubmit)(b,_,N,x),S=(0,d.makeSubmitTime)(x);return i.default.createElement("div",{className:(0,o.editClass)(b,_)+" multi-field "+g,__source:{fileName:s,lineNumber:28}},j.map(function(e,r){return i.default.createElement("div",{key:e,className:"multi-content",__source:{fileName:s,lineNumber:32}},i.default.createElement(c.default,{tip:"remove entry",at:"left",__source:{fileName:s,lineNumber:36}},i.default.createElement("div",{className:"button-medium",onClick:m(j,r,S),__source:{fileName:s,lineNumber:40}},"×")),i.default.createElement(u.Field,(0,n.default)({name:e,component:t,validate:l,normalize:a,label:r,table:v,eId:y,reset:E,submitValues:w},k,{__source:{fileName:s,lineNumber:45}})))}),i.default.createElement("div",{className:"multi-content",__source:{fileName:s,lineNumber:59}},i.default.createElement(c.default,{tip:"more entries",at:"left",__source:{fileName:s,lineNumber:62}},i.default.createElement("div",{className:"button-medium",onClick:f(j,S),__source:{fileName:s,lineNumber:66}},"+"))),h&&i.default.createElement("p",{className:"invalid diag",__source:{fileName:s,lineNumber:72}},h))}},"./js/app/components/Insert.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o=l("../node_modules/react/index.js"),d=a(o),c=l("../node_modules/react-redux/es/index.js"),m=l("../node_modules/react-router/es/index.js"),f=l("./js/lib/utils.js"),p=l("./js/app/dux/tables.js"),b=function(e){function t(){var e,l,a,s;(0,r.default)(this,t);for(var u=arguments.length,o=Array(u),d=0;d<u;d++)o[d]=arguments[d];return l=a=(0,i.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(o))),a.handleInsert=function(){var e=a.props,t=e.table,l=e.masterId,n=e.linkField,r=e.dispatch,s=null==l?p.MYIDS:p.DETAILS;r((0,p.insertItem)(t,s,l,n)),a.gotoNew=!0},s=l,(0,i.default)(a,s)}return(0,u.default)(t,e),(0,s.default)(t,[{key:"gotoNewItem",value:function(){var e=this.props,t=e.tables,l=e.table;if(this.gotoNew){var a=t[l];if(null==a)return;var n=a.lastInserted;if(null!=n){this.gotoNew=!1;var r=(0,f.getUrlParts)(m.browserHistory).base;m.browserHistory.push(r+"/"+l+"/mylist/item/"+n+"/")}}}},{key:"render",value:function(){var e=this.props.thing;return d.default.createElement("span",{className:"button-large invert",onClick:this.handleInsert,__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Insert.jsx",lineNumber:32}},"New "+e)}},{key:"componentDidMount",value:function(){this.gotoNewItem()}},{key:"componentDidUpdate",value:function(){this.gotoNewItem()}}]),t}(o.Component);t.default=(0,c.connect)(p.getTables)(b)},"./js/app/components/ItemAction.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/react/index.js")),n=l("../node_modules/react-redux/es/index.js"),r=l("../node_modules/redux-form/es/index.js"),s=l("./js/lib/utils.js"),i=l("./js/lib/presentation.js"),u=l("./js/lib/fields.js"),o=l("./js/app/dux/tables.js");t.default=(0,n.connect)()((0,r.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!1,touchOnBlur:!0,touchOnChange:!1,onSubmitSuccess:u.onSubmitSuccess})(function(e){var t=e.settings,l=e.tables,n=e.table,r=e.eId,u=e.linkField,d=e.fieldFragments,c=e.handleSubmit,m=e.dispatch,f=(0,o.headEntity)(l,n,r,t),p=c((0,o.toDb)(n,r,f,m)),b=l[n].fieldSpecs[u],_=(b=void 0===b?s.emptyO:b).valType,N=(_=void 0===_?s.emptyO:_).relTable,h=N?"detail":"main";return a.default.createElement("div",{className:"item-workflow",__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemAction.jsx",lineNumber:32}},(0,i.applyEditTemplate)(t,l,n,h+"Action",N,r,d,null,p))}))},"./js/app/components/ItemContainer.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemContainer.jsx",d=l("../node_modules/react/index.js"),c=a(d),m=l("../node_modules/react-redux/es/index.js"),f=l("./js/lib/utils.js"),p=l("./js/lib/fields.js"),b=l("./js/app/dux/settings.js"),_=l("./js/app/dux/tables.js"),N=a(l("./js/app/components/ErrorBoundary.jsx")),h=a(l("./js/app/components/ItemForm.jsx")),j=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.settings,l=e.filters,a=e.tables,n=e.table,r=e.eId,s=e.masterId,i=e.linkField,u=e.isactive,d=e.startMode,m=e.fixed,b=e.border,j=a[n],v=(j=void 0===j?f.emptyO:j).entities,y=void 0===v?f.emptyO:v,g=j.entities[r],E=(g=void 0===g?f.emptyO:g).fields,x=g.values,k=g.perm,w=g.workflow;if((0,_.needValues)(y,r))return c.default.createElement("div",{__source:{fileName:o,lineNumber:35}});var S="edit-"+n+"-"+r;return c.default.createElement(N.default,{__source:{fileName:o,lineNumber:39}},c.default.createElement(h.default,{filters:l,tables:a,table:n,eId:r,masterId:s,linkField:i,alterSection:S,isactive:u,startMode:d,key:n+"-"+r,initialValues:x,perm:k,workflow:w,fields:(0,p.dealWithProvenance)(t,E),fixed:m,border:b,__source:{fileName:o,lineNumber:40}}))}},{key:"openItem",value:function(){var e=this.props,t=e.settings,l=e.tables,a=e.table,n=e.eId,r=e.inhibitFetch,s=e.dispatch,i=l[a].entities,u=void 0===i?f.emptyO:i,o=(0,_.headEntity)(l,a,n,t);!r&&(0,_.needValues)(u,n)&&s((0,_.fetchItem)(a,n,o))}},{key:"componentDidMount",value:function(){this.openItem()}},{key:"componentDidUpdate",value:function(){this.openItem()}}]),t}(d.Component);t.default=(0,m.connect)(b.getSettings)(j)},"./js/app/components/ItemDetails.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemDetails.jsx",s=a(l("../node_modules/react/index.js")),i=l("../node_modules/react-redux/es/index.js"),u=l("./js/lib/utils.js"),o=l("./js/app/dux/tables.js"),d=l("./js/app/dux/filters.js"),c=l("./js/app/dux/alter.js"),m=a(l("./js/app/components/ListGrid.jsx")),f=a(l("./js/app/components/ListPlain.jsx")),p=a(l("./js/app/components/ListFilter.jsx")),b=a(l("./js/app/components/Tooltip.jsx"));t.default=(0,i.connect)(c.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.filters,i=e.tables,_=e.table,N=e.eId,h=e.detailFragments,j=e.dispatch;if(0==h.length)return null;var v=(0,c.compileAlternatives)(l,2,1,j);return s.default.createElement("div",{className:"grid fragments",__source:{fileName:r,lineNumber:19}},h.map(function(e){var l=e.name,c=e.detailTitle,h=e.detailTable,j=e.linkField,y=e.detailItem,g=e.detailListIds,E=e.detailPerm,x=e.detailSpecs,k=g.length,w=v(l),S=w.getAlt,I=w.nextAlt,A=S(t),T=x.mode,C=x.expand,O=x.border,M=x.filtered,D=x.fixed,F=(0,n.default)(y,2),P=F[0],R=F[1],L=(0,d.makeTag)(o.DETAILS,N,j),U=_+"-"+l+"-"+N;return s.default.createElement("div",{key:l,className:"grid-row",__source:{fileName:r,lineNumber:32}},C?null:s.default.createElement(b.default,{tip:(0==A?"show":"hide")+" detail records",at:"left",__source:{fileName:r,lineNumber:35}},s.default.createElement("div",{className:"link detail-control",onClick:I,__source:{fileName:r,lineNumber:39}},s.default.createElement("span",{className:"button-small fa fa-angle-"+(0===A?"down":"up"),__source:{fileName:r,lineNumber:43}}),0===A?k+" "+(1===k?P:R):u.emptyS)),s.default.createElement("div",{className:"detail-body",__source:{fileName:r,lineNumber:53}},1===A?M?s.default.createElement(p.default,{filters:a,tables:i,table:h,listIds:g,perm:E,select:o.DETAILS,mode:T,compact:!0,title:c,gridTag:U,filterTag:L,masterId:N,linkField:j,expand:C,border:O,fixed:D,__source:{fileName:r,lineNumber:57}}):"list"===T?s.default.createElement(f.default,{alterSection:"list-"+h+"-"+o.DETAILS,filters:a,tables:i,table:h,listIds:g,perm:E,select:o.DETAILS,title:c,masterId:N,linkField:j,expand:C,border:O,fixed:D,__source:{fileName:r,lineNumber:76}}):"grid"===T?s.default.createElement(m.default,{alterSection:"list-"+h+"-"+o.DETAILS,filters:a,tables:i,table:h,listIds:g,perm:E,select:o.DETAILS,gridTag:U,masterId:N,linkField:j,fixed:D,__source:{fileName:r,lineNumber:92}}):s.default.createElement("span",{__source:{fileName:r,lineNumber:105}},'unknown display mode "'+T+'" for '+R):null))}))})},"./js/app/components/ItemEdit.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/typeof.js")),r=a(l("../node_modules/babel-runtime/helpers/objectWithoutProperties.js")),s=a(l("../node_modules/babel-runtime/helpers/extends.js")),i="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemEdit.jsx",u=a(l("../node_modules/react/index.js")),o=l("../node_modules/react-redux/es/index.js"),d=l("../node_modules/redux-form/es/index.js"),c=l("./js/lib/utils.js"),m=l("./js/lib/presentation.js"),f=l("./js/lib/fields.js"),p=l("./js/app/dux/tables.js"),b=a(l("./js/app/components/ErrorBoundary.jsx")),_=a(l("./js/app/components/FieldRead.jsx")),N=a(l("./js/app/components/FieldEdit.jsx")),h=a(l("./js/app/components/EditControl.jsx"));t.default=(0,o.connect)()((0,d.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!1,touchOnBlur:!0,touchOnChange:!1,onSubmitSuccess:f.onSubmitSuccess})(function(e){var t=e.settings,l=e.tables,a=e.table,o=e.eId,d=e.linkField,j=e.dirty,v=e.invalid,y=e.submitting,g=e.reset,E=e.error,x=e.fieldFragments,k=e.handleSubmit,w=e.nextAlt,S=e.dispatch,I=(0,p.headEntity)(l,a,o,t),A=k((0,p.toDb)(a,o,I,S)),T={form:a+"-"+o,dirty:j,invalid:v,submitting:y,reset:g,error:E,nextAlt:w,handleSubmit:A},C=u.default.createElement(h.default,(0,s.default)({},T,{__source:{fileName:i,lineNumber:33}})),O=l[a].fieldSpecs[d],M=(O=void 0===O?c.emptyO:O).valType,D=(M=void 0===M?c.emptyO:M).relTable,F=D?"detail":"main";return(0,m.applyEditTemplate)(t,l,a,F+"Edit",D,o,x,C,A)||u.default.createElement("div",{__source:{fileName:i,lineNumber:45}},u.default.createElement("form",{__source:{fileName:i,lineNumber:46}},C,u.default.createElement("div",{className:"grid fragments",__source:{fileName:i,lineNumber:48}},x.map(function(e){var t=e.field,a=e.label,d=e.valType,c=e.fragment,m=c.editable,p=c.table,h=c.myValues,j=(0,r.default)(c,["editable","table","myValues"]),v=m&&("object"!=(void 0===d?"undefined":(0,n.default)(d))||!d.fixed);return u.default.createElement(b.default,{key:t,__source:{fileName:i,lineNumber:55}},(0,f.itemEditField)(t,a,v?u.default.createElement(N.default,(0,s.default)({field:t,tables:l,table:p,eId:o,submitValues:A,reset:g},j,{__source:{fileName:i,lineNumber:61}})):u.default.createElement(_.default,{field:t,tables:l,table:p,eId:o,myValues:h,__source:{fileName:i,lineNumber:70}}),v))}))))}))},"./js/app/components/ItemForm.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemForm.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-redux/es/index.js"),i=l("./js/lib/utils.js"),u=l("./js/lib/handle.js"),o=l("./js/lib/fields.js"),d=l("./js/app/dux/tables.js"),c=l("./js/app/dux/alter.js"),m=l("./js/app/dux/settings.js"),f=a(l("./js/app/components/ItemAction.jsx")),p=a(l("./js/app/components/ItemEdit.jsx")),b=a(l("./js/app/components/ItemRead.jsx")),_=a(l("./js/app/components/ItemDetails.jsx")),N=a(l("./js/app/components/EditDelete.jsx")),h=a(l("./js/app/components/Tooltip.jsx")),j=(0,i.combineSelectors)(m.getSettings,c.getAltSection);t.default=(0,s.connect)(j)(function(e){var t=e.settings,l=e.alter,a=e.alterSection,s=e.filters,m=e.tables,j=e.table,v=e.eId,y=e.masterId,g=e.linkField,E=e.isactive,x=e.startMode,k=e.fixed,w=e.border,S=e.initialValues,I=e.fields,A=e.perm,T=e.workflow,C=e.dispatch,O=e.fieldFragments,M=e.detailFragments;null==O&&(O=(0,o.makeFields)(e)),null==M&&(M=(0,o.makeDetails)(e));var D=(0,o.someEditable)(I,A,T),F=(0,c.compileAlternatives)(a,2,x,C)("edit"),P=F.getAlt,R=F.nextAlt,L=P(l),U=null==w?i.emptyS:D&&1===L?null==w.edit||w.edit?i.emptyS:"noBorder":null==w.read||w.read?i.emptyS:"noBorder",W=D&&1===L?"edit":i.emptyS,V=(0,d.headEntity)(m,j,v,t);return r.default.createElement("div",{className:"itemRecord "+U+" "+W+" "+(E?"isactive":i.emptyS),__source:{fileName:n,lineNumber:58}},D&&1===L?r.default.createElement("div",{__source:{fileName:n,lineNumber:61}},r.default.createElement(N.default,{perm:A,fixed:k,button:"button-medium",onClick:(0,u.handle)(C,d.delItem,j,v,V),__source:{fileName:n,lineNumber:62}}),r.default.createElement(p.default,{settings:t,tables:m,table:j,eId:v,nextAlt:R,form:j+"-"+v,initialValues:S,perm:A,masterId:y,linkField:g,fieldFragments:O,__source:{fileName:n,lineNumber:68}})):r.default.createElement("div",{__source:{fileName:n,lineNumber:82}},D?r.default.createElement(h.default,{tip:"open an edit form for this record",at:"right",__source:{fileName:n,lineNumber:85}},r.default.createElement("span",{className:"button-medium fa fa-pencil",onClick:R,__source:{fileName:n,lineNumber:89}})):null,r.default.createElement(N.default,{perm:A,fixed:k,button:"button-medium",onClick:(0,u.handle)(C,d.delItem,j,v,V),__source:{fileName:n,lineNumber:96}}),r.default.createElement(b.default,{settings:t,tables:m,table:j,eId:v,masterId:y,linkField:g,fieldFragments:O,__source:{fileName:n,lineNumber:102}})),r.default.createElement(f.default,{settings:t,tables:m,table:j,eId:v,form:j+"-"+v,initialValues:S,linkField:g,fieldFragments:O,__source:{fileName:n,lineNumber:113}}),r.default.createElement(_.default,{alterSection:"list-"+j+"-"+d.DETAILS,detailFragments:M,filters:s,tables:m,table:j,eId:v,__source:{fileName:n,lineNumber:123}}))})},"./js/app/components/ItemRead.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemRead.jsx",r=a(l("../node_modules/react/index.js")),s=l("./js/lib/utils.js"),i=l("./js/lib/presentation.js"),u=l("./js/lib/fields.js"),o=a(l("./js/app/components/FieldRead.jsx"));t.default=function(e){var t=e.settings,l=e.tables,a=e.table,d=e.eId,c=e.fieldFragments,m=e.linkField,f=l[a],p=f.fieldSpecs[m],b=(p=void 0===p?s.emptyO:p).valType,_=(b=void 0===b?s.emptyO:b).relTable,N=f.entities[d].workflow,h=_?"detail":"main";return(0,i.applyTemplate)(t,l,a,h,_,(0,u.toFieldInfo)(d,c),N)||r.default.createElement("div",{__source:{fileName:n,lineNumber:31}},r.default.createElement("div",{className:"grid fragments",__source:{fileName:n,lineNumber:32}},c.map(function(e){var t=e.field,a=e.label,s=e.fragment,i=s.table,c=s.myValues;return(0,u.itemReadField)(t,a,r.default.createElement(o.default,{field:t,tables:l,table:i,eId:d,myValues:c,__source:{fileName:n,lineNumber:40}}),t)})))}},"./js/app/components/ItemRow.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ItemRow.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-redux/es/index.js"),i=l("./js/lib/memo.js"),u=l("./js/lib/utils.js"),o=l("./js/lib/fields.js"),d=l("./js/app/dux/forms.js"),c=a(l("./js/app/components/EditStatus.jsx")),m=a(l("./js/app/components/FieldRead.jsx")),f=a(l("./js/app/components/ItemForm.jsx")),p=a(l("./js/app/components/Tooltip.jsx")),b=function(e,t,l){return t.map(function(t,a){var s=t.field,i=t.fragment,o=i.editable,d=i.table,c=i.myValues,f=l[a];return r.default.createElement("div",{className:"grid-cell valueColGrid "+(o?"edit":u.emptyS),style:f,key:s,__source:{fileName:n,lineNumber:21}},r.default.createElement(m.default,{field:s,tables:e,table:d,myValues:c,__source:{fileName:n,lineNumber:26}}))})},_=function(e,t,l,a,s){return l.map(function(e,t){var l=e.name,i=e.detailListIds,u=a[s+t],o=i.length;return r.default.createElement("div",{key:l,className:"grid-cell value-col-grid",style:u,__source:{fileName:n,lineNumber:42}},o)})},N=(0,i.memoize)(function(e,t,l,a,s){return a?r.default.createElement(p.default,{tip:(s?"show":"close")+" details of this record",at:"left",__source:{fileName:n,lineNumber:54}},r.default.createElement("span",{className:"button-small fa fa-angle-"+(s?"down":"up"),onClick:e,__source:{fileName:n,lineNumber:58}})):null});t.default=(0,s.connect)(d.getForms)(function(e){var t=e.alt,l=e.nextAlt,a=e.filters,s=e.tables,i=e.form,d=e.table,m=e.eId,p=e.initialValues,h=e.perm,j=e.workflow,v=e.masterId,y=e.linkField,g=e.isactive,E=e.fixed,x=e.fields,k=e.widthStyles,w=(0,o.makeFields)({tables:s,table:d,eId:m,initialValues:p,perm:h,fields:x}),S=(0,o.makeDetails)({tables:s,table:d,eId:m}),I=h.update,A=w.length,T=d+"-"+m,C=i.has(T),O="edit-"+d+"-"+m;return r.default.createElement("div",{className:g?"isactive":u.emptyS,__source:{fileName:n,lineNumber:85}},0===t?r.default.createElement("div",{__source:{fileName:n,lineNumber:88}},r.default.createElement("div",{className:"grid-row",__source:{fileName:n,lineNumber:89}},r.default.createElement("div",{className:"grid-status-cell",__source:{fileName:n,lineNumber:90}},N(l,d,m,I,!0),C?r.default.createElement(c.default,{form:d+"-"+m,active:!1,__source:{fileName:n,lineNumber:92}}):null),b(s,w,k),_(0,0,S,k,A))):r.default.createElement("div",{__source:{fileName:n,lineNumber:98}},r.default.createElement("div",{className:"grid-status-cell",__source:{fileName:n,lineNumber:99}},N(l,d,m,I,!1)),r.default.createElement(f.default,{filters:a,tables:s,table:d,eId:m,masterId:v,linkField:y,alterSection:O,isactive:g,startMode:0,initialValues:p,perm:h,workflow:j,fields:x,fieldFragments:w,detailFragments:S,fixed:E,__source:{fileName:n,lineNumber:102}})))})},"./js/app/components/ListContainer.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ListContainer.jsx",d=l("../node_modules/react/index.js"),c=a(d),m=l("../node_modules/react-redux/es/index.js"),f=l("./js/lib/utils.js"),p=l("./js/app/dux/workflow.js"),b=l("./js/app/dux/tables.js"),_=l("./js/app/dux/filters.js"),N=a(l("./js/app/components/ErrorBoundary.jsx")),h=a(l("./js/app/components/ListGrid.jsx")),j=a(l("./js/app/components/ListPlain.jsx")),v=a(l("./js/app/components/ListFilter.jsx")),y=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.filters,l=e.tables,a=e.table,n=e.eId,r=e.select,s=e.mode,i=e.filtered,u="grid"===s;if((0,b.needTables)(l,[[a,r,u]].concat(p.loadExtra[a]||f.emptyA)))return c.default.createElement("div",{__source:{fileName:o,lineNumber:19}});var d=l[a],m=d.title,y=d.item,g=d.perm,E=d.myIds,x=d.allIds,k=y[1],w=r===b.MYIDS?E:x,S=(0,_.makeTag)(r,null,null);return c.default.createElement(N.default,{__source:{fileName:o,lineNumber:26}},i?c.default.createElement(v.default,{filters:t,tables:l,table:a,navItem:n,listIds:w,perm:g,select:r,mode:s,title:m,filterTag:S,gridTag:a,topLevel:!0,__source:{fileName:o,lineNumber:29}}):"list"===s?c.default.createElement(j.default,{alterSection:"list-"+a+"-"+r,filters:t,tables:l,table:a,navItem:n,listIds:w,select:r,perm:g,title:m,__source:{fileName:o,lineNumber:44}}):"grid"===s?c.default.createElement(h.default,{alterSection:"list-"+a+"-"+r,filters:t,tables:l,table:a,navItem:n,listIds:w,select:r,perm:g,gridTag:a,__source:{fileName:o,lineNumber:56}}):c.default.createElement("span",{__source:{fileName:o,lineNumber:67}},'unknown display mode "'+s+'" for '+k))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.tables,l=e.table,a=e.select,n=e.mode,r=e.dispatch,s="grid"===n;(0,b.fetchTables)(t,[[l,a,s]].concat(p.loadExtra[l]||f.emptyA),r)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.tables,l=e.table,a=e.select,n=e.mode,r=e.dispatch,s="grid"===n;(0,b.fetchTables)(t,[[l,a,s]].concat(p.loadExtra[l]||f.emptyA),r)}}]),t}(d.Component),g=(0,f.combineSelectors)(b.getTables,_.getFilters);t.default=(0,m.connect)(g)((0,f.withParams)(y))},"./js/app/components/ListFilter.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ListFilter.jsx",d=l("../node_modules/react/index.js"),c=a(d),m=l("../node_modules/react-redux/es/index.js"),f=l("./js/lib/utils.js"),p=l("./js/lib/handle.js"),b=l("./js/app/dux/filters.js"),_=l("./js/app/dux/tables.js"),N=a(l("./js/app/components/ListPlain.jsx")),h=a(l("./js/app/components/ListGrid.jsx")),j=a(l("./js/app/components/Filter.jsx")),v=a(l("./js/app/components/OpenCloseAll.jsx")),y=a(l("./js/app/components/EditInsert.jsx")),g=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.tables,l=e.table,a=e.filterTag;(0,e.dispatch)((0,b.initFiltering)(t,l,a))}},{key:"componentWillReceiveProps",value:function(e){var t=e.tables,l=e.table,a=e.filterTag,n=e.filters[l],r=(n=void 0===n?f.emptyO:n)[a],s=e.dispatch,i=this.props,u=i.table,o=i.filterTag;u===l&&o===a||null!=r||s((0,b.initFiltering)(t,l,a))}},{key:"render",value:function(){var e=this.props,t=e.tables,l=e.filters,a=e.table,n=e.navItem,r=e.perm,s=e.select,i=e.masterId,u=e.linkField,d=e.expand,m=e.border,g=e.fixed,E=e.listIds,x=e.mode,k=e.compact,w=e.title,S=e.filterTag,I=e.gridTag,A=e.topLevel,T=e.dispatch,C=(0,b.computeFiltering)(t,l,a,S,E),O=C.filteredIds,M=C.filteredAmountOthers,D=C.amounts;if(null==O)return c.default.createElement("div",{__source:{fileName:o,lineNumber:57}});var F=k?"compact":A?"outer":f.emptyS,P=t[a].item,R=P[1],L="list-"+a+"-"+s;return c.default.createElement("div",{className:"list-filter "+F,__source:{fileName:o,lineNumber:67}},s===_.DETAILS?c.default.createElement("div",{__source:{fileName:o,lineNumber:70}},c.default.createElement(y.default,{perm:r,select:s,fixed:g,item:P,button:"button-medium",onInsert:(0,p.handle)(T,_.insertItem,a,s,i,u),__source:{fileName:o,lineNumber:71}}),c.default.createElement(v.default,{table:a,listIds:E,item:P,button:"button-medium",alterSection:L,nAlts:2,initial:0,openAll:!0,expand:d,__source:{fileName:o,lineNumber:79}})):null,c.default.createElement("div",{className:"filters "+F,__source:{fileName:o,lineNumber:93}},k?null:c.default.createElement("p",{__source:{fileName:o,lineNumber:97}},"Total ",c.default.createElement("span",{className:"good-o",__source:{fileName:o,lineNumber:97}},E.length)),c.default.createElement(j.default,{filters:l,tables:t,table:a,filterTag:S,listIds:E,filteredAmount:O.length,filteredAmountOthers:M,amounts:D,compact:k,__source:{fileName:o,lineNumber:99}})),c.default.createElement("div",{className:"list "+F,__source:{fileName:o,lineNumber:111}},"list"===x?c.default.createElement(N.default,{alterSection:L,filtered:!0,filters:l,tables:t,table:a,navItem:n,listIds:O,perm:r,select:s,title:w,masterId:i,linkField:u,expand:d,border:m,fixed:g,__source:{fileName:o,lineNumber:114}}):"grid"===x?c.default.createElement(h.default,{alterSection:L,filtered:!0,filters:l,tables:t,table:a,navItem:n,listIds:O,perm:r,select:s,gridTag:I,masterId:i,linkField:u,fixed:g,__source:{fileName:o,lineNumber:132}}):c.default.createElement("span",{__source:{fileName:o,lineNumber:147}},'unknown display mode "'+x+'" for '+R)))}}]),t}(d.Component);t.default=(0,m.connect)()(g)},"./js/app/components/ListGrid.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/get-iterator.js")),r=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ListGrid.jsx",i=a(l("../node_modules/react/index.js")),u=l("../node_modules/react-redux/es/index.js"),o=l("./js/lib/utils.js"),d=l("./js/lib/handle.js"),c=l("./js/app/dux/settings.js"),m=l("./js/app/dux/alter.js"),f=l("./js/app/dux/grid.js"),p=l("./js/app/dux/tables.js"),b=l("./js/app/dux/workflow.js"),_=l("./js/lib/fields.js"),N=a(l("./js/app/components/ItemRow.jsx")),h=a(l("./js/app/components/EditInsert.jsx")),j=a(l("./js/app/components/OpenCloseAll.jsx")),v=a(l("./js/app/components/Tooltip.jsx")),y=(0,o.combineSelectors)(c.getSettings,f.getGrid,m.getAltSection);t.default=(0,u.connect)(y)(function(e){var t=e.alter,l=e.alterSection,a=e.filtered,u=e.settings,c=e.filters,y=e.tables,g=e.table,E=e.listIds,x=e.select,k=e.perm,w=e.masterId,S=e.linkField,I=e.fixed,A=e.grid,T=e.gridTag,C=e.dispatch,O=A[T],M=void 0===O?o.emptyA:O,D=y[g],F=D.fields,P=D.fieldOrder,R=D.fieldSpecs,L=D.item,U=D.detailOrder,W=D.entities,V=(0,_.dealWithProvenance)(u,F),$=P.filter(function(e){return V[e]}),z=$.length,H=null!=U?U.length:0,B=90/z+"%",Y=$.map(function(e){var t=R[e].grid;if(null==t)return{width:B,shrink:0,grow:1};var l=t.width,a=t.grow,n=t.shrink;return{width:null==l?B:l,shrink:null==n?0:n,grow:null==a?0:a}}).concat(new Array(H).fill({width:B,shrink:0,grow:.3})).map(function(e){var t=e.width;return{flex:e.grow+" "+e.shrink+" "+t,overflow:"auto"}}),G=(0,f.compileSortedData)(y,g,E,M,u),K=(0,m.compileAlternatives)(l,2,0,C),q=(0,b.compileActive)(y,g),X=[],J=!0,Z=!1,Q=void 0;try{for(var ee,te=(0,n.default)(G);!(J=(ee=te.next()).done);J=!0){var le=ee.value,ae=W[le],ne=ae.values,re=ae.perm,se=ae.workflow,ie=K(le),ue=ie.getAlt,oe=ie.nextAlt,de=ue(t),ce=null!=q&&q.has(le);X.push(i.default.createElement(N.default,{key:g+"-"+le,alt:de,nextAlt:oe,filters:c,tables:y,table:g,eId:le,masterId:w,linkField:S,isactive:ce,initialValues:ne,perm:re,workflow:se,fields:V,widthStyles:Y,fixed:I,__source:{fileName:s,lineNumber:72}}))}}catch(e){Z=!0,Q=e}finally{try{!J&&te.return&&te.return()}finally{if(Z)throw Q}}return i.default.createElement("div",{__source:{fileName:s,lineNumber:93}},a&&x===p.DETAILS?null:i.default.createElement("div",{__source:{fileName:s,lineNumber:96}},i.default.createElement(h.default,{perm:k,select:x,fixed:I,item:L,button:"button-medium",onInsert:(0,d.handle)(C,p.insertItem,g,x,w,S),__source:{fileName:s,lineNumber:97}}),i.default.createElement(j.default,{table:g,listIds:E,item:L,button:"button-medium",alterSection:l,nAlts:2,initial:0,openAll:x==p.DETAILS,__source:{fileName:s,lineNumber:105}})),0!==M.length?i.default.createElement("p",{className:"sortspecs",__source:{fileName:s,lineNumber:120}},"Sorted: ",M.map(function(e){var t=(0,r.default)(e,2),l=t[0],a=t[1];return i.default.createElement("span",{className:"sortcol",key:l,__source:{fileName:s,lineNumber:124}},i.default.createElement("span",{__source:{fileName:s,lineNumber:125}},l),i.default.createElement("span",{className:"fa fa-arrow"+(-1===a?"down":"up"),__source:{fileName:s,lineNumber:126}}))}),i.default.createElement(v.default,{tip:"remove all sort options",at:"right",__source:{fileName:s,lineNumber:130}},i.default.createElement("span",{className:"fa fa-close button-small",onClick:(0,d.handle)(C,f.resetSort,T),__source:{fileName:s,lineNumber:134}})," ")):null,i.default.createElement("div",{className:"grid",__source:{fileName:s,lineNumber:142}},i.default.createElement("div",{className:"grid-head",__source:{fileName:s,lineNumber:143}},i.default.createElement("div",{className:"grid-status-cell",__source:{fileName:s,lineNumber:144}}),$.filter(function(e){return e!==S}).map(function(e,t){var l=Y[t],a=M.find(function(t){return t[0]===e}),n=a?a[1]:0;return i.default.createElement("div",{className:"grid-head-cell label-col-grid",key:e,style:l,__source:{fileName:s,lineNumber:151}},n?i.default.createElement(v.default,{tip:"remove column from sort options",at:"top",__source:{fileName:s,lineNumber:158}},i.default.createElement("span",{className:"sorted button-small",onClick:(0,d.handle)(C,f.delColumn,T,e),__source:{fileName:s,lineNumber:162}},e)):i.default.createElement(v.default,{tip:"sort on this column",at:"top",__source:{fileName:s,lineNumber:167}},i.default.createElement("span",{className:"unsorted button-small",onClick:(0,d.handle)(C,f.addColumn,T,e,1),__source:{fileName:s,lineNumber:171}},e)),n?i.default.createElement(v.default,{tip:"change sort direction",at:"top",__source:{fileName:s,lineNumber:179}},i.default.createElement("span",{className:"sorted button-small fa fa-arrow-"+(1===n?"up":"down"),onClick:(0,d.handle)(C,f.turnColumn,T,e),__source:{fileName:s,lineNumber:183}})):null)}),(U||o.emptyA).map(function(e,t){var l=Y[t];return i.default.createElement("div",{className:"grid-head-cell label-col-grid",key:e,style:l,__source:{fileName:s,lineNumber:198}},e)})),X))})},"./js/app/components/ListPlain.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/extends.js")),r=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),s=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),i=a(l("../node_modules/babel-runtime/helpers/createClass.js")),u=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),o=a(l("../node_modules/babel-runtime/helpers/inherits.js")),d="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/ListPlain.jsx",c=l("../node_modules/react/index.js"),m=a(c),f=l("../node_modules/react-redux/es/index.js"),p=l("../node_modules/react-router/es/index.js"),b=l("./js/lib/memo.js"),_=l("./js/lib/utils.js"),N=l("./js/lib/fields.js"),h=l("./js/lib/presentation.js"),j=l("./js/app/dux/tables.js"),v=l("./js/app/dux/alter.js"),y=l("./js/app/dux/workflow.js"),g=l("./js/app/dux/settings.js"),E=a(l("./js/app/components/ErrorBoundary.jsx")),x=a(l("./js/app/components/ItemContainer.jsx")),k=a(l("./js/app/components/EditStatus.jsx")),w=a(l("./js/app/components/EditInsert.jsx")),S=a(l("./js/app/components/OpenCloseAll.jsx")),I=0,A=2,T=function(e){function t(){var e,l,a,n;(0,s.default)(this,t);for(var i=arguments.length,o=Array(i),d=0;d<i;d++)o[d]=arguments[d];return l=a=(0,u.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(o))),a.handleInsert=function(){var e=a.props,t=e.table,l=e.select,n=e.masterId,r=e.linkField;(0,e.dispatch)((0,j.insertItem)(t,l,n,r)),a.gotoNew=!0},a.gotoItem=function(e){var t=a.props,l=t.table,n=t.alterSection,r=t.dispatch;(0,(0,v.compileAlternatives)(n,A,I,r)(e).putAlt)((I+1)%A),(0,(0,v.compileAlternatives)("edit-"+l+"-"+e,A,I,r)("edit").putAlt)((I+1)%A)},a.scroll=function(e){null!=e&&e.scrollIntoView()},a.showHide=(0,b.memoize)(function(e,t,l,a,n){return function(){if(t!==j.DETAILS){var r=(0,_.getUrlParts)(p.browserHistory),s=r.base,i=r.controller,u=r.eId,o=s+"/"+e+"/"+i;a?u!==l&&p.browserHistory.push(o+"/item/"+l+"/"):(u!==_.emptyS&&p.browserHistory.push(o+"/"),n())}else n()}}),n=l,(0,u.default)(a,n)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this,t=this.props,l=t.settings,a=t.alter,r=t.alterSection,s=t.filtered,i=t.filters,u=t.tables,o=t.table,c=t.select,f=t.masterId,p=t.linkField,b=t.fixed,g=t.listIds,T=t.expand,C=t.border,O=t.perm,M=t.dispatch,D=u[o],F=D.item,P=D.entities,R=(0,v.compileAlternatives)(r,A,I,M),L=(0,y.compileActive)(u,o),U=null;if(null!=p){var W=u[o].fieldSpecs[p],V=(W=void 0===W?_.emptyO:W).valType;U=(V=void 0===V?_.emptyO:V).relTable}var $=null==U?0:(0,h.editMode)(u,o,"detail",U);return m.default.createElement("div",{className:"list-plain",__source:{fileName:d,lineNumber:78}},s&&c===j.DETAILS?null:m.default.createElement("div",{__source:{fileName:d,lineNumber:81}},m.default.createElement(w.default,{perm:O,select:c,fixed:b,item:F,button:"button-medium",onInsert:this.handleInsert,__source:{fileName:d,lineNumber:82}}),m.default.createElement(S.default,{table:o,listIds:g,item:F,button:"button-medium",alterSection:r,nAlts:A,initial:I,openAll:c==j.DETAILS,expand:T,__source:{fileName:d,lineNumber:90}})),g.map(function(t){var r=P[t],s=r.fields,h=r.perm,v=r.workflow,y=r.values,g=(0,j.headEntity)(u,o,t,l),w=o+"-"+t,S=!(0,j.needValues)(P,t),A=R(t),O=A.getAlt,M=A.nextAlt,D=O(a)!==I,F=D?{ref:e.scroll}:_.emptyO,U=S&&(0,N.someEditable)(s,h,v),W=null!=L&&L.has(t),V=0===$?$:$(y);return m.default.createElement("div",{key:t,className:W?"isactive":_.emptyS,__source:{fileName:d,lineNumber:119}},D?m.default.createElement("div",(0,n.default)({},F,{__source:{fileName:d,lineNumber:122}}),T?null:m.default.createElement("span",{className:"link head",onClick:e.showHide(o,c,t,!1,M),__source:{fileName:d,lineNumber:125}},m.default.createElement("span",{className:"button-small fa fa-angle-up",__source:{fileName:d,lineNumber:126}})),m.default.createElement(E.default,{__source:{fileName:d,lineNumber:130}},m.default.createElement(x.default,{filters:i,tables:u,table:o,eId:t,masterId:f,linkField:p,isactive:W,startMode:V,fixed:b,inhibitFetch:T,border:C,__source:{fileName:d,lineNumber:131}}))):m.default.createElement("span",{className:"item-head",__source:{fileName:d,lineNumber:146}},U?m.default.createElement(k.default,{form:w,active:D,__source:{fileName:d,lineNumber:149}}):m.default.createElement("span",{__source:{fileName:d,lineNumber:150}},m.default.createElement("span",{className:"fa",__source:{fileName:d,lineNumber:151}})," "),m.default.createElement("span",{className:"link head",onClick:e.showHide(o,c,t,!0,M),__source:{fileName:d,lineNumber:155}},m.default.createElement("span",{className:"button-small fa fa-angle-down",__source:{fileName:d,lineNumber:156}})," ",g)))}))}},{key:"gotoNewItem",value:function(){var e=this.props,t=e.tables,l=e.table,a=e.navItem;if(this.gotoNew){var n=t[l];if(null==n)return;var r=n.lastInserted;null!=r&&(this.gotoNew=!1,this.gotoItem(r))}else null!=a&&this.gotoItem(a)}},{key:"openAll",value:function(){var e=this.props,t=e.alter,l=e.alterSection,a=e.table,n=e.listIds,r=e.expand,s=e.dispatch;r&&(0,j.handleOpenAll)(t,l,A,I,a,n,s)()}},{key:"componentDidMount",value:function(){this.openAll(),this.gotoNewItem()}},{key:"componentDidUpdate",value:function(){this.openAll(),this.gotoNewItem()}}]),t}(c.Component),C=(0,_.combineSelectors)(g.getSettings,v.getAltSection);t.default=(0,f.connect)(C)((0,_.withParams)(T))},"./js/app/components/Login.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Login.jsx",d=l("../node_modules/react/index.js"),c=a(d),m=l("../node_modules/react-redux/es/index.js"),f=l("./js/app/dux/tables.js"),p=l("./js/app/dux/me.js"),b=a(l("./js/app/components/Tooltip.jsx")),_=function(e){function t(){return(0,r.default)(this,t),(0,i.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props.me;return c.default.createElement("span",{className:"login",__source:{fileName:o,lineNumber:13}},e.eppn?[c.default.createElement(b.default,{key:"desc",tip:"you are logged in",at:"bottom",__source:{fileName:o,lineNumber:17}},c.default.createElement("span",{className:"fa fa-user",__source:{fileName:o,lineNumber:22}}),c.default.createElement("strong",{__source:{fileName:o,lineNumber:22}},(0,f.presentUser)(e))," ",c.default.createElement("em",{__source:{fileName:o,lineNumber:23}},e.groupDesc||"not authenticated")),c.default.createElement(b.default,{key:"logout",tip:"log out of this tool",at:"bottom",__source:{fileName:o,lineNumber:25}},c.default.createElement("a",{href:"/logout",className:"control fa fa-user-times",__source:{fileName:o,lineNumber:30}})),c.default.createElement(b.default,{key:"signout",tip:"sign out from DARIAH",at:"top",__source:{fileName:o,lineNumber:35}},c.default.createElement("a",{href:"/slogout",className:"control fa fa-users",__source:{fileName:o,lineNumber:40}}))]:c.default.createElement(b.default,{tip:"click to log in",at:"bottom",__source:{fileName:o,lineNumber:46}},c.default.createElement("a",{href:"/login",className:"control",__source:{fileName:o,lineNumber:50}},c.default.createElement("strong",{className:"fa fa-user-plus",__source:{fileName:o,lineNumber:53}}),c.default.createElement("strong",{__source:{fileName:o,lineNumber:53}}," login"))))}},{key:"componentDidMount",value:function(){(0,this.props.dispatch)((0,p.fetchMe)({type:"fetchMe",contentType:"db",path:"/who/ami",desc:"me"}))}}]),t}(d.Component);t.default=(0,m.connect)(p.getMe)(_)},"./js/app/components/MarkdownArea.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/extends.js")),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/MarkdownArea.jsx",s=a(l("../node_modules/react/index.js")),i=l("../node_modules/react-redux/es/index.js"),u=a(l("../node_modules/react-markdown/src/react-markdown.js")),o=l("./js/lib/utils.js"),d=l("./js/lib/edit.js"),c=l("./js/lib/fields.js"),m=l("./js/app/dux/alter.js"),f=a(l("./js/app/components/EditHelp.jsx")),p=a(l("./js/app/components/Tooltip.jsx"));t.default=(0,i.connect)(m.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.table,i=e.eId,b=e.meta,_=b.dirty,N=b.invalid,h=b.submitting,j=b.error,v=e.input,y=v.name,g=v.value,E=e.input,x=e.rh,k=e.reset,w=e.submitValues,S=e.dispatch,I=a+"-"+i+"-"+y,A=(0,m.compileAlternatives)(l,2,1,S)(I),T=A.getAlt,C=A.nextAlt,O=T(t);return s.default.createElement("div",(0,n.default)({className:"md-field"},0==O?o.emptyO:x,{__source:{fileName:r,lineNumber:25}}),s.default.createElement(p.default,{tip:0===O?"edit text":"preview formatted text",at:"right",__source:{fileName:r,lineNumber:29}},s.default.createElement("div",{className:"button-medium field-control fa fa-"+(0===O?"pencil":"hand-o-down"),onClick:C,__source:{fileName:r,lineNumber:33}})),0===O?s.default.createElement(u.default,{className:(0,d.editClass)(_,N)+" field-content",key:"fmt",source:g,__source:{fileName:r,lineNumber:40}}):s.default.createElement("div",{key:"src",className:"field-content",__source:{fileName:r,lineNumber:45}},s.default.createElement(p.default,{tip:s.default.createElement(f.default,{dirty:_,type:"markdown",__source:{fileName:r,lineNumber:48}}),at:"top",focusOnly:!0,__source:{fileName:r,lineNumber:46}},s.default.createElement("div",{__source:{fileName:r,lineNumber:56}},s.default.createElement("textarea",(0,n.default)({className:"input "+(0,d.editClass)(_,N)},E,{wrap:"soft",onBlur:(0,c.makeSubmit)(_,N,h,w)},(0,c.makeReset)("text",k),{__source:{fileName:r,lineNumber:57}})))),j&&s.default.createElement("span",{className:"invalid diag",__source:{fileName:r,lineNumber:66}},j)))})},"./js/app/components/NavLink.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/extends.js")),r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-router/es/index.js");t.default=function(e){return r.default.createElement(s.Link,(0,n.default)({},e,{activeClassName:"active",__source:{fileName:"/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/NavLink.jsx",lineNumber:4}}))}},"./js/app/components/NotFound.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/NotFound.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/react/index.js"));t.default=function(e){var t=e.splat;return n.default.createElement("h1",{__source:{fileName:a,lineNumber:3}},"404: ",n.default.createElement("code",{__source:{fileName:a,lineNumber:3}},t)," not found on this site.")}},"./js/app/components/Notification.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Notification.jsx",d=l("../node_modules/react/index.js"),c=a(d),m=l("../node_modules/react-redux/es/index.js"),f=l("./js/lib/utils.js"),p=l("./js/app/dux/notes.js"),b=a(l("./js/app/components/Tooltip.jsx")),_=function(e){function t(e){(0,r.default)(this,t);var l=(0,i.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return l.refDom=function(e){return function(t){t&&(l.dom[e]=t)}},l.handleBox=function(){var e=l.props,t=e.show;(0,e.dispatch)((0,p.display)(!t))},l.handleHide=function(){(0,l.props.dispatch)((0,p.display)(!1))},l.handleClear=function(){(0,l.props.dispatch)((0,p.clear)())},l.dom={},l}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this,t=this.props,l=t.messages,a=t.lastNote,n=t.lastKind,r=t.busy,s=t.show,i=a>-1,u=new Array(r<0?0:r).fill(1);return c.default.createElement("div",{__source:{fileName:o,lineNumber:40}},c.default.createElement(b.default,{tip:"click circle to show/hide notifications and progress messages",at:"left",fixed:!0,classTip:"msg-spinner-tip",classArrow:"msg-spinner-arrow",__source:{fileName:o,lineNumber:41}},c.default.createElement("p",{className:"msg-spinner",__source:{fileName:o,lineNumber:48}},c.default.createElement("span",{className:i?"spin-"+n:"spin-ok",__source:{fileName:o,lineNumber:49}},u.map(function(e,t){return c.default.createElement("span",{key:t,className:"msg-dot fa fa-caret-left",__source:{fileName:o,lineNumber:52}})}),c.default.createElement("span",{className:"fa fa-"+(0===r?"circle-o":"spinner fa-spin"),onClick:this.handleBox,__source:{fileName:o,lineNumber:53}})))),s?c.default.createElement("div",{ref:this.refDom("notbox"),className:"msg-box",onClick:this.handleHide,__source:{fileName:o,lineNumber:62}},l.map(function(t,l){return c.default.createElement("p",{key:l,ref:e.refDom("m"+l),className:"msg-line "+[t.kind]+"-o "+("info"!==t.kind?"msg-high":f.emptyS),__source:{fileName:o,lineNumber:68}},t.text)}),c.default.createElement("p",{className:"msg-dismiss",__source:{fileName:o,lineNumber:75}},"(click panel to hide)"),l.length>1?c.default.createElement("p",{className:"msg-trash",__source:{fileName:o,lineNumber:78}},c.default.createElement("a",{href:"#",className:"control",onClick:this.handleClear,__source:{fileName:o,lineNumber:79}},c.default.createElement("span",{className:"control fa fa-trash",__source:{fileName:o,lineNumber:83}})," clear messages")):null):null)}},{key:"componentDidMount",value:function(){this.setView()}},{key:"componentDidUpdate",value:function(){this.setView()}},{key:"setView",value:function(){this.props.show&&this.setScroll()}},{key:"setScroll",value:function(){if(this.props.show){var e=this.props,t=e.lastMsg,l=e.lastNote;l>-1?this.dom["m"+l].scrollIntoView():t>-1&&this.dom["m"+t].scrollIntoView()}}}]),t}(d.Component);t.default=(0,m.connect)(p.getNotes)(_)},"./js/app/components/OpenCloseAll.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),r="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/OpenCloseAll.jsx",s=a(l("../node_modules/react/index.js")),i=l("../node_modules/react-redux/es/index.js"),u=l("./js/app/dux/alter.js"),o=l("./js/app/dux/tables.js"),d=a(l("./js/app/components/Tooltip.jsx"));t.default=(0,i.connect)(u.getAltSection)(function(e){var t=e.alter,l=e.alterSection,a=e.table,i=e.listIds,u=e.item,c=e.button,m=e.nAlts,f=e.initial,p=e.openAll,b=e.expand,_=e.dispatch,N=i.length>0,h=(0,n.default)(u,2),j=h[0],v=h[1],y=1===i.length?j:v,g=i.length+" "+y+" ";return[s.default.createElement("span",{key:"I",__source:{fileName:r,lineNumber:21}},g),N&&p&&!b?s.default.createElement(d.default,{key:"O",tip:"open all "+y,at:"bottom",__source:{fileName:r,lineNumber:23}},s.default.createElement("div",{className:"fa fa-angle-double-down "+c,onClick:(0,o.handleOpenAll)(t,l,m,f,a,i,_),__source:{fileName:r,lineNumber:28}})):null,N&&!b?s.default.createElement(d.default,{key:"C",tip:"close all opened "+y,at:"bottom",__source:{fileName:r,lineNumber:35}},s.default.createElement("div",{className:"fa fa-angle-double-up "+c,onClick:(0,o.handleCloseAll)(t,l,m,f,i,_),__source:{fileName:r,lineNumber:40}})):null]})},"./js/app/components/RelSelect.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/helpers/toConsumableArray.js")),r=a(l("../node_modules/babel-runtime/helpers/extends.js")),s="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/RelSelect.jsx",i=a(l("../node_modules/react/index.js")),u=l("../node_modules/react-redux/es/index.js"),o=l("./js/lib/memo.js"),d=l("./js/lib/utils.js"),c=l("./js/lib/handle.js"),m=l("./js/lib/fields.js"),f=l("./js/app/dux/settings.js"),p=l("./js/app/dux/select.js"),b=a(l("./js/app/components/Tooltip.jsx")),_=function(e){var t=e.label,l=e.attributes,a=e.selected,n=e.multiple,u=e.onHit;return i.default.createElement(b.default,{tip:a?t+" is currently selected":n?"add "+t:"select "+t,at:"bottom",__source:{fileName:s,lineNumber:15}},i.default.createElement("p",(0,r.default)({},l,{onClick:a?null:u,__source:{fileName:s,lineNumber:25}}),t))},N=function(e,t,l){return function(a){if(a.stopPropagation(),e.includes(l)){var n=e.filter(function(e){return e!==l});t(n)}}},h=function(e,t,l,a,r){return function(){if(!(null!=e[r]||l.includes(r))){var s=t?[r].concat((0,n.default)(l)):r;a(s)}}},j=(0,o.memoize)(function(e,t,l,a,r,s){return function(){if(t){if(!l.includes(a)){var i=[].concat((0,n.default)(l),[a]);r(i)}}else r(a),s((0,p.setPopUp)(e,!1))}}),v=function(e){var t=e.optionLookup,l=e.value,a=e.popUp,n=e.popUpIfEmpty,u=e.activeItems,o=e.inactive,f=e.selectTag,_=e.dispatch,N=(0,m.composeAttributes)(u,o),h=d.emptyS,j=t[l];h=void 0===j?l:j;var v=["option-head","tag"];if(l===d.emptyS){if(n)return null;h="click to enter a value",v.push("new")}var y=N(l,v.join(" ")),g=a?"up":"down";return i.default.createElement(b.default,{tip:"click here to "+(a?"hide":"show")+" the other options",at:"right",__source:{fileName:s,lineNumber:83}},i.default.createElement("span",(0,r.default)({},y,{onClick:(0,c.handle)(_,p.togglePopUp,f),__source:{fileName:s,lineNumber:87}}),h," ",i.default.createElement("span",{className:"fa fa-arrow-"+g+" "+g,__source:{fileName:s,lineNumber:93}})))},y=function(e){var t=e.selectTag,l=e.optionLookup,a=e.popUp,n=e.popUpIfEmpty,u=e.activeItems,o=e.inactive,d=e.value,f=e.onChange,_=e.dispatch,h=(0,m.composeAttributes)(u,o),j=a?"up":"down";return i.default.createElement(b.default,{tip:"click on this line to "+(a?"hide":"show")+" the remaining options",at:"top",__source:{fileName:s,lineNumber:110}},i.default.createElement("div",{className:"tags",onClick:(0,c.handle)(_,p.togglePopUp,t),__source:{fileName:s,lineNumber:114}},null!=d&&d.length?d.map(function(e){var t=l[e],a=void 0===t?e:t,n=h(e,"tag");return i.default.createElement("span",(0,r.default)({key:e},n,{__source:{fileName:s,lineNumber:125}}),i.default.createElement(b.default,{tip:"remove "+a,at:"bottom",__source:{fileName:s,lineNumber:129}},i.default.createElement("span",{className:"button-tag",onClick:N(d,f,e),__source:{fileName:s,lineNumber:133}},"×")," "),i.default.createElement("span",{__source:{fileName:s,lineNumber:138}},a))}):n?null:i.default.createElement("span",{className:"tag empty",__source:{fileName:s,lineNumber:145}},"click to enter values"),i.default.createElement("span",{className:"fa fa-arrow-"+j+" "+j,__source:{fileName:s,lineNumber:147}})))},g=function(e){var t=e.selectTag,l=e.search,a=e.dispatch,n=e.placeHolder;return i.default.createElement("span",{className:"option-type",__source:{fileName:s,lineNumber:154}},l?i.default.createElement(b.default,{tip:"clear typing",at:"bottom",__source:{fileName:s,lineNumber:157}},i.default.createElement("span",{className:"button-tag",onClick:(0,c.handle)(a,p.setSearch,t,d.emptyS),__source:{fileName:s,lineNumber:161}},"×")):i.default.createElement("span",{__source:{fileName:s,lineNumber:166}}," ")," ",i.default.createElement(b.default,{tip:n,at:"left",__source:{fileName:s,lineNumber:169}},i.default.createElement("input",{className:"typing",type:"text",placeholder:"type here ...",value:l||d.emptyS,onFocus:(0,c.handle)(a,p.setPopUp,t,!0),onChange:(0,c.handlEV)(a,p.setSearch,t),__source:{fileName:s,lineNumber:173}})))},E=function(e){var t=e.selectTag,l=e.optionLookup,a=e.options,n=e.activeItems,r=e.inactive,u=e.multiple,o=e.allowNew,c=e.value,f=e.onChange,p=e.search,N=e.dispatch,v=(p||d.emptyS).toLowerCase(),y=(0,m.composeAttributes)(n,r),g=(0,m.checkDisabled)(n,r),E=a.length>=20?"o-large":"o-small";return i.default.createElement("div",{className:"options "+E,__source:{fileName:s,lineNumber:200}},u||null==c||c==d.emptyS?null:i.default.createElement(b.default,{tip:"clear selection",at:"bottom",__source:{fileName:s,lineNumber:204}},i.default.createElement("span",{className:"button-tag tag option",onClick:j(t,u,null,null,f,N),__source:{fileName:s,lineNumber:208}},"( × )")),o&&p&&!a.some(function(e){return e.label===p})&&!c.includes(p)?i.default.createElement(b.default,{tip:"add "+p+" as a NEW option",at:"bottom",__source:{fileName:s,lineNumber:221}},i.default.createElement("span",{className:"new tag",onClick:h(l,u,c,f,p),__source:{fileName:s,lineNumber:225}},p)):null,a.map(function(e){var l=e.value,a=e.label;if(u&&c.includes(l)||null!=v&&v!==d.emptyS&&null!=a&&-1===a.toString().toLowerCase().indexOf(v)||g(l))return null;var n=u&&c.includes(l)||!u&&c===l,r=y(l,"tag option "+(n?"selected":d.emptyS));return i.default.createElement(_,{key:l,label:a,attributes:r,selected:n,multiple:u,onHit:j(t,u,c,l,f,N),__source:{fileName:s,lineNumber:242}})}))},x=(0,d.combineSelectors)(f.getSettings,p.getSelect);t.default=(0,u.connect)(x)(function(e){var t=e.settings,l=e.tables,a=e.table,n=e.eId,r=e.field,u=e.selectTag,o=e.activeItems,c=e.inactive,f=e.allowed,b=e.input,_=b.name,N=b.value,h=b.onChange,j=e.multiple,x=e.allowNew,k=e.popUpIfEmpty,w=e.select,S=e.dispatch,I=e.suppressTyping,A=e.submitValues,T=(0,m.makeSubmitTime)(A),C=function(e){h(e),T()},O=w[u],M=(O=void 0===O?d.emptyO:O).search,D=O.popUp,F=(0,p.compileOptions)(l,a,f,r,t),P=F.options,R=F.optionLookup,L=D||k&&(null==N||j&&0==N.length||!j&&!N),U=!0===x?"value":x||d.emptyS,W="filter remaining options"+(U?" or add a new "+U:d.emptyS);return i.default.createElement("div",{className:"select "+(j?"multiselect":d.emptyS),__source:{fileName:s,lineNumber:286}},j?i.default.createElement(y,{optionLookup:R,activeItems:o,inactive:c,table:a,eId:n,name:_,value:N,selectTag:u,popUp:L,popUpIfEmpty:k,dispatch:S,onChange:C,__source:{fileName:s,lineNumber:291}}):i.default.createElement(v,{optionLookup:R,activeItems:o,inactive:c,table:a,eId:n,name:_,value:N,popUp:L,popUpIfEmpty:k,selectTag:u,dispatch:S,__source:{fileName:s,lineNumber:305}}),L&&!I?i.default.createElement(g,{selectTag:u,search:M,dispatch:S,placeHolder:W,__source:{fileName:s,lineNumber:321}}):null,L?i.default.createElement(E,{selectTag:u,optionLookup:R,options:P,activeItems:o,inactive:c,multiple:j,allowNew:x,value:N,search:M,dispatch:S,onChange:C,__source:{fileName:s,lineNumber:331}}):null)})},"./js/app/components/Root.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Root.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-redux/es/index.js"),i=a(l("./js/app/dux/roots.js")),u=a(l("./js/app/components/Window.jsx"));t.default=function(e){var t=e.children;return r.default.createElement(s.Provider,{store:i.default,__source:{fileName:n,lineNumber:8}},r.default.createElement(u.default,{__source:{fileName:n,lineNumber:9}},t))}},"./js/app/components/Stat.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Stat.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/react/index.js")),r=l("./js/lib/utils.js");t.default=function(e){var t=e.subTotal,l=e.total,s=e.className;return n.default.createElement("span",{className:s,__source:{fileName:a,lineNumber:6}},null==t?r.emptyS:""+t,null==l||null==t?r.emptyS:" of ",n.default.createElement("strong",{__source:{fileName:a,lineNumber:9}},null==l?r.emptyS:""+l))}},"./js/app/components/Static.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Static.jsx",r=a(l("../node_modules/react/index.js")),s=a(l("./js/app/components/NavLink.jsx"));t.default=function(){return r.default.createElement("span",{className:"toplinks",__source:{fileName:n,lineNumber:6}},r.default.createElement(s.default,{to:"/docs/about.md",__source:{fileName:n,lineNumber:7}},"Home"),r.default.createElement(s.default,{to:"/data",__source:{fileName:n,lineNumber:8}},"Registry"),r.default.createElement("a",{href:"https://github.com/Dans-labs/dariah/wiki",target:"_blank",rel:"noopener noreferrer",__source:{fileName:n,lineNumber:9}},"Help"),r.default.createElement("a",{href:"https://github.com/Dans-labs/dariah/wiki/Help",target:"_blank",rel:"noopener noreferrer",__source:{fileName:n,lineNumber:10}},"About"),r.default.createElement("a",{href:"https://dans-labs.github.io/dariah/",target:"_blank",rel:"noopener noreferrer",__source:{fileName:n,lineNumber:11}},"Tech doc"))}},"./js/app/components/SubApp.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/SubApp.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-redux/es/index.js"),i=l("./js/lib/utils.js"),u=l("./js/app/dux/me.js"),o=a(l("./js/app/components/ErrorBoundary.jsx")),d=a(l("./js/app/components/NavLink.jsx")),c=a(l("./js/app/components/Insert.jsx")),m=a(l("./js/app/components/Tooltip.jsx")),f={public:1,auth:2,office:3,system:4,root:5},p=function(e,t){return f[e]>=f[t]},b=function(e,t){var l=t.path,a=t.name,s=t.forWhom,u=t.details;return p(e.groupRep,s)?r.default.createElement("div",{key:l,className:"section",__source:{fileName:n,lineNumber:23}},r.default.createElement(d.default,{to:l,className:"head",__source:{fileName:n,lineNumber:24}},a),r.default.createElement("div",{className:"subsection",__source:{fileName:n,lineNumber:25}},(u||i.emptyA).filter(function(t){var l=t.forWhom;return p(e.groupRep,l)}).map(function(e){var t=e.component,a=e.path,s=e.name,i=e.hint;return null==t?r.default.createElement(m.default,{key:a,tip:i,at:"right",__source:{fileName:n,lineNumber:30}},r.default.createElement(d.default,{to:l+"/"+a,__source:{fileName:n,lineNumber:35}},s)):t}))):null},_=[{path:"/data/contrib",name:"Contributions",forWhom:"public",details:[{path:"filter",name:"All items",forWhom:"public",hint:"Overview of all contributions"},{path:"mylist",name:"My items",forWhom:"auth",hint:"My contribution"},{component:r.default.createElement(c.default,{key:"newcontrib",table:"contrib",thing:"contribution",__source:{fileName:n,lineNumber:56}}),forWhom:"auth",hint:"Start here to add a contribution"}]},{path:"/data/assessment",name:"Assessments",forWhom:"auth",details:[{path:"filter",name:"All items",forWhom:"auth",hint:"overview of all assessments"},{path:"mylist",name:"My items",forWhom:"auth",hint:"Look here to see the status of your assessments"}]},{path:"/data/package",name:"Packages",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"the setup of contribution types and criteria"},{path:"grid",name:"table",forWhom:"office",hint:"the setup of contribution types and criteria"}]},{path:"/data/typeContribution",name:"Contribution types",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all contribution types"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all contribution types"}]},{path:"/data/criteria",name:"Criteria",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all criteria"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all criteria"}]},{path:"/data/score",name:"Scores",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all scores"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all scores"}]},{path:"/data/user",name:"Users",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"User management"},{path:"grid",name:"table",forWhom:"office",hint:"User management"}]},{path:"/data/country",name:"Countries",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"Country membership management"},{path:"grid",name:"table",forWhom:"office",hint:"Country membership management"}]}];t.default=(0,s.connect)(u.getMe)((0,i.withParams)(function(e){var t=e.me,l=e.table,a=e.routes,s=e.children;return r.default.createElement("div",{className:"sub-app",__source:{fileName:n,lineNumber:133}},r.default.createElement("div",{className:"subnavbar",__source:{fileName:n,lineNumber:134}},r.default.createElement(o.default,{__source:{fileName:n,lineNumber:135}},_.map(function(e){return b(t,e)}))),r.default.createElement("div",{className:"submaterial",__source:{fileName:n,lineNumber:139}},r.default.createElement(o.default,{__source:{fileName:n,lineNumber:140}},"data"===a[1].path&&1===a.length?r.default.createElement("div",{__source:{fileName:n,lineNumber:143}},"All tables"):"data"===a[1].path&&2===a.length?r.default.createElement("div",{__source:{fileName:n,lineNumber:145}},r.default.createElement("h3",{__source:{fileName:n,lineNumber:146}},"Registry"),r.default.createElement("p",{__source:{fileName:n,lineNumber:147}},"Use the side bar to navigate to a section")):"data"===a[1].path&&3===a.length?r.default.createElement("div",{__source:{fileName:n,lineNumber:150}},r.default.createElement("h3",{__source:{fileName:n,lineNumber:151}},"Registry"),r.default.createElement("h4",{__source:{fileName:n,lineNumber:152}},"Table "+l),r.default.createElement("p",{__source:{fileName:n,lineNumber:153}},"Use the side bar to navigate to a particular view on this table")):null),r.default.createElement(o.default,{__source:{fileName:n,lineNumber:158}},s)))}))},"./js/app/components/Templates.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.consolidatedTemplates=t.relatedTemplates=t.detailActionTemplates=t.detailEditTemplates=t.detailTemplates=t.mainActionTemplates=t.mainEditTemplates=t.mainTemplates=void 0;var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Templates.jsx",r=a(l("../node_modules/react/index.js")),s=l("./js/lib/utils.js"),i=l("./js/lib/fields.js"),u=l("./js/app/dux/workflow.js"),o=l("./js/app/components/Expand.jsx"),d=a(o),c=a(l("./js/app/components/Insert.jsx")),m=a(l("./js/app/components/Tooltip.jsx")),f=function(e,t,l,a){return(0,i.itemReadField)(e,t(e),l(e),a)},p=function(e,t,l,a,n){return(0,i.itemEditField)(e,t(e),l(e),a(e),n)},b=t.mainTemplates={assessment:function(e){var t=e.l,l=e.f;return r.default.createElement("div",{__source:{fileName:n,lineNumber:17}},r.default.createElement("div",{className:"grid fragments",__source:{fileName:n,lineNumber:18}},f("title",t,l),f("assessmentType",t,l),f("contrib",t,l)))}},_=t.mainEditTemplates={assessment:function(e){var t=e.l,l=e.fe,a=e.m,s=e.editButton;return r.default.createElement("div",{__source:{fileName:n,lineNumber:31}},s,r.default.createElement("div",{className:"grid fragments",__source:{fileName:n,lineNumber:33}},p("title",t,l,a),p("assessmentType",t,l,a),p("contrib",t,l,a)))}},N=t.mainActionTemplates={contrib:function(e){var t=e.v,l=e.w;return r.default.createElement("div",{__source:{fileName:n,lineNumber:46}},l("locked")?r.default.createElement("div",{className:"workflow-large invert",__source:{fileName:n,lineNumber:49}},"This contribution is locked because it is "+l("lockedReason")+"."):null,l("nAss")?null:r.default.createElement(c.default,{table:"assessment",thing:"assessment",masterId:t("_id"),linkField:"contrib",__source:{fileName:n,lineNumber:57}}))},assessment:function(e){var t=e.tables,l=e.l,a=e.e,o=e.v,c=e.fe,f=e.fs,b=e.m,_=(0,u.assessmentScore)(t,o("_id")),N=_.overall,h=_.relevantScore,j=_.relevantMax,v=_.allMax,y=_.relevantN,g=_.allN,E=g-y,x=!a("dateWithdrawn"),k=!a("submitted");return r.default.createElement("div",{__source:{fileName:n,lineNumber:73}},r.default.createElement("div",{className:"ass-score-box",__source:{fileName:n,lineNumber:74}},r.default.createElement(m.default,{tip:"overall-score of this assessment",at:"right",__source:{fileName:n,lineNumber:75}},r.default.createElement("span",{className:"ass-score",__source:{fileName:n,lineNumber:79}},N+" %")),r.default.createElement(d.default,{alterSection:"assessment{v('_id')}",alterTag:"score",iconOpen:"calculator",iconClose:"minus-circle",titleOpen:"Show derivation",titleClose:"Hide derivation",headActive:s.emptyS,headLine:s.emptyS,full:r.default.createElement("div",{className:"ass-score-deriv",__source:{fileName:n,lineNumber:93}},r.default.createElement("p",{__source:{fileName:n,lineNumber:94}},"This contribution scores "+h+" points."),r.default.createElement("p",{__source:{fileName:n,lineNumber:95}},"For this type of contribution there is a total of "+v+" points,\n                    divided over "+g+" criteria."),E?r.default.createElement("p",{__source:{fileName:n,lineNumber:99}},"However,\n                        "+E+" rule"+(1==E?" is":"s are")+"\n                        not applicable to this contribution,\n                        which leaves the total amount to\n                        "+j+" points,\n                        divided over "+y+" criteria."):s.emptyS,r.default.createElement("p",{__source:{fileName:n,lineNumber:108}},"The total score is expressed as a percentage:\n                    the fraction of "+h+" scored points with respect to \n                    "+j+" scorable points.")),__source:{fileName:n,lineNumber:83}})),r.default.createElement("div",{className:"grid fragments",__source:{fileName:n,lineNumber:116}},b("submitted")?null:p("submitted",l,c,b),(0,i.itemEditField)("submitted","Submission",r.default.createElement("span",{__source:{fileName:n,lineNumber:122}},!k&&x?l("dateWithdrawn")+": "+o("dateWithdrawn"):null,k?l("dateSubmitted")+": "+o("dateSubmitted"):null,f("submitted",a("submitted"),function(e){return r.default.createElement("span",{className:"button-large invert",onClick:e,__source:{fileName:n,lineNumber:127}},(a("submitted")?"Submit for":"Withdraw from")+" review")})),b("submitted")),a("submitted")?null:p("reviewerE",l,c,b),a("submitted")?null:p("reviewerF",l,c,b)))}};t.detailTemplates={assessment:{contrib:b.assessment},criteriaEntry:{assessment:function(e){var t=e.l,l=e.v,a=e.e,i=e.f,u=a("evidence")||a("score")?"incomplete":"complete";return r.default.createElement("div",{className:"criteriaEntryRead "+u,__source:{fileName:n,lineNumber:153}},r.default.createElement("div",{className:"criteriaEntry",__source:{fileName:n,lineNumber:154}},r.default.createElement("div",{__source:{fileName:n,lineNumber:155}},l("seq")),r.default.createElement(d.default,{alterSection:"criteriaEntry"+l("_id"),alterTag:t("remarks"),iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show criteria details",titleClose:"Hide criteria details",headActive:s.emptyS,headLine:i("criteria"),full:r.default.createElement("div",{className:"criteriaRemarks",__source:{fileName:n,lineNumber:165}},i("criteria","remarks")),className:"fat",__source:{fileName:n,lineNumber:156}}),r.default.createElement("div",{className:"slim",__source:{fileName:n,lineNumber:168}},i("score")),a("evidence")?r.default.createElement("div",{className:"xSlim",__source:{fileName:n,lineNumber:171}},r.default.createElement(m.default,{tip:"No evidence yet",at:"top",__source:{fileName:n,lineNumber:172}},r.default.createElement("span",{className:"slim fa fa-file-o tError",__source:{fileName:n,lineNumber:176}}))):r.default.createElement(o.ExpandHead,{alterSection:"criteriaEntry"+l("_id"),alterTag:t("evidence"),initAlt:1,iconOpen:"file-text",iconClose:"minus-square",titleOpen:"Show evidence",titleClose:"Hide evidence",headActive:s.emptyS,headLine:s.emptyS,className:"xSlim tGood",__source:{fileName:n,lineNumber:181}})),r.default.createElement(o.ExpandBody,{alterSection:"criteriaEntry"+l("_id"),alterTag:t("evidence"),initAlt:1,full:r.default.createElement("div",{__source:{fileName:n,lineNumber:200}},r.default.createElement("b",{__source:{fileName:n,lineNumber:201}},t("evidence")),i("evidence")),className:"evidence",__source:{fileName:n,lineNumber:195}}))}}},t.detailEditTemplates={assessment:{contrib:_.assessment},criteriaEntry:{assessment:function(e){var t=e.l,l=e.v,a=e.e,s=e.f,i=e.fe,u=e.editButton,o=a("evidence")||a("score")?"incomplete":"complete";return r.default.createElement("div",{className:"criteriaEntryEdit "+o,__source:{fileName:n,lineNumber:221}},r.default.createElement("div",{key:"H",className:"criteriaEntry",__source:{fileName:n,lineNumber:222}},u,l("seq"),r.default.createElement("div",{className:"fat",__source:{fileName:n,lineNumber:225}},r.default.createElement("div",{className:"fat",__source:{fileName:n,lineNumber:226}},s("criteria")),r.default.createElement("div",{className:"criteriaRemarks",__source:{fileName:n,lineNumber:227}},s("criteria","remarks"))),r.default.createElement("div",{className:"slim",__source:{fileName:n,lineNumber:229}},i("score",{suppressTyping:!0}))),r.default.createElement("p",{key:"E",__source:{fileName:n,lineNumber:231}},r.default.createElement("b",{__source:{fileName:n,lineNumber:233}},t("evidence"))),r.default.createElement(m.default,{tip:"Give evidence",at:"top",__source:{fileName:n,lineNumber:234}},i("evidence")))}}},t.detailActionTemplates={assessment:{contrib:N.assessment}},t.relatedTemplates={contrib:{assessment:function(e){var t=e.v,l=e.e,a=e.f,i=e.linkMe,u=t("title");return r.default.createElement("div",{__source:{fileName:n,lineNumber:257}},r.default.createElement("div",{__source:{fileName:n,lineNumber:258}},l("urlContribution")?u:r.default.createElement("a",{href:t("urlContribution"),__source:{fileName:n,lineNumber:262}},u)),r.default.createElement("div",{__source:{fileName:n,lineNumber:265}},t("vcc",null,", ")," ",t("country")," ",t("year")," ",r.default.createElement("a",{href:"mailto:"+t("contactPersonEmail"),__source:{fileName:n,lineNumber:272}},t("contactPersonName"))),r.default.createElement(d.default,{alterSection:"contribution_in_assessment{v('_id')}",alterTag:"cost",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution cost description",titleClose:"Hide contribution cost description",headActive:"Cost: "+(l("costTotal")?"Not given":t("costTotal")),headLine:s.emptyS,full:r.default.createElement("div",{__source:{fileName:n,lineNumber:285}},a("costDescription")),__source:{fileName:n,lineNumber:276}}),r.default.createElement(d.default,{alterSection:"contribution_in_assessment{v('_id')}",alterTag:"description",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution descriptions",titleClose:"Hide contribution descriptions",headActive:"Description fields",headLine:l("urlAcademic")?r.default.createElement("a",{href:t("urlAcademic"),__source:{fileName:n,lineNumber:297}},t("urlAcademic")):s.emptyS,full:r.default.createElement("div",{__source:{fileName:n,lineNumber:301}},r.default.createElement("div",{__source:{fileName:n,lineNumber:302}},a("description")),r.default.createElement("div",{__source:{fileName:n,lineNumber:303}},r.default.createElement("div",{__source:{fileName:n,lineNumber:304}},r.default.createElement("b",{__source:{fileName:n,lineNumber:304}},"Tadirah:")),r.default.createElement("div",{__source:{fileName:n,lineNumber:305}},r.default.createElement("i",{__source:{fileName:n,lineNumber:305}},"Objects")," ",a("tadirahObject")),r.default.createElement("div",{__source:{fileName:n,lineNumber:306}},r.default.createElement("i",{__source:{fileName:n,lineNumber:306}},"Activities")," ",a("tadirahActivity")),r.default.createElement("div",{__source:{fileName:n,lineNumber:307}},r.default.createElement("i",{__source:{fileName:n,lineNumber:307}},"Techniques")," ",a("tadirahTechnique")),r.default.createElement("div",{__source:{fileName:n,lineNumber:308}},r.default.createElement("b",{__source:{fileName:n,lineNumber:308}},"Disciplines:")," ",a("discipline")),r.default.createElement("div",{__source:{fileName:n,lineNumber:309}},r.default.createElement("b",{__source:{fileName:n,lineNumber:309}},"Keywords:")," ",a("keyword")))),__source:{fileName:n,lineNumber:287}}),r.default.createElement(d.default,{alterSection:"contribution_in_assessment{v('_id')}",alterTag:"provenance",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution provenance",titleClose:"Hide contribution provenance",headActive:"Provenance",headLine:s.emptyS,full:r.default.createElement("div",{__source:{fileName:n,lineNumber:324}},r.default.createElement("div",{__source:{fileName:n,lineNumber:325}},"Created ",a("dateCreated")," by ",t("creator")),r.default.createElement("div",{__source:{fileName:n,lineNumber:331}},r.default.createElement("div",{__source:{fileName:n,lineNumber:332}},r.default.createElement("b",{__source:{fileName:n,lineNumber:332}},"Modification history")),t("modified").map(function(e,t){return r.default.createElement("div",{key:t,__source:{fileName:n,lineNumber:335}},e)}))),__source:{fileName:n,lineNumber:314}}),r.default.createElement("div",{__source:{fileName:n,lineNumber:342}},r.default.createElement("a",{href:i,__source:{fileName:n,lineNumber:342}},"To the contribution record")),r.default.createElement("div",{__source:{fileName:n,lineNumber:343}},a("typeContribution")))}}},t.consolidatedTemplates={assessment:{trail:function(e){var t=e.v;return r.default.createElement("div",{__source:{fileName:n,lineNumber:354}},r.default.createElement("div",{__source:{fileName:n,lineNumber:355}},t("title")),r.default.createElement("div",{__source:{fileName:n,lineNumber:356}},t("vcc",", ")," ",t.year))}}}},"./js/app/components/Tooltip.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/keys.js")),r=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),s=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),i=a(l("../node_modules/babel-runtime/helpers/createClass.js")),u=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),o=a(l("../node_modules/babel-runtime/helpers/inherits.js")),d=a(l("../node_modules/babel-runtime/core-js/get-iterator.js")),c=a(l("../node_modules/babel-runtime/helpers/extends.js")),m="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/Tooltip.jsx",f=l("../node_modules/react/index.js"),p=a(f),b=l("../node_modules/react-redux/es/index.js"),_=l("./js/lib/utils.js"),N=l("./js/app/dux/settings.js"),h={top:"bottom",bottom:"top",left:"right",right:"left"},j={top:["left","right"],bottom:["left","right"],left:["top","bottom"],right:["top","bottom"]},v={top:function(e,t){return{left:e.left+(e.width-t.width>>1),top:e.top-t.height}},bottom:function(e,t){return{left:e.left+(e.width-t.width>>1),top:e.top+e.height}},left:function(e,t){return{left:e.left-t.width,top:e.top+(e.height-t.height>>1)}},right:function(e,t){return{left:e.left+e.width,top:e.top+(e.height-t.height>>1)}}},y={top:function(e,t,l){return l.top<0},bottom:function(e,t,l){return l.top+t.height>e.height},left:function(e,t,l){return l.left<0},right:function(e,t,l){return l.left+t.width>e.width}},g={top:function(e,t,l){l.top=0},bottom:function(e,t,l){l.top=e.height-t.height},left:function(e,t,l){l.left=0},right:function(e,t,l){l.left=e.width-t.width}},E=function(e){return function(t,l,a,n){var r=v[e](l,a),s=e,i=r;n&&y[e](t,a,r)&&(s=h[e],i=v[s](l,a));var u=!0,o=!1,m=void 0;try{for(var f,p=(0,d.default)(j[s]);!(u=(f=p.next()).done);u=!0){var b=f.value;y[b](t,a,i)&&g[b](t,a,i)}}catch(e){o=!0,m=e}finally{try{!u&&p.return&&p.return()}finally{if(o)throw m}}return(0,c.default)({at:s},i)}},x=function(e){function t(){var e,l,a,i;(0,s.default)(this,t);for(var o=arguments.length,c=Array(o),m=0;m<o;m++)c[m]=arguments[m];return l=a=(0,u.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(c))),a.storeTarget=function(e){a.target=e},a.storeTip=function(e){a.tip=e},a.storeArrow=function(e){a.arrow=e},a.handlePositioning=function(){var e=a,t=e.props,l=t.at,r=void 0===l?"top":l,s=t.fixed,i=void 0!==s&&s,u=t.settings.showTooltips,o=e.target,c=e.tip,m=e.arrow;if(u&&!i){var f=document.documentElement,p=o.getBoundingClientRect(),b=c.getBoundingClientRect(),_=m.getBoundingClientRect(),N={width:f.clientWidth,height:f.clientHeight},j=E(r)(N,p,b,!0),v=j.at,y=E(v)(N,p,_,!1),g=!0,x=!1,k=void 0;try{for(var w,S=(0,d.default)((0,n.default)(h));!(g=(w=S.next()).done);g=!0){var I=w.value;m.classList.remove("toolarrow-"+I)}}catch(e){x=!0,k=e}finally{try{!g&&S.return&&S.return()}finally{if(x)throw k}}m.classList.add("toolarrow-"+v),c.style.top=j.top+window.scrollY,c.style.left=j.left+window.scrollX,m.style.top=y.top+window.scrollY,m.style.left=y.left+window.scrollX}},i=l,(0,u.default)(a,i)}return(0,o.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.settings.showTooltips,l=e.children,a=e.tip,n=e.at,r=e.focusOnly,s=e.className,i=void 0===s?_.emptyS:s,u=e.classTip,o=void 0===u?_.emptyS:u,d=e.classArrow,c=void 0===d?_.emptyS:d;return t?[p.default.createElement("span",{key:"target",ref:this.storeTarget,className:i+" tooltipped focus "+(r?_.emptyS:"hover"),onMouseOver:this.handlePositioning,onFocus:this.handlePositioning,__source:{fileName:m,lineNumber:88}},l),p.default.createElement("span",{key:"tip",__source:{fileName:m,lineNumber:95}},p.default.createElement("span",{ref:this.storeTip,className:"tooltip "+o,__source:{fileName:m,lineNumber:98}},a),p.default.createElement("span",{ref:this.storeArrow,className:"toolarrow toolarrow-"+n+" "+c,__source:{fileName:m,lineNumber:102}}))]:l}}]),t}(f.Component);t.default=(0,b.connect)(N.getSettings)(x)},"./js/app/components/TooltipSwitch.jsx":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/components/TooltipSwitch.jsx",n=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/react/index.js")),r=l("../node_modules/react-redux/es/index.js"),s=l("./js/lib/handle.js"),i=l("./js/app/dux/settings.js");t.default=(0,r.connect)(i.getSettings)(function(e){var t=e.settings,l=e.dispatch,r=t.showTooltips,u=void 0!==r&&r;return n.default.createElement("span",{className:"tooltips-"+(u?"on":"off"),__source:{fileName:a,lineNumber:11}},n.default.createElement("input",{type:"checkbox",checked:u,onChange:(0,s.handlE)(l,i.adjust,"showTooltips",!u),__source:{fileName:a,lineNumber:12}}),"tooltips")})},"./js/app/components/Window.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(l("../node_modules/babel-runtime/core-js/object/get-prototype-of.js")),r=a(l("../node_modules/babel-runtime/helpers/classCallCheck.js")),s=a(l("../node_modules/babel-runtime/helpers/createClass.js")),i=a(l("../node_modules/babel-runtime/helpers/possibleConstructorReturn.js")),u=a(l("../node_modules/babel-runtime/helpers/inherits.js")),o=l("../node_modules/react/index.js"),d=l("../node_modules/react-redux/es/index.js"),c=a(l("../node_modules/lodash/throttle.js")),m=l("./js/app/dux/win.js"),f=function(e){function t(){var e,l,a,s;(0,r.default)(this,t);for(var u=arguments.length,o=Array(u),d=0;d<u;d++)o[d]=arguments[d];return l=a=(0,i.default)(this,(e=t.__proto__||(0,n.default)(t)).call.apply(e,[this].concat(o))),a.newWindowSize=(0,c.default)(function(){(0,a.props.dispatch)((0,m.changeWinDim)())},1e3),s=l,(0,i.default)(a,s)}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props.children;return o.Children.only(e)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.newWindowSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.newWindowSize)}}]),t}(o.Component);t.default=(0,d.connect)()(f)},"./js/app/dux/alter.js":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileAlternatives=t.getAltSection=t.setItems=t.setAlt=t.nextAlt=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/babel-runtime/core-js/get-iterator.js")),n=l("./js/lib/memo.js"),r=l("./js/lib/utils.js"),s=l("./js/lib/handle.js"),i=t.nextAlt=function(e,t,l,a){return{type:"nextAlt",alterSection:e,alterTag:t,nAlts:l,initial:a}},u=function(e,t,l){return{type:"setAlt",alterSection:e,alterTag:t,alt:l}};t.setAlt=u;t.setItems=function(e,t,l){return{type:"setItems",eIds:e,alterSection:t,alt:l}};var o={nextAlt:function(e,t){var l=t.alterSection,a=t.alterTag,n=t.initial,s=t.nAlts,i=e[l],u=(i=void 0===i?r.emptyO:i)[a],o=((void 0===u?n||0:u)+1)%s;return(0,r.updateAuto)(e,[l,a],{$set:o})},setAlt:function(e,t){var l=t.alterSection,a=t.alterTag,n=t.alt;return(0,r.updateAuto)(e,[l,a],{$set:n})},fetchItems:function(e,t){var l=t.data,n=t.eIds,s=t.alterSection,i=t.alt,u=e;if(l&&null!=n){var o=!0,d=!1,c=void 0;try{for(var m,f=(0,a.default)(n);!(o=(m=f.next()).done);o=!0){var p=m.value;u=(0,r.updateAuto)(u,[s,p],{$set:i})}}catch(e){d=!0,c=e}finally{try{!o&&f.return&&f.return()}finally{if(d)throw c}}}return u},setItems:function(e,t){var l=t.eIds,n=t.alterSection,s=t.alt,i=e;if(null!=l){var u=!0,o=!1,d=void 0;try{for(var c,m=(0,a.default)(l);!(u=(c=m.next()).done);u=!0){var f=c.value;i=(0,r.updateAuto)(i,[n,f],{$set:s})}}catch(e){o=!0,d=e}finally{try{!u&&m.return&&m.return()}finally{if(o)throw d}}}return i}};t.default=(0,r.makeReducer)(o);t.getAltSection=function(e,t){return{alter:e.alter[t.alterSection]||r.emptyO}},t.compileAlternatives=(0,n.memoize)(function(e,t,l,a){return function(n){return{getAlt:function(e){var t=e[n];return void 0===t?l||0:t},nextAlt:(0,s.handle)(a,i,e,n,t,l),initAlt:(0,s.handle)(a,u,e,n,l),setAlt:function(t){return(0,s.handle)(a,u,e,n,t)},putAlt:function(t){return a(u(e,n,t))}}}},null,{debug:"compileAlternatives"})},"./js/app/dux/docs.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.changedDoc=t.needDoc=t.getDoc=t.fetchDoc=void 0;var n=a(l("../node_modules/babel-runtime/helpers/defineProperty.js")),r=a(l("../node_modules/immutability-helper/index.js")),s=l("./js/app/dux/server.js"),i=l("./js/lib/utils.js"),u=(t.fetchDoc=function(e){var t=e.docDir,l=e.docName,a=t+"/"+l+"."+e.docExt;return(0,s.accessData)({type:"fetchDoc",contentType:"json",path:a,desc:"document "+l})},{fetchDoc:function(e,t){var l=t.path,a=t.data;return null==a?e:(0,r.default)(e,(0,n.default)({},l,{$set:a}))}});t.default=(0,i.makeReducer)(u);t.getDoc=function(e,t){return{text:e.docs[t.docDir+"/"+t.docName+"."+t.docExt]}};var o=t.needDoc=function(e){return null==e.text};t.changedDoc=function(e,t){return(0,i.propsChanged)(e,o,t,["docDir","docName","docExt"])}},"./js/app/dux/filters.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.testAllChecks=t.makeTag=t.computeFiltering=t.compileValues=t.getFilters=t.initFiltering=t.changeFacetAll=t.changeFacet=t.changeFulltext=void 0;var n=a(l("../node_modules/babel-runtime/helpers/defineProperty.js")),r=a(l("../node_modules/babel-runtime/core-js/object/values.js")),s=a(l("../node_modules/babel-runtime/core-js/array/from.js")),i=a(l("../node_modules/babel-runtime/core-js/set.js")),u=a(l("../node_modules/babel-runtime/core-js/object/entries.js")),o=a(l("../node_modules/babel-runtime/core-js/get-iterator.js")),d=a(l("../node_modules/babel-runtime/helpers/extends.js")),c=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),m=a(l("../node_modules/babel-runtime/core-js/object/keys.js")),f=a(l("../node_modules/lodash/pickby.js")),p=l("./js/lib/memo.js"),b=l("./js/lib/utils.js"),_=l("./js/app/dux/tables.js"),N=(t.changeFulltext=function(e,t,l,a){return{type:"fulltext",table:e,filterTag:t,filterId:l,data:a}},t.changeFacet=function(e,t,l,a,n){return{type:"facet",table:e,filterTag:t,filterId:l,data:[a,n]}},t.changeFacetAll=function(e,t,l,a){return{type:"facetAll",table:e,filterTag:t,filterId:l,data:a}},t.initFiltering=function(e,t,l){var a=e[t];return{type:"initFiltering",tables:e,table:t,filterTag:l,fieldIds:h(a)}},{initFiltering:function(e,t){var l=t.tables,a=t.table,n=t.filterTag,r=t.fieldIds,s=e[a],i=v(l,a,void 0===s?{}:s,n,r);return(0,b.updateAuto)(e,[a,n],{$set:i})},fulltext:function(e,t){var l=t.table,a=t.filterTag,n=t.filterId,r=t.data;return(0,b.updateAuto)(e,[l,a,n],{$set:r})},facetAll:function(e,t){var l=t.table,a=t.filterTag,n=t.filterId,r=t.data,s=e[l][a][n],i={};return(0,m.default)(s).forEach(function(e){i[e]=r}),(0,b.updateAuto)(e,[l,a,n],{$set:i})},facet:function(e,t){var l=t.table,a=t.filterTag,n=t.filterId,r=t.data,s=(0,c.default)(r,2),i=s[0],u=s[1];return(0,b.updateAuto)(e,[l,a,n,i],{$set:u})}});t.default=(0,b.makeReducer)(N);t.getFilters=function(e){return{filters:e.filters}};var h=(0,p.memoize)(function(e){if(null==e)return b.emptyO;var t=e.valueLists,l=e.fields,a=e.filterList,n=e.fieldSpecs;if(null==a)return b.emptyO;var r=a.filter(function(e){return l[e.field]}).filter(function(e){return"Fulltext"!==e.type}).map(function(e){return e.field}),s=r.filter(function(e){return null==t[e]});return(0,d.default)({},(0,f.default)(t,function(e,t){return r.includes(t)}),s.length?g(e,s,n):b.emptyO)},b.emptyO,{debug:"compileAllFieldIds"}),j=(0,p.memoize)(function(e,t,l){if(null==e)return b.emptyO;var a=e.valueLists,n=e.fields,r=e.filterList,s=e.fieldSpecs;if(null==r)return b.emptyO;var i=r.filter(function(e){return n[e.field]}).filter(function(e){return"Fulltext"!==e.type}).map(function(e){return e.field}),u=t.startsWith(_.DETAILS),o=i.filter(function(e){return null==a[e]});return u?y(e,l,i,s):(0,d.default)({},(0,f.default)(a,function(e,t){return i.includes(t)}),o.length?y(e,l,o,s):b.emptyO)},b.emptyO,{debug:"compileFieldIds"}),v=(t.compileValues=(0,p.memoize)(function(e,t,l,a,n,r){var s=e[t];if(null==s)return b.emptyA;var i=s.fieldSpecs,u=j(s,l,a)[n];return E(e,i,u,n,r)},b.emptyO,{debug:"compileValues"}),(0,p.memoize)(function(e,t,l,a,n){var r=e[t];if(null==r)return b.emptyO;var s=r.fields,i=r.filterList;if(null==i)return b.emptyO;var u=(l||b.emptyO)[a],d=void 0===u?b.emptyO:u,c={};return i.filter(function(e){return s[e.field]}).forEach(function(t,l){var a=d[l];if("Fulltext"===t.type)null==a&&(c[l]=b.emptyS);else{var s=a||b.emptyO,i={},u=t.field,f=t.relField,p=n[u];if(f){var _=r.fieldSpecs,N=E(e,_,p,u,f),h=!0,j=!1,v=void 0;try{for(var y,g=(0,o.default)((0,m.default)(N));!(h=(y=g.next()).done);h=!0){var x=y.value;i[x]=null==s[x]||s[x]}}catch(e){j=!0,v=e}finally{try{!h&&g.return&&g.return()}finally{if(j)throw v}}}else p.forEach(function(e){i[e]=null==s[e]||s[e]});i[b.emptyS]=null==s[b.emptyS]||s[b.emptyS],(0,m.default)(i).length&&(c[l]=i)}}),c},b.emptyO,{debug:"initFilterSettings"})),y=(t.computeFiltering=(0,p.memoize)(function(e,t,l,a,n){var r=e[l];if(null==r)return b.emptyO;var s=r.entities,i=r.fields,d=r.fieldSpecs,m=r.filterList;if(null==m)return{filteredIds:n};var f=t[l],p=(void 0===f?b.emptyO:f)[a];if(null==p)return b.emptyO;var _=j(r,a,n),N=m.filter(function(e){return i[e.field]}),h={},v=function(t,l){var a=p[l],n=t.field,r=t.relField,s=d[n],i="Fulltext"===t.type?w:S;h[l]=i(e,n,r,s,a)},y={};N.forEach(function(e,t){v(e,t),y[t]=[]});var g=[],E=!0,x=!1,k=void 0;try{for(var A,T=function(){var e=A.value,t=s[e],l=null,a=!0,n=!1;(0,u.default)(h).forEach(function(e){var r=(0,c.default)(e,2),s=r[0],i=r[1];n||i(t)||(a=!1,null===l?l=s:n=!0)}),n||(a?(g.push(e),N.forEach(function(t,l){y[l].push(e)})):y[l].push(e))},C=(0,o.default)(n);!(E=(A=C.next()).done);E=!0)T()}catch(e){x=!0,k=e}finally{try{!E&&C.return&&C.return()}finally{if(x)throw k}}var O={};N.forEach(function(t,l){var a=t.field,n=t.relField,r=t.type;O[l]="Fulltext"===r?null:I(e,a,n,d,_[a],y[l],s)});var M={};return(0,u.default)(y).forEach(function(e){var t=(0,c.default)(e,2),l=t[0],a=t[1];M[l]=a.length}),{filteredIds:g,filteredAmountOthers:M,amounts:O}},b.emptyO,{debug:"computeFiltering"}),(0,p.memoize)(function(e,t,l,a){var n={},r=e.entities,u=t.map(function(e){return r[e].values}),d=!0,c=!1,m=void 0;try{for(var f,p=(0,o.default)(l);!(d=(f=p.next()).done);d=!0){var b=f.value,_=a[b].multiple,N=new i.default,h=!0,j=!1,v=void 0;try{for(var y,g=(0,o.default)(u);!(h=(y=g.next()).done);h=!0){var E=y.value[b];if(null!=E)if(_){var x=!0,k=!1,w=void 0;try{for(var S,I=(0,o.default)(E);!(x=(S=I.next()).done);x=!0){var A=S.value;N.add(A)}}catch(e){k=!0,w=e}finally{try{!x&&I.return&&I.return()}finally{if(k)throw w}}}else N.add(E)}}catch(e){j=!0,v=e}finally{try{!h&&g.return&&g.return()}finally{if(j)throw v}}n[b]=(0,s.default)(new i.default(N))}}catch(e){c=!0,m=e}finally{try{!d&&p.return&&p.return()}finally{if(c)throw m}}return n},b.emptyO,{debug:"gatherIds"})),g=(0,p.memoize)(function(e,t,l){var a={},n=e.entities,u=!0,d=!1,c=void 0;try{for(var m,f=(0,o.default)(t);!(u=(m=f.next()).done);u=!0){var p=m.value,b=l[p].multiple,_=new i.default,N=!0,h=!1,j=void 0;try{for(var v,y=(0,o.default)((0,r.default)(n));!(N=(v=y.next()).done);N=!0){var g=v.value.values[p];if(null!=g)if(b){var E=!0,x=!1,k=void 0;try{for(var w,S=(0,o.default)(g);!(E=(w=S.next()).done);E=!0){var I=w.value;_.add(I)}}catch(e){x=!0,k=e}finally{try{!E&&S.return&&S.return()}finally{if(x)throw k}}}else _.add(g)}}catch(e){h=!0,j=e}finally{try{!N&&y.return&&y.return()}finally{if(h)throw j}}a[p]=(0,s.default)(new i.default(_))}}catch(e){d=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(d)throw c}}return a},b.emptyO,{debug:"gatherAllIds"}),E=(0,p.memoize)(function(e,t,l,a,r){var u=t[a].valType;if(null==l)return b.emptyO;var o=(0,n.default)({},b.emptyS,"-none-");if("string"==typeof u)l.forEach(function(e){o[e]=e});else{var d=u.relTable;if(null==r)l.forEach(function(t){o[t]=(0,_.headEntity)(e,d,t)});else{var c=e[d].entities;(0,s.default)(new i.default(l.map(function(e){return c[e].values[r]}))).sort().forEach(function(e){o[e]=e})}}return o},b.emptyO,{debug:"gatherValues"}),x=(t.makeTag=function(e,t,l){return null==t?e:e+"-"+t+"-"+l},(0,p.memoize)(function(e){return function(t,l,a){return t[l].entities[a].values[e]}},b.emptyO)),k=function(e,t){var l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=t.valType,r=t.multiple,s=void 0;if("string"==typeof n)s=r?l?function(e){return null==e?b.emptyS:e.join(" ")}:function(e){return null==e?b.emptyA:e}:l?function(e){return null==e?b.emptyS:e}:function(e){return null==e?b.emptyA:[e]};else{var i=n.relTable,u=a?x(a):_.headEntity;s=r?l?function(t){return null==t?b.emptyS:t.map(function(t){return u(e,i,t).join(" ")})}:function(t){return null==t?b.emptyA:null==a?t:u(e,i,t)}:l?function(t){return null==t?b.emptyS:u(e,i,t)}:function(t){return null==t?b.emptyA:null==a?[t]:[u(e,i,t)]}}return s},w=(0,p.memoize)(function(e,t,l,a,n){var r=k(e,a,!0),s=(n||b.emptyS).toLowerCase();return null==s||s===b.emptyS?function(){return!0}:function(e){var l=e.values[t],a=r(l);return null!=a&&-1!==a.toLowerCase().indexOf(s)}},b.emptyO,{debug:w}),S=(0,p.memoize)(function(e,t,l,a,n){var r=k(e,a,!1,l);return 0===(n||b.emptyO).size?function(){return!1}:function(e){var l=e.values[t],a=r(l);if(0===a.length)return n[b.emptyS];var s=!0,i=!1,u=void 0;try{for(var d,c=(0,o.default)(a);!(s=(d=c.next()).done);s=!0){var m=d.value;if(n[m])return!0}}catch(e){i=!0,u=e}finally{try{!s&&c.return&&c.return()}finally{if(i)throw u}}return!1}},b.emptyO,{debug:S}),I=(0,p.memoize)(function(e,t,l,a,n,r,s){var i=a[t],u=k(e,i,!1,l),d={};if(d[b.emptyS]=0,l){var c=E(e,a,n,t,l),f=!0,p=!1,_=void 0;try{for(var N,h=(0,o.default)((0,m.default)(c));!(f=(N=h.next()).done);f=!0){var j=N.value;d[j]=0}}catch(e){p=!0,_=e}finally{try{!f&&h.return&&h.return()}finally{if(p)throw _}}}else n.forEach(function(e){d[e]=0});var v=!0,y=!1,g=void 0;try{for(var x,w=(0,o.default)(r);!(v=(x=w.next()).done);v=!0){var S=u(s[x.value].values[t]);if(0===S.length)d[b.emptyS]+=1;else{var I=!0,A=!1,T=void 0;try{for(var C,O=(0,o.default)(S);!(I=(C=O.next()).done);I=!0){var M=C.value;d[M]+=1}}catch(e){A=!0,T=e}finally{try{!I&&O.return&&O.return()}finally{if(A)throw T}}}}}catch(e){y=!0,g=e}finally{try{!v&&w.return&&w.return()}finally{if(y)throw g}}return d},b.emptyO,{debug:"countFacets"});t.testAllChecks=function(e){var t=!0,l=!0;if(null==e)return{allTrue:t,allFalse:l};var a=!0,n=!1,r=void 0;try{for(var s,i=(0,o.default)((0,u.default)(e));!(a=(s=i.next()).done);a=!0)s.value[1]?l=!1:t=!1}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}return{allTrue:t,allFalse:l}}},"./js/app/dux/forms.js":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getForms=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/babel-runtime/core-js/object/keys.js")),n=l("./js/lib/memo.js"),r=(t.getForms=function(e){var t=e.form;return{form:r(t)}},function(e){return(0,n.makeSet)((0,a.default)(e))})},"./js/app/dux/grid.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compileSortedData=t.getGrid=t.turnColumn=t.delColumn=t.addColumn=t.resetSort=void 0;var n=a(l("../node_modules/babel-runtime/helpers/defineProperty.js")),r=a(l("../node_modules/babel-runtime/helpers/extends.js")),s=a(l("../node_modules/lodash/orderby.js")),i=a(l("../node_modules/lodash/mapvalues.js")),u=l("./js/lib/memo.js"),o=l("./js/lib/utils.js"),d=l("./js/app/dux/tables.js"),c=(t.resetSort=function(e){return{type:"resetSort",gridTag:e}},t.addColumn=function(e,t,l){return{type:"addColumn",gridTag:e,column:t,direction:l}},t.delColumn=function(e,t){return{type:"delColumn",gridTag:e,column:t}},t.turnColumn=function(e,t){return{type:"turnColumn",gridTag:e,column:t}},{resetSort:function(e,t){var l=t.gridTag;return(0,r.default)({},e,(0,n.default)({},l,o.emptyA))},addColumn:function(e,t){var l=t.gridTag,a=t.column,s=t.direction,i=e[l];return(0,r.default)({},e,(0,n.default)({},l,(i||o.emptyA).filter(function(e){return e[0]!==a}).concat([[a,s]])))},delColumn:function(e,t){var l=t.gridTag,a=t.column,s=e[l];return(0,r.default)({},e,(0,n.default)({},l,(s||o.emptyA).filter(function(e){return e[0]!==a})))},turnColumn:function(e,t){var l=t.gridTag,a=t.column,s=e[l];return(0,r.default)({},e,(0,n.default)({},l,(s||o.emptyA).map(function(e){return[e[0],e[0]===a?-e[1]:e[1]]})))}});t.default=(0,o.makeReducer)(c,o.emptyO);t.getGrid=function(e){return{grid:e.grid}},t.compileSortedData=(0,u.memoize)(function(e,t,l,a,n){var r=a.map(function(e){return e[0]}),u=a.map(function(e){return 1===e[1]?"asc":"desc"}),o=e[t].entities,d=m(e,t,n),c=l.map(function(e){return(0,i.default)(o[e].values,d)});return(0,s.default)(c,r,u).map(function(e){return e._id})},o.emptyO);var m=function(e,t,l){var a=e[t].fieldSpecs;return function(n,r){if("_id"===r)return n;var s=a[r],i=s.valType,u=s.multiple;return(0,d.repr)(e,t,r,i,u,null,n,l,"|")}}},"./js/app/dux/me.js":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMe=t.fetchMe=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/babel-runtime/helpers/extends.js")),n=l("./js/app/dux/server.js"),r=l("./js/lib/utils.js"),s=(t.fetchMe=function(){return(0,n.accessData)({type:"fetchMe",contentType:"db",path:"/who/ami",desc:"me"})},{fetchMe:function(e,t){var l=t.data;return null==l?r.emptyO:(0,a.default)({},l)}});t.default=(0,r.makeReducer)(s);t.getMe=function(e){return{me:e.me}}},"./js/app/dux/notes.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getNotes=t.display=t.clear=t.notify=void 0;var n=a(l("../node_modules/babel-runtime/helpers/toConsumableArray.js")),r=a(l("../node_modules/immutability-helper/index.js")),s=l("./js/lib/utils.js"),i=(t.notify=function(e){return{type:"msgs",msgs:e}},t.clear=function(){return{type:"clear"}},t.display=function(e){return{type:"display",onOff:e}},{progress:function(e,t){var l=t.desc;return(0,r.default)(e,{messages:{$push:[{kind:"special",text:"still waiting for "+l}]}})},pending:function(e,t){var l=t.desc,a=t.busy,s=t.extraMsgs;return(0,r.default)(e,{messages:{$push:[].concat((0,n.default)(s),[{kind:"special",text:"waiting for "+l}])},busy:{$set:a+1}})},success:function(e,t){var l=t.desc,a=t.busy,s=t.extraMsgs;return(0,r.default)(e,{messages:{$push:[].concat((0,n.default)(s),[{kind:"info",text:l+" ok"}])},busy:{$set:a-1},show:{$set:s.some(function(e){return"warning"===e.kind||"error"===e.kind})}})},error:function(e,t){var l=t.desc,a=t.busy,s=t.extraMsgs;return(0,r.default)(e,{messages:{$push:[].concat((0,n.default)(s),[{kind:"error",text:l+" failed"}])},busy:{$set:a-1},show:{$set:!0}})}}),u={async:function(e,t){var l=t.msgs,a=t.status,n=t.desc,r=e.busy,u=l||s.emptyA,o=i[a];return o?o(e,{extraMsgs:u,desc:n,busy:r}):e},msgs:function(e,t){var l=t.msgs;return(0,r.default)(e,{messages:{$push:l},show:{$set:!0}})},clear:function(e){return(0,r.default)(e,{messages:{$set:s.emptyA},show:{$set:!1}})},display:function(e,t){var l=t.onOff;return(0,r.default)(e,{show:{$set:l}})}};t.default=(0,s.makeReducer)(u,{messages:s.emptyA,busy:0,show:!1});t.getNotes=function(e){var t=e.notes,l=t.messages,a=t.busy,n=t.show,r=-1,i=s.emptyS;return l.forEach(function(e,t){var l=e.kind;"error"===l?(r=t,i="error"):"warning"===l&&"error"!==i&&(r=t,i="warning")}),{messages:l,busy:a,show:n||i,lastMsg:l.length-1,lastNote:r,lastKind:i}}},"./js/app/dux/roots.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=l("../node_modules/redux/es/index.js"),r=a(l("../node_modules/redux-thunk/lib/index.js")),s=l("../node_modules/redux-form/es/index.js"),i=a(l("./js/app/dux/settings.js")),u=a(l("./js/app/dux/win.js")),o=a(l("./js/app/dux/server.js")),d=a(l("./js/app/dux/notes.js")),c=a(l("./js/app/dux/docs.js")),m=a(l("./js/app/dux/tables.js")),f=a(l("./js/app/dux/me.js")),p=a(l("./js/app/dux/filters.js")),b=a(l("./js/app/dux/alter.js")),_=a(l("./js/app/dux/select.js")),N=a(l("./js/app/dux/grid.js"));t.default=function(e){return(0,n.createStore)(e,(0,n.applyMiddleware)(r.default))}((0,n.combineReducers)({settings:i.default,win:u.default,server:o.default,notes:d.default,docs:c.default,tables:m.default,me:f.default,filters:p.default,alter:b.default,form:s.reducer,select:_.default,grid:N.default}))},"./js/app/dux/select.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compileOptions=t.getSelect=t.togglePopUp=t.setPopUp=t.setSearch=void 0;var n=a(l("../node_modules/babel-runtime/helpers/defineProperty.js")),r=a(l("../node_modules/immutability-helper/index.js")),s=l("./js/lib/utils.js"),i=l("./js/lib/memo.js"),u=l("./js/app/dux/tables.js"),o={search:s.emptyS,popUp:!1},d=(t.setSearch=function(e,t){return{type:"setSearch",selectTag:e,search:t}},t.setPopUp=function(e,t){return{type:"setPopUp",selectTag:e,onOff:t}},t.togglePopUp=function(e){return{type:"togglePopUp",selectTag:e}},{setSearch:function(e,t){var l=t.selectTag,a=t.search;return(0,r.default)(e,(0,n.default)({},l,{$apply:function(e){return(0,r.default)(e||o,{search:{$set:a}})}}))},setPopUp:function(e,t){var l=t.selectTag,a=t.onOff;return(0,r.default)(e,(0,n.default)({},l,{$apply:function(e){return(0,r.default)(e||o,{popUp:{$set:a}})}}))},togglePopUp:function(e,t){var l=t.selectTag,a=e[l],s=null==a||!a.popUp;return(0,r.default)(e,(0,n.default)({},l,{$apply:function(e){return(0,r.default)(e||o,{popUp:{$set:s}})}}))}});t.default=(0,s.makeReducer)(d,s.emptyO);t.getSelect=function(e){return{select:e.select}},t.compileOptions=(0,i.memoize)(function(e,t,l,a,n){var r=e[t],i=r.valueLists,o=r.fieldSpecs,d=(i||s.emptyO)[a];if(null==d)return{options:s.emptyA,optionLookup:s.emptyO};var c=o[a].valType,m=(null==l?d:d.filter(function(e){return l.includes(e)})).map(function(l){return{value:l,label:(0,u.repr)(e,t,a,c,!1,null,l,n,", ")}}),f={};return m.forEach(function(e){var t=e.value,l=e.label;f[t]=l}),{options:m,optionLookup:f}},s.emptyO,{debug:"compileOptions"})},"./js/app/dux/server.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.accessData=void 0;var n=a(l("../node_modules/babel-runtime/helpers/defineProperty.js")),r=a(l("../node_modules/babel-runtime/core-js/object/keys.js")),s=a(l("../node_modules/babel-runtime/core-js/json/stringify.js")),i=a(l("../node_modules/babel-runtime/helpers/extends.js"));l("../node_modules/whatwg-fetch/fetch.js");var u=l("../node_modules/redux-form/es/index.js"),o=a(l("../node_modules/immutability-helper/index.js")),d=l("./js/lib/utils.js"),c=function(e,t){return{type:"async",status:"progress",path:e,desc:t}},m=function(e,t){return{type:"async",status:"pending",path:e,desc:t}},f=function(e,t,l){return{type:"async",status:"error",path:e,desc:t,msgs:l}},p=function(e,t,l){return{type:"async",status:"success",path:e,desc:t,msgs:l}},b=(t.accessData=function(e){return function(t,l){var a=e.path,n=e.contentType,o=e.desc,d=e.sendData;if(!(l().server[a]>0)){t(m(a,o));var b={credentials:"same-origin"};null!=d&&(b=(0,i.default)({},b,{method:"POST",body:(0,s.default)(d),headers:{"Content-Type":"application/json"}}));var _="/api/"+n+a;return fetch(_,b).then(function(e){return e.ok?e.json():{good:!1,msgs:[{kind:"error",text:"No valid response from the server to "+_}]}}).then(function(l){var n=l.msgs,s=l.good,d=l.data;if(s?(t(p(a,o,n)),t((0,i.default)({},e,{data:d}))):t(f(a,o,n)),d&&d.diags&&(0,r.default)(d.diags).length>0)throw new u.SubmissionError(d.diags)}).catch(function(e){if(e instanceof u.SubmissionError)throw e;t(f(a,o,[{kind:"error",text:e.toString()}]))})}t(c(a,o))}},{progress:function(e,t){var l=t.path;return(0,o.default)(e,(0,n.default)({},l,{$apply:function(e){return e+1}}))},pending:function(e,t){var l=t.path;return(0,o.default)(e,(0,n.default)({},l,{$set:1}))},success:function(e,t){var l=t.path;return(0,o.default)(e,(0,n.default)({},l,{$set:0}))},error:function(e,t){var l=t.path;return(0,o.default)(e,(0,n.default)({},l,{$set:-1}))}}),_={async:function(e,t){var l=t.status,a=t.path,n=b[l];return n?n(e,{path:a}):e}};t.default=(0,d.makeReducer)(_)},"./js/app/dux/settings.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getSettings=t.adjust=void 0;var n=a(l("../node_modules/babel-runtime/core-js/set.js")),r=a(l("../node_modules/babel-runtime/helpers/defineProperty.js")),s=a(l("../node_modules/immutability-helper/index.js")),i=l("./js/lib/utils.js"),u=(t.adjust=function(e,t){return{type:"setSetting",key:e,value:t}},{setSetting:function(e,t){var l=t.key,a=t.value;return(0,s.default)(e,(0,r.default)({},l,{$set:a}))}});t.default=(0,i.makeReducer)(u,{provenanceFields:new n.default(["creator","dateCreated","modified"]),hideProvenance:!0,longDates:{assessment:{dateSubmitted:!0,dateWithdrawn:!0}},showTooltips:!0});t.getSettings=function(e){return{settings:e.settings}}},"./js/app/dux/tables.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCloseAll=t.handleOpenAll=t.repr=t.headEntity=t.presentUser=t.listValues=t.needValues=t.needTables=t.needTable=t.toDb=t.getTables=t.delItem=t.insertItem=t.modItem=t.fetchItems=t.fetchItem=t.fetchTables=t.fetchTable=t.MYIDS=t.ALLIDS=t.DETAILS=void 0;var n=a(l("../node_modules/babel-runtime/helpers/typeof.js")),r=a(l("../node_modules/babel-runtime/core-js/set.js")),s=a(l("../node_modules/babel-runtime/core-js/array/from.js")),i=a(l("../node_modules/babel-runtime/helpers/objectWithoutProperties.js")),u=a(l("../node_modules/babel-runtime/core-js/get-iterator.js")),o=a(l("../node_modules/babel-runtime/helpers/defineProperty.js")),d=a(l("../node_modules/babel-runtime/core-js/object/entries.js")),c=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),m=a(l("../node_modules/immutability-helper/index.js")),f=l("../node_modules/react-router/es/index.js"),p=l("./js/app/dux/server.js"),b=l("./js/lib/memo.js"),_=l("./js/lib/utils.js"),N=l("./js/app/dux/alter.js"),h=(t.DETAILS="details",t.ALLIDS="allIds"),j=t.MYIDS="myIds",v=t.fetchTable=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,l=arguments[2];return(0,p.accessData)({type:"fetchTable",contentType:"db",path:"/"+(t===j?"my":_.emptyS)+"list?table="+e+"&complete="+l,desc:e+" table",table:e})},y=(t.fetchTables=function(e,t,l){t.forEach(function(t){var a=(0,c.default)(t,3),n=a[0],r=a[1],s=void 0===r?h:r,i=a[2],u=void 0===i||i;I(e,n,s,u)&&l(v(n,s,u))})},t.fetchItem=function(e,t,l){return(0,p.accessData)({type:"fetchItem",contentType:"db",path:"/view?table="+e+"&id="+t,desc:e+" record "+l,table:e})},t.fetchItems=function(e,t,l,a){return(0,p.accessData)({type:"fetchItems",contentType:"db",path:"/view?table="+e,desc:e+" records "+t.length,sendData:t,table:e,eIds:t,alterSection:l,alt:a})}),g=t.modItem=function(e,t,l,a){return(0,p.accessData)({type:"modItem",contentType:"db",path:"/mod?table="+e+"&action=update",desc:e+" update record "+l,sendData:{_id:t,values:a},table:e})},E=(t.insertItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,p.accessData)({type:"insertItem",contentType:"db",path:"/mod?table="+e+"&action=insert",desc:e+" insert new record",sendData:{masterId:l,linkField:a},table:e,select:t})},t.delItem=function(e,t,l){return(0,p.accessData)({type:"delItem",contentType:"db",path:"/mod?table="+e+"&action=delete",desc:e+" delete record "+l,sendData:{_id:t},table:e})},function(e,t,l,a,n){var r={};return a.forEach(function(e){r[e]=n[e]}),(0,_.updateAuto)(e,[t,"entities",l,"values"],{$merge:r})}),x=function(e,t){var l=t;return(0,d.default)(e).forEach(function(e){var t=(0,c.default)(e,2),a=t[0],n=t[1],r=l[a];if(null!=r&&null!=n.fields&&null==r.fields){var s=(0,m.default)(n.values,{$merge:r.values});l=(0,m.default)(l,(0,o.default)({},a,{fields:{$set:n.fields},values:{$merge:s}}))}}),(0,m.default)(e,{$merge:l})},k=function(e,t){var l=e,a=!0,n=!1,r=void 0;try{for(var s,i=(0,u.default)(t);!(a=(s=i.next()).done);a=!0){var o=(0,c.default)(s.value,3),d=o[0],m=o[1],f=o[2];l=(0,_.updateAuto)(l,[d,"entities",m,"workflow"],{$set:f})}}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}return l},w={fetchTable:function(e,t){var l=t.data;if(null==l)return e;var a=e;return(0,d.default)(l).forEach(function(t){var l=(0,c.default)(t,2),n=l[0],r=l[1],s=e[n],i=(void 0===s?_.emptyO:s).entities,u=void 0===i?_.emptyO:i,o=r.entities,d=x(u,o),f=(0,m.default)(r,{entities:{$set:d}});a=(0,_.updateAuto)(a,[n],{$merge:f})}),a},fetchItem:function(e,t){var l=t.data,a=t.table;if(null==l)return e;var n=l.values._id;return(0,_.updateAuto)(e,[a,"entities",n],{$set:l})},fetchItems:function(e,t){var l=t.data,a=t.table;if(null==l||0==l.length)return e;var n=e,r=!0,s=!1,i=void 0;try{for(var o,d=(0,u.default)(l);!(r=(o=d.next()).done);r=!0){var c=o.value,m=c.values._id;n=(0,_.updateAuto)(n,[a,"entities",m],{$set:c})}}catch(e){s=!0,i=e}finally{try{!r&&d.return&&d.return()}finally{if(s)throw i}}return n},modItem:function(e,t){var l=t.data,a=t.table;if(null==l)return e;var n=l.records,r=l.workflow,s=e,i=!0,f=!1,p=void 0;try{for(var b,N=function(){var e=b.value,t=e.values,l=e.values._id,n=e.newValues,r=e.workflow,i={};if((0,d.default)(t).forEach(function(e){var t=(0,c.default)(e,2),l=t[0],a=t[1];i[l]={$set:a}}),s=(0,_.updateAuto)(s,[a,"entities",l,"values"],i),s=(0,_.updateAuto)(s,[a,"entities",l,"workflow"],r),null!=n){var f=!0,p=!1,N=void 0;try{for(var h,j=(0,u.default)(n);!(f=(h=j.next()).done);f=!0){var v=h.value,y=v._id,g=v.rep,x=v.repName,k=v.relTable,w=v.field;s=(0,m.default)(s,(0,o.default)({},a,{valueLists:(0,o.default)({},w,{$push:[y]})})),s=E(s,k,y,["_id",x],(0,o.default)({_id:y},x,g))}}catch(e){p=!0,N=e}finally{try{!f&&j.return&&j.return()}finally{if(p)throw N}}}},h=(0,u.default)(n);!(i=(b=h.next()).done);i=!0)N()}catch(e){f=!0,p=e}finally{try{!i&&h.return&&h.return()}finally{if(f)throw p}}return s=k(s,r)},insertItem:function(e,t){var l=t.data,a=t.table,n=t.select;if(null==l)return e;var r=l.records,s=l.workflow,d=e,c=!0,f=!1,p=void 0;try{for(var b,N=(0,u.default)(r);!(c=(b=N.next()).done);c=!0){var v=b.value,y=v.table,g=(0,i.default)(v,["table"]),E=g.values._id;null!=(d=(0,_.updateAuto)(d,[y,"entities",E],{$set:g}))[y][h]&&(d=(0,_.updateAuto)(d,[y,h],{$push:[E]},!0)),n===j&&a===y&&(d=(0,_.updateAuto)(d,[a,j],{$push:[E]},!0)),d=(0,m.default)(d,(0,o.default)({},y,{lastInserted:{$set:E}}))}}catch(e){f=!0,p=e}finally{try{!c&&N.return&&N.return()}finally{if(f)throw p}}return d=k(d,s)},delItem:function(e,t){var l=t.data;if(null==l)return e;var a=l.records,n=l.workflow,r=e,s=!0,i=!1,f=void 0;try{for(var p,b=function(){var e=p.value,t=(0,c.default)(e,2),l=t[0],a=t[1],n=(r=(0,m.default)(r,(0,o.default)({},l,{entities:{$unset:[a]}})))[l],s=n.myIds,i=n.allIds,f=!0,b=!1,_=void 0;try{for(var N,h=(0,u.default)((0,d.default)({myIds:s,allIds:i}));!(f=(N=h.next()).done);f=!0){var j=(0,c.default)(N.value,2),v=j[0],y=j[1];if(null!=y){var g=y.filter(function(e){return e!==a});r=(0,m.default)(r,(0,o.default)({},l,(0,o.default)({},v,{$set:g})))}}}catch(e){b=!0,_=e}finally{try{!f&&h.return&&h.return()}finally{if(b)throw _}}},_=(0,u.default)(a);!(s=(p=_.next()).done);s=!0)b()}catch(e){i=!0,f=e}finally{try{!s&&_.return&&_.return()}finally{if(i)throw f}}return r=k(r,n)}};t.default=(0,_.makeReducer)(w);t.getTables=function(e){return{tables:e.tables}},t.toDb=(0,b.memoize)(function(e,t,l,a){return function(n){return a(g(e,t,l,n))}});var S=function(e,t,l){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e)return!1;var n=e[t];return null!=n&&(null!=n[l]&&(null==a||n[l]===a))},I=t.needTable=function(e,t){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,a=arguments[3];if(!S(e,t,l))return!0;if(a&&!S(e,t,"complete",!0))return!0;var i=e[t].fieldSpecs;return!!(0,s.default)(new r.default((0,d.default)(i).filter(function(e){return"object"===(0,n.default)(e[1].valType)&&null!=e[1].valType.relTable}).map(function(e){return e[1].valType.relTable}))).some(function(t){return!S(e,t,h)})},A=(t.needTables=function(e,t){return t.some(function(t){var l=(0,c.default)(t,3),a=l[0],n=l[1],r=void 0===n?h:n,s=l[2];return I(e,a,r,void 0===s||s)})},t.needValues=function(e,t){return null==e||null==e[t]||null==e[t].fields||null==e[t].perm},t.listValues=(0,b.memoize)(function(e){var t=e.tables,l=e.table,a=e.eId,n=e.field;return null==t?_.emptyA:null==t[l]?_.emptyA:null==t[l].entities[a]?_.emptyA:new r.default(t[l].entities[a][n])},_.emptyO),(0,b.memoize)(function(e,t){var l=e.user.entities[t];if(l){var a=l.values;return T(a)}return"UNKNOWN"},_.emptyO)),T=t.presentUser=function(e){var t=e.name,l=e.firstName,a=e.lastName,n=e.email,r=e.eppn,s=e.authority,i=e.org,u=i?" ("+i+")":_.emptyS;if(t)return""+t+u;if(l||a)return""+(l||_.emptyS)+(l&&a?" ":_.emptyS)+(a||_.emptyS);if(n)return""+n+u;var o=s?" - "+s:_.emptyS;return r?""+r+o+u:"!unidentified user!"},C={user:A,country:(0,b.memoize)(function(e,t){var l=e.country.entities[t];if(l){var a=l.values,n=a.name;return a.iso+": "+n}return"UNKNOWN"},_.emptyO),typeContribution:(0,b.memoize)(function(e,t){var l=e.typeContribution.entities[t];if(l){var a=l.values,n=a.mainType,r=a.subType;return""+n+(n&&r?" / ":_.emptyS)+r}return"UNKNOWN"},_.emptyO),score:(0,b.memoize)(function(e,t){var l=void 0,a=e.score.entities[t];if(a){var n=a.values,r=n.score,s=void 0===r?"N/A":r,i=n.level,u=void 0===i?"N/A":i,o=n.description,d=void 0===o?_.emptyS:o;l=s||u?s+" - "+u:d}else l="UNKNOWN";return l},_.emptyO),default:function(e){return(0,b.memoize)(function(t,l,a){var n=t[e],r=n.title,s=void 0===r?"rep":r,i=n.entities[l],u=n.fieldSpecs;if(i){var o=i.values[s],d=u[s].valType;return D(t,e,s,d,o,a)}return"UNKNOWN"},_.emptyO)}},O=t.headEntity=function(e,t,l,a){return(C[t]||C.default(t))(e,l,a)},M=function(e,t,l,a){return null==e?_.emptyS:a.longDates[t]&&a.longDates[t][l]?e.replace(/\.[0-9]+/,_.emptyS):e.replace(/T.*$/,_.emptyS)},D=function(e,t,l,a,n,r){if(null==n)return _.emptyS;if(null!=a&&"string"!=typeof a){var s=a.relTable;return null==s?_.emptyS:O(e,s,n)}switch(a){case"datetime":return M(n,t,l,r);case"bool":return n?"Yes":"No";default:return n}},F=function(e,t,l,a,n,r,s,i){var u=n?(r||_.emptyA).map(function(n){return D(e,t,l,a,n,s)}):D(e,t,l,a,r,s);return n&&null!=i?u.join(i):u};t.repr=(0,b.memoize)(function(e,t,l,a,n,r,s,i,u,o){if(null==r)return F(e,t,l,a,n,s,i,u);var d=a.relTable;if(null==d)return _.emptyS;var c=e[d].fieldSpecs[r],m=c.multiple,f=c.valType,p=n?s.map(function(t){return e[d].entities[t].values[r]}):e[d].entities[s].values[r],b=n&&m&&null!=u&&null==o?" ":o,N=n?p.map(function(t){return F(e,d,r,f,m,t,i,b)}):F(e,d,r,f,m,p,i,o);return n&&null!=u?N.join(u):N},_.emptyO),t.handleOpenAll=(0,b.memoize)(function(e,t,l,a,n,r,s){var i=(0,N.compileAlternatives)(t,l,a,s),u=(a+1)%l;return function(){var l=[];r.forEach(function(t){(0,i(t).getAlt)(e)!==u&&l.push(t)}),l.length&&s(y(n,l,t,u))}},_.emptyO),t.handleCloseAll=(0,b.memoize)(function(e,t,l,a,n,r){var s=(0,N.compileAlternatives)(t,l,a,r),i=(0,_.getUrlParts)(f.browserHistory),u=i.base+"/"+i.table+"/"+i.controller;return function(){f.browserHistory.push(u+"/");var l=[];n.forEach(function(t){(0,s(t).getAlt)(e)!==a&&l.push(t)}),l.length&&r((0,N.setItems)(l,t,a))}},_.emptyO)},"./js/app/dux/win.js":function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWinDim=t.changeWinDim=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(l("../node_modules/babel-runtime/helpers/extends.js")),n=l("./js/lib/utils.js"),r=(t.changeWinDim=function(){return function(e){e((0,a.default)({type:"windim"},s()))}},{windim:function(e,t){var l=t.height,n=t.width;return(0,a.default)({},e,{height:l,width:n})}}),s=function(){var e=window;return{height:e.innerHeight,width:e.innerWidth}};t.default=(0,n.makeReducer)(r,s());t.getWinDim=function(e){return{win:e.win}}},"./js/app/dux/workflow.js":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.assessmentScore=t.compileActive=t.loadExtra=t.TYPE_FIELD=t.TYPE_TABLE=t.CRITERIA_TABLE=t.PACKAGE_TABLE=void 0;var n=a(l("../node_modules/babel-runtime/core-js/object/keys.js")),r=a(l("../node_modules/babel-runtime/core-js/array/from.js")),s=a(l("../node_modules/babel-runtime/helpers/slicedToArray.js")),i=a(l("../node_modules/babel-runtime/core-js/object/entries.js")),u=a(l("../node_modules/babel-runtime/core-js/set.js")),o=l("./js/lib/memo.js"),d=l("./js/lib/utils.js"),c=l("./js/lib/fields.js"),m=t.PACKAGE_TABLE="package",f=t.CRITERIA_TABLE="criteria",p=t.TYPE_TABLE="typeContribution",b=t.TYPE_FIELD="typeContribution",_=(t.loadExtra={contrib:[["package"],["criteria"],["typeContribution"]]},(0,o.memoize)(function(e,t,l){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if([e,t,l].some(function(e){return null==e}))return a?null:d.emptyO;var n=new u.default,o=new u.default,p=new u.default,_=Date.now();return(0,i.default)(e).forEach(function(e){var t=(0,s.default)(e,2),l=t[0],a=t[1].values,r=a.startDate,i=a.endDate,u=a.typeContribution,m=(0,c.getDateTime)(r),f=(0,c.getDateTime)(i),p=null==m,b=null==f;p&&b||(p||m<_)&&(b||_<f)&&(n.add(l),(u||d.emptyA).forEach(function(e){return o.add(e)}))}),(0,i.default)(l).forEach(function(e){var t=(0,s.default)(e,2),l=t[0],a=t[1].values[m];n.has(a)&&p.add(l)}),a?a===b?o:a===m?n:a===f?p:null:{activeIdsPkg:(0,r.default)(n).map(function(t){return e[t].values}).sort((0,c.sortTimeInterval)("startDate","endDate")).map(function(e){return e._id}),activeIdsTyp:(0,r.default)(o).map(function(e){return t[e].values}).sort((0,c.sortStringTemplate)(function(e){return(e.mainType||d.emptyS)+" / "+(e.subType||d.emptyS)})).map(function(e){return e._id}),activeIdsCri:(0,r.default)(p).map(function(e){return l[e].values}).sort((0,c.sortStringTemplate)(function(e){return e.criterion})).map(function(e){return e._id})}},d.emptyO,{debug:"compileActiveItems"}));t.compileActive=function(e,t){if([m,f,p].some(function(t){return null==e[t]}))return t?null:d.emptyO;var l=e[m].entities,a=e[f].entities,n=e[p].entities;return _(l,n,a,t)},t.assessmentScore=(0,o.memoize)(function(e,t){var l=e.criteriaEntry,a=(l=void 0===l?d.emptyO:l).entities,r=e.score,s=(r=void 0===r?d.emptyO:r).entities,i=(0,n.default)(a).filter(function(e){return a[e].values.assessment==t}).map(function(e){var t=a[e].values,l=t.criteria,r=t.score,i=s[r],u=(i=void 0===i?d.emptyO:i).values,o=(u=void 0===u?d.emptyO:u).score,c=void 0===o?0:o,m=(0,d.max)((0,n.default)(s).filter(function(e){return s[e].values.criteria==l}).map(function(e){return s[e].values.score}));return{criteria:l,score:c,maxScore:m}}),u=(0,d.sum)(i.map(function(e){return e.maxScore})),o=i.length,c=i.filter(function(e){return e.score>=0}),m=(0,d.sum)(c.map(function(e){return e.maxScore})),f=(0,d.sum)(c.map(function(e){return e.score})),p=c.length;return{overall:0==m?0:Math.round(100*f/m),relevantScore:f,relevantMax:m,allMax:u,relevantN:p,allN:o}},d.emptyO)},"./js/app/main.jsx":function(e,t,l){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var n="/Users/dirk/github/Dans-labs/dariah/client/src/js/app/main.jsx",r=a(l("../node_modules/react/index.js")),s=l("../node_modules/react-dom/index.js"),i=l("../node_modules/react-router/es/index.js"),u=l("./js/app/dux/tables.js"),o=a(l("./js/app/components/Root.jsx")),d=a(l("./js/app/components/App.jsx")),c=a(l("./js/app/components/SubApp.jsx")),m=a(l("./js/app/components/ListContainer.jsx")),f=a(l("./js/app/components/Doc.jsx")),p=a(l("./js/app/components/NotFound.jsx")),b=a(l("./js/app/components/ErrorBoundary.jsx"));(0,s.render)(r.default.createElement(o.default,{__source:{fileName:n,lineNumber:16}},r.default.createElement(b.default,{__source:{fileName:n,lineNumber:17}},r.default.createElement(i.Router,{history:i.browserHistory,__source:{fileName:n,lineNumber:18}},r.default.createElement(i.Redirect,{from:"/about",to:"/docs/about.md",__source:{fileName:n,lineNumber:19}}),r.default.createElement(i.Redirect,{from:"/docs/about",to:"/docs/about.md",__source:{fileName:n,lineNumber:20}}),r.default.createElement(i.Redirect,{from:"/about.md",to:"/docs/about.md",__source:{fileName:n,lineNumber:21}}),r.default.createElement(i.Redirect,{from:"/login",to:"/docs/about.md",__source:{fileName:n,lineNumber:22}}),r.default.createElement(i.Redirect,{from:"/logout",to:"/docs/about.md",__source:{fileName:n,lineNumber:23}}),r.default.createElement(i.Redirect,{from:"/slogout",to:"/docs/about.md",__source:{fileName:n,lineNumber:24}}),r.default.createElement(i.Route,{path:"/",component:d.default,__source:{fileName:n,lineNumber:25}},r.default.createElement(i.IndexRoute,{component:d.default,__source:{fileName:n,lineNumber:26}}),r.default.createElement(i.IndexRedirect,{to:"/docs/about.md",__source:{fileName:n,lineNumber:27}}),r.default.createElement(i.Route,{path:"docs/:docFile",component:f.default,__source:{fileName:n,lineNumber:28}}),r.default.createElement(i.Route,{path:"tech/docs/gen/:docFile",component:f.default,__source:{fileName:n,lineNumber:29}}),r.default.createElement(i.Route,{path:"tech/docs/:docFile",component:f.default,__source:{fileName:n,lineNumber:30}}),r.default.createElement(i.Route,{path:"data",component:c.default,__source:{fileName:n,lineNumber:31}},r.default.createElement(i.Route,{path:":table",__source:{fileName:n,lineNumber:32}},r.default.createElement(i.Route,{path:"mylist(/item/:eId)",component:m.default,select:u.MYIDS,mode:"list",__source:{fileName:n,lineNumber:33}}),r.default.createElement(i.Route,{path:"list(/item/:eId)",component:m.default,select:u.ALLIDS,mode:"list",__source:{fileName:n,lineNumber:34}}),r.default.createElement(i.Route,{path:"grid(/item/:eId)",component:m.default,select:u.ALLIDS,mode:"grid",__source:{fileName:n,lineNumber:35}}),r.default.createElement(i.Route,{path:"filter(/item/:eId)",component:m.default,select:u.ALLIDS,mode:"list",filtered:!0,__source:{fileName:n,lineNumber:36}})))),r.default.createElement(i.Route,{path:"*",component:p.default,__source:{fileName:n,lineNumber:40}})))),document.getElementById("body"))}},["./js/app/main.jsx"]);