webpackJsonp([0],{103:function(e,t,n){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.getWinDim=t.default=t.changeWinDim=void 0;var r=n(1);t.changeWinDim=function(){return function(e){e(a({type:"windim"},o()))}};var l={windim:function(e,t){return a({},e,{height:t.height,width:t.width})}},o=function(){var e=window;return{height:e.innerHeight,width:e.innerWidth}},i=(0,r.makeReducer)(l,o());t.default=i;t.getWinDim=function(e){return{win:e.win}}},114:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=n(2),i=n(1),u=n(27),c=n(12),s=n(9),f=n(199),d=n(5),m=n(19),p=n(15),v=n(48),y=a(n(553)),b=a(n(118)),h=a(n(119)),g=a(n(6)),E=(0,i.combineSelectors)(c.getSettings,f.getGrid,s.getAltSection),w=(0,o.connect)(E)(function(e){var t=e.alter,n=e.alterSection,a=e.filtered,o=e.settings,c=e.filters,E=e.tables,w=e.table,O=e.listIds,S=e.select,_=e.perm,k=e.masterId,A=e.linkField,N=e.fixed,I=e.grid,T=e.gridTag,j=e.dispatch,M=I[T],P=void 0===M?i.emptyA:M,x=E[w],C=x.fields,F=x.fieldOrder,D=x.fieldSpecs,R=x.item,L=x.detailOrder,U=x.entities,W=(0,p.dealWithProvenance)(o,C),V=F.filter(function(e){return W[e]}),$=V.length,z=null!=L?L.length:0,H="".concat(90/$,"%"),B=V.map(function(e){var t=D[e].grid;if(null==t)return{width:H,shrink:0,grow:1};var n=t.width,a=t.grow,r=t.shrink;return{width:null==n?H:n,shrink:null==r?0:r,grow:null==a?0:a}}).concat(new Array(z).fill({width:H,shrink:0,grow:.3})).map(function(e){var t=e.width,n=e.grow,a=e.shrink;return{flex:"".concat(n," ").concat(a," ").concat(t),overflow:"auto"}}),Y=(0,f.compileSortedData)(E,w,O,P,o),K=(0,s.compileAlternatives)(n,2,0,j),q=(0,m.compileActive)(E,w),G=(0,v.getMasterTable)(E,w,A),X=[],J=!0,Z=!1,Q=void 0;try{for(var ee,te=Y[Symbol.iterator]();!(J=(ee=te.next()).done);J=!0){var ne=ee.value,ae=U[ne],re=ae.values,le=ae.perm,oe=ae.workflow,ie=K(ne),ue=ie.getAlt,ce=ie.nextAlt,se=ue(t),fe=null!=q&&q.has(ne);X.push(l.default.createElement(y.default,{key:"".concat(w,"-").concat(ne),alt:se,nextAlt:ce,filters:c,tables:E,table:w,eId:ne,masterId:k,linkField:A,isactive:fe,initialValues:re,perm:le,workflow:oe,fields:W,widthStyles:B,fixed:N}))}}catch(e){Z=!0,Q=e}finally{try{J||null==te.return||te.return()}finally{if(Z)throw Q}}return l.default.createElement(l.Fragment,null,a&&S===d.DETAILS?null:l.default.createElement("div",null,l.default.createElement(b.default,{tables:E,table:w,perm:_,select:S,masterTable:G,masterId:k,nItems:O.length,fixed:N,item:R,button:"button medium",onInsert:(0,u.handle)(j,d.insertItem,w,S,k,A)}),l.default.createElement(h.default,{table:w,listIds:O,item:R,button:"button medium",alterSection:n,nAlts:2,initial:0,openAll:S==d.DETAILS})),0!==P.length?l.default.createElement("div",{className:"sortspecs"},"Sorted: ",P.map(function(e){var t=r(e,2),n=t[0],a=t[1];return l.default.createElement("span",{className:"sortcol",key:n},n,l.default.createElement("span",{className:"fa fa-arrow".concat(-1===a?"down":"up")}))}),l.default.createElement(g.default,{tip:"remove all sort options",at:"right"},l.default.createElement("span",{className:"fa fa-close button small",onClick:(0,u.handle)(j,f.resetSort,T)})," ")):null,l.default.createElement("div",{className:"grid"},l.default.createElement("div",{className:"grid-head"},l.default.createElement("div",{className:"grid-status-cell"}),V.filter(function(e){return e!==A}).map(function(e,t){var n=B[t],a=P.find(function(t){return t[0]===e}),r=a?a[1]:0;return l.default.createElement("div",{className:"grid-head-cell label-col-grid",key:e,style:n},r?l.default.createElement(g.default,{tip:"remove column from sort options",at:"top"},l.default.createElement("span",{className:"sorted button small",onClick:(0,u.handle)(j,f.delColumn,T,e)},e)):l.default.createElement(g.default,{tip:"sort on this column",at:"top"},l.default.createElement("span",{className:"unsorted button small",onClick:(0,u.handle)(j,f.addColumn,T,e,1)},e)),r?l.default.createElement(g.default,{tip:"change sort direction",at:"top"},l.default.createElement("span",{className:"sorted button small fa fa-arrow-".concat(1===r?"up":"down"),onClick:(0,u.handle)(j,f.turnColumn,T,e)})):null)}),(L||i.emptyA).map(function(e,t){var n=B[t];return l.default.createElement("div",{className:"grid-head-cell label-col-grid",key:e,style:n},e)})),X))});t.default=w},117:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function o(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),u=n(2),c=n(33),s=n(8),f=n(1),d=n(15),m=n(48),p=n(39),v=n(5),y=n(9),b=n(19),h=n(12),g=n(13),E=a(n(18)),w=a(n(590)),O=a(n(204)),S=a(n(118)),_=a(n(119)),k=0,A=2,N=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,l=new Array(r),i=0;i<r;i++)l[i]=arguments[i];return o(a,(n=a=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.handleInsert=function(){var e=a.props,t=e.table,n=e.select,r=e.masterId,l=e.linkField;(0,e.dispatch)((0,v.insertItem)(t,n,r,l)),a.gotoNew=!0},a.gotoItem=function(e){var t=a.props,n=t.table,r=t.alterSection,l=t.dispatch;(0,(0,y.compileAlternatives)(r,A,k,l)(e).putAlt)((k+1)%A);(0,(0,y.compileAlternatives)("edit-".concat(n,"-").concat(e),A,k,l)("edit").putAlt)((k+1)%A)},a.scroll=function(e){null!=e&&e.scrollIntoView()},a.showHide=(0,s.memoize)(function(e,t,n,a,r){return function(){if(t!==v.DETAILS){var l=(0,f.getUrlParts)(c.browserHistory),o=l.base,i=l.controller,u=l.eId,s="".concat(o,"/").concat(e,"/").concat(i);a?u!==n&&c.browserHistory.push("".concat(s,"/item/").concat(n,"/")):(u!==f.emptyS&&c.browserHistory.push("".concat(s,"/")),r())}else r()}}),n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.settings,a=t.me,r=t.alter,l=t.alterSection,o=t.filtered,u=t.filters,c=t.tables,s=t.table,h=t.select,g=t.masterId,N=t.linkField,I=t.fixed,T=t.listIds,j=t.expand,M=t.border,P=t.perm,x=t.dispatch,C=c[s],F=C.item,D=C.entities,R=(0,y.compileAlternatives)(l,A,k,x),L=(0,b.compileActive)(c,s),U=(0,m.getMasterTable)(c,s,N),W=null==U?0:(0,p.editMode)({me:a,tables:c,table:s,relTable:U});return i.default.createElement("div",{className:"list-plain"},o&&h===v.DETAILS?null:i.default.createElement("div",null,i.default.createElement(S.default,{tables:c,table:s,perm:P,select:h,masterTable:U,masterId:g,nItems:T.length,fixed:I,item:F,button:"button medium",onInsert:this.handleInsert}),i.default.createElement(_.default,{table:s,listIds:T,item:F,button:"button medium",alterSection:l,nAlts:A,initial:k,openAll:h==v.DETAILS,expand:j})),T.map(function(t){var a=D[t],l=a.fields,o=a.perm,m=a.workflow,p=a.values,y=(0,v.headEntity)(c,s,t,n),b="".concat(s,"-").concat(t),S=!(0,v.needValues)(D,t),_=R(t),A=_.getAlt,T=_.nextAlt,P=A(r)!==k,x=P?{ref:e.scroll}:f.emptyO,C=S&&(0,d.someEditable)(l,o,m),F=null!=L&&L.has(t),U=0===W?W:W(p);return i.default.createElement("div",{key:t,className:F?"isactive":f.emptyS},P?i.default.createElement("div",x,j?null:i.default.createElement("span",{className:"link head",onClick:e.showHide(s,h,t,!1,T)},i.default.createElement("span",{className:"button small fa fa-angle-up"})),i.default.createElement(E.default,null,i.default.createElement(w.default,{filters:u,tables:c,table:s,eId:t,masterId:g,linkField:N,isactive:F,startMode:U,fixed:I,inhibitFetch:j,border:M}))):i.default.createElement("span",{className:"item-head"},C?i.default.createElement(O.default,{form:b,active:P}):i.default.createElement("span",{className:"fa"}),i.default.createElement("span",{className:"link head",onClick:e.showHide(s,h,t,!0,T)},i.default.createElement("span",{className:"button small fa fa-angle-down"})," ",y)))}))}},{key:"gotoNewItem",value:function(){var e=this.props,t=e.tables,n=e.table,a=e.navItem;if(this.gotoNew){var r=t[n];if(null==r)return;var l=r.lastInserted;null!=l&&(this.gotoNew=!1,this.gotoItem(l))}else null!=a&&this.gotoItem(a)}},{key:"openAll",value:function(){var e=this.props,t=e.alter,n=e.alterSection,a=e.table,r=e.listIds,l=e.expand,o=e.dispatch;l&&(0,v.handleOpenAll)(t,n,A,k,a,r,o)()}},{key:"componentDidMount",value:function(){this.openAll(),this.gotoNewItem()}},{key:"componentDidUpdate",value:function(){this.openAll(),this.gotoNewItem()}}]),t}(),I=(0,f.combineSelectors)(h.getSettings,g.getMe,y.getAltSection),T=(0,u.connect)(I)((0,f.withParams)(N));t.default=T},118:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=n(2),o=n(1),i=n(39),u=n(5),c=n(12),s=n(13),f=a(n(6)),d=(0,o.combineSelectors)(c.getSettings,s.getMe),m=(0,l.connect)(d)(function(e){var t=e.settings,n=e.me,a=e.tables,l=e.table,o=e.select,c=e.masterTable,s=e.masterId,d=e.perm,m=e.fixed,p=e.item,v=e.nItems,y=e.button,b=e.onInsert,h=p[0];return m||null==d||!d.insert||d.needMaster&&o!=u.DETAILS?null:(0,i.applyInsertTemplate)({settings:t,me:n,tables:a,table:l,relTable:c,relId:s,nItems:v,onInsert:b})||r.default.createElement(f.default,{tip:"make a new ".concat(h),at:"bottom"},r.default.createElement("span",{className:"fa fa-plus ".concat(y),onClick:b}))});t.default=m},119:function(e,t,n){"use strict";function a(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),l=n(2),o=n(9),i=n(5),u=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),c=(0,l.connect)(o.getAltSection)(function(e){var t=e.alter,n=e.alterSection,l=e.table,o=e.listIds,c=e.item,s=e.button,f=e.nAlts,d=e.initial,m=e.openAll,p=e.expand,v=e.dispatch,y=o.length>0,b=a(c,2),h=b[0],g=b[1],E=1===o.length?h:g,w="".concat(o.length," ").concat(E," ");return r.default.createElement(r.Fragment,null,r.default.createElement("span",null,w),y&&m&&!p?r.default.createElement(u.default,{tip:"open all ".concat(E),at:"bottom"},r.default.createElement("div",{className:"fa fa-angle-double-down ".concat(s),onClick:(0,i.handleOpenAll)(t,n,f,d,l,o,v)})):null,y&&!p?r.default.createElement(u.default,{tip:"close all opened ".concat(E),at:"bottom"},r.default.createElement("div",{className:"fa fa-angle-double-up ".concat(s),onClick:(0,i.handleCloseAll)(t,n,f,d,o,v)})):null)});t.default=c},12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSettings=t.default=t.adjust=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),r=n(1);t.adjust=function(e,t){return{type:"setSetting",key:e,value:t}};var l={setSetting:function(e,t){var n=t.key,r=t.value;return(0,a.default)(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,{$set:r}))}},o=(0,r.makeReducer)(l,{provenanceFields:new Set(["creator","dateCreated","modified"]),hideProvenance:!0,longDates:{assessment:{dateSubmitted:!0,dateWithdrawn:!0}},showTooltips:!0});t.default=o;t.getSettings=function(e){return{settings:e.settings}}},13:function(e,t,n){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.getMe=t.default=t.fetchMe=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),l=n(52),o=n(1);t.fetchMe=function(){return(0,l.accessData)({type:"fetchMe",contentType:"db",path:"/who/ami",desc:"me"})};var i={fetchMe:function(e,t){var n=t.data;return null==n?o.emptyO:a({},n)},modItem:function(e,t){var n=t.data;if("user"===t.table){var a=n.records,l=void 0===a?o.emptyA:a,i=e,u=!0,c=!1,s=void 0;try{for(var f,d=l[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var m=f.value,p=m.values,v=m.groupValues,y=void 0===v?o.emptyO:v;p._id==e._id&&(i=(0,r.default)(i,{$merge:p}),i=(0,r.default)(i,{$merge:y}))}}catch(e){c=!0,s=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw s}}return i}return e}},u=(0,o.makeReducer)(i);t.default=u;t.getMe=function(e){return{me:e.me}}},174:function(e,t,n){"use strict";function a(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getNotes=t.default=t.display=t.clear=t.notify=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),l=n(1);t.notify=function(e){return{type:"msgs",msgs:e}};t.clear=function(){return{type:"clear"}};t.display=function(e){return{type:"display",onOff:e}};var o={progress:function(e,t){var n=t.desc;return(0,r.default)(e,{messages:{$push:[{kind:"special",text:"still waiting for ".concat(n)}]}})},pending:function(e,t){var n=t.desc,l=t.busy,o=t.extraMsgs;return(0,r.default)(e,{messages:{$push:a(o).concat([{kind:"special",text:"waiting for ".concat(n)}])},busy:{$set:l+1}})},success:function(e,t){var n=t.desc,l=t.busy,o=t.extraMsgs;return(0,r.default)(e,{messages:{$push:a(o).concat([{kind:"info",text:"".concat(n," ok")}])},busy:{$set:l-1},show:{$set:o.some(function(e){return"warning"===e.kind||"error"===e.kind})}})},error:function(e,t){var n=t.desc,l=t.busy,o=t.extraMsgs;return(0,r.default)(e,{messages:{$push:a(o).concat([{kind:"error",text:"".concat(n," failed")}])},busy:{$set:l-1},show:{$set:!0}})}},i={async:function(e,t){var n=t.msgs,a=t.status,r=t.desc,i=e.busy,u=n||l.emptyA,c=o[a];return c?c(e,{extraMsgs:u,desc:r,busy:i}):e},msgs:function(e,t){var n=t.msgs;return(0,r.default)(e,{messages:{$push:n},show:{$set:!0}})},clear:function(e){return(0,r.default)(e,{messages:{$set:l.emptyA},show:{$set:!1}})},display:function(e,t){var n=t.onOff;return(0,r.default)(e,{show:{$set:n}})}},u=(0,l.makeReducer)(i,{messages:l.emptyA,busy:0,show:!1});t.default=u;t.getNotes=function(e){var t=e.notes,n=t.messages,a=t.busy,r=t.show,o=-1,i=l.emptyS;return n.forEach(function(e,t){var n=e.kind;"error"===n?(o=t,i="error"):"warning"===n&&"error"!==i&&(o=t,i="warning")}),{messages:n,busy:a,show:r||i,lastMsg:n.length-1,lastNote:o,lastKind:i}}},175:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changedDoc=t.needDoc=t.getDoc=t.default=t.fetchDoc=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),r=n(52),l=n(1);t.fetchDoc=function(e){var t=e.docDir,n=e.docName,a=e.docExt,l="".concat(t,"/").concat(n,".").concat(a);return(0,r.accessData)({type:"fetchDoc",contentType:"json",path:l,desc:"document ".concat(n)})};var o={fetchDoc:function(e,t){var n=t.path,r=t.data;return null==r?e:(0,a.default)(e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,{$set:r}))}},i=(0,l.makeReducer)(o);t.default=i;t.getDoc=function(e,t){var n=e.docs,a=t.docDir,r=t.docName,l=t.docExt;return{text:n["".concat(a,"/").concat(r,".").concat(l)]}};var u=function(e){return null==e.text};t.needDoc=u;t.changedDoc=function(e,t){return(0,l.propsChanged)(e,u,t,["docDir","docName","docExt"])}},18:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n.state={hasError:!1,error:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(t,[{key:"componentDidCatch",value:function(e){this.setState({hasError:!0,error:e.message})}},{key:"render",value:function(){return this.state.hasError?l.default.createElement("div",{className:"error-boundary"},this.state.error):this.props.children}}]),t}();t.default=o},19:function(e,t,n){"use strict";function a(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.reviewerRole=t.isReviewerType=t.getItem=t.assessmentScore=t.compileActive=t.loadExtra=t.TYPE_FIELD=t.TYPE_TABLE=t.CRITERIA_TABLE=t.PACKAGE_TABLE=void 0;var r=n(8),l=n(1),o=n(202),i="package";t.PACKAGE_TABLE=i;var u="criteria";t.CRITERIA_TABLE=u;var c="typeContribution";t.TYPE_TABLE=c;var s="typeContribution";t.TYPE_FIELD=s;t.loadExtra={contrib:[["package"],["criteria"],["typeContribution"]]};var f=(0,r.memoize)(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if([e,t,n].some(function(e){return null==e}))return r?l.emptySet:l.emptyO;var c=new Set,f=new Set,d=new Set,m=Date.now();return Object.entries(e).forEach(function(e){var t=a(e,2),n=t[0],r=t[1].values,i=r.startDate,u=r.endDate,s=r.typeContribution,d=(0,o.getDateTime)(i),p=(0,o.getDateTime)(u),v=null==d,y=null==p;v&&y||(v||d<m)&&(y||m<p)&&(c.add(n),(s||l.emptyA).forEach(function(e){return f.add(e)}))}),Object.entries(n).forEach(function(e){var t=a(e,2),n=t[0],r=t[1].values[i];c.has(r)&&d.add(n)}),r?r===s?f:r===i?c:r===u?d:null:{activeIdsPkg:Array.from(c).map(function(t){return e[t].values}).sort((0,o.sortTimeInterval)("startDate","endDate")).map(function(e){return e._id}),activeIdsTyp:Array.from(f).map(function(e){return t[e].values}).sort((0,o.sortStringTemplate)(function(e){return"".concat(e.mainType||l.emptyS," / ").concat(e.subType||l.emptyS)})).map(function(e){return e._id}),activeIdsCri:Array.from(d).map(function(e){return n[e].values}).sort((0,o.sortStringTemplate)(function(e){return e.criterion})).map(function(e){return e._id})}},l.emptyO,{debug:"compileActiveItems"});t.compileActive=function(e,t){if([i,u,c].some(function(t){return null==e[t]}))return t?l.emptySet:l.emptyO;var n=e[i].entities,a=e[u].entities,r=e[c].entities;return f(n,r,a,t)};var d=(0,r.memoize)(function(e,t){var n=e.criteriaEntry,a=(n=void 0===n?l.emptyO:n).entities,r=e.score,o=(r=void 0===r?l.emptyO:r).entities,i=Object.keys(a).filter(function(e){return a[e].values.assessment==t}).map(function(e){var t=a[e].values,n=t.criteria,r=t.score,i=o[r],u=(i=void 0===i?l.emptyO:i).values,c=(u=void 0===u?l.emptyO:u).score,s=void 0===c?0:c,f=(0,l.max)(Object.keys(o).filter(function(e){return o[e].values.criteria==n}).map(function(e){return o[e].values.score}));return{criteria:n,score:s,maxScore:f}}),u=(0,l.sum)(i.map(function(e){return e.maxScore})),c=i.length,s=i.filter(function(e){return e.score>=0}),f=(0,l.sum)(s.map(function(e){return e.maxScore})),d=(0,l.sum)(s.map(function(e){return e.score})),m=s.length;return{overall:0==f?0:Math.round(100*d/f),relevantScore:d,relevantMax:f,allMax:u,relevantN:m,allN:c}},l.emptyO);t.assessmentScore=d;t.getItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(e||l.emptyO).items,a=void 0===n?l.emptyA:n;return t?a:0==a.length?l.emptyO:a[0]};t.isReviewerType=function(e,t,n){return null==e._id?null:e._id===t?"E":e._id===n?"F":null};var m=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({E:"first reviewer (expert)",F:"second reviewer (final say)"},null,"not a reviewer");t.reviewerRole=m},198:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.compileOptions=t.getSelect=t.default=t.togglePopUp=t.setPopUp=t.setSearch=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),l=n(1),o=n(8),i=n(5),u={search:l.emptyS,popUp:!1};t.setSearch=function(e,t){return{type:"setSearch",selectTag:e,search:t}};t.setPopUp=function(e,t){return{type:"setPopUp",selectTag:e,onOff:t}};t.togglePopUp=function(e){return{type:"togglePopUp",selectTag:e}};var c={setSearch:function(e,t){var n=t.selectTag,l=t.search;return(0,r.default)(e,a({},n,{$apply:function(e){return(0,r.default)(e||u,{search:{$set:l}})}}))},setPopUp:function(e,t){var n=t.selectTag,l=t.onOff;return(0,r.default)(e,a({},n,{$apply:function(e){return(0,r.default)(e||u,{popUp:{$set:l}})}}))},togglePopUp:function(e,t){var n=t.selectTag,l=e[n],o=null==l||!l.popUp;return(0,r.default)(e,a({},n,{$apply:function(e){return(0,r.default)(e||u,{popUp:{$set:o}})}}))}},s=(0,l.makeReducer)(c,l.emptyO);t.default=s;t.getSelect=function(e){return{select:e.select}};var f=(0,o.memoize)(function(e,t,n,a,r){var o=e[t],u=o.valueLists,c=o.fieldSpecs,s=(u||l.emptyO)[a];if(null==s)return{options:l.emptyA,optionLookup:l.emptyO};var f=c[a].valType,d=(null==n?s:s.filter(function(e){return n.includes(e)})).map(function(n){return{value:n,label:(0,i.repr)(e,t,a,f,!1,null,n,r,", ")}}),m={};return d.forEach(function(e){var t=e.value,n=e.label;m[t]=n}),{options:d,optionLookup:m}},l.emptyO,{debug:"compileOptions"});t.compileOptions=f},199:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.compileSortedData=t.getGrid=t.default=t.turnColumn=t.delColumn=t.addColumn=t.resetSort=void 0;var o=a(n(528)),i=a(n(538)),u=n(8),c=n(1),s=n(5);t.resetSort=function(e){return{type:"resetSort",gridTag:e}};t.addColumn=function(e,t,n){return{type:"addColumn",gridTag:e,column:t,direction:n}};t.delColumn=function(e,t){return{type:"delColumn",gridTag:e,column:t}};t.turnColumn=function(e,t){return{type:"turnColumn",gridTag:e,column:t}};var f={resetSort:function(e,t){return l({},e,r({},t.gridTag,c.emptyA))},addColumn:function(e,t){var n=t.gridTag,a=t.column,o=t.direction;return l({},e,r({},n,(e[n]||c.emptyA).filter(function(e){return e[0]!==a}).concat([[a,o]])))},delColumn:function(e,t){var n=t.gridTag,a=t.column;return l({},e,r({},n,(e[n]||c.emptyA).filter(function(e){return e[0]!==a})))},turnColumn:function(e,t){var n=t.gridTag,a=t.column;return l({},e,r({},n,(e[n]||c.emptyA).map(function(e){return[e[0],e[0]===a?-e[1]:e[1]]})))}},d=(0,c.makeReducer)(f,c.emptyO);t.default=d;t.getGrid=function(e){return{grid:e.grid}};var m=(0,u.memoize)(function(e,t,n,a,r){var l=a.map(function(e){return e[0]}),u=a.map(function(e){return 1===e[1]?"asc":"desc"}),c=e[t].entities,s=p(e,t,r),f=n.map(function(e){return(0,i.default)(c[e].values,s)});return(0,o.default)(f,l,u).map(function(e){return e._id})},c.emptyO);t.compileSortedData=m;var p=function(e,t,n){var a=e[t].fieldSpecs;return function(r,l){if("_id"===l)return r;var o=a[l],i=o.valType,u=o.multiple;return(0,s.repr)(e,t,l,i,u,null,r,n,"|")}}},201:function(e,t,n){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),l=n(33);t.default=function(e){return r.default.createElement(l.Link,a({},e,{activeClassName:"active"}))}},204:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(25),r=n(20),l=(0,a.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!0})((0,r.editControl)(!1));t.default=l},208:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(2),i=n(25),u=n(19),c=n(202),s=n(115),f=a(n(575)),d=a(n(576)),m=(0,o.connect)()(function(e){e.alter;var t=e.field,n=e.tables,a=e.table,o=e.eId,m=(e.dispatch,e.allowed),p=e.reset,v=e.submitValues,y=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["alter","field","tables","table","eId","dispatch","allowed","reset","submitValues"]),b=n[a].fieldSpecs[t],h=b.valType,g=b.valid,E=b.multiple;if("string"==typeof h){var w=(0,s.getValType)(h),O=w.component,S=w.type,_=w.props,k=c.validation[g||h],A=c.normalization[g||h];return E?l.default.createElement(i.FieldArray,r({name:t,component:f.default,componentSingle:O},_,{validateSingle:k,normalizeSingle:A,tables:n,table:a,eId:o,type:S,valType:h,rerenderOnEveryChange:!0,reset:p,submitValues:v},y)):l.default.createElement(i.Field,r({name:t,component:O},_,{validate:k,normalize:A,tables:n,table:a,eId:o,type:S,reset:p,submitValues:v},y))}var N=h.allowNew,I=h.popUpIfEmpty,T=h.inactive,j=T?(0,u.compileActive)(n,t):null,M="".concat(a,"-").concat(o,"-").concat(t);return l.default.createElement(i.Field,r({name:t,component:d.default,selectTag:M,field:t,multiple:E,allowNew:N,popUpIfEmpty:I,tables:n,table:a,eId:o,allowed:m,activeItems:j,inactive:T,submitValues:v},y))});t.default=m},209:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function(e){var t=e.type,n=e.dirty;return a.default.createElement("div",{className:"edit-help"},a.default.createElement("div",{className:"help-line"},n?a.default.createElement("div",{className:"help-item"},"Press ",a.default.createElement("span",{className:"help-code"},"ESC")," to cancel"):null,a.default.createElement("div",{className:"help-item"},"Press ",a.default.createElement("span",{className:"help-code"},"TAB")," or click outside this field to save")),"markdown"==t?a.default.createElement("div",{className:"help-line"},a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"["),"link text",a.default.createElement("span",{className:"help-code"},"]("),"url",a.default.createElement("span",{className:"help-code"},")")),a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"*"),a.default.createElement("i",null,"italic"),a.default.createElement("span",{className:"help-code"},"*")),a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"**"),a.default.createElement("b",null,"bold"),a.default.createElement("span",{className:"help-code"},"**")),a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"`"),a.default.createElement("code",null,"code"),a.default.createElement("span",{className:"help-code"},"`")),a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"# "),a.default.createElement("span",{className:"mdh1"},"Heading1")),a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"## "),a.default.createElement("span",{className:"mdh2"},"Heading2")),a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"* "),a.default.createElement("span",{className:"mduli"},"bullet item")),a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"1. "),a.default.createElement("span",{className:"mdoli"},"numbered item")),a.default.createElement("div",{className:"help-item"},a.default.createElement("span",{className:"help-code"},"> "),a.default.createElement("span",{className:"mdbq"},"block quote"))):null)}},210:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),l=n(2),o=n(1),i=n(27),u=n(15),c=n(48),s=n(5),f=n(9),d=n(12),m=a(n(585)),p=a(n(586)),v=a(n(588)),y=a(n(589)),b=a(n(597)),h=a(n(6)),g=(0,o.combineSelectors)(d.getSettings,f.getAltSection),E=(0,l.connect)(g)(function(e){var t=e.settings,n=e.alter,a=e.alterSection,l=e.filters,d=e.tables,g=e.table,E=e.eId,w=e.masterId,O=e.linkField,S=e.isactive,_=e.startMode,k=e.fixed,A=e.border,N=e.initialValues,I=e.fields,T=e.perm,j=e.workflow,M=e.dispatch,P=e.fieldFragments,x=e.detailFragments;null==P&&(P=(0,u.makeFields)(e)),null==x&&(x=(0,c.makeDetails)(e));var C=(0,c.makeKeepInfo)(x),F=(0,u.someEditable)(I,T,j),D=(0,f.compileAlternatives)(a,2,_,M)("edit"),R=D.getAlt,L=D.nextAlt,U=R(n),W=null==A?o.emptyS:F&&1===U?null==A.edit||A.edit?o.emptyS:"noBorder":null==A.read||A.read?o.emptyS:"noBorder",V=F&&1===U?"edit":o.emptyS,$=(0,s.headEntity)(d,g,E,t);return r.default.createElement("div",{className:"itemRecord ".concat(W," ").concat(V," ").concat(S?"isactive":o.emptyS)},F&&1===U?r.default.createElement(r.Fragment,null,r.default.createElement(b.default,{perm:T,workflow:j,keep:C,fixed:k,button:"button medium",onClick:(0,i.handle)(M,s.delItem,g,E,$)}),r.default.createElement(p.default,{settings:t,tables:d,table:g,eId:E,nextAlt:L,form:"".concat(g,"-").concat(E),initialValues:N,perm:T,masterId:w,linkField:O,fieldFragments:P})):r.default.createElement(r.Fragment,null,F?r.default.createElement(h.default,{tip:"open an edit form for this record",at:"right"},r.default.createElement("span",{className:"button medium fa fa-pencil",onClick:L})):null,r.default.createElement(b.default,{perm:T,workflow:j,keep:C,fixed:k,button:"button medium",onClick:(0,i.handle)(M,s.delItem,g,E,$)}),r.default.createElement(v.default,{settings:t,tables:d,table:g,eId:E,masterId:w,linkField:O,fieldFragments:P})),r.default.createElement(m.default,{settings:t,tables:d,table:g,eId:E,form:"".concat(g,"-").concat(E),initialValues:N,linkField:O,fieldFragments:P}),r.default.createElement(y.default,{alterSection:"list-".concat(g,"-").concat(s.DETAILS),detailFragments:x,filters:l,tables:d,table:g,eId:E}))});t.default=E},211:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(2),u=n(1),c=n(27),s=n(48),f=n(28),d=n(5),m=a(n(117)),p=a(n(114)),v=a(n(591)),y=a(n(119)),b=a(n(118)),h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.tables,n=e.table,a=e.filterTag;(0,e.dispatch)((0,f.initFiltering)(t,n,a))}},{key:"componentWillReceiveProps",value:function(e){var t=e.tables,n=e.table,a=e.filterTag,r=e.filters[n],l=(r=void 0===r?u.emptyO:r)[a],o=e.dispatch,i=this.props,c=i.table,s=i.filterTag;c===n&&s===a||null!=l||o((0,f.initFiltering)(t,n,a))}},{key:"render",value:function(){var e=this.props,t=e.tables,n=e.filters,a=e.table,r=e.navItem,l=e.perm,i=e.select,h=e.masterId,g=e.linkField,E=e.expand,w=e.border,O=e.fixed,S=e.listIds,_=e.mode,k=e.compact,A=e.title,N=e.filterTag,I=e.gridTag,T=e.topLevel,j=e.dispatch,M=(0,f.computeFiltering)(t,n,a,N,S),P=M.filteredIds,x=M.filteredAmountOthers,C=M.amounts;if(null==P)return o.default.createElement("div",null);var F=k?"compact":T?"outer":u.emptyS,D=t[a].item,R=D[1],L="list-".concat(a,"-").concat(i),U=(0,s.getMasterTable)(t,a,g);return o.default.createElement("div",{className:"list-filter ".concat(F)},i===d.DETAILS?o.default.createElement("div",null,o.default.createElement(b.default,{tables:t,table:a,perm:l,select:i,masterTable:U,masterId:h,nItems:S.length,fixed:O,item:D,button:"button medium",onInsert:(0,c.handle)(j,d.insertItem,a,i,h,g)}),o.default.createElement(y.default,{table:a,listIds:S,item:D,button:"button medium",alterSection:L,nAlts:2,initial:0,openAll:!0,expand:E})):null,o.default.createElement("div",{className:"filters ".concat(F)},k?null:o.default.createElement("p",null,"Total ",o.default.createElement("span",{className:"good-o"},S.length)),o.default.createElement(v.default,{filters:n,tables:t,table:a,filterTag:N,listIds:S,filteredAmount:P.length,filteredAmountOthers:x,amounts:C,compact:k})),o.default.createElement("div",{className:"list ".concat(F)},"list"===_?o.default.createElement(m.default,{alterSection:L,filtered:!0,filters:n,tables:t,table:a,navItem:r,listIds:P,perm:l,select:i,title:A,masterId:h,linkField:g,expand:E,border:w,fixed:O}):"grid"===_?o.default.createElement(p.default,{alterSection:L,filtered:!0,filters:n,tables:t,table:a,navItem:r,listIds:P,perm:l,select:i,gridTag:I,masterId:h,linkField:g,fixed:O}):'unknown display mode "'.concat(_,'" for ').concat(R)))}}]),t}(),g=(0,i.connect)()(h);t.default=g},212:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(1);t.default=function(e){var t=e.subTotal,n=e.total,l=e.className;return a.default.createElement("span",{className:l},null==t?r.emptyS:"".concat(t),null==n||null==t?r.emptyS:" of ",a.default.createElement("strong",null,null==n?r.emptyS:"".concat(n)))}},213:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function l(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(0)),i=n(2),u=n(1),c=n(28),s=n(9),f=a(n(593)),d=a(n(594)),m=a(n(212)),p=(0,i.connect)(s.getAltSection)(function(e){var t=e.alter,n=e.alterSection,a=e.tables,i=e.table,p=e.filterTag,v=e.filterSetting,y=e.filterId,b=e.filterField,h=e.filterRelField,g=e.filterLabel,E=e.listIds,w=e.filteredAmount,O=e.filteredAmountOthers,S=e.amounts,_=e.maxCols,k=e.expanded,A=e.compact,N=e.dispatch,I=(0,c.compileValues)(a,i,p,E,b,h);if(null==Object.keys(I).length)return o.default.createElement("div",{className:"facet"},o.default.createElement("p",null," -no facets "));var T=k?0:1,j=(0,s.compileAlternatives)(n,2,T,N)("expand"),M=j.getAlt,P=j.nextAlt,x=M(t),C=A?u.emptyO:{style:{flexBasis:"".concat(94/_,"%")}},F=A?"right":"down",D=A?"left":"up";return o.default.createElement("div",{className:"facetFilter ".concat(A?"compact":u.emptyS)},o.default.createElement("div",{className:"facetHead ".concat(A?"compact":u.emptyS)},o.default.createElement(d.default,{table:i,filterId:y,filterSetting:v,filterTag:p})," ",g," ",A?null:o.default.createElement(m.default,{subTotal:w,total:O,className:"facet-stat-all"})," ",o.default.createElement("span",{className:"button small fa fa-angle-".concat(0===x?D:F),onClick:P})),0===x?o.default.createElement("div",{className:"facet-container ".concat(A?"compact":u.emptyS)},Object.entries(I).map(function(e){var t=l(e,2),n=t[0],a=t[1];return o.default.createElement("div",r({key:n,className:"facet-row ".concat(A?"compact":u.emptyS)},C),o.default.createElement(f.default,{className:"facet-value ".concat(A?"compact":u.emptyS),table:i,filterSetting:v,filterTag:p,filterId:y,valueId:n,valueRep:a}),A?null:o.default.createElement(m.default,{className:"facet-stat",subTotal:S[n]}))})):o.default.createElement("div",null))});t.default=p},214:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function(e){var t=e.splat;return a.default.createElement("h1",null,"404: ",a.default.createElement("code",null,t)," not found on this site.")}},215:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}var r=a(n(0)),l=n(219),o=n(33),i=n(5),u=a(n(446)),c=a(n(544)),s=a(n(549)),f=a(n(551)),d=a(n(598)),m=a(n(214)),p=a(n(18));(0,l.render)(r.default.createElement(u.default,null,r.default.createElement(p.default,null,r.default.createElement(o.Router,{history:o.browserHistory},r.default.createElement(o.Redirect,{from:"/about",to:"/docs/about.md"}),r.default.createElement(o.Redirect,{from:"/docs/about",to:"/docs/about.md"}),r.default.createElement(o.Redirect,{from:"/about.md",to:"/docs/about.md"}),r.default.createElement(o.Redirect,{from:"/login",to:"/docs/about.md"}),r.default.createElement(o.Redirect,{from:"/logout",to:"/docs/about.md"}),r.default.createElement(o.Redirect,{from:"/slogout",to:"/docs/about.md"}),r.default.createElement(o.Route,{path:"/",component:c.default},r.default.createElement(o.IndexRoute,{component:c.default}),r.default.createElement(o.IndexRedirect,{to:"/docs/about.md"}),r.default.createElement(o.Route,{path:"docs/:docFile",component:d.default}),r.default.createElement(o.Route,{path:"tech/docs/gen/:docFile",component:d.default}),r.default.createElement(o.Route,{path:"tech/docs/:docFile",component:d.default}),r.default.createElement(o.Route,{path:"data",component:s.default},r.default.createElement(o.Route,{path:":table"},r.default.createElement(o.Route,{path:"mylist(/item/:eId)",component:f.default,select:i.MYIDS,mode:"list"}),r.default.createElement(o.Route,{path:"myassign(/item/:eId)",component:f.default,select:i.MYIDS,extra:!0,mode:"list"}),r.default.createElement(o.Route,{path:"list(/item/:eId)",component:f.default,select:i.ALLIDS,mode:"list"}),r.default.createElement(o.Route,{path:"grid(/item/:eId)",component:f.default,select:i.ALLIDS,mode:"grid"}),r.default.createElement(o.Route,{path:"filter(/item/:eId)",component:f.default,select:i.ALLIDS,mode:"list",filtered:!0}),r.default.createElement(o.Route,{path:"stats",component:f.default,select:i.ALLIDS,mode:"stats",filtered:!1})))),r.default.createElement(o.Route,{path:"*",component:m.default})))),document.getElementById("body"))},28:function(e,t,n){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function r(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.testAllChecks=t.makeTag=t.computeFiltering=t.compileValues=t.getFilters=t.default=t.initFiltering=t.changeFacetAll=t.changeFacet=t.changeFulltext=void 0;var l=function(e){return e&&e.__esModule?e:{default:e}}(n(176)),o=n(8),i=n(1),u=n(5);t.changeFulltext=function(e,t,n,a){return{type:"fulltext",table:e,filterTag:t,filterId:n,data:a}};t.changeFacet=function(e,t,n,a,r){return{type:"facet",table:e,filterTag:t,filterId:n,data:[a,r]}};t.changeFacetAll=function(e,t,n,a){return{type:"facetAll",table:e,filterTag:t,filterId:n,data:a}};t.initFiltering=function(e,t,n){var a=e[t];return{type:"initFiltering",tables:e,table:t,filterTag:n,fieldIds:f(a)}};var c={initFiltering:function(e,t){var n=t.tables,a=t.table,r=t.filterTag,l=t.fieldIds,o=e[a],u=p(n,a,void 0===o?{}:o,r,l);return(0,i.updateAuto)(e,[a,r],{$set:u})},fulltext:function(e,t){var n=t.table,a=t.filterTag,r=t.filterId,l=t.data;return(0,i.updateAuto)(e,[n,a,r],{$set:l})},facetAll:function(e,t){var n=t.table,a=t.filterTag,r=t.filterId,l=t.data,o=e[n][a][r],u={};return Object.keys(o).forEach(function(e){u[e]=l}),(0,i.updateAuto)(e,[n,a,r],{$set:u})},facet:function(e,t){var n=t.table,a=t.filterTag,l=t.filterId,o=r(t.data,2),u=o[0],c=o[1];return(0,i.updateAuto)(e,[n,a,l,u],{$set:c})}},s=(0,i.makeReducer)(c);t.default=s;t.getFilters=function(e){return{filters:e.filters}};var f=(0,o.memoize)(function(e){if(null==e)return i.emptyO;var t=e.valueLists,n=e.fields,r=e.filterList,o=e.fieldSpecs;if(null==r)return i.emptyO;var u=r.filter(function(e){return n[e.field]}).filter(function(e){return"Fulltext"!==e.type}).map(function(e){return e.field}),c=u.filter(function(e){return null==t[e]});return a({},(0,l.default)(t,function(e,t){return u.includes(t)}),c.length?b(e,c,o):i.emptyO)},i.emptyO,{debug:"compileAllFieldIds"}),d=(0,o.memoize)(function(e,t,n){if(null==e)return i.emptyO;var r=e.valueLists,o=e.fields,c=e.filterList,s=e.fieldSpecs;if(null==c)return i.emptyO;var f=c.filter(function(e){return o[e.field]}).filter(function(e){return"Fulltext"!==e.type}).map(function(e){return e.field}),d=t.startsWith(u.DETAILS),m=f.filter(function(e){return null==r[e]});return d?y(e,n,f,s):a({},(0,l.default)(r,function(e,t){return f.includes(t)}),m.length?y(e,n,m,s):i.emptyO)},i.emptyO,{debug:"compileFieldIds"}),m=(0,o.memoize)(function(e,t,n,a,r,l){var o=e[t];if(null==o)return i.emptyA;var u=o.fieldSpecs,c=d(o,n,a)[r];return h(e,u,c,r,l)},i.emptyO,{debug:"compileValues"});t.compileValues=m;var p=(0,o.memoize)(function(e,t,n,a,r){var l=e[t];if(null==l)return i.emptyO;var o=l.fields,u=l.filterList;if(null==u)return i.emptyO;var c=(n||i.emptyO)[a],s=void 0===c?i.emptyO:c,f={};return u.filter(function(e){return o[e.field]}).forEach(function(t,n){var a=s[n];if("Fulltext"===t.type)null==a&&(f[n]=i.emptyS);else{var o=a||i.emptyO,u={},c=t.field,d=t.relField,m=r[c];if(d)for(var p=l.fieldSpecs,v=h(e,p,m,c,d),y=Object.keys(v),b=0;b<y.length;b++){var g=y[b];u[g]=null==o[g]||o[g]}else m.forEach(function(e){u[e]=null==o[e]||o[e]});u[i.emptyS]=null==o[i.emptyS]||o[i.emptyS],Object.keys(u).length&&(f[n]=u)}}),f},i.emptyO,{debug:"initFilterSettings"}),v=(0,o.memoize)(function(e,t,n,a,l){var o=e[n];if(null==o)return i.emptyO;var u=o.entities,c=o.fields,s=o.fieldSpecs,f=o.filterList;if(null==f)return{filteredIds:l};var m=t[n],p=(void 0===m?i.emptyO:m)[a];if(null==p)return i.emptyO;var v=d(o,a,l),y=f.filter(function(e){return c[e.field]}),b={},h={};y.forEach(function(t,n){!function(t,n){var a=p[n],r=t.field,l=t.relField,o=s[r],i="Fulltext"===t.type?w:O;b[n]=i(e,r,l,o,a)}(t,n),h[n]=[]});var g=[],E=function(e){var t=u[e],n=null,a=!0,l=!1;Object.entries(b).forEach(function(e){var o=r(e,2),i=o[0],u=o[1];if(!l){u(t)||(a=!1,null===n?n=i:l=!0)}}),l||(a?(g.push(e),y.forEach(function(t,n){h[n].push(e)})):h[n].push(e))},_=!0,k=!1,A=void 0;try{for(var N,I=l[Symbol.iterator]();!(_=(N=I.next()).done);_=!0){E(N.value)}}catch(e){k=!0,A=e}finally{try{_||null==I.return||I.return()}finally{if(k)throw A}}var T={};y.forEach(function(t,n){var a=t.field,r=t.relField,l=t.type;T[n]="Fulltext"===l?null:S(e,a,r,s,v[a],h[n],u)});var j={};return Object.entries(h).forEach(function(e){var t=r(e,2),n=t[0],a=t[1];j[n]=a.length}),{filteredIds:g,filteredAmountOthers:j,amounts:T}},i.emptyO,{debug:"computeFiltering"});t.computeFiltering=v;var y=(0,o.memoize)(function(e,t,n,a){var r={},l=e.entities,o=t.map(function(e){return l[e].values}),i=!0,u=!1,c=void 0;try{for(var s,f=n[Symbol.iterator]();!(i=(s=f.next()).done);i=!0){var d=s.value,m=a[d].multiple,p=new Set,v=!0,y=!1,b=void 0;try{for(var h,g=o[Symbol.iterator]();!(v=(h=g.next()).done);v=!0){var E=h.value[d];if(null!=E)if(m){var w=!0,O=!1,S=void 0;try{for(var _,k=E[Symbol.iterator]();!(w=(_=k.next()).done);w=!0){var A=_.value;p.add(A)}}catch(e){O=!0,S=e}finally{try{w||null==k.return||k.return()}finally{if(O)throw S}}}else p.add(E)}}catch(e){y=!0,b=e}finally{try{v||null==g.return||g.return()}finally{if(y)throw b}}r[d]=Array.from(new Set(p))}}catch(e){u=!0,c=e}finally{try{i||null==f.return||f.return()}finally{if(u)throw c}}return r},i.emptyO,{debug:"gatherIds"}),b=(0,o.memoize)(function(e,t,n){var a={},r=e.entities,l=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){for(var s=u.value,f=n[s].multiple,d=new Set,m=Object.values(r),p=0;p<m.length;p++){var v=m[p].values[s];if(null!=v)if(f){var y=!0,b=!1,h=void 0;try{for(var g,E=v[Symbol.iterator]();!(y=(g=E.next()).done);y=!0){var w=g.value;d.add(w)}}catch(e){b=!0,h=e}finally{try{y||null==E.return||E.return()}finally{if(b)throw h}}}else d.add(v)}a[s]=Array.from(new Set(d))}}catch(e){o=!0,i=e}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}return a},i.emptyO,{debug:"gatherAllIds"}),h=(0,o.memoize)(function(e,t,n,a,r){var l=t[a].valType;if(null==n)return i.emptyO;var o=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},i.emptyS,"-none-");if("string"==typeof l)n.forEach(function(e){o[e]=e});else{var c=l.relTable;if(null==r)n.forEach(function(t){o[t]=(0,u.headEntity)(e,c,t)});else{var s=e[c].entities;Array.from(new Set(n.map(function(e){return s[e].values[r]}))).sort().forEach(function(e){o[e]=e})}}return o},i.emptyO,{debug:"gatherValues"});t.makeTag=function(e,t,n){return null==t?e:"".concat(e,"-").concat(t,"-").concat(n)};var g=(0,o.memoize)(function(e){return function(t,n,a){return t[n].entities[a].values[e]}},i.emptyO),E=function(e,t){var n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,l=t.valType,o=t.multiple;if("string"==typeof l)n=o?a?function(e){return null==e?i.emptyS:e.join(" ")}:function(e){return null==e?i.emptyA:e}:a?function(e){return null==e?i.emptyS:e}:function(e){return null==e?i.emptyA:[e]};else{var c=l.relTable,s=r?g(r):u.headEntity;n=o?a?function(t){return null==t?i.emptyS:t.map(function(t){return s(e,c,t).join(" ")})}:function(t){return null==t?i.emptyA:null==r?t:s(e,c,t)}:a?function(t){return null==t?i.emptyS:s(e,c,t)}:function(t){return null==t?i.emptyA:null==r?[t]:[s(e,c,t)]}}return n},w=(0,o.memoize)(function(e,t,n,a,r){var l=E(e,a,!0),o=(r||i.emptyS).toLowerCase();return null==o||o===i.emptyS?function(){return!0}:function(e){var n=e.values[t],a=l(n);return null!=a&&-1!==a.toLowerCase().indexOf(o)}},i.emptyO,{debug:w}),O=(0,o.memoize)(function(e,t,n,a,r){var l=E(e,a,!1,n);return 0===(r||i.emptyO).size?function(){return!1}:function(e){var n=e.values[t],a=l(n);if(0===a.length)return r[i.emptyS];var o=!0,u=!1,c=void 0;try{for(var s,f=a[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var d=s.value;if(r[d])return!0}}catch(e){u=!0,c=e}finally{try{o||null==f.return||f.return()}finally{if(u)throw c}}return!1}},i.emptyO,{debug:O}),S=(0,o.memoize)(function(e,t,n,a,r,l,o){var u=a[t],c=E(e,u,!1,n),s={};if(s[i.emptyS]=0,n)for(var f=h(e,a,r,t,n),d=Object.keys(f),m=0;m<d.length;m++){var p=d[m];s[p]=0}else r.forEach(function(e){s[e]=0});var v=!0,y=!1,b=void 0;try{for(var g,w=l[Symbol.iterator]();!(v=(g=w.next()).done);v=!0){var O=c(o[g.value].values[t]);if(0===O.length)s[i.emptyS]+=1;else{var S=!0,_=!1,k=void 0;try{for(var A,N=O[Symbol.iterator]();!(S=(A=N.next()).done);S=!0){var I=A.value;s[I]+=1}}catch(e){_=!0,k=e}finally{try{S||null==N.return||N.return()}finally{if(_)throw k}}}}}catch(e){y=!0,b=e}finally{try{v||null==w.return||w.return()}finally{if(y)throw b}}return s},i.emptyO,{debug:"countFacets"});t.testAllChecks=function(e){var t=!0,n=!0;if(null==e)return{allTrue:t,allFalse:n};for(var a=Object.entries(e),r=0;r<a.length;r++)a[r][1]?n=!1:t=!1;return{allTrue:t,allFalse:n}}},446:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=n(2),o=a(n(447)),i=a(n(539));t.default=function(e){var t=e.children;return r.default.createElement(l.Provider,{store:o.default},r.default.createElement(i.default,null,t))}},447:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(53),l=a(n(448)),o=n(25),i=a(n(12)),u=a(n(103)),c=a(n(52)),s=a(n(174)),f=a(n(175)),d=a(n(5)),m=a(n(13)),p=a(n(28)),v=a(n(9)),y=a(n(198)),b=a(n(199)),h=function(e){return(0,r.createStore)(e,(0,r.applyMiddleware)(l.default))}((0,r.combineReducers)({settings:i.default,win:u.default,server:c.default,notes:s.default,docs:f.default,tables:d.default,me:m.default,filters:p.default,alter:v.default,form:o.reducer,select:y.default,grid:b.default}));t.default=h},5:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCloseAll=t.handleOpenAll=t.repr=t.headEntity=t.presentUser=t.listValues=t.needValues=t.needTables=t.needTable=t.isOwner=t.toDb=t.getTables=t.default=t.delItem=t.insertItem=t.modItem=t.fetchItems=t.fetchItem=t.fetchTables=t.fetchTable=t.MYIDS=t.ALLIDS=t.DETAILS=void 0;var i=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),u=n(33),c=n(52),s=n(8),f=n(1),d=n(9);t.DETAILS="details";var m="allIds";t.ALLIDS=m;t.MYIDS="myIds";var p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,n=arguments[2],a=arguments[3];return(0,c.accessData)({type:"fetchTable",contentType:"db",path:"/".concat("myIds"===t?"my":f.emptyS).concat(n&&"myIds"===t?"assign":"list","?table=").concat(e,"&complete=").concat(a),desc:"".concat(e," table"),table:e})};t.fetchTable=p;t.fetchTables=function(e,t,n){t.forEach(function(t){var a=o(t,4),r=a[0],l=a[1],i=void 0===l?m:l,u=a[2],c=a[3],s=void 0===c||c;S(e,r,i,s)&&n(p(r,i,u,s))})};t.fetchItem=function(e,t,n){return(0,c.accessData)({type:"fetchItem",contentType:"db",path:"/view?table=".concat(e,"&id=").concat(t),desc:"".concat(e," record ").concat(n),table:e})};var v=function(e,t,n,a){return(0,c.accessData)({type:"fetchItems",contentType:"db",path:"/view?table=".concat(e),desc:"".concat(e," records ").concat(t.length),sendData:t,table:e,eIds:t,alterSection:n,alt:a})};t.fetchItems=v;var y=function(e,t,n,a){return(0,c.accessData)({type:"modItem",contentType:"db",path:"/mod?table=".concat(e,"&action=update"),desc:"".concat(e," update record ").concat(n),sendData:{_id:t,values:a},table:e})};t.modItem=y;t.insertItem=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(0,c.accessData)({type:"insertItem",contentType:"db",path:"/mod?table=".concat(e,"&action=insert"),desc:"".concat(e," insert new record"),sendData:{masterId:n,linkField:a},table:e,select:t})};t.delItem=function(e,t,n){return(0,c.accessData)({type:"delItem",contentType:"db",path:"/mod?table=".concat(e,"&action=delete"),desc:"".concat(e," delete record ").concat(n),sendData:{_id:t},table:e})};var b=function(e,t,n,a,r){var l={};return a.forEach(function(e){l[e]=r[e]}),(0,f.updateAuto)(e,[t,"entities",n,"values"],{$merge:l})},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f.emptyA,n=e,a=!0,r=!1,l=void 0;try{for(var i,u=t[Symbol.iterator]();!(a=(i=u.next()).done);a=!0){var c=o(i.value,3),s=c[0],d=c[1],m=c[2];n=(0,f.updateAuto)(n,[s,"entities",d,"workflow"],{$set:m})}}catch(e){r=!0,l=e}finally{try{a||null==u.return||u.return()}finally{if(r)throw l}}return n},g={fetchTable:function(e,t){var n=t.data;if(null==n)return e;var a=e;return Object.entries(n).forEach(function(t){var n=o(t,2),r=n[0],u=n[1],c=e[r],s=(void 0===c?f.emptyO:c).entities,d=function(e,t){var n=t;return Object.entries(e).forEach(function(e){var t=o(e,2),a=t[0],r=t[1],u=n[a];if(null!=u&&null!=r.fields&&null==u.fields){var c=(0,i.default)(r.values,{$merge:u.values});n=(0,i.default)(n,l({},a,{fields:{$set:r.fields},values:{$merge:c}}))}}),(0,i.default)(e,{$merge:n})}(void 0===s?f.emptyO:s,u.entities),m=(0,i.default)(u,{entities:{$set:d}});a=(0,f.updateAuto)(a,[r],{$merge:m})}),a},fetchItem:function(e,t){var n=t.data,a=t.table;if(null==n)return e;var r=n.values._id;return(0,f.updateAuto)(e,[a,"entities",r],{$set:n})},fetchItems:function(e,t){var n=t.data,a=t.table;if(null==n||0==n.length)return e;var r=e,l=!0,o=!1,i=void 0;try{for(var u,c=n[Symbol.iterator]();!(l=(u=c.next()).done);l=!0){var s=u.value,d=s.values._id;r=(0,f.updateAuto)(r,[a,"entities",d],{$set:s})}}catch(e){o=!0,i=e}finally{try{l||null==c.return||c.return()}finally{if(o)throw i}}return r},modItem:function(e,t){var n=t.data,a=t.table;if(null==n)return e;var r=n.records,u=void 0===r?f.emptyA:r,c=n.workflow,s=e,d=function(e){var t=e.values,n=e.values._id,r=e.newValues,u=e.workflow,c={};if(Object.entries(t).forEach(function(e){var t=o(e,2),n=t[0],a=t[1];c[n]={$set:a}}),s=(0,f.updateAuto)(s,[a,"entities",n,"values"],c),s=(0,f.updateAuto)(s,[a,"entities",n,"workflow"],{$set:u}),null!=r){var d=!0,m=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(d=(v=y.next()).done);d=!0){var h=v.value,g=h._id,E=h.rep,w=h.repName,O=h.relTable,S=h.field;s=(0,i.default)(s,l({},a,{valueLists:l({},S,{$push:[g]})})),s=b(s,O,g,["_id",w],l({_id:g},w,E))}}catch(e){m=!0,p=e}finally{try{d||null==y.return||y.return()}finally{if(m)throw p}}}},m=!0,p=!1,v=void 0;try{for(var y,g=u[Symbol.iterator]();!(m=(y=g.next()).done);m=!0){d(y.value)}}catch(e){p=!0,v=e}finally{try{m||null==g.return||g.return()}finally{if(p)throw v}}return s=h(s,c)},insertItem:function(e,t){var n=t.data,a=t.table,o=t.select;if(null==n)return e;var u=n.records,c=void 0===u?f.emptyA:u,s=n.workflow,d=e,p=!0,v=!1,y=void 0;try{for(var b,g=c[Symbol.iterator]();!(p=(b=g.next()).done);p=!0){var E=b.value,w=E.table,O=r(E,["table"]),S=O.values._id;null!=(d=(0,f.updateAuto)(d,[w,"entities",S],{$set:O}))[w].allIds&&(d=(0,f.updateAuto)(d,[w,m],{$push:[S]},!0)),"myIds"===o&&a===w&&(d=(0,f.updateAuto)(d,[a,"myIds"],{$push:[S]},!0)),d=(0,i.default)(d,l({},w,{lastInserted:{$set:S}}))}}catch(e){v=!0,y=e}finally{try{p||null==g.return||g.return()}finally{if(v)throw y}}return d=h(d,s)},delItem:function(e,t){var n=t.data;if(null==n)return e;var a=n.records,r=void 0===a?f.emptyA:a,u=n.workflow,c=e,s=function(e){for(var t=o(e,2),n=t[0],a=t[1],r=(c=(0,i.default)(c,l({},n,{entities:{$unset:[a]}})))[n],u=r.myIds,s=r.allIds,f=Object.entries({myIds:u,allIds:s}),d=0;d<f.length;d++){var m=o(f[d],2),p=m[0],v=m[1];if(null!=v){var y=v.filter(function(e){return e!==a});c=(0,i.default)(c,l({},n,l({},p,{$set:y})))}}},d=!0,m=!1,p=void 0;try{for(var v,y=r[Symbol.iterator]();!(d=(v=y.next()).done);d=!0){s(v.value)}}catch(e){m=!0,p=e}finally{try{d||null==y.return||y.return()}finally{if(m)throw p}}return c=h(c,u)}},E=(0,f.makeReducer)(g);t.default=E;t.getTables=function(e){return{tables:e.tables}};var w=(0,s.memoize)(function(e,t,n,a){return function(r){return a(y(e,t,n,r))}});t.toDb=w;t.isOwner=function(e,t,n,a){if(a._id){var r=e[t].entities[n],l=(r=void 0===r?f.emptyO:r).values,o=(l=void 0===l?f.emptyO:l).creator,i=l.editors;return a._id==o||(i||f.emptyA).some(function(e){return e==a._id})}return!1};var O=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e)return!1;var r=e[t];return null!=r&&(null!=r[n]&&(null==a||r[n]===a))},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m,r=arguments[3];if(!O(e,t,n))return!0;if(r&&!O(e,t,"complete",!0))return!0;var l=e[t].fieldSpecs;return!!Array.from(new Set(Object.entries(l).filter(function(e){return"object"===a(e[1].valType)&&null!=e[1].valType.relTable}).map(function(e){return e[1].valType.relTable}))).some(function(t){return!O(e,t,m)})};t.needTable=S;t.needTables=function(e,t){return t.some(function(t){var n=o(t,3),a=n[0],r=n[1],l=void 0===r?m:r,i=n[2];return S(e,a,l,void 0===i||i)})};t.needValues=function(e,t){return null==e||null==e[t]||null==e[t].fields||null==e[t].perm};var _=(0,s.memoize)(function(e){var t=e.tables,n=e.table,a=e.eId,r=e.field;return null==t?f.emptyA:null==t[n]?f.emptyA:null==t[n].entities[a]?f.emptyA:new Set(t[n].entities[a][r])},f.emptyO);t.listValues=_;var k=(0,s.memoize)(function(e,t){var n=e.user.entities[t];if(n){var a=n.values;return A(a)}return"UNKNOWN"},f.emptyO),A=function(e){var t=e.name,n=e.firstName,a=e.lastName,r=e.email,l=e.eppn,o=e.authority,i=e.org,u=i?" (".concat(i,")"):f.emptyS;if(t)return"".concat(t).concat(u);if(n||a)return"".concat(n||f.emptyS).concat(n&&a?" ":f.emptyS).concat(a||f.emptyS);if(r)return"".concat(r).concat(u);var c=o?" - ".concat(o):f.emptyS;return l?"".concat(l).concat(c).concat(u):"!unidentified user!"};t.presentUser=A;var N={user:k,country:(0,s.memoize)(function(e,t){var n=e.country.entities[t];if(n){var a=n.values,r=a.name,l=a.iso;return"".concat(l,": ").concat(r)}return"UNKNOWN"},f.emptyO),typeContribution:(0,s.memoize)(function(e,t){var n=e.typeContribution.entities[t];if(n){var a=n.values,r=a.mainType,l=a.subType,o=r&&l?" / ":f.emptyS;return"".concat(r).concat(o).concat(l)}return"UNKNOWN"},f.emptyO),score:(0,s.memoize)(function(e,t){var n,a=e.score.entities[t];if(a){var r=a.values,l=r.score,o=void 0===l?"N/A":l,i=r.level,u=void 0===i?"N/A":i,c=r.description,s=void 0===c?f.emptyS:c;n=o||u?"".concat(o," - ").concat(u):s}else n="UNKNOWN";return n},f.emptyO),default:function(e){return(0,s.memoize)(function(t,n,a){var r=t[e],l=r.title,o=void 0===l?"rep":l,i=r.entities[n],u=r.fieldSpecs;if(i){var c=i.values[o],s=u[o].valType;return T(t,e,o,s,c,a)}return"UNKNOWN"},f.emptyO)}},I=function(e,t,n,a){return(N[t]||N.default(t))(e,n,a)};t.headEntity=I;var T=function(e,t,n,a,r,l){if(null==r)return f.emptyS;if(null!=a&&"string"!=typeof a){var o=a.relTable;return null==o?f.emptyS:I(e,o,r)}switch(a){case"datetime":return function(e,t,n,a){return null==e?f.emptyS:a.longDates[t]&&a.longDates[t][n]?e.replace(/\.[0-9]+/,f.emptyS):e.replace(/T.*$/,f.emptyS)}(r,t,n,l);case"bool":return r?"Yes":"No";default:return r}},j=function(e,t,n,a,r,l,o,i){var u=r?(l||f.emptyA).map(function(r){return T(e,t,n,a,r,o)}):T(e,t,n,a,l,o);return r&&null!=i?u.join(i):u},M=(0,s.memoize)(function(e,t,n,a,r,l,o,i,u,c){if(null==l)return j(e,t,n,a,r,o,i,u);var s=a.relTable;if(null==s)return f.emptyS;var d=e[s].fieldSpecs[l],m=d.multiple,p=d.valType,v=r?o.map(function(t){return e[s].entities[t].values[l]}):e[s].entities[o].values[l],y=r&&m&&null!=u&&null==c?" ":c,b=r?v.map(function(t){return j(e,s,l,p,m,t,i,y)}):j(e,s,l,p,m,v,i,c);return r&&null!=u?b.join(u):b},f.emptyO);t.repr=M;var P=(0,s.memoize)(function(e,t,n,a,r,l,o){var i=(0,d.compileAlternatives)(t,n,a,o),u=(a+1)%n;return function(){var n=[];l.forEach(function(t){(0,i(t).getAlt)(e)!==u&&n.push(t)}),n.length&&o(v(r,n,t,u))}},f.emptyO);t.handleOpenAll=P;var x=(0,s.memoize)(function(e,t,n,a,r,l){var o=(0,d.compileAlternatives)(t,n,a,l),i=(0,f.getUrlParts)(u.browserHistory),c=i.base,s=i.table,m=i.controller,p="".concat(c,"/").concat(s,"/").concat(m);return function(){u.browserHistory.push("".concat(p,"/"));var n=[];r.forEach(function(t){(0,o(t).getAlt)(e)!==a&&n.push(t)}),n.length&&l((0,d.setItems)(n,t,a))}},f.emptyO);t.handleCloseAll=x},52:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.accessData=void 0,n(260);var l=n(25),o=function(e){return e&&e.__esModule?e:{default:e}}(n(24)),i=n(1),u=function(e,t,n){return{type:"async",status:"error",path:e,desc:t,msgs:n}};t.accessData=function(e){return function(t,n){var a=e.path,o=e.contentType,i=e.desc,c=e.sendData;if(!(n().server[a]>0)){t({type:"async",status:"pending",path:a,desc:i});var s={credentials:"same-origin"};null!=c&&(s=r({},s,{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}));var f="".concat("/api/").concat(o).concat(a);return fetch(f,s).then(function(e){return e.ok?e.json():{good:!1,msgs:[{kind:"error",text:"No valid response from the server to ".concat(f)}]}}).then(function(n){var o=n.msgs,c=n.good,s=n.data;if(c?(t({type:"async",status:"success",path:a,desc:i,msgs:o}),t(r({},e,{data:s}))):t(u(a,i,o)),s&&s.diags&&Object.keys(s.diags).length>0)throw new l.SubmissionError(s.diags)}).catch(function(e){if(e instanceof l.SubmissionError)throw e;t(u(a,i,[{kind:"error",text:e.toString()}]))})}t({type:"async",status:"progress",path:a,desc:i})}};var c={progress:function(e,t){var n=t.path;return(0,o.default)(e,a({},n,{$apply:function(e){return e+1}}))},pending:function(e,t){var n=t.path;return(0,o.default)(e,a({},n,{$set:1}))},success:function(e,t){var n=t.path;return(0,o.default)(e,a({},n,{$set:0}))},error:function(e,t){var n=t.path;return(0,o.default)(e,a({},n,{$set:-1}))}},s={async:function(e,t){var n=t.status,a=t.path,r=c[n];return r?r(e,{path:a}):e}},f=(0,i.makeReducer)(s);t.default=f},539:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(0),i=n(2),u=function(e){return e&&e.__esModule?e:{default:e}}(n(540)),c=n(103),s=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return l(a,(n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.newWindowSize=(0,u.default)(function(){(0,a.props.dispatch)((0,c.changeWinDim)())},1e3),n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(t,[{key:"render",value:function(){var e=this.props.children;return o.Children.only(e)}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.newWindowSize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.newWindowSize)}}]),t}(),f=(0,i.connect)()(s);t.default=f},544:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=n(2),o=n(103),i=a(n(18)),u=a(n(545)),c=a(n(546)),s=a(n(547)),f=a(n(6)),d=a(n(548)),m=(0,l.connect)(o.getWinDim)(function(e){var t=e.children,n=e.win,a=n.height,l=n.width,o="".concat(l," x ").concat(a);return r.default.createElement(i.default,null,r.default.createElement(i.default,null,r.default.createElement(s.default,null)),r.default.createElement("div",{className:"topnavbar"},r.default.createElement(f.default,{tip:"information about this site",at:"right"},r.default.createElement("span",{className:"logo-container"},r.default.createElement("img",{src:"/static/images/inkind_logo_small.png"}))),r.default.createElement(i.default,null,r.default.createElement(c.default,null)),r.default.createElement(d.default,null),r.default.createElement(f.default,{tip:"current window size: ".concat(o," pixels"),at:"bottom"},r.default.createElement("span",{className:"resize"},o)),r.default.createElement(i.default,null,r.default.createElement(u.default,null))),r.default.createElement(i.default,null,t))});t.default=m},545:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=n(2),i=n(5),u=n(13),c=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(t,[{key:"render",value:function(){var e=this.props.me;return l.default.createElement("span",{className:"login"},e.eppn?l.default.createElement(l.Fragment,null,l.default.createElement(c.default,{tip:"you are logged in",at:"bottom"},l.default.createElement("span",{className:"fa fa-user"}),l.default.createElement("strong",null,(0,i.presentUser)(e))," ",l.default.createElement("em",null,e.groupDesc||"not authenticated")),l.default.createElement(c.default,{tip:"log out of this tool",at:"bottom"},l.default.createElement("a",{href:"/logout",className:"control fa fa-user-times"})),l.default.createElement(c.default,{tip:"sign out from DARIAH",at:"top"},l.default.createElement("a",{href:"/slogout",className:"control fa fa-users"}))):l.default.createElement(c.default,{tip:"click to log in",at:"bottom"},l.default.createElement("a",{href:"/login",className:"control"},l.default.createElement("strong",{className:"fa fa-user-plus"}),l.default.createElement("strong",null," login"))))}},{key:"componentDidMount",value:function(){(0,this.props.dispatch)((0,u.fetchMe)({type:"fetchMe",contentType:"db",path:"/who/ami",desc:"me"}))}}]),t}(),f=(0,o.connect)(u.getMe)(s);t.default=f},546:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=a(n(201));t.default=function(){return r.default.createElement("span",{className:"toplinks"},r.default.createElement(l.default,{to:"/docs/about.md"},"Home"),r.default.createElement(l.default,{to:"/data"},"Registry"),r.default.createElement("a",{href:"https://github.com/Dans-labs/dariah/wiki",target:"_blank",rel:"noopener noreferrer"},"Help"),r.default.createElement("a",{href:"https://github.com/Dans-labs/dariah/wiki/Help",target:"_blank",rel:"noopener noreferrer"},"About"),r.default.createElement("a",{href:"https://dans-labs.github.io/dariah/",target:"_blank",rel:"noopener noreferrer"},"Tech doc"))}},547:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),o=n(2),i=n(1),u=n(174),c=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),s=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n.refDom=function(e){return function(t){t&&(n.dom[e]=t)}},n.handleBox=function(){var e=n.props,t=e.show;(0,e.dispatch)((0,u.display)(!t))},n.handleHide=function(){(0,n.props.dispatch)((0,u.display)(!1))},n.handleClear=function(){(0,n.props.dispatch)((0,u.clear)())},n.dom={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.Component),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.messages,a=t.lastNote,r=t.lastKind,o=t.busy,u=t.show,s=a>-1,f=new Array(o<0?0:o).fill(1);return l.default.createElement(l.Fragment,null,l.default.createElement(c.default,{tip:"click circle to show/hide notifications and progress messages",at:"left",fixed:!0,classTip:"msg-spinner-tip",classArrow:"msg-spinner-arrow"},l.default.createElement("div",{className:"msg-spinner"},l.default.createElement("span",{className:s?"spin-".concat(r):"spin-ok"},f.map(function(e,t){return l.default.createElement("span",{key:t,className:"msg-dot fa fa-caret-left"})}),l.default.createElement("span",{className:"fa fa-".concat(0===o?"circle-o":"spinner fa-spin"),onClick:this.handleBox})))),u?l.default.createElement("div",{ref:this.refDom("notbox"),className:"msg-box",onClick:this.handleHide},n.map(function(t,n){return l.default.createElement("div",{key:n,ref:e.refDom("m".concat(n)),className:"msg-line ".concat([t.kind],"-o ").concat("info"!==t.kind?"msg-high":i.emptyS)},t.text)}),l.default.createElement("div",{className:"msg-dismiss"},"(click panel to hide)"),n.length>1?l.default.createElement("div",{className:"msg-trash"},l.default.createElement("a",{href:"#",className:"control",onClick:this.handleClear},l.default.createElement("span",{className:"control fa fa-trash"})," clear messages")):null):null)}},{key:"componentDidMount",value:function(){this.setView()}},{key:"componentDidUpdate",value:function(){this.setView()}},{key:"setView",value:function(){this.props.show&&this.setScroll()}},{key:"setScroll",value:function(){if(this.props.show){var e=this.props,t=e.lastMsg,n=e.lastNote;n>-1?this.dom["m".concat(n)].scrollIntoView():t>-1&&this.dom["m".concat(t)].scrollIntoView()}}}]),t}(),f=(0,o.connect)(u.getNotes)(s);t.default=f},548:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(2),l=n(27),o=n(12),i=(0,r.connect)(o.getSettings)(function(e){var t=e.settings,n=e.dispatch,r=t.showTooltips,i=void 0!==r&&r;return a.default.createElement("span",{className:"tooltips-".concat(i?"on":"off")},a.default.createElement("input",{type:"checkbox",checked:i,onChange:(0,l.handlE)(n,o.adjust,"showTooltips",!i)}),"tooltips")});t.default=i},549:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),l=n(2),o=n(1),i=n(13),u=a(n(18)),c=a(n(201)),s=a(n(550)),f=a(n(6)),d={public:1,auth:2,office:3,system:4,root:5},m=function(e,t){return d[e]>=d[t]},p=[{path:"/data/contrib",name:"Contributions",forWhom:"public",details:[{path:"stats",name:"Statistics",forWhom:"public",hint:"Various statistics of contributions"},{path:"filter",name:"All items",forWhom:"public",hint:"Overview of all contributions"},{path:"mylist",name:"My items",forWhom:"auth",hint:"My contribution"},{component:r.default.createElement(s.default,{key:"newcontrib",table:"contrib",thing:"contribution"}),forWhom:"auth",hint:"Start here to add a contribution"}]},{path:"/data/assessment",name:"Assessments",forWhom:"auth",details:[{path:"filter",name:"All items",forWhom:"auth",hint:"overview of all assessments"},{path:"mylist",name:"My items",forWhom:"auth",hint:"Look here to see the status of your assessments"}]},{path:"/data/review",name:"Reviews",forWhom:"auth",details:[{path:"filter",name:"All items",forWhom:"office",hint:"overview of all reviews"},{path:"myassign",name:"My assignments",forWhom:"auth",hint:"my review assignments",ppath:"/data/assessment"},{path:"mylist",name:"My reviews",forWhom:"auth",hint:"my reviews"}]},{path:"/data/package",name:"Packages",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"the setup of contribution types and criteria"},{path:"grid",name:"table",forWhom:"office",hint:"the setup of contribution types and criteria"}]},{path:"/data/typeContribution",name:"Contribution types",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all contribution types"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all contribution types"}]},{path:"/data/criteria",name:"Criteria",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all criteria"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all criteria"}]},{path:"/data/score",name:"Scores",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"overview of all scores"},{path:"grid",name:"table",forWhom:"office",hint:"overview of all scores"}]},{path:"/data/user",name:"Users",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"User management"},{path:"grid",name:"table",forWhom:"office",hint:"User management"}]},{path:"/data/country",name:"Countries",forWhom:"office",details:[{path:"filter",name:"list",forWhom:"office",hint:"Country membership management"},{path:"grid",name:"table",forWhom:"office",hint:"Country membership management"}]}],v=(0,l.connect)(i.getMe)((0,o.withParams)(function(e){var t=e.me,n=e.table,a=e.routes,l=e.children;return r.default.createElement("div",{className:"sub-app"},r.default.createElement("div",{className:"subnavbar"},r.default.createElement(u.default,null,p.map(function(e){return function(e,t){var n=t.path,a=t.name,l=t.forWhom,i=t.details;return m(e.groupRep,l)?r.default.createElement("div",{key:n,className:"section"},r.default.createElement(c.default,{to:n,className:"head"},a),r.default.createElement("div",{className:"subsection"},(i||o.emptyA).filter(function(t){var n=t.forWhom;return m(e.groupRep,n)}).map(function(e){var t=e.component,a=e.path,l=e.name,o=e.hint,i=e.ppath;return null==t?r.default.createElement(f.default,{key:a,tip:o,at:"right"},r.default.createElement(c.default,{to:"".concat(i||n,"/").concat(a)},l)):t}))):null}(t,e)}))),r.default.createElement("div",{className:"submaterial"},r.default.createElement(u.default,null,"data"===a[1].path&&1===a.length?"All tables":"data"===a[1].path&&2===a.length?r.default.createElement(r.Fragment,null,r.default.createElement("h3",null,"Registry"),r.default.createElement("p",null,"Use the side bar to navigate to a section")):"data"===a[1].path&&3===a.length?r.default.createElement(r.Fragment,null,r.default.createElement("h3",null,"Registry"),r.default.createElement("h4",null,"Table ".concat(n)),r.default.createElement("p",null,"Use the side bar to navigate to a particular view on this table")):null),r.default.createElement(u.default,null,l)))}));t.default=v},550:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(2),u=n(33),c=n(1),s=n(5),f=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return l(a,(n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.handleInsert=function(){var e=a.props,t=e.table,n=e.masterId,r=e.linkField,l=e.dispatch,o=null==n?s.MYIDS:s.DETAILS;l((0,s.insertItem)(t,o,n,r)),a.gotoNew=!0},n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(t,[{key:"gotoNewItem",value:function(){var e=this.props,t=e.tables,n=e.table;if(this.gotoNew){var a=t[n];if(null==a)return;var r=a.lastInserted;if(null!=r){this.gotoNew=!1;var l=(0,c.getUrlParts)(u.browserHistory).base;u.browserHistory.push("".concat(l,"/").concat(n,"/mylist/item/").concat(r,"/"))}}}},{key:"render",value:function(){var e=this.props.thing;return o.default.createElement("span",{className:"button large workflow info",onClick:this.handleInsert},"New ".concat(e))}},{key:"componentDidMount",value:function(){this.gotoNewItem()}},{key:"componentDidUpdate",value:function(){this.gotoNewItem()}}]),t}(),d=(0,i.connect)(s.getTables)(f);t.default=d},551:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(2),u=n(1),c=n(19),s=n(5),f=n(28),d=a(n(18)),m=a(n(552)),p=a(n(114)),v=a(n(117)),y=a(n(211)),b=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.filters,n=e.tables,a=e.table,r=e.eId,l=e.select,i=e.mode,b=e.filtered,h="grid"===i;if((0,s.needTables)(n,[[a,l,h]].concat(c.loadExtra[a]||u.emptyA)))return o.default.createElement("div",null);var g=n[a],E=g.title,w=g.item,O=g.perm,S=g.myIds,_=g.allIds,k=w[1],A=l===s.MYIDS?S:_,N=(0,f.makeTag)(l,null,null);return o.default.createElement(d.default,null,b?o.default.createElement(y.default,{filters:t,tables:n,table:a,navItem:r,listIds:A,perm:O,select:l,mode:i,title:E,filterTag:N,gridTag:a,topLevel:!0}):"list"===i?o.default.createElement(v.default,{alterSection:"list-".concat(a,"-").concat(l),filters:t,tables:n,table:a,navItem:r,listIds:A,select:l,perm:O,title:E}):"grid"===i?o.default.createElement(p.default,{alterSection:"list-".concat(a,"-").concat(l),filters:t,tables:n,table:a,navItem:r,listIds:A,select:l,perm:O,gridTag:a}):"stats"===i?o.default.createElement(m.default,{tables:n,table:a}):'unknown display mode "'.concat(i,'" for ').concat(k))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.tables,n=e.table,a=e.select,r=e.extra,l=e.mode,o=e.dispatch,i="grid"===l;(0,s.fetchTables)(t,[[n,a,r,i]].concat(c.loadExtra[n]||u.emptyA),o)}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.tables,n=e.table,a=e.select,r=e.extra,l=e.mode,o=e.dispatch,i="grid"===l;(0,s.fetchTables)(t,[[n,a,r,i]].concat(c.loadExtra[n]||u.emptyA),o)}}]),t}(),h=(0,u.combineSelectors)(s.getTables,f.getFilters),g=(0,i.connect)(h)((0,u.withParams)(b));t.default=g},552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(1),l=n(5),o=function(e,t){return Math.round((0,r.sum)(Array.from(t).map(function(t){return e[t].values.costTotal||0})))};t.default=function(e){var t=e.tables,n=t[e.table],i=n.entities,u=void 0===i?r.emptyO:i,c=n.item,s=n[l.ALLIDS],f=void 0===s?r.emptyA:s,d=t.assessment,m=(d=void 0===d?r.emptyO:d).entities,p=void 0===m?r.emptyO:m,v=t.review,y=(v=void 0===v?r.emptyO:v).entities,b=void 0===y?r.emptyO:y,h=new Set(f),g=new Set(Object.values(p).map(function(e){return e.values.contrib})),E=new Set(Object.values(b).map(function(e){return e.values.assessment})),w=new Set(Array.from(E).map(function(e){return p[e].values.contrib})),O=o(u,h),S=o(u,g),_=o(u,w);return a.default.createElement("div",{className:"stats-section"},a.default.createElement("div",{className:"stats-title head"},c[1]),a.default.createElement("div",{className:"stats-line head"},a.default.createElement("div",{className:"stats-item head"},"# total"),a.default.createElement("div",{className:"stats-item head"}," total"),a.default.createElement("div",{className:"stats-item head"},"# assessed"),a.default.createElement("div",{className:"stats-item head"}," assessed"),a.default.createElement("div",{className:"stats-item head"},"# reviewed"),a.default.createElement("div",{className:"stats-item head"}," reviewed")),a.default.createElement("div",{className:"stats-line"},a.default.createElement("div",{className:"stats-item"},h.size),a.default.createElement("div",{className:"stats-item"},O),a.default.createElement("div",{className:"stats-item"},g.size),a.default.createElement("div",{className:"stats-item"},S),a.default.createElement("div",{className:"stats-item"},w.size),a.default.createElement("div",{className:"stats-item"},_)))}},553:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),l=n(2),o=n(8),i=n(1),u=n(15),c=n(48),s=n(554),f=a(n(204)),d=a(n(72)),m=a(n(210)),p=a(n(6)),v=(0,o.memoize)(function(e,t,n,a,l){return a?r.default.createElement(p.default,{tip:"".concat(l?"show":"close"," details of this record"),at:"left"},r.default.createElement("span",{className:"button small fa fa-angle-".concat(l?"down":"up"),onClick:e})):null}),y=(0,l.connect)(s.getForms)(function(e){var t=e.alt,n=e.nextAlt,a=e.filters,l=e.tables,o=e.form,s=e.table,p=e.eId,y=e.initialValues,b=e.perm,h=e.workflow,g=e.masterId,E=e.linkField,w=e.isactive,O=e.fixed,S=e.fields,_=e.widthStyles,k=(0,u.makeFields)({tables:l,table:s,eId:p,initialValues:y,perm:b,fields:S}),A=(0,c.makeDetails)({tables:l,table:s,eId:p}),N=b.update,I=k.length,T="".concat(s,"-").concat(p),j=o.has(T),M="edit-".concat(s,"-").concat(p);return r.default.createElement("div",{className:w?"isactive":i.emptyS},0===t?r.default.createElement("div",{className:"grid-row"},r.default.createElement("div",{className:"grid-status-cell"},v(n,s,p,N,!0),j?r.default.createElement(f.default,{form:"".concat(s,"-").concat(p),active:!1}):null),function(e,t,n,a){return k.map(function(n,l){var o=n.field,u=n.fragment,c=u.editable,s=u.table,f=u.myValues,m=a[l];return r.default.createElement("div",{className:"grid-cell valueColGrid ".concat(c?"edit":i.emptyS),style:m,key:o},r.default.createElement(d.default,{field:o,tables:e,table:s,eId:t,myValues:f}))})}(l,p,0,_),function(e,t,n,a,l){return A.map(function(e,t){var n=e.name,o=e.detailListIds,i=a[l+t],u=o.length;return r.default.createElement("div",{key:n,className:"grid-cell value-col-grid",style:i},u)})}(0,0,0,_,I)):r.default.createElement(r.Fragment,null,r.default.createElement("div",{className:"grid-status-cell"},v(n,s,p,N,!1)),r.default.createElement(m.default,{filters:a,tables:l,table:s,eId:p,masterId:g,linkField:E,alterSection:M,isactive:w,startMode:0,initialValues:y,perm:b,workflow:h,fields:S,fieldFragments:k,detailFragments:A,fixed:O})))});t.default=y},554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getForms=void 0;var a=n(8);t.getForms=function(e){var t=e.form;return{form:r(t)}};var r=function(e){return(0,a.makeSet)(Object.keys(e))}},575:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(25),i=n(20),u=a(n(6));t.default=function(e){var t=e.componentSingle,n=e.validateSingle,a=e.normalizeSingle,c=e.meta,s=c.dirty,f=c.invalid,d=c.submitting,m=c.error,p=e.fields,v=e.table,y=e.eId,b=e.valType,h=(e.nameC,e.reset),g=e.submitValues,E=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["componentSingle","validateSingle","normalizeSingle","meta","fields","table","eId","valType","nameC","reset","submitValues"]),w=(0,i.makeSubmit)(s,f,d,g),O=(0,i.makeSubmitTime)(g);return l.default.createElement("div",{className:"".concat((0,i.editClass)(s,f)," multi-field ").concat(b)},p.map(function(e,i){return l.default.createElement("div",{key:e,className:"multi-content"},l.default.createElement(u.default,{tip:"remove entry",at:"left"},l.default.createElement("div",{className:"button medium",onClick:function(e,t,n){return function(){e.remove(t),n()}}(p,i,O)},"")),l.default.createElement(o.Field,r({name:e,component:t,validate:n,normalize:a,label:i,table:v,eId:y,reset:h,submitValues:w},E)))}),l.default.createElement("div",{className:"multi-content"},l.default.createElement(u.default,{tip:"more entries",at:"left"},l.default.createElement("div",{className:"button medium",onClick:function(e,t){return function(){e.push(),t()}}(p,O)},"+"))),m&&l.default.createElement("p",{className:"invalid diag"},m))}},576:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(0)),i=n(2),u=n(8),c=n(1),s=n(27),f=n(15),d=n(20),m=n(115),p=n(12),v=n(198),y=a(n(6)),b=function(e){var t=e.label,n=e.attributes,a=e.selected,r=e.multiple,i=e.onHit;return o.default.createElement(y.default,{tip:a?"".concat(t," is currently selected"):r?"add ".concat(t):"select ".concat(t),at:"bottom"},o.default.createElement("p",l({},n,{onClick:a?null:i}),t))},h=(0,u.memoize)(function(e,t,n,a,l,o){return function(){if(t){if(!n.includes(a)){var i=r(n).concat([a]);l(i)}}else l(a),o((0,v.setPopUp)(e,!1))}}),g=function(e){var t=e.optionLookup,n=e.value,a=e.popUp,r=e.popUpIfEmpty,i=e.activeItems,u=e.inactive,f=e.selectTag,d=e.dispatch,p=(0,m.composeAttributes)(i,u),b=c.emptyS,h=t[n];b=void 0===h?n:h;var g=["option-head","tag"];if(n===c.emptyS){if(r)return null;b="click to enter a value",g.push("new")}var E=p(n,g.join(" ")),w=a?"up":"down";return o.default.createElement(y.default,{tip:"click here to ".concat(a?"hide":"show"," the other options"),at:"right"},o.default.createElement("span",l({},E,{onClick:(0,s.handle)(d,v.togglePopUp,f)}),b," ",o.default.createElement("span",{className:"fa fa-arrow-".concat(w," ").concat(w)})))},E=function(e){var t=e.selectTag,n=e.optionLookup,a=e.popUp,r=e.popUpIfEmpty,i=e.activeItems,u=e.inactive,c=e.value,f=e.onChange,d=e.dispatch,p=(0,m.composeAttributes)(i,u),b=a?"up":"down";return o.default.createElement(y.default,{tip:"click on this line to ".concat(a?"hide":"show"," the remaining options"),at:"top"},o.default.createElement("div",{className:"tags",onClick:(0,s.handle)(d,v.togglePopUp,t)},null!=c&&c.length?c.map(function(e){var t=n[e],a=void 0===t?e:t,r=p(e,"tag");return o.default.createElement("span",l({key:e},r),o.default.createElement(y.default,{tip:"remove ".concat(a),at:"bottom"},o.default.createElement("span",{className:"button-tag",onClick:function(e,t,n){return function(a){if(a.stopPropagation(),e.includes(n)){var r=e.filter(function(e){return e!==n});t(r)}}}(c,f,e)},"")," "),a)}):r?null:o.default.createElement("span",{className:"tag empty"},"click to enter values"),o.default.createElement("span",{className:"fa fa-arrow-".concat(b," ").concat(b)})))},w=function(e){var t=e.selectTag,n=e.search,a=e.dispatch,r=e.placeHolder;return o.default.createElement("span",{className:"option-type"},n?o.default.createElement(y.default,{tip:"clear typing",at:"bottom"},o.default.createElement("span",{className:"button-tag",onClick:(0,s.handle)(a,v.setSearch,t,c.emptyS)},"")):"","",o.default.createElement(y.default,{tip:r,at:"left"},o.default.createElement("input",{className:"typing",type:"text",placeholder:"type here ...",value:n||c.emptyS,onFocus:(0,s.handle)(a,v.setPopUp,t,!0),onChange:(0,s.handlEV)(a,v.setSearch,t)})))},O=function(e){var t=e.selectTag,n=e.optionLookup,a=e.options,l=e.activeItems,i=e.inactive,u=e.multiple,s=e.allowNew,d=e.value,p=e.onChange,v=e.search,g=e.dispatch,E=(v||c.emptyS).toLowerCase(),w=(0,m.composeAttributes)(l,i),O=(0,f.checkDisabled)(l,i),S=a.length>=20?"o-large":"o-small";return o.default.createElement("div",{className:"options ".concat(S)},u||null==d||d==c.emptyS?null:o.default.createElement(y.default,{tip:"clear selection",at:"bottom"},o.default.createElement("span",{className:"button-tag tag option",onClick:h(t,u,null,null,p,g)},"(  )")),s&&v&&!a.some(function(e){return e.label===v})&&!d.includes(v)?o.default.createElement(y.default,{tip:"add ".concat(v," as a NEW option"),at:"bottom"},o.default.createElement("span",{className:"new tag",onClick:function(e,t,n,a,l){return function(){if(null==e[l]&&!n.includes(l)){var o=t?[l].concat(r(n)):l;a(o)}}}(n,u,d,p,v)},v)):null,a.map(function(e){var n=e.value,a=e.label;if(u&&d.includes(n)||null!=E&&E!==c.emptyS&&null!=a&&-1===a.toString().toLowerCase().indexOf(E)||O(n))return null;var r=u&&d.includes(n)||!u&&d===n,l=w(n,"tag option ".concat(r?"selected":c.emptyS));return o.default.createElement(b,{key:n,label:a,attributes:l,selected:r,multiple:u,onHit:h(t,u,d,n,p,g)})}))},S=(0,c.combineSelectors)(p.getSettings,v.getSelect),_=(0,i.connect)(S)(function(e){var t=e.settings,n=e.tables,a=e.table,r=e.eId,l=e.field,i=e.selectTag,u=e.activeItems,s=e.inactive,f=e.allowed,m=e.input,p=m.name,y=m.value,b=m.onChange,h=e.multiple,S=e.allowNew,_=e.popUpIfEmpty,k=e.select,A=e.dispatch,N=e.suppressTyping,I=e.submitValues,T=(0,d.makeSubmitTime)(I),j=(0,d.makeChangeSave)(b,T),M=k[i],P=(M=void 0===M?c.emptyO:M).search,x=M.popUp,C=(0,v.compileOptions)(n,a,f,l,t),F=C.options,D=C.optionLookup,R=x||_&&(null==y||h&&0==y.length||!h&&!y),L=!0===S?"value":S||c.emptyS,U=L?" or add a new ".concat(L):c.emptyS,W="filter remaining options".concat(U);return o.default.createElement("div",{className:"select ".concat(h?"multiselect":c.emptyS)},h?o.default.createElement(E,{optionLookup:D,activeItems:u,inactive:s,table:a,eId:r,name:p,value:y,selectTag:i,popUp:R,popUpIfEmpty:_,dispatch:A,onChange:j}):o.default.createElement(g,{optionLookup:D,activeItems:u,inactive:s,table:a,eId:r,name:p,value:y,popUp:R,popUpIfEmpty:_,selectTag:i,dispatch:A}),R&&!N?o.default.createElement(w,{selectTag:i,search:P,dispatch:A,placeHolder:W}):null,R?o.default.createElement(O,{selectTag:i,optionLookup:D,options:F,activeItems:u,inactive:s,multiple:h,allowNew:S,value:y,search:P,dispatch:A,onChange:j}):null)});t.default=_},577:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(20);t.default=function(e){var t=e.widget,n=e.input.onChange,r=e.setValue,l=e.submitValues,o=(0,a.makeSubmitTime)(l);return t((0,a.makeChangeSaveVal)(n,o,r))}},578:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),r=n(1),l=function(e){return e&&e.__esModule?e:{default:e}}(n(74)),o={mainAction:function(e){var t=e.w;return t("locked").on?a.default.createElement("div",{className:"label large workflow info"},"This contribution is locked because it is ".concat(t("locked").desc,".")):null},related:{assessment:function(e){var t=e.v,n=e.e,o=e.s,i=e.f,u=e.linkMe,c=o("title");return a.default.createElement(a.Fragment,null,a.default.createElement("div",null,n("urlContribution")?c:a.default.createElement("a",{href:o("urlContribution")},c)),a.default.createElement("div",null,o("vcc",null,", ")," ",o("country")," ",o("year")," ",a.default.createElement("a",{href:"mailto:".concat(o("contactPersonEmail"))},o("contactPersonName"))),a.default.createElement(l.default,{alterSection:"contribution_in_assessment".concat(t("_id")),alterTag:"cost",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution cost description",titleClose:"Hide contribution cost description",headActive:"Cost: ".concat(n("costTotal")?"Not given":o("costTotal")),headLine:r.emptyS,full:a.default.createElement(a.Fragment,null,i("costDescription"))}),a.default.createElement(l.default,{alterSection:"contribution_in_assessment".concat(t("_id")),alterTag:"description",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution descriptions",titleClose:"Hide contribution descriptions",headActive:"Description fields",headLine:n("urlAcademic")?a.default.createElement("a",{href:o("urlAcademic")},o("urlAcademic")):r.emptyS,full:a.default.createElement(a.Fragment,null,a.default.createElement("div",null,i("description")),a.default.createElement("div",null,a.default.createElement("div",null,a.default.createElement("b",null,"Tadirah:")),a.default.createElement("div",null,a.default.createElement("i",null,"Objects")," ",i("tadirahObject")),a.default.createElement("div",null,a.default.createElement("i",null,"Activities")," ",i("tadirahActivity")),a.default.createElement("div",null,a.default.createElement("i",null,"Techniques")," ",i("tadirahTechnique")),a.default.createElement("div",null,a.default.createElement("b",null,"Disciplines:")," ",i("discipline")),a.default.createElement("div",null,a.default.createElement("b",null,"Keywords:")," ",i("keyword"))))}),a.default.createElement(l.default,{alterSection:"contribution_in_assessment".concat(t("_id")),alterTag:"provenance",iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show contribution provenance",titleClose:"Hide contribution provenance",headActive:"Provenance",headLine:r.emptyS,full:a.default.createElement(a.Fragment,null,a.default.createElement("div",null,"Created ",i("dateCreated")," by ",o("creator")),a.default.createElement("div",null,a.default.createElement("div",null,a.default.createElement("b",null,"Modification history")),(t("modified")||r.emptyA).map(function(e,t){return a.default.createElement("div",{key:t},e)})))}),a.default.createElement("div",null,a.default.createElement("a",{href:u},"To the contribution record")),a.default.createElement("div",null,i("typeContribution")))}}};t.default=o},579:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),l=n(1),o=n(15),i=n(19),u=a(n(74)),c=a(n(6)),s=function(e,t,n,a){return(0,o.itemReadField)(e,t(e),n(e),a)},f=function(e,t,n,a,r){return(0,o.itemEditField)(e,t(e),n(e),a(e),r)},d={main:function(e){var t=e.l,n=e.f;return r.default.createElement("div",{className:"grid fragments"},s("title",t,n),s("assessmentType",t,n),s("contrib",t,n),s("remarks",t,n))},mainEdit:function(e){var t=e.l,n=e.fe,a=e.m,l=e.editButton;return r.default.createElement(r.Fragment,null,l,r.default.createElement("div",{className:"grid fragments"},f("title",t,n,a),f("assessmentType",t,n,a),f("contrib",t,n,a),f("remarks",t,n,a)))},mainAction:function(e){var t=e.tables,n=e.l,a=e.e,s=e.v,d=e.w,m=e.s,p=e.fe,v=e.fs,y=e.m,b=(0,i.assessmentScore)(t,s("_id")),h=b.overall,g=b.relevantScore,E=b.relevantMax,w=b.allMax,O=b.relevantN,S=b.allN,_=S-O,k=!a("dateWithdrawn"),A=!a("submitted");return r.default.createElement(r.Fragment,null,r.default.createElement("div",{className:"ass-score-box"},r.default.createElement(c.default,{tip:"overall-score of this assessment",at:"right"},r.default.createElement("span",{className:"ass-score"},"".concat(h," %"))),r.default.createElement(u.default,{alterSection:"assessment".concat(s("_id")),alterTag:"score",iconOpen:"calculator",iconClose:"minus-circle",titleOpen:"Show derivation",titleClose:"Hide derivation",headActive:l.emptyS,headLine:l.emptyS,full:r.default.createElement("div",{className:"ass-score-deriv"},r.default.createElement("p",null,"This contribution scores ".concat(g," points.")),r.default.createElement("p",null,"For this type of contribution there is a total of ".concat(w," points,\n                    divided over ").concat(S," criteria.")),_?r.default.createElement("p",null,"However,\n                        ".concat(_," rule").concat(1==_?" is":"s are","\n                        not applicable to this contribution,\n                        which leaves the total amount to\n                        ").concat(E," points,\n                        divided over ").concat(O," criteria.")):l.emptyS,r.default.createElement("p",null,"The total score is expressed as a percentage:\n                    the fraction of ".concat(g," scored points with respect to \n                    ").concat(E," scorable points.")))})),r.default.createElement("div",{className:"grid fragments"},y("submitted")?null:f("submitted",n,p,y),(0,o.itemEditField)("submitted","Submission",r.default.createElement(r.Fragment,null,!A&&k?"".concat(n("dateWithdrawn"),": ").concat(m("dateWithdrawn")):null,A?"".concat(n("dateSubmitted"),": ").concat(m("dateSubmitted")):null,d("incomplete").on||d("stalled").on?null:v("submitted",a("submitted"),function(e){return r.default.createElement("span",{className:"button large workflow ".concat(a("submitted")?"info":"error"),onClick:e},"".concat(a("submitted")?"Submit for":"Withdraw from"," review"))})),y("submitted")),a("submitted")?null:f("reviewerE",n,p,y),a("submitted")?null:f("reviewerF",n,p,y)),d("stalled").on?r.default.createElement("div",{className:"label large workflow error"},"This assessment cannot be submitted because: ".concat(d("stalled").desc,".\n              Either change the type of the contribution to the type of this assessment,\n              or start a new assessment, copy over the relevant material form this\n              assessment (by hand), and remove this assessment.\n            ")):null,d("incomplete").on?r.default.createElement("div",{className:"label large workflow warning"},"This assessment cannot yet be submitted because: ".concat(d("incomplete").desc,".\n            ")):a("submitted")?r.default.createElement("div",{className:"label large workflow good"},"All criteria filled: this assessment can be submitted.\n              "):null,d("locked").on?r.default.createElement("div",{className:"label large workflow info"},"This assessment is locked because it is ".concat(d("locked").desc,".")):null)},insert:{contrib:function(e){var t=e.at,n=e.v,a=e.n,l=e.o,o=e.onInsert;return t.has(n("typeContribution"))?l?0==a?r.default.createElement("span",{className:"button large workflow info",onClick:o},"Write a self-assessment"):r.default.createElement(c.default,{tip:r.default.createElement(r.Fragment,null,r.default.createElement("p",null,"Normally a contribution needs just one self-assessment."),r.default.createElement("p",null,"Only add an other one in the following cases"),r.default.createElement("ul",null,r.default.createElement("li",null,"The previous self-assessment has become obsolete"),r.default.createElement("li",null,"The previous self-assessment is based on a contribution type,\n                          but the contribution in question has been assigned another type.")),r.default.createElement("p",null,r.default.createElement("b",null,"In the last case, it is recommended to copy and paste the relevant parts\n                        of the old assessment into the new one and delete the old one."))),at:"top"},r.default.createElement("span",{className:"button large workflow warning",onClick:o},"Add another self-assessment",r.default.createElement("span",{className:"fa fa-exclamation"}))):r.default.createElement("span",{className:"label large workflow info"},"Only owners and editors can self-assess a contribution"):r.default.createElement("span",{className:"label large workflow error"},"Contributions with a legacy type cannot be assessed")}},consolidated:{trail:function(e){var t=e.s;return r.default.createElement(r.Fragment,null,r.default.createElement("div",null,t("title")),r.default.createElement("div",null,t("vcc",", ")," ",t.year))}}};Object.assign(d,{detail:{contrib:d.main},detailEdit:{contrib:d.mainEdit},detailAction:{contrib:d.mainAction}});var m=d;t.default=m},580:function(e,t,n){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=n(1),o=a(n(74)),i=function(e){return e&&e.__esModule?e:{default:e}}(n(6)),u={editMode:{assessment:function(e){var t=e.e;return t("score")||t("evidence")?1:0}},detail:{assessment:function(e){var t=e.l,n=e.v,a=e.e,u=e.s,c=e.f,s=a("evidence")||a("score")?"incomplete":"complete";return r.default.createElement("div",{className:"criteria entryRead ".concat(s)},r.default.createElement("div",{className:"criteria entry"},r.default.createElement("div",null,u("seq")),r.default.createElement(o.default,{alterSection:"criteriaEntry".concat(n("_id")),alterTag:t("remarks"),iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show criteria details",titleClose:"Hide criteria details",headActive:l.emptyS,headLine:c("criteria"),full:r.default.createElement("div",{className:"criteria comments"},c("criteria","remarks")),className:"fat"}),r.default.createElement("div",{className:"slim"},c("score")),a("evidence")?r.default.createElement("div",{className:"xSlim"},r.default.createElement(i.default,{tip:"No evidence yet",at:"top"},r.default.createElement("span",{className:"slim fa fa-file-o tError"}))):r.default.createElement(o.ExpandHead,{alterSection:"criteriaEntry".concat(n("_id")),alterTag:t("evidence"),initAlt:1,iconOpen:"file-text",iconClose:"minus-square",titleOpen:"Show evidence",titleClose:"Hide evidence",headActive:l.emptyS,headLine:l.emptyS,className:"xSlim tGood"})),r.default.createElement(o.ExpandBody,{alterSection:"criteriaEntry".concat(n("_id")),alterTag:t("evidence"),initAlt:1,full:r.default.createElement(r.Fragment,null,r.default.createElement("b",null,t("evidence")),c("evidence")),className:"comments"}))}},detailEdit:{assessment:function(e){var t=e.l,n=e.e,a=e.s,l=e.f,o=e.fe,u=e.editButton,c=n("evidence")||n("score")?"incomplete":"complete";return r.default.createElement("div",{className:"criteria entryEdit ".concat(c)},r.default.createElement("div",{className:"criteria entry"},u,a("seq"),r.default.createElement("div",{className:"fat"},r.default.createElement("div",{className:"fat"},l("criteria")),r.default.createElement("div",{className:"criteria comments"},l("criteria","remarks"))),r.default.createElement("div",{className:"slim"},o("score",{suppressTyping:!0}))),r.default.createElement("p",null,r.default.createElement("b",null,t("evidence"))),r.default.createElement(i.default,{tip:"Give evidence",at:"top"},o("evidence")))}}};t.default=u},581:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),r=n(1),l=n(15),o=n(19),i=function(e,t,n,a){return(0,l.itemReadField)(e,t(e),n(e),a)},u={main:function(e){var t=e.l,n=e.f;return a.default.createElement("div",{className:"grid fragments"},i("title",t,n),i("reviewType",t,n),i("assessment",t,n))},mainAction:function(e){var t=e.me,n=e.w,r=(0,o.getItem)(n("reviewers")),l=r.reviewerE,i=r.reviewerF,u=(0,o.isReviewerType)(t,l,i);return a.default.createElement("span",{className:"label large workflow ".concat(u?"info":"warning")},"Your reviewer role is: ".concat(o.reviewerRole[u]))},insert:{assessment:function(e){var t=e.v,n=e.w,l=e.me,i=e.onInsert,u=(0,o.isReviewerType)(l,t("reviewerE"),t("reviewerF")),c=function(e,t){return e._id&&((t("reviews")||r.emptyO).items||r.emptyA).find(function(t){return t==e._id})}(l,n),s="/data/review/mylist/item/".concat(c);return u?a.default.createElement(a.Fragment,null,a.default.createElement("span",{className:"label large workflow ".concat(u?"info":"error")},"Your reviewer role is: ".concat(o.reviewerRole[u])),c?a.default.createElement("a",{className:"button large workflow info",href:s},"Continue reviewing"):a.default.createElement("span",{className:"button large workflow info",onClick:i},"Start review")):r.emptyA}}};Object.assign(u,{detail:{assessment:u.main},detailAction:{assessment:u.mainAction}});var c=u;t.default=c},582:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),l=a(n(73)),o=n(1),i=n(5),u=n(19),c=a(n(74)),s=a(n(6)),f={editMode:{review:function(e){return(0,e.e)("comments")?1:0}},detail:{review:function(e){var t=e.tables,n=e.settings,a=e.l,l=e.v,i=e.w,s=e.me,f=e.e,m=e.s,v=e.f,y=f("comments")?"incomplete":"complete",b=(0,u.getItem)(i("reviewers")),h=b.reviewerE,g=b.reviewerF,E={E:h,F:g},w=(0,u.isReviewerType)(s,h,g);return r.default.createElement("div",{className:"review entryRead ".concat(y)},r.default.createElement("div",{className:"criteria entry"},r.default.createElement("div",null,m("seq")),r.default.createElement(c.default,{alterSection:"criteriaEntry".concat(l("_id")),alterTag:a("remarks"),iconOpen:"info-circle",iconClose:"minus-circle",titleOpen:"Show criteria details",titleClose:"Hide criteria details",headActive:o.emptyS,headLine:v("criteria"),full:r.default.createElement("div",{className:"criteria comments"},v("criteria","remarks")),className:"fat"})),p(v),d(w,E,!0,{tables:t,settings:n,l:a,w:i,theF:v}))}},detailEdit:{review:function(e){var t=e.tables,n=e.settings,a=e.l,l=e.e,o=e.w,i=e.me,c=e.s,s=e.f,f=e.fe,m=e.editButton,v=l("comments")?"incomplete":"complete",y=(0,u.getItem)(o("reviewers")),b=y.reviewerE,h=y.reviewerF,g={E:b,F:h},E=(0,u.isReviewerType)(i,b,h);return r.default.createElement("div",{className:"review entryEdit ".concat(v)},r.default.createElement("div",{className:"criteria entry"},m,c("seq"),r.default.createElement("div",{className:"fat"},r.default.createElement("div",{className:"fat"},s("criteria")),r.default.createElement("div",{className:"criteria comments"},s("criteria","remarks")))),p(s),d(E,g,!0,{tables:t,settings:n,l:a,w:o,theF:f}))}}},d=function(e,t,n,a){var l=a.tables,o=a.settings,c=a.l,s=a.w,f=a.theF;return r.default.createElement(r.Fragment,null,r.default.createElement("p",null,r.default.createElement("b",null,c("comments"))),r.default.createElement("div",{className:"review allcomments"},["E","F"].map(function(a){var c=e&&a===e;return r.default.createElement("div",{key:a,className:"review reviewer ".concat(a," ").concat(c?"my":"other")},r.default.createElement("div",{className:"label large workflow ".concat(c?"special":"info")},"".concat(c?"You":(0,i.headEntity)(l,"user",t[a],o)," (").concat(u.reviewerRole[a],")")),r.default.createElement("div",{className:"review comments"},m(a,c,t,n,{theF:f,w:s})))})))},m=function(e,t,n,a,o){var i=o.theF,c=o.w;if(t)return r.default.createElement(s.default,{tip:"Enter review comments",at:"top"},i("comments"));return(0,u.getItem)(c("others"),!0).filter(function(t){return t.creator===n[e]}).map(function(e,t){var n=e.comments;return r.default.createElement(l.default,{key:t,className:"field-content",source:n.join("\n\n")})})},p=function(e){return r.default.createElement("div",{className:"assessment comments"},r.default.createElement("div",null,r.default.createElement(s.default,{tip:"Score by self-assessment",at:"right"},e("criteriaEntry","score"))),r.default.createElement("div",null,r.default.createElement("b",null,"Evidence")),r.default.createElement("div",null,e("criteriaEntry","evidence")))},v=f;t.default=v},583:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),i=n(20),u=a(n(209)),c=a(n(6));t.default=function(e){var t=e.meta,n=t.dirty,a=t.invalid,s=t.submitting,f=t.error,d=e.input,m=e.type,p=e.reset,v=e.submitValues,y="checkbox"===m?(0,i.makeSubmitTime)(v):(0,i.makeSubmit)(n,a,s,v),b=(0,i.makeReset)(m,p),h="checkbox"===m?{onClick:y}:{onBlur:y},g="checkbox"==m?o.emptyO:{className:"wideInput"};return l.default.createElement("div",g,l.default.createElement(c.default,{tip:l.default.createElement(u.default,{type:"text",dirty:n}),at:"top",focusOnly:!0},l.default.createElement("input",r({type:m,className:(0,i.editClass)(n,a)},d,h,b))),f&&l.default.createElement("span",{className:"invalid diag"},f))}},584:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(2),i=a(n(73)),u=n(1),c=n(20),s=n(9),f=a(n(209)),d=a(n(6)),m=(0,o.connect)(s.getAltSection)(function(e){var t=e.alter,n=e.alterSection,a=e.table,o=e.eId,m=e.meta,p=m.dirty,v=m.invalid,y=m.submitting,b=m.error,h=e.input,g=h.name,E=h.value,w=e.input,O=e.rh,S=e.reset,_=e.submitValues,k=e.dispatch,A="".concat(a,"-").concat(o,"-").concat(g),N=(0,s.compileAlternatives)(n,2,1,k)(A),I=N.getAlt,T=N.nextAlt,j=I(t);return l.default.createElement("div",r({className:"md-field"},0==j?u.emptyO:O),l.default.createElement(d.default,{tip:"".concat(0===j?"edit text":"preview formatted text"),at:"right"},l.default.createElement("span",{className:"button medium field-control fa fa-".concat(0===j?"pencil":"hand-o-down"),onClick:T})),0===j?l.default.createElement(i.default,{className:"".concat((0,c.editClass)(p,v)," field-content"),source:E}):l.default.createElement("div",{className:"field-content"},l.default.createElement(d.default,{tip:l.default.createElement(f.default,{dirty:p,type:"markdown"}),at:"top",focusOnly:!0},l.default.createElement("div",null,l.default.createElement("textarea",r({className:"input ".concat((0,c.editClass)(p,v))},w,{wrap:"soft",onBlur:(0,c.makeSubmit)(p,v,y,_)},(0,c.makeReset)("text",S))))),b&&l.default.createElement("span",{className:"invalid diag"},b)))});t.default=m},585:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(2),l=n(25),o=n(1),i=n(39),u=n(20),c=n(5),s=n(13),f=(0,r.connect)(s.getMe)((0,l.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!1,touchOnBlur:!0,touchOnChange:!1,onSubmitSuccess:u.onSubmitSuccess})(function(e){var t=e.settings,n=e.me,r=e.tables,l=e.table,u=e.eId,s=e.linkField,f=e.fieldFragments,d=e.handleSubmit,m=e.dispatch,p=(0,c.headEntity)(r,l,u,t),v=d((0,c.toDb)(l,u,p,m)),y=r[l].fieldSpecs[s],b=(y=void 0===y?o.emptyO:y).valType,h=(b=void 0===b?o.emptyO:b).relTable,g=h?"detail":"main";return a.default.createElement("div",{className:"item-workflow"},(0,i.applyEditTemplate)({settings:t,me:n,tables:r,table:l,eId:u,kind:"".concat(g,"Action"),relTable:h,fieldFragments:f,submitValues:v}))}));t.default=f},586:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(0)),i=n(2),u=n(25),c=n(1),s=n(39),f=n(15),d=n(20),m=n(5),p=n(13),v=a(n(18)),y=a(n(72)),b=a(n(208)),h=a(n(587)),g=(0,i.connect)(p.getMe)((0,u.reduxForm)({destroyOnUnmount:!1,enableReinitialize:!0,keepDirtyOnReinitialize:!1,touchOnBlur:!0,touchOnChange:!1,onSubmitSuccess:d.onSubmitSuccess})(function(e){var t=e.settings,n=e.me,a=e.tables,i=e.table,u=e.eId,d=e.linkField,p=e.dirty,g=e.invalid,E=e.submitting,w=e.reset,O=e.error,S=e.fieldFragments,_=e.handleSubmit,k=e.nextAlt,A=e.dispatch,N=(0,m.headEntity)(a,i,u,t),I=_((0,m.toDb)(i,u,N,A)),T={form:"".concat(i,"-").concat(u),dirty:p,invalid:g,submitting:E,reset:w,error:O,nextAlt:k,handleSubmit:I},j=o.default.createElement(h.default,T),M=a[i].fieldSpecs[d],P=(M=void 0===M?c.emptyO:M).valType,x=(P=void 0===P?c.emptyO:P).relTable,C=x?"detail":"main";return(0,s.applyEditTemplate)({settings:t,me:n,tables:a,table:i,eId:u,kind:"".concat(C,"Edit"),relTable:x,fieldFragments:S,editButton:j,submitValues:I,reset:w})||o.default.createElement("form",null,j,o.default.createElement("div",{className:"grid fragments"},S.map(function(e){var t=e.field,n=e.label,i=e.valType,c=e.fragment,s=c.editable,d=c.table,m=c.myValues,p=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(c,["editable","table","myValues"]),h=s&&("object"!=l(i)||!i.fixed);return o.default.createElement(v.default,{key:t},(0,f.itemEditField)(t,n,h?o.default.createElement(b.default,r({field:t,tables:a,table:d,eId:u,submitValues:I,reset:w},p)):o.default.createElement(y.default,{field:t,tables:a,table:d,eId:u,myValues:m}),h))})))}));t.default=g},587:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n(20).editControl)(!0);t.default=a},588:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=n(2),o=n(1),i=n(39),u=n(15),c=n(13),s=a(n(72)),f=(0,l.connect)(c.getMe)(function(e){var t=e.settings,n=e.me,a=e.tables,l=e.table,c=e.eId,f=e.fieldFragments,d=e.linkField,m=a[l].fieldSpecs[d],p=(m=void 0===m?o.emptyO:m).valType,v=(p=void 0===p?o.emptyO:p).relTable,y=v?"detail":"main";return(0,i.applyTemplate)({settings:t,me:n,tables:a,table:l,eId:c,kind:y,relTable:v,values:(0,u.toFieldInfo)(c,f)})||r.default.createElement("div",{className:"grid fragments"},f.map(function(e){var t=e.field,n=e.label,l=e.fragment,o=l.table,i=l.myValues;return(0,u.itemReadField)(t,n,r.default.createElement(s.default,{field:t,tables:a,table:o,eId:c,myValues:i}),t)}))});t.default=f},589:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(2),i=n(1),u=n(5),c=n(28),s=n(13),f=n(9),d=a(n(114)),m=a(n(117)),p=a(n(211)),v=a(n(6)),y=(0,i.combineSelectors)(s.getMe,f.getAltSection),b=(0,o.connect)(y)(function(e){var t=e.me,n=e.alter,a=e.alterSection,o=e.filters,s=e.tables,y=e.table,b=e.eId,h=e.detailFragments,g=e.dispatch;if(0==h.length)return null;var E=(0,f.compileAlternatives)(a,2,1,g);return l.default.createElement("div",{className:"grid fragments"},h.map(function(e){var a=e.name,f=e.detailTitle,h=e.detailTable,g=e.linkField,w=e.detailItem,O=e.detailListIds,S=e.detailPerm,_=e.detailSpecs,k=O.length,A=E(a),N=A.getAlt,I=A.nextAlt,T=N(n),j=_.mode,M=_.expand,P=_.border,x=_.filtered,C=_.fixed,F=r(w,2),D=F[0],R=F[1],L=(0,c.makeTag)(u.DETAILS,b,g),U="".concat(y,"-").concat(a,"-").concat(b),W="own"===M?(0,u.isOwner)(s,y,b,t):M;return l.default.createElement("div",{key:a,className:"grid-row"},W?null:l.default.createElement(v.default,{tip:"".concat(0==T?"show":"hide"," detail records"),at:"left",className:"detail-control"},l.default.createElement("span",{className:"link",onClick:I},l.default.createElement("span",{className:"button small fa fa-angle-".concat(0===T?"down":"up")}),0===T?"".concat(k," ").concat(1===k?D:R):i.emptyS)),l.default.createElement("div",{className:"detail-body"},1===T?x?l.default.createElement(p.default,{filters:o,tables:s,table:h,listIds:O,perm:S,select:u.DETAILS,mode:j,compact:!0,title:f,gridTag:U,filterTag:L,masterId:b,linkField:g,expand:W,border:P,fixed:C}):"list"===j?l.default.createElement(m.default,{alterSection:"list-".concat(h,"-").concat(u.DETAILS),filters:o,tables:s,table:h,listIds:O,perm:S,select:u.DETAILS,title:f,masterId:b,linkField:g,expand:W,border:P,fixed:C}):"grid"===j?l.default.createElement(d.default,{alterSection:"list-".concat(h,"-").concat(u.DETAILS),filters:o,tables:s,table:h,listIds:O,perm:S,select:u.DETAILS,gridTag:U,masterId:b,linkField:g,fixed:C}):'unknown display mode "'.concat(j,'" for ').concat(R):null))}))});t.default=b},590:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(2),u=n(1),c=n(15),s=n(12),f=n(5),d=a(n(18)),m=a(n(210)),p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.settings,n=e.filters,a=e.tables,r=e.table,l=e.eId,i=e.masterId,s=e.linkField,p=e.isactive,v=e.startMode,y=e.fixed,b=e.border,h=a[r],g=(h=void 0===h?u.emptyO:h).entities,E=void 0===g?u.emptyO:g,w=h.entities[l],O=(w=void 0===w?u.emptyO:w).fields,S=w.values,_=w.perm,k=w.workflow;if((0,f.needValues)(E,l))return o.default.createElement("div",null);var A="edit-".concat(r,"-").concat(l);return o.default.createElement(d.default,null,o.default.createElement(m.default,{filters:n,tables:a,table:r,eId:l,masterId:i,linkField:s,alterSection:A,isactive:p,startMode:v,initialValues:S,perm:_,workflow:k,fields:(0,c.dealWithProvenance)(t,O),fixed:y,border:b}))}},{key:"openItem",value:function(){var e=this.props,t=e.settings,n=e.tables,a=e.table,r=e.eId,l=e.inhibitFetch,o=e.dispatch,i=n[a].entities,c=void 0===i?u.emptyO:i,s=(0,f.headEntity)(n,a,r,t);!l&&(0,f.needValues)(c,r)&&o((0,f.fetchItem)(a,r,s))}},{key:"componentDidMount",value:function(){this.openItem()}},{key:"componentDidUpdate",value:function(){this.openItem()}}]),t}(),v=(0,i.connect)(s.getSettings)(p);t.default=v},591:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=n(2),o=n(1),i=a(n(18)),u=a(n(592)),c=a(n(213)),s=a(n(595)),f={Fulltext:u.default,EUMap:s.default,ByValue:c.default},d=(0,l.connect)()(function(e){var t=e.filters,n=e.tables,a=e.table,l=e.filterTag,u=e.listIds,c=e.filteredAmount,s=e.filteredAmountOthers,d=e.amounts,m=e.compact,p=t[a],v=void 0===p?o.emptyO:p,y=n[a],b=y.fields,h=y.filterList,g=v[l],E=void 0===g?o.emptyO:g;return null==h?"No filters for this list":r.default.createElement(i.default,null,r.default.createElement("div",{className:"filterSequence ".concat(m?"compact":o.emptyS)},h.filter(function(e){return b[e.field]}).map(function(e,t){var o=e.type,i=f[o],p=E[t];return r.default.createElement(i,{key:t,alterSection:"filter-".concat(a,"-").concat(t),tables:n,table:a,filterTag:l,filterSetting:p,listIds:u,filterId:t,filterField:e.field,filterRelField:e.relField,filterLabel:e.label,maxCols:e.maxCols,filteredAmount:c,filteredAmountOthers:s[t],amounts:d[t],expanded:e.expanded,compact:m})})))});t.default=d},592:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n(0)),l=n(2),o=n(1),i=n(27),u=n(28),c=a(n(212)),s=a(n(6)),f=(0,l.connect)()(function(e){var t=e.table,n=e.filterTag,a=e.filterId,l=e.filterLabel,f=e.filterSetting,d=void 0===f?o.emptyS:f,m=e.filteredAmount,p=e.filteredAmountOthers,v=e.compact,y=e.dispatch;return r.default.createElement("div",{className:"fulltext"},r.default.createElement(s.default,{tip:"Search in ".concat(l),at:"top"},r.default.createElement("input",{type:"text",className:"search ".concat(v?"compact":o.emptyS),placeholder:"search".concat(v?o.emptyS:" in ".concat(l)),value:d,onChange:(0,i.handlEV)(y,u.changeFulltext,t,n,a)}))," ",v?null:r.default.createElement(c.default,{subTotal:m,total:p,className:"fulltext-stat"}))});t.default=f},593:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0)),r=n(2),l=n(1),o=n(27),i=n(28),u=(0,r.connect)()(function(e){var t=e.table,n=e.filterTag,r=e.filterId,u=e.valueId,c=e.valueRep,s=e.filterSetting,f=e.className,d=e.dispatch,m=(s||l.emptyO)[u],p=void 0!==m&&m;return a.default.createElement("span",{className:f},a.default.createElement("input",{type:"checkbox",checked:p,className:"facet",onChange:(0,o.handlE)(d,i.changeFacet,t,n,r,u,!p)})," ".concat(c))});t.default=u},594:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(2),u=n(28),c=function(e){return!e.allTrue&&!e.allFalse},s=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return l(a,(n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.handleCheck=function(){var e=a.props,t=e.filterSetting,n=e.table,r=e.filterTag,l=e.filterId,o=e.dispatch,i=(0,u.testAllChecks)(t);return o((0,u.changeFacetAll)(n,r,l,a.dom.indeterminate||!i.allTrue))},a.setIndeterminate=function(e){var t=a.props.filterSetting,n=(0,u.testAllChecks)(t);e&&(a.dom=e,e.indeterminate=c(n))},n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(t,[{key:"componentDidUpdate",value:function(){var e=this.props.filterSetting,t=(0,u.testAllChecks)(e);this.dom.indeterminate=c(t)}},{key:"render",value:function(){var e=this.props.filterSetting,t=(0,u.testAllChecks)(e);return o.default.createElement("input",{ref:this.setIndeterminate,type:"checkbox",checked:t.allTrue,onChange:this.handleCheck})}}]),t}(),f=(0,i.connect)()(s);t.default=f},595:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function i(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var c,s,f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),d=a(n(596)),m=n(203),p=n(1),v=a(n(213)),y={HEIGHT:250,MAX_RADIUS:25,LEVEL_OFF:10,ZOOM_INIT:3,MAP_CENTER:[52,12],MAP_BOUNDS:[[30,-20],[70,40]],MARKER_COLOR:(c={},u(c,!0,{color:"#008800",fillColor:"#00cc00"}),u(c,!1,{color:"#888844",fillColor:"#bbbb66"}),c),MARKER_SHAPE:{weight:1,fill:!0,fillOpacity:.8},COUNTRY_STYLE:(s={},u(s,!0,{color:"#884422",weight:2,fill:!0,fillColor:"#aa7766",fillOpacity:1}),u(s,!1,{color:"#777777",weight:1,fill:!0,fillColor:"#bbbbbb",fillOpacity:1}),s)},b=function(e,t,n){var a=n?n[e]||0:0;if(0===a)return 0;var r=y.LEVEL_OFF,l=y.MAX_RADIUS*a/t;return t<r?l:r*Math.sqrt(l)},h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n.setMap=function(e){e&&(n.dom=e)},n.features={},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,f.Component),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=this.setMap;return f.default.createElement(f.Fragment,null,f.default.createElement("div",{ref:t}),f.default.createElement(v.default,e))}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.filterSetting,a=t.filteredAmountOthers,r=t.amounts,l=t.tables.country,i=this.dom,u=y.HEIGHT,c=y.MAP_CENTER,s=y.ZOOM_INIT,f=y.MAP_BOUNDS,v=y.MARKER_COLOR,h=y.MARKER_SHAPE,g=y.COUNTRY_STYLE;i.style.height=u,this.map=d.default.map(i,{attributionControl:!1,center:c,zoom:s,maxBounds:f});var E=l.allIds,w=l.entities;this.idFromIso={},this.inDariah={},E.forEach(function(t){var n=w[t].values,a=n.iso,r=n.isMember;e.idFromIso[a]=t,e.inDariah[a]=r}),d.default.geoJSON(m.countryBorders,{style:function(t){return g[e.inDariah[t.properties.iso2]]},onEachFeature:function(t){var l=t.properties,i=l.iso2,u=l.lat,c=l.lng;if(e.inDariah[i]){var s=e.idFromIso[i],f=(n||p.emptyO)[s],m=void 0!==f&&f,y=d.default.circleMarker([u,c],o({},v[m],{radius:b(s,a,r)},h,{pane:"markerPane"})).addTo(e.map);e.features[i]=y}}}).addTo(this.map)}},{key:"componentDidUpdate",value:function(){var e=this,t=this.props,n=t.filterSetting,a=t.filteredAmountOthers,r=t.amounts,o=y.MARKER_COLOR;Object.entries(this.features).forEach(function(t){var i=l(t,2),u=i[0],c=i[1],s=e.idFromIso[u],f=(n||p.emptyO)[s],d=void 0!==f&&f;c.setRadius(b(s,a,r)),c.setStyle(o[d])})}}]),t}();h.displayName="EUMap";var g=h;t.default=g},597:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=n(1),i=a(n(6));t.default=function(e){var t=e.perm,n=e.workflow,a=e.keep,u=e.fixed,c=e.button,s=e.onClick,f=Object.keys(a).length>0,d=Object.keys(a).sort().map(function(e){return a[e]}).join(", "),m=n&&n.locked&&n.locked.on,p=n&&n.locked&&n.locked.desc||o.emptyS,v=f||m?(f?"This item cannot deleted because related items exist: ".concat(d):o.emptyS)+(m?"This item is locked because: ".concat(p):o.emptyS):"delete this record",y=f?"puzzle-piece":"trash",b=f?"disabled":"error-o",h=f?o.emptyO:{onClick:s};return u||!t.delete||m?null:l.default.createElement(i.default,{tip:v,at:"left",className:"inlineR"},l.default.createElement("div",r({className:"grid-cell ".concat(c," ").concat(b," fa fa-").concat(y," delete")},h)))}},598:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,l=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,l=e}finally{try{a||null==i.return||i.return()}finally{if(r)throw l}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var l=a(n(0)),o=a(n(599)),i=a(n(600)),u=a(n(601)),c=a(n(214)),s={md:o.default,pdf:i.default,html:u.default};t.default=function(e){var t=e.location.pathname,n=r(/^(.*)\/([^/]+)$/g.exec(t).slice(1),2),a=n[0],o=n[1],i=r(/^(.*)\.([^.]+)$/g.exec(o).slice(1),2),u=i[0],f=i[1],d=s[f],m="".concat(a,"/").concat(u,".").concat(f);return null==d?l.default.createElement(c.default,{splat:"document ".concat(t)}):l.default.createElement(d,{alterSection:m,docDir:a,docName:u,docExt:f})}},599:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),i=n(2),u=a(n(73)),c=n(33),s=n(1),f=n(175),d=n(9),m=a(n(6)),p=a(n(18)),v={Link:function(e){var t=e.children,n=e.href;return n.match(/^(https?:)?\/\//)?o.default.createElement("a",{href:n},t):o.default.createElement(c.Link,{to:n},t)}},y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),function(e,t,n){t&&l(e.prototype,t),n&&l(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.alter,n=e.alterSection,a=e.text,r=e.docName,l=e.dispatch;if((0,f.needDoc)({text:a}))return"No document ".concat(r);var i=(0,d.compileAlternatives)(n,2,0,l)("format"),c=i.getAlt,s=i.nextAlt,y=c(t);return o.default.createElement(p.default,null,o.default.createElement("div",{style:{paddingLeft:"0.5em"}},o.default.createElement("p",{style:{float:"right"}},o.default.createElement(m.default,{tip:"".concat(0===y?"markdown source":"formatted"),at:"right"},o.default.createElement("a",{href:"#",className:"control fa fa-".concat(0===y?"hand-o-down":"file-code-o"),onClick:s}))),0===y?o.default.createElement(u.default,{source:a,renderers:v}):o.default.createElement("pre",{className:"md-source"},a)))}},{key:"componentDidMount",value:function(){var e=this.props;(0,this.props.dispatch)((0,f.fetchDoc)(e))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=this.props.dispatch;(0,f.changedDoc)(t,e)&&n((0,f.fetchDoc)(t))}}]),t}(),b=(0,s.combineSelectors)(f.getDoc,d.getAltSection),h=(0,i.connect)(b)(y);t.default=h},6:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0)),u=n(2),c=n(1),s=n(12),f={top:"bottom",bottom:"top",left:"right",right:"left"},d={top:["left","right"],bottom:["left","right"],left:["top","bottom"],right:["top","bottom"]},m={top:function(e,t){return{left:e.left+(e.width-t.width>>1),top:e.top-t.height}},bottom:function(e,t){return{left:e.left+(e.width-t.width>>1),top:e.top+e.height}},left:function(e,t){return{left:e.left-t.width,top:e.top+(e.height-t.height>>1)}},right:function(e,t){return{left:e.left+e.width,top:e.top+(e.height-t.height>>1)}}},p={top:function(e,t,n){return n.top<0},bottom:function(e,t,n){return n.top+t.height>e.height},left:function(e,t,n){return n.left<0},right:function(e,t,n){return n.left+t.width>e.width}},v={top:function(e,t,n){n.top=0},bottom:function(e,t,n){n.top=e.height-t.height},left:function(e,t,n){n.left=0},right:function(e,t,n){n.left=e.width-t.width}},y=function(e){return function(t,n,a,r){var l=m[e](n,a),i=e,u=l;r&&p[e](t,a,l)&&(i=f[e],u=m[i](n,a));var c=!0,s=!1,y=void 0;try{for(var b,h=d[i][Symbol.iterator]();!(c=(b=h.next()).done);c=!0){var g=b.value;p[g](t,a,u)&&v[g](t,a,u)}}catch(e){s=!0,y=e}finally{try{c||null==h.return||h.return()}finally{if(s)throw y}}return o({at:i},u)}},b=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return l(a,(n=a=l(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),a.storeTarget=function(e){a.target=e},a.storeTip=function(e){a.tip=e},a.storeArrow=function(e){a.arrow=e},a.handlePositioning=function(){var e=a,t=e.props,n=t.at,r=void 0===n?"top":n,l=t.fixed,o=void 0!==l&&l,i=t.settings.showTooltips,u=e.target,c=e.tip,s=e.arrow;if(i&&!o){for(var d=document.documentElement,m=u.getBoundingClientRect(),p=c.getBoundingClientRect(),v=s.getBoundingClientRect(),b={width:d.clientWidth,height:d.clientHeight},h=y(r)(b,m,p,!0),g=h.at,E=y(g)(b,m,v,!1),w=Object.keys(f),O=0;O<w.length;O++){var S=w[O];s.classList.remove("toolarrow-".concat(S))}s.classList.add("toolarrow-".concat(g)),c.style.top=h.top+window.scrollY,c.style.left=h.left+window.scrollX,s.style.top=E.top+window.scrollY,s.style.left=E.left+window.scrollX}},n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Component),function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(t,[{key:"render",value:function(){var e=this.props,t=e.settings.showTooltips,n=e.children,a=e.tip,r=e.at,l=e.focusOnly,o=e.className,u=void 0===o?c.emptyS:o,s=e.classTip,f=void 0===s?c.emptyS:s,d=e.classArrow,m=void 0===d?c.emptyS:d;return t?i.default.createElement(i.Fragment,null,i.default.createElement("span",{ref:this.storeTarget,className:"".concat(u," tooltipped focus ").concat(l?c.emptyS:"hover"),onMouseOver:this.handlePositioning,onFocus:this.handlePositioning},n),i.default.createElement("span",null,i.default.createElement("span",{ref:this.storeTip,className:"tooltip ".concat(f)},a),i.default.createElement("span",{ref:this.storeArrow,className:"toolarrow toolarrow-".concat(r," ").concat(m)}))):n}}]),t}(),h=(0,u.connect)(s.getSettings)(b);t.default=h},600:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function(e){var t=e.docDir,n=e.docName,r=e.docExt,l="/api/file".concat(t,"/").concat(n,".").concat(r);return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?a.default.createElement("p",null,a.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:l},n)," (open pdf in a new tab)"):a.default.createElement("object",{height:"100%",width:"100%",data:l,type:"application/pdf"},a.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:l},n)," (open pdf in a new tab)")}},601:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){return e&&e.__esModule?e:{default:e}}(n(0));t.default=function(e){var t=e.docDir,n=e.docName,r=e.docExt,l="/api/file".concat(t,"/").concat(n,".").concat(r);return a.default.createElement("iframe",{height:"100%",width:"100%",src:l})}},72:function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(2),l=n(1),o=n(19),i=n(115),u=n(12),c=n(13),s=(0,l.combineSelectors)(c.getMe,u.getSettings),f=(0,r.connect)(s)(function(e){var t=e.settings,n=e.me,r=e.tables,u=e.table,c=e.eId,s=e.field,f=e.relField,d=e.myValues,m=r[u].fieldSpecs[s],p=m.valType,v=m.multiple,y=("object"===a(p)?p:l.emptyO).inactive,b=void 0===y?null:y,h=b?(0,o.compileActive)(r,s):null;return(0,i.wrappedRepr)({settings:t,me:n,tables:r,table:u,eId:c,field:s,valType:p,multiple:v,relField:f,activeItems:h,inactive:b,values:d})});t.default=f},74:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ExpandBody=t.ExpandHead=void 0;var r=a(n(0)),l=n(2),o=n(1),i=n(9),u=a(n(6)),c=function(e){return e||null},s=function(e,t,n){return e?r.default.createElement("span",{className:n},"".concat("").concat(e).concat(t?"":o.emptyS)):null},f=(0,l.connect)(i.getAltSection)(function(e){var t=e.alter,n=e.alterSection,a=e.alterTag,l=e.initAlt,o=e.headActive,f=e.headLine,d=e.className,m=e.iconOpen,p=e.iconClose,v=e.titleOpen,y=e.titleClose,b=e.dispatch,h=l||0,g=(0,i.compileAlternatives)(n,2,h,b)(a),E=g.getAlt,w=g.nextAlt,O=E(t),S=m||"angle-down",_=p||"angle-up",k=v||"expand",A=y||"collapse";return r.default.createElement("div",{className:"vtop ".concat(d)},r.default.createElement(u.default,{tip:0===O?k:A,at:"top"},r.default.createElement("span",{className:"link vtop fa fa-".concat(0===O?S:_),onClick:w},s(o,f,"body"))),c(f))});t.ExpandHead=f;var d=(0,l.connect)(i.getAltSection)(function(e){var t=e.alter,n=e.alterSection,a=e.alterTag,l=e.initAlt,o=e.full,u=e.className,c=e.dispatch,s=l||0;return 0==(0,(0,i.compileAlternatives)(n,2,s,c)(a).getAlt)(t)?null:r.default.createElement("div",{className:u},o)});t.ExpandBody=d;var m=(0,l.connect)(i.getAltSection)(function(e){var t=e.alter,n=e.alterSection,a=e.alterTag,l=e.initAlt,o=e.headActive,f=e.headLine,d=e.full,m=e.className,p=e.iconOpen,v=e.iconClose,y=e.titleOpen,b=e.titleClose,h=e.dispatch,g=l||0,E=(0,i.compileAlternatives)(n,2,g,h)(a),w=E.getAlt,O=E.nextAlt,S=w(t),_=p||"angle-down",k=v||"angle-up",A=y||"expand",N=b||"collapse";return r.default.createElement("div",{className:m},r.default.createElement("span",{className:"vtop"},"",r.default.createElement(u.default,{tip:0===S?A:N,at:"top"},r.default.createElement("span",{className:"link vtop fa fa-".concat(0===S?_:k),onClick:O},s(o,f,"body"))),c(f)),0==S?null:d)});t.default=m},9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compileAlternatives=t.getAltSection=t.default=t.setItems=t.setAlt=t.nextAlt=void 0;var a=n(8),r=n(1),l=n(27),o=function(e,t,n,a){return{type:"nextAlt",alterSection:e,alterTag:t,nAlts:n,initial:a}};t.nextAlt=o;var i=function(e,t,n){return{type:"setAlt",alterSection:e,alterTag:t,alt:n}};t.setAlt=i;t.setItems=function(e,t,n){return{type:"setItems",eIds:e,alterSection:t,alt:n}};var u={nextAlt:function(e,t){var n=t.alterSection,a=t.alterTag,l=t.initial,o=t.nAlts,i=e[n],u=(i=void 0===i?r.emptyO:i)[a],c=((void 0===u?l||0:u)+1)%o;return(0,r.updateAuto)(e,[n,a],{$set:c})},setAlt:function(e,t){var n=t.alterSection,a=t.alterTag,l=t.alt;return(0,r.updateAuto)(e,[n,a],{$set:l})},fetchItems:function(e,t){var n=t.data,a=t.eIds,l=t.alterSection,o=t.alt,i=e;if(n&&null!=a){var u=!0,c=!1,s=void 0;try{for(var f,d=a[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var m=f.value;i=(0,r.updateAuto)(i,[l,m],{$set:o})}}catch(e){c=!0,s=e}finally{try{u||null==d.return||d.return()}finally{if(c)throw s}}}return i},setItems:function(e,t){var n=t.eIds,a=t.alterSection,l=t.alt,o=e;if(null!=n){var i=!0,u=!1,c=void 0;try{for(var s,f=n[Symbol.iterator]();!(i=(s=f.next()).done);i=!0){var d=s.value;o=(0,r.updateAuto)(o,[a,d],{$set:l})}}catch(e){u=!0,c=e}finally{try{i||null==f.return||f.return()}finally{if(u)throw c}}}return o}},c=(0,r.makeReducer)(u);t.default=c;t.getAltSection=function(e,t){return{alter:e.alter[t.alterSection]||r.emptyO}};var s=(0,a.memoize)(function(e,t,n,a){return function(r){return{getAlt:function(e){var t=e[r];return void 0===t?n||0:t},nextAlt:(0,l.handle)(a,o,e,r,t,n),initAlt:(0,l.handle)(a,i,e,r,n),setAlt:function(t){return(0,l.handle)(a,i,e,r,t)},putAlt:function(t){return a(i(e,r,t))}}}},null,{debug:"compileAlternatives"});t.compileAlternatives=s}},[215]);